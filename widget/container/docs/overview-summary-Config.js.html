
<html>
<head>
	<title>
		JavaScript Documentation - 
		
			Config.js
		
	</title>
	<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div id="header">
	<h1>JavaScript Documentation</h1>
	<h3><a href="./index.html">YUI Containers</a></h3>

	<div class="breadcrumbs">
		

			
			
			
			
				<a href="./index.html">YUI Containers</a>
				&gt;
				<strong>Config.js</strong>
			
			
			
			
			
			
			
			
			
			
			
		
	</div>
</div>

<div id="body">
	
	
	<div class="nav">
		<div class="module resources">
			<ul class="content">
				<li><a href="overview-tree.html">Tree View</a></li>
				<li><a href="index-all.html">Element Index</a></li>
			</ul>
		</div>
		
		
			<div class="module">
				<h4><a href="./allclasses-noframe.html">Classes</a></h4>
				<ul class="content">
					

					
						<li>
							<a href="YAHOO.util.Config.html">
								YAHOO.util.Config</a>
						</li>
					
						<li>
							<a href="YAHOO.util.KeyListener.html">
								YAHOO.util.KeyListener</a>
						</li>
					

					
						<li>
							<a href="YAHOO.widget.Dialog.html">
								YAHOO.widget.Dialog</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.FormDialog.html">
								YAHOO.widget.FormDialog</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Module.html">
								YAHOO.widget.Module</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Overlay.html">
								YAHOO.widget.Overlay</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.OverlayEffect.html">
								YAHOO.widget.OverlayEffect</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.OverlayManager.html">
								YAHOO.widget.OverlayManager</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Panel.html">
								YAHOO.widget.Panel</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Tooltip.html">
								YAHOO.widget.Tooltip</a>
						</li>
					
				</ul>
			</div>
		
		
		
			<div class="module">
				<h4><a href="./overview-summary.html">Files</a></h4>
				<ul class="content">		
					
						<li>
							<a href="overview-summary-Config.js.html">
								Config.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Dialog.js.html">
								Dialog.js</a>
						</li>
					
						<li>
							<a href="overview-summary-FormDialog.js.html">
								FormDialog.js</a>
						</li>
					
						<li>
							<a href="overview-summary-KeyListener.js.html">
								KeyListener.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Module.js.html">
								Module.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Overlay.js.html">
								Overlay.js</a>
						</li>
					
						<li>
							<a href="overview-summary-OverlayEffect.js.html">
								OverlayEffect.js</a>
						</li>
					
						<li>
							<a href="overview-summary-OverlayManager.js.html">
								OverlayManager.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Panel.js.html">
								Panel.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Tooltip.js.html">
								Tooltip.js</a>
						</li>
					
				</ul>
			</div>
		
	</div>
	
	<div class="main">
			
		
		
			
			   <h2>Config.js</h2>
			
			
				
					
				
				
				
<div class="meta">
	
	
	
	
	
	
	
	
	
	
		
	
	
	
	
	
	
</div>

			
		
		
		
		
			<div class="quick-links">
				<strong>Quick Links:</strong>&nbsp;
				
					
						<a href="#classSummary">Class Summary</a> |
					
					
				
				
				
					<a href="#source">Source Code</a>
				
			</div>
		
			
				<div class="section class summaries">
					 <h3><a name="classSummary">Class Summary</a> <span class="top">[<a href="#top">top</a>]</span></h3>
			
				<div class="content">
					<table border="1" cellpadding="3" cellspacing="0">
						
						<tr>
							<td class="name">
								<a href="YAHOO.util.Config.html">YAHOO.util.Config</a>
							</td>
							<td class="overview">Config is a utility used within an object to allow the implementer to maintain a list of local configuration properties and listen for changes to those properties dynamically using CustomEvent.</td>
						</tr>
						
					</table>
				</div>
			</div>
		
		
		
		
		
		
		
			<div class="section source">
				<h3><a name="source">Souce Code</a> <span class="top">[<a href="#top">top</a>]</span></h3>
				<pre class="sourceview"><span class="comment">/**
Copyright (c) 2006, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
* <span class="attrib">@class</span> 
* Config is a utility used within an object to allow the implementer to maintain a list of local configuration properties and listen for changes to those properties dynamically using CustomEvent. The initial values are also maintained so that the configuration can be reset at any given point to its initial state.
* <span class="attrib">@param</span> {object}	owner	The owner object to which this Config object belongs
* <span class="attrib">@constructor</span>
*/</span>
YAHOO.util.Config = <span class="reserved">function</span>(owner) {
	<span class="reserved">if</span> (owner) {
		<span class="reserved">this</span>.init(owner);
	}
}

<span class="comment">/**
* Initializes the configuration object and all of its local members.
* <span class="attrib">@param</span> {object}	owner	The owner object to which this Config object belongs
*/</span>
YAHOO.util.Config.<span class="reserved">prototype</span>.init = <span class="reserved">function</span>(owner) {

	<span class="reserved">this</span>.owner = owner;
	<span class="reserved">this</span>.configChangedEvent = new YAHOO.util.CustomEvent(<span class="literal">"configChanged"</span>);

	<span class="comment">/* Private Members */</span>

	var config = {};
	var deferredEvents = {};
	var initialConfig = {};

	<span class="comment">/**
	* <span class="attrib">@private</span>
	* Fires a configuration property event using the specified value. If the property has a DOM dependency specified in its configuration, the event will be deferred. All deferred events can be fired by a call to the Config object's fireDeferredEvents method.
	* <span class="attrib">@param</span> {string}	key			The configuration property's name
	* <span class="attrib">@param</span> {property}	property	The property object for which to fire the event
	* <span class="attrib">@param</span> {value}	object		The value of the correct type for the property
	*/</span> 
	var fireEvent = <span class="reserved">function</span>(key, property, value) {
		<span class="reserved">if</span> (property.dependentElement &amp;&amp; ! YAHOO.util.Dom.inDocument(property.dependentElement)) { <span class="comment">// Can't fire this event yet</span>
			deferredEvents[key] = { args : value };
			<span class="reserved">return</span> true;
		} <span class="reserved">else</span> {
			<span class="reserved">if</span> (property.mustChange) {
				<span class="reserved">if</span> (property.defaultValue != property.value) {
					property.event.fire(value);
				}
			} <span class="reserved">else</span> {
				property.event.fire(value);
			}
			<span class="reserved">return</span> false;
		}		
	}

	<span class="comment">/* End Private Members */</span>

	<span class="comment">/**
	* Adds a property to the Config object's private config hash. 
	* <span class="attrib">@param</span> {string}	key	The configuration property's name
	* <span class="attrib">@param</span> {object}	val	The property's default value
	* <span class="attrib">@param</span> {Function} hdl	The default event handler
	* <span class="attrib">@param</span> {Function}	vfn	The validation function used to validate the value(s) set into the property
	* <span class="attrib">@param</span> {Element}	el	The DOM-dependency element that must be in the document in order for the event execution not the be deferred
	* <span class="attrib">@param</span> {boolean} mc	Whether or not the property must be changed from the default in order to fire events.
	*/</span>
	<span class="reserved">this</span>.addProperty = <span class="reserved">function</span>(key, val, hdl, vfn, el, mc) {
		config[key] = { event : new YAHOO.util.CustomEvent(key), 
						handler : hdl, 
						dependentElement : el,
						defaultValue : val, 
						value : null,
						validator : vfn,
						mustChange : mc
						};
		<span class="reserved">if</span> (config[key].handler) {
			config[key].event.subscribe(config[key].handler, <span class="reserved">this</span>.owner, true);
		}
		<span class="reserved">this</span>.setProperty(key, val, true);
	}

	<span class="comment">/**
	* Returns a key-value configuration map of the values currently set in the Config object.
	* <span class="attrib">@return</span> {object} The current config, represented in a key-value map
	*/</span>
	<span class="reserved">this</span>.getConfig = <span class="reserved">function</span>() {
		var cfg = {};
			
		<span class="reserved">for</span> (var prop in config) {
			var property = config[prop]
			<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
				cfg[prop] = property.value;
			}
		}
		
		<span class="reserved">return</span> cfg;
	}

	<span class="comment">/**
	* Returns the value of specified property.
	* <span class="attrib">@param</span> {key}		The name of the property
	* <span class="attrib">@return</span> {object}	The value of the specified property
	*/</span>
	<span class="reserved">this</span>.getProperty = <span class="reserved">function</span>(key) {
		var property = config[key];
		<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
			<span class="reserved">return</span> property.value;
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> undefined;
		}
	}

	<span class="comment">/**
	* Returns the default value of specified property.
	* <span class="attrib">@param</span> {key}		The name of the property
	* <span class="attrib">@return</span> {object} The default of the specified property
	*/</span>	
	<span class="reserved">this</span>.getDefault = <span class="reserved">function</span>(key) {
		var property = config[key];
		<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
			<span class="reserved">return</span> property.defaultValue;
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> undefined;
		}
	}

	<span class="comment">/**
	* Resets the specified property's value to its initial value.
	* <span class="attrib">@param</span> {key}		The name of the property
	*/</span>
	<span class="reserved">this</span>.resetProperty = <span class="reserved">function</span>(key) {
		var property = config[key];
		<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
			<span class="reserved">this</span>.setProperty(key, initialConfig[key].value);
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> undefined;
		}
	}

	<span class="comment">/**
	* Sets the value of a property. If the silent property is passed as true, the property's event will not be fired.
	* <span class="attrib">@param</span> {key}		The name of the property
	* <span class="attrib">@param</span> {value}	The value to set the property to
	* <span class="attrib">@param</span> {boolean}	Whether the value should be set silently, without firing the property event.
	* <span class="attrib">@return</span> {boolean}	true, if the set was successful, false if it failed.
	*/</span>
	<span class="reserved">this</span>.setProperty = <span class="reserved">function</span>(key, value, silent) {
		var property = config[key];
		<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
			<span class="reserved">if</span> (property.validator &amp;&amp; ! property.validator(value)) { <span class="comment">// validator</span>
				<span class="reserved">return</span> false;
			} <span class="reserved">else</span> {
				property.value = value;
				<span class="reserved">if</span> (! silent) {
					<span class="comment">// We're good to fire the events, but we need</span>
					<span class="comment">// to make sure that the owner is in the DOM if this is</span>
					<span class="comment">// a DOM-dependent event</span>

					var deferred = fireEvent(key, property, value);

					<span class="reserved">this</span>.configChangedEvent.fire([key, value, deferred]);
				}
				<span class="reserved">return</span> true;
			}
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> false;
		}
	}

	<span class="comment">/**
	* Fires the event for a property using the property's current value.
	* <span class="attrib">@param</span> {key}		The name of the property
	*/</span>
	<span class="reserved">this</span>.refireEvent = <span class="reserved">function</span>(key) {
		var property = config[key];
		<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
			fireEvent(key, property, property.value);
		}
	}

	<span class="comment">/**
	* Applies a key-value object literal to the configuration, replacing any existing values.
	* <span class="attrib">@param</span> {object}	userConfig	The configuration object literal
	* <span class="attrib">@param</span> {boolean}	init		When set to true, the initialConfig will be set to the userConfig passed in, so that calling a reset will reset the properties to the passed values.
	*/</span>
	<span class="reserved">this</span>.applyConfig = <span class="reserved">function</span>(userConfig, init) {
		<span class="reserved">if</span> (init) {
			initialConfig = userConfig;
		}
		<span class="reserved">for</span> (var prop in userConfig) {
			<span class="reserved">this</span>.setProperty(prop, userConfig[prop], true);
		}
		<span class="reserved">for</span> (var prop in userConfig) {
			var property = config[prop];
			<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
				fireEvent(prop, property, userConfig[prop]);
			}
		}

	}

	<span class="comment">/**
	* Refires the events for all configuration properties using their current values.
	*/</span>
	<span class="reserved">this</span>.refresh = <span class="reserved">function</span>() {
		<span class="reserved">for</span> (var prop in config) {
			<span class="reserved">this</span>.refireEvent(prop);
		}
	}

	<span class="comment">/**
	* Applies the private initialConfig to the configuration object, which in effect resets the config to its original intended state.
	*/</span>
	<span class="reserved">this</span>.reset = <span class="reserved">function</span>() {
		<span class="reserved">this</span>.applyConfig(initialConfig);
	}
	

	<span class="comment">/**
	* Subscribes an external handler to the change event for any given property. 
	* <span class="attrib">@param</span> {string}	key			The property name
	* <span class="attrib">@param</span> {Function}	handler		The handler function to use subscribe to the property's event
	* <span class="attrib">@param</span> {object}	obj			The object to use for scoping the event handler (see CustomEvent documentation)
	* <span class="attrib">@param</span> {boolean}	override	Optional. If true, will override "this" within the handler to map to the scope object passed into the method.
	*/</span>
	<span class="reserved">this</span>.subscribeToConfigEvent = <span class="reserved">function</span>(key, handler, obj, override) {
		var property = config[key];
		<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
			property.event.subscribe(handler, obj, override);
			<span class="reserved">return</span> true;
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> false;
		}
	}

	<span class="comment">/**
	* Fires any events that were deferred due to unavailable DOM dependencies.
	*/</span>
	<span class="reserved">this</span>.fireDeferredEvents = <span class="reserved">function</span>() {
		<span class="reserved">for</span> (var prop in deferredEvents) {
			var property = config[prop];
			<span class="reserved">if</span> (property != undefined &amp;&amp; property.event) {
				fireEvent(prop, property, deferredEvents[prop].args);
			}
		}
	}

	<span class="comment">// Some built-in validators //</span>

	<span class="comment">/**
	* Validates that the value passed in is a boolean.
	* <span class="attrib">@param</span>	{object}	val	The value to validate
	* <span class="attrib">@return</span>	{boolean}	true, if the value is valid
	*/</span>
	<span class="reserved">this</span>.checkBoolean = <span class="reserved">function</span>(val) {
		<span class="reserved">if</span> (typeof val == <span class="literal">'boolean'</span>) {
			<span class="reserved">return</span> true;
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> false;
		}
	}
	<span class="comment">/**

	* Validates that the value passed in is a number.
	* <span class="attrib">@param</span>	{object}	val	The value to validate
	* <span class="attrib">@return</span>	{boolean}	true, if the value is valid
	*/</span>
	<span class="reserved">this</span>.checkNumber = <span class="reserved">function</span>(val) {
		<span class="reserved">if</span> (isNaN(val)) {
			<span class="reserved">return</span> false;
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> true;
		}
	}
}
<span class="comment">/**
* Checks to see if the passed element is actually present in the DOM.
* <span class="attrib">@param</span>	{Element}	element	The element to be checked for DOM presence.
* <span class="attrib">@return</span>	{boolean}	true, if the element is present in the DOM
*/</span>
YAHOO.util.Dom._elementInDom = <span class="reserved">function</span>(element) {
	var parentNode = element.parentNode;
	<span class="reserved">if</span> (! parentNode) {
		<span class="reserved">return</span> false;
	} <span class="reserved">else</span> {
		<span class="reserved">if</span> (parentNode.tagName == <span class="literal">"HTML"</span>) {
			<span class="reserved">return</span> true;
		} <span class="reserved">else</span> {
			<span class="reserved">return</span> YAHOO.util.Dom._elementInDom(parentNode);
		}
	}
}
</pre>
			</div>
		
	</div>
</div>


<div id="footer">
	<hr />
	Copyright &copy; 2004 - 2005 Yahoo! Inc. All rights reserved.
	<br />
	Yahoo! Confidential.
	<br /><br />
	Documentation generated by <a href="http://jsdoc.sourceforge.net/">JSDoc</a>
	version 1.9.5.8
</div>


</body>
</html>
