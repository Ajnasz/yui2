
<html>
<head>
	<title>
		JavaScript Documentation - 
		
			Panel.js
		
	</title>
	<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div id="header">
	<h1>JavaScript Documentation</h1>
	<h3><a href="./index.html">YUI Containers</a></h3>

	<div class="breadcrumbs">
		

			
			
			
			
				<a href="./index.html">YUI Containers</a>
				&gt;
				<strong>Panel.js</strong>
			
			
			
			
			
			
			
			
			
			
			
		
	</div>
</div>

<div id="body">
	
	
	<div class="nav">
		<div class="module resources">
			<ul class="content">
				<li><a href="overview-tree.html">Tree View</a></li>
				<li><a href="index-all.html">Element Index</a></li>
			</ul>
		</div>
		
		
			<div class="module">
				<h4><a href="./allclasses-noframe.html">Classes</a></h4>
				<ul class="content">
					

					
						<li>
							<a href="YAHOO.util.Config.html">
								YAHOO.util.Config</a>
						</li>
					
						<li>
							<a href="YAHOO.util.KeyListener.html">
								YAHOO.util.KeyListener</a>
						</li>
					

					
						<li>
							<a href="YAHOO.widget.Dialog.html">
								YAHOO.widget.Dialog</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.FormDialog.html">
								YAHOO.widget.FormDialog</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Module.html">
								YAHOO.widget.Module</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Overlay.html">
								YAHOO.widget.Overlay</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.OverlayEffect.html">
								YAHOO.widget.OverlayEffect</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.OverlayManager.html">
								YAHOO.widget.OverlayManager</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Panel.html">
								YAHOO.widget.Panel</a>
						</li>
					
						<li>
							<a href="YAHOO.widget.Tooltip.html">
								YAHOO.widget.Tooltip</a>
						</li>
					
				</ul>
			</div>
		
		
		
			<div class="module">
				<h4><a href="./overview-summary.html">Files</a></h4>
				<ul class="content">		
					
						<li>
							<a href="overview-summary-Config.js.html">
								Config.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Dialog.js.html">
								Dialog.js</a>
						</li>
					
						<li>
							<a href="overview-summary-FormDialog.js.html">
								FormDialog.js</a>
						</li>
					
						<li>
							<a href="overview-summary-KeyListener.js.html">
								KeyListener.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Module.js.html">
								Module.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Overlay.js.html">
								Overlay.js</a>
						</li>
					
						<li>
							<a href="overview-summary-OverlayEffect.js.html">
								OverlayEffect.js</a>
						</li>
					
						<li>
							<a href="overview-summary-OverlayManager.js.html">
								OverlayManager.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Panel.js.html">
								Panel.js</a>
						</li>
					
						<li>
							<a href="overview-summary-Tooltip.js.html">
								Tooltip.js</a>
						</li>
					
				</ul>
			</div>
		
	</div>
	
	<div class="main">
			
		
		
			
			   <h2>Panel.js</h2>
			
			
				
					
				
				
				
<div class="meta">
	
	
	
	
	
	
	
	
	
	
		
	
	
	
	
	
	
</div>

			
		
		
		
		
			<div class="quick-links">
				<strong>Quick Links:</strong>&nbsp;
				
					
						<a href="#classSummary">Class Summary</a> |
					
					
				
				
				
					<a href="#source">Source Code</a>
				
			</div>
		
			
				<div class="section class summaries">
					 <h3><a name="classSummary">Class Summary</a> <span class="top">[<a href="#top">top</a>]</span></h3>
			
				<div class="content">
					<table border="1" cellpadding="3" cellspacing="0">
						
						<tr>
							<td class="name">
								<a href="YAHOO.widget.Panel.html">YAHOO.widget.Panel</a>
							</td>
							<td class="overview">Panel is an implementation of Overlay that behaves like an OS window, with a draggable header and an optional close icon at the top right.</td>
						</tr>
						
					</table>
				</div>
			</div>
		
		
		
		
		
		
		
			<div class="section source">
				<h3><a name="source">Souce Code</a> <span class="top">[<a href="#top">top</a>]</span></h3>
				<pre class="sourceview"><span class="comment">/**
Copyright (c) 2006, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.net/yui/license.txt
* <span class="attrib">@class</span>
* Panel is an implementation of Overlay that behaves like an OS window, with a draggable header and an optional close icon at the top right.
* <span class="attrib">@param</span> {string}	el	The element ID representing the Panel &lt;em&gt;OR&lt;/em&gt;
* <span class="attrib">@param</span> {Element}	el	The element representing the Panel
* <span class="attrib">@param</span> {object}	userConfig	The configuration object literal containing the configuration that should be set for this Panel. See configuration documentation for more details.
* <span class="attrib">@constructor</span>
*/</span>
YAHOO.widget.Panel = <span class="reserved">function</span>(el, userConfig) {
	<span class="reserved">if</span> (arguments.length &gt; 0) {
		YAHOO.widget.Panel.superclass.constructor.call(<span class="reserved">this</span>, el, userConfig);
	}
}

YAHOO.widget.Panel.<span class="reserved">prototype</span> = new YAHOO.widget.Overlay();
YAHOO.widget.Panel.<span class="reserved">prototype</span>.constructor = YAHOO.widget.Panel;

<span class="comment">/**
* Reference to the Panel's superclass, Overlay
* <span class="attrib">@type</span> class
* <span class="attrib">@final</span>
*/</span>
YAHOO.widget.Panel.superclass = YAHOO.widget.Overlay.<span class="reserved">prototype</span>;

<span class="comment">/**
* Constant representing the default CSS class used for a Panel
* <span class="attrib">@type</span> string
* <span class="attrib">@final</span>
*/</span>
YAHOO.widget.Panel.CSS_PANEL = <span class="literal">"panel"</span>;

<span class="comment">/*
* The Overlay initialization method, which is executed for Overlay and all of its subclasses. This method is automatically called by the constructor, and  sets up all DOM references for pre-existing markup, and creates required markup if it is not already present.
* <span class="attrib">@param</span> {string}	el	The element ID representing the Overlay &lt;em&gt;OR&lt;/em&gt;
* <span class="attrib">@param</span> {Element}	el	The element representing the Overlay
* <span class="attrib">@param</span> {object}	userConfig	The configuration object literal containing the configuration that should be set for this Overlay. See configuration documentation for more details.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.init = <span class="reserved">function</span>(el, userConfig) {
	YAHOO.widget.Panel.superclass.init.call(<span class="reserved">this</span>, el<span class="comment">/*, userConfig*/</span>);  <span class="comment">// Note that we don't pass the user config in here yet because we only want it executed once, at the lowest subclass level</span>
	
	YAHOO.util.Dom.addClass(<span class="reserved">this</span>.element, YAHOO.widget.Panel.CSS_PANEL);

	<span class="reserved">this</span>.buildWrapper();			
	
	<span class="reserved">if</span> (userConfig) {
		<span class="reserved">this</span>.cfg.applyConfig(userConfig, true);
	}

	YAHOO.util.Event.addListener(window, <span class="literal">"resize"</span>, <span class="reserved">this</span>.onWindowResize, <span class="reserved">this</span>, true);
}

<span class="comment">/**
* Initializes the custom events for Module which are fired automatically at appropriate times by the Module class.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.initEvents = <span class="reserved">function</span>() {
	YAHOO.widget.Panel.superclass.initEvents.call(<span class="reserved">this</span>);

	<span class="reserved">this</span>.showMaskEvent = new YAHOO.util.CustomEvent(<span class="literal">"showMask"</span>);
	<span class="reserved">this</span>.hideMaskEvent = new YAHOO.util.CustomEvent(<span class="literal">"hideMask"</span>);
}

<span class="comment">/**
* Initializes the class's configurable properties which can be changed using the Panel's Config object (cfg).
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.initDefaultConfig = <span class="reserved">function</span>() {
	YAHOO.widget.Panel.superclass.initDefaultConfig.call(<span class="reserved">this</span>);

	<span class="comment">// Add panel config properties //</span>
	<span class="reserved">this</span>.cfg.addProperty(<span class="literal">"close"</span>,	true,	<span class="reserved">this</span>.configClose,	<span class="reserved">this</span>.cfg.checkBoolean);
	<span class="reserved">this</span>.cfg.addProperty(<span class="literal">"draggable"</span>, true,	<span class="reserved">this</span>.configDraggable,	<span class="reserved">this</span>.cfg.checkBoolean);

	<span class="reserved">this</span>.cfg.addProperty(<span class="literal">"underlay"</span>,	<span class="literal">"shadow"</span>, <span class="reserved">this</span>.configUnderlay, null, <span class="reserved">this</span>.element);
	<span class="reserved">this</span>.cfg.addProperty(<span class="literal">"modal"</span>,	false,	<span class="reserved">this</span>.configModal,	<span class="reserved">this</span>.cfg.checkBoolean, <span class="reserved">this</span>.element);

	<span class="reserved">this</span>.cfg.addProperty(<span class="literal">"keyListeners"</span>, null, <span class="reserved">this</span>.configkeyListeners);
}

<span class="comment">// BEGIN BUILT-IN PROPERTY EVENT HANDLERS //</span>

<span class="comment">/**
* The default event handler fired when the "close" property is changed. The method controls the appending or hiding of the close icon at the top right of the Panel.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.configClose = <span class="reserved">function</span>(type, args, obj) {
	var val = args[0];

	var doHide = <span class="reserved">function</span>(e, obj) {
		obj.hide();
	}

	<span class="reserved">if</span> (val) {
		<span class="reserved">if</span> (! <span class="reserved">this</span>.close) {
			<span class="reserved">this</span>.close = document.createElement(<span class="literal">"DIV"</span>);
			YAHOO.util.Dom.addClass(<span class="reserved">this</span>.close, <span class="literal">"close"</span>);

			<span class="reserved">if</span> (<span class="reserved">this</span>.isSecure) {
				YAHOO.util.Dom.addClass(<span class="reserved">this</span>.close, <span class="literal">"secure"</span>);
			} <span class="reserved">else</span> {
				YAHOO.util.Dom.addClass(<span class="reserved">this</span>.close, <span class="literal">"nonsecure"</span>);
			}

			<span class="reserved">this</span>.close.innerHTML = <span class="literal">"&amp;nbsp;"</span>;
			<span class="reserved">this</span>.innerElement.appendChild(<span class="reserved">this</span>.close);
			YAHOO.util.Event.addListener(<span class="reserved">this</span>.close, <span class="literal">"click"</span>, doHide, <span class="reserved">this</span>);	
		} <span class="reserved">else</span> {
			<span class="reserved">this</span>.close.style.display = <span class="literal">"block"</span>;
		}
	} <span class="reserved">else</span> {
		<span class="reserved">if</span> (<span class="reserved">this</span>.close) {
			<span class="reserved">this</span>.close.style.display = <span class="literal">"none"</span>;
		}
	}
}

<span class="comment">/**
* The default event handler fired when the "draggable" property is changed.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.configDraggable = <span class="reserved">function</span>(type, args, obj) {
	var val = args[0];
	<span class="reserved">if</span> (val) {
		<span class="reserved">if</span> (! <span class="reserved">this</span>.header) {
			<span class="reserved">this</span>.setHeader(<span class="literal">"&amp;nbsp;"</span>);
			<span class="reserved">this</span>.render();
		}
		YAHOO.util.Dom.setStyle(<span class="reserved">this</span>.header,<span class="literal">"cursor"</span>,<span class="literal">"move"</span>);
		<span class="reserved">this</span>.registerDragDrop();
		<span class="reserved">this</span>.dd.onDrag = <span class="reserved">function</span>() {
			obj.syncPosition();
		}
		<span class="reserved">if</span> (<span class="reserved">this</span>.browser == <span class="literal">"ie"</span>) {
			<span class="reserved">this</span>.dd.startDrag = <span class="reserved">function</span>() {
				YAHOO.util.Dom.addClass(obj.element,<span class="literal">"drag"</span>);
			}
			<span class="reserved">this</span>.dd.endDrag = <span class="reserved">function</span>() {
				YAHOO.util.Dom.removeClass(obj.element,<span class="literal">"drag"</span>);
			}
		}
	} <span class="reserved">else</span> {
		<span class="reserved">if</span> (<span class="reserved">this</span>.dd) {
			<span class="reserved">this</span>.dd.unreg();
		}
		<span class="reserved">if</span> (<span class="reserved">this</span>.header) {
		}
	}
}

<span class="comment">/**
* The default event handler fired when the "underlay" property is changed.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.configUnderlay = <span class="reserved">function</span>(type, args, obj) {
	var val = args[0];

	switch (val.toLowerCase()) {
		case <span class="literal">"shadow"</span>:
			YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.element, <span class="literal">"matte"</span>);
			YAHOO.util.Dom.addClass(<span class="reserved">this</span>.element, <span class="literal">"shadow"</span>);

			<span class="reserved">if</span> (! <span class="reserved">this</span>.underlay) { <span class="comment">// create if not already in DOM</span>
				<span class="reserved">this</span>.underlay = document.createElement(<span class="literal">"DIV"</span>);
				<span class="reserved">this</span>.underlay.className = <span class="literal">"underlay"</span>;
				<span class="reserved">this</span>.underlay.innerHTML = <span class="literal">"&amp;nbsp;"</span>;
				<span class="reserved">this</span>.element.appendChild(<span class="reserved">this</span>.underlay);
			} 
			<span class="reserved">this</span>.sizeUnderlay();
			break;
		case <span class="literal">"matte"</span>:
			YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.element, <span class="literal">"shadow"</span>);
			YAHOO.util.Dom.addClass(<span class="reserved">this</span>.element, <span class="literal">"matte"</span>);
			break;
		case <span class="literal">"none"</span>:
		default:
			YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.element, <span class="literal">"shadow"</span>);
			YAHOO.util.Dom.removeClass(<span class="reserved">this</span>.element, <span class="literal">"matte"</span>);
			break;
	}
}

<span class="comment">/**
* The default event handler fired when the "modal" property is changed. This handler subscribes or unsubscribes to the show and hide events to handle the display or hide of the modality mask.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.configModal = <span class="reserved">function</span>(type, args, obj) {
	var val = args[0];
	<span class="reserved">if</span> (val) {
		<span class="reserved">this</span>.buildMask();
		var effect = <span class="reserved">this</span>.cfg.getProperty(<span class="literal">"effect"</span>);
		var visible = <span class="reserved">this</span>.cfg.getProperty(<span class="literal">"visible"</span>);
		
		<span class="reserved">if</span> (visible) {
			<span class="reserved">this</span>.showMask();
		}

		<span class="reserved">if</span> (effect &amp;&amp; <span class="reserved">this</span>.effects.length &gt; 0) {
			var firstEffect = <span class="reserved">this</span>.effects[0];
			
			<span class="reserved">this</span>.showEvent.unsubscribe(<span class="reserved">this</span>.showMask, <span class="reserved">this</span>);
			<span class="reserved">this</span>.hideEvent.unsubscribe(<span class="reserved">this</span>.hideMask, <span class="reserved">this</span>);

			firstEffect.beforeAnimateInEvent.subscribe(<span class="reserved">this</span>.showMask, <span class="reserved">this</span>, true);
			firstEffect.animateOutCompleteEvent.subscribe(<span class="reserved">this</span>.hideMask, <span class="reserved">this</span>, true);

		} <span class="reserved">else</span> {
			<span class="reserved">this</span>.showEvent.subscribe(<span class="reserved">this</span>.showMask, <span class="reserved">this</span>, true);
			<span class="reserved">this</span>.hideEvent.subscribe(<span class="reserved">this</span>.hideMask, <span class="reserved">this</span>, true);
		}
	}
}

YAHOO.widget.Panel.<span class="reserved">prototype</span>.configkeyListeners = <span class="reserved">function</span>(type, args, obj) {
	var handlers = args[0];

	<span class="reserved">if</span> (handlers) {
		var dupeCheck = <span class="reserved">function</span>(evt, fn, obj) {
			<span class="reserved">for</span> (var e=0;e&lt;evt.subscribers.length;e++) {
				var subsc = evt.subscribers[e];
				<span class="reserved">if</span> (subsc.obj == obj &amp;&amp; subsc.fn == fn) {
					<span class="reserved">return</span> true;
					break;
				}
			}
			<span class="reserved">return</span> false;
		}

		<span class="reserved">if</span> (handlers instanceof Array) {
			<span class="reserved">for</span> (var i=0;i&lt;handlers.length;i++) {
				var handler = handlers[i];

				<span class="reserved">if</span> (! dupeCheck(<span class="reserved">this</span>.showEvent, handler.enable, handler)) {
					<span class="reserved">this</span>.showEvent.subscribe(handler.enable, handler, true);
				}
				<span class="reserved">if</span> (! dupeCheck(<span class="reserved">this</span>.hideEvent, handler.disable, handler)) {
					<span class="reserved">this</span>.hideEvent.subscribe(handler.disable, handler, true);
				}
			}
		} <span class="reserved">else</span> {
			<span class="reserved">if</span> (! dupeCheck(<span class="reserved">this</span>.showEvent, handlers.enable, handlers)) {
				<span class="reserved">this</span>.showEvent.subscribe(handlers.enable, handlers, true);
			}
			<span class="reserved">if</span> (! dupeCheck(<span class="reserved">this</span>.hideEvent, handlers.disable, handlers)) {
				<span class="reserved">this</span>.hideEvent.subscribe(handlers.disable, handlers, true);
			}
		}
	} 
}

<span class="comment">// END BUILT-IN PROPERTY EVENT HANDLERS //</span>


<span class="comment">/**
* Builds the wrapping container around the Panel that is used for positioning the shadow and matte underlays. The container element is assigned to a  local instance variable called container, and the element is reinserted inside of it.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.buildWrapper = <span class="reserved">function</span>() {
	var elementParent = <span class="reserved">this</span>.element.parentNode;

	var elementClone = <span class="reserved">this</span>.element.cloneNode(true);
	<span class="reserved">this</span>.innerElement = elementClone;
	<span class="reserved">this</span>.innerElement.style.visibility = <span class="literal">"inherit"</span>;

	YAHOO.util.Dom.addClass(<span class="reserved">this</span>.innerElement, <span class="literal">"panel"</span>);

	var wrapper = document.createElement(<span class="literal">"DIV"</span>);
	wrapper.className = <span class="literal">"panel-container"</span>;
	wrapper.id = elementClone.id + <span class="literal">"_c"</span>;
	
	wrapper.appendChild(elementClone);
	
	<span class="reserved">if</span> (elementParent) {
		elementParent.replaceChild(wrapper, <span class="reserved">this</span>.element);
	}

	<span class="reserved">this</span>.element = wrapper;

	<span class="comment">// Resynchronize the local field references</span>

	var childNodes = <span class="reserved">this</span>.innerElement.childNodes;
	<span class="reserved">if</span> (childNodes) {
		<span class="reserved">for</span> (var i=0;i&lt;childNodes.length;i++) {
			var child = childNodes[i];
			switch (child.className) {
				case YAHOO.widget.Module.CSS_HEADER:
					<span class="reserved">this</span>.header = child;
					break;
				case YAHOO.widget.Module.CSS_BODY:
					<span class="reserved">this</span>.body = child;
					break;
				case YAHOO.widget.Module.CSS_FOOTER:
					<span class="reserved">this</span>.footer = child;
					break;
			}
		}
	}

	<span class="reserved">this</span>.initDefaultConfig(); <span class="comment">// We've changed the DOM, so the configuration must be re-tooled to get the DOM references right</span>
}

<span class="comment">/**
* Adjusts the size of the shadow based no the size of the element.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.sizeUnderlay = <span class="reserved">function</span>() {
	<span class="reserved">if</span> (<span class="reserved">this</span>.underlay &amp;&amp; <span class="reserved">this</span>.browser != <span class="literal">"gecko"</span> &amp;&amp; <span class="reserved">this</span>.browser != <span class="literal">"safari"</span>) {
		<span class="reserved">this</span>.underlay.style.width = <span class="reserved">this</span>.innerElement.offsetWidth + <span class="literal">"px"</span>;
		<span class="reserved">this</span>.underlay.style.height = <span class="reserved">this</span>.innerElement.offsetHeight + <span class="literal">"px"</span>;
	}
}

<span class="comment">/**
* Event handler fired when the resize monitor element is resized.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.onDomResize = <span class="reserved">function</span>(e, obj) { 
	YAHOO.widget.Panel.superclass.onDomResize.call(<span class="reserved">this</span>, e, obj);
	var me = <span class="reserved">this</span>;
	setTimeout(<span class="reserved">function</span>() {
		me.sizeUnderlay();
	}, 0);
};

YAHOO.widget.Panel.<span class="reserved">prototype</span>.onWindowResize = <span class="reserved">function</span>(e, obj) {
	<span class="reserved">if</span> (<span class="reserved">this</span>.cfg.getProperty(<span class="literal">"modal"</span>)) {
		<span class="reserved">this</span>.sizeMask();
	}
}

<span class="comment">/**
* Registers the Panel's header for drag &amp; drop capability.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.registerDragDrop = <span class="reserved">function</span>() {
	<span class="reserved">if</span> (<span class="reserved">this</span>.header) {
		<span class="reserved">this</span>.dd = new YAHOO.util.DD(<span class="reserved">this</span>.element.id, <span class="literal">"panel"</span>);

		<span class="reserved">if</span> (! <span class="reserved">this</span>.header.id) {
			<span class="reserved">this</span>.header.id = <span class="reserved">this</span>.id + <span class="literal">"_h"</span>;
		}
		<span class="reserved">this</span>.dd.setHandleElId(<span class="reserved">this</span>.header.id);
		<span class="reserved">this</span>.dd.addInvalidHandleType(<span class="literal">"INPUT"</span>);
		<span class="reserved">this</span>.dd.addInvalidHandleType(<span class="literal">"SELECT"</span>);
		<span class="reserved">this</span>.dd.addInvalidHandleType(<span class="literal">"TEXTAREA"</span>);
	}
}

<span class="comment">/**
* Builds the mask that is laid over the document when the Panel is configured to be modal.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.buildMask = <span class="reserved">function</span>() {
	<span class="reserved">if</span> (! <span class="reserved">this</span>.mask) {
		<span class="reserved">this</span>.mask = document.createElement(<span class="literal">"DIV"</span>);
		<span class="reserved">this</span>.mask.className = <span class="literal">"mask"</span>;
		<span class="reserved">this</span>.mask.innerHTML = <span class="literal">"&amp;nbsp;"</span>;

		var maskClick = <span class="reserved">function</span>(e, obj) {
			YAHOO.util.Event.stopEvent(e);
		}

		YAHOO.util.Event.addListener(<span class="reserved">this</span>.mask, maskClick, <span class="reserved">this</span>);

		<span class="reserved">if</span> (<span class="reserved">this</span>.browser == <span class="literal">"opera"</span>) {
			<span class="reserved">this</span>.mask.style.backgroundColor = <span class="literal">"transparent"</span>;
		}
		document.body.appendChild(<span class="reserved">this</span>.mask);
	}
}

<span class="comment">/**
* Hides the modality mask.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.hideMask = <span class="reserved">function</span>() {
	<span class="reserved">if</span> (<span class="reserved">this</span>.cfg.getProperty(<span class="literal">"modal"</span>) &amp;&amp; <span class="reserved">this</span>.mask) {
		<span class="reserved">this</span>.mask.style.display = <span class="literal">"none"</span>;
		<span class="reserved">this</span>.mask.style.width = <span class="literal">"1px"</span>;
		<span class="reserved">this</span>.mask.style.height = <span class="literal">"1px"</span>;

		YAHOO.util.Dom.removeClass(document.body, <span class="literal">"masked"</span>);

		switch (<span class="reserved">this</span>.browser) {
			case <span class="literal">"ie"</span>:
			case <span class="literal">"ie7"</span>:
				document.documentElement.style.overflowX = <span class="literal">"auto"</span>;
				document.documentElement.style.overflowY = <span class="literal">"scroll"</span>;
				break;
			case <span class="literal">"gecko"</span>:
				document.body.style.overflowX = <span class="literal">"auto"</span>;
				document.body.style.overflowY = <span class="literal">"auto"</span>;
				break;
			default:
				document.body.style.overflow = <span class="literal">"auto"</span>; 
				break;
		}

		<span class="reserved">this</span>.hideMaskEvent.fire();
	}
}

<span class="comment">/**
* Shows the modality mask.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.showMask = <span class="reserved">function</span>() {
	<span class="reserved">if</span> (<span class="reserved">this</span>.cfg.getProperty(<span class="literal">"modal"</span>) &amp;&amp; <span class="reserved">this</span>.mask) {
		switch (<span class="reserved">this</span>.browser) {
			case <span class="literal">"ie"</span>:
			case <span class="literal">"ie7"</span>:
				document.documentElement.style.overflowX = <span class="literal">"hidden"</span>;
				document.documentElement.style.overflowY = <span class="literal">"hidden"</span>;	
				break;
			case <span class="literal">"gecko"</span>:
				document.body.style.overflowX = <span class="literal">"hidden"</span>;
				document.body.style.overflowY = <span class="literal">"hidden"</span>;
				break;
			default:
				document.body.style.overflow = <span class="literal">"hidden"</span>; 
				break;
		}

		<span class="reserved">this</span>.sizeMask();

		YAHOO.util.Dom.addClass(document.body, <span class="literal">"masked"</span>);
		<span class="reserved">this</span>.mask.style.display = <span class="literal">"block"</span>;

		<span class="reserved">this</span>.showMaskEvent.fire();
	}
}

YAHOO.widget.Panel.<span class="reserved">prototype</span>.sizeMask = <span class="reserved">function</span>() {
	<span class="reserved">if</span> (<span class="reserved">this</span>.mask) {
		var clientHeight = YAHOO.util.Dom.getClientHeight();
		var scrollHeight = document.body.scrollHeight;

		switch (<span class="reserved">this</span>.browser) {
			case <span class="literal">"ie"</span>:
			case <span class="literal">"ie7"</span>:
				<span class="reserved">this</span>.mask.style.width = <span class="literal">"110%"</span>;
				<span class="reserved">this</span>.mask.style.height = (scrollHeight &gt; clientHeight ? scrollHeight : clientHeight)+ <span class="literal">"px"</span>;
				break;
			case <span class="literal">"gecko"</span>:
				<span class="reserved">this</span>.mask.style.width = <span class="literal">"110%"</span>;
				<span class="reserved">this</span>.mask.style.height = <span class="literal">"100%"</span>;
				break;
			default:
				<span class="reserved">this</span>.mask.style.width = <span class="literal">"110%"</span>;
				<span class="reserved">this</span>.mask.style.height = <span class="literal">"100%"</span>;
				break;
		}
	}
}

<span class="comment">/**
* The default event handler fired when the "height" property is changed.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.configHeight = <span class="reserved">function</span>(type, args, obj) {
	var height = args[0];
	var el = <span class="reserved">this</span>.innerElement;
	YAHOO.util.Dom.setStyle(el, <span class="literal">"height"</span>, height);
	<span class="reserved">this</span>.cfg.refireEvent(<span class="literal">"underlay"</span>);
	<span class="reserved">this</span>.cfg.refireEvent(<span class="literal">"iframe"</span>);
}

<span class="comment">/**
* The default event handler fired when the "width" property is changed.
*/</span>
YAHOO.widget.Panel.<span class="reserved">prototype</span>.configWidth = <span class="reserved">function</span>(type, args, obj) {
	var width = args[0];
	var el = <span class="reserved">this</span>.innerElement;
	YAHOO.util.Dom.setStyle(el, <span class="literal">"width"</span>, width);
	<span class="reserved">this</span>.cfg.refireEvent(<span class="literal">"underlay"</span>);
	<span class="reserved">this</span>.cfg.refireEvent(<span class="literal">"iframe"</span>);
	<span class="reserved">this</span>.cfg.refireEvent(<span class="literal">"context"</span>);
}

YAHOO.widget.Panel.<span class="reserved">prototype</span>.render = <span class="reserved">function</span>(appendToNode) {
	<span class="reserved">this</span>.beforeRenderEvent.fire();

	var me = <span class="reserved">this</span>;
	var appendTo = <span class="reserved">function</span>(element) {
		<span class="reserved">if</span> (typeof element == <span class="literal">"string"</span>) {
			element = document.getElementById(element);
		}
		
		<span class="reserved">if</span> (element) {
			element.appendChild(me.element);
			me.appendEvent.fire();
		}
	}

	<span class="reserved">if</span> (appendToNode) {
		<span class="reserved">if</span> (typeof appendToNode == <span class="literal">"string"</span>) {
			el = document.getElementById(el);
			<span class="reserved">if</span> (! el) {
				el = document.createElement(<span class="literal">"DIV"</span>);
				el.id = elId;
			}
		}
		appendTo(appendToNode);
	} <span class="reserved">else</span> { <span class="comment">// No node was passed in. If the element is not pre-marked up, this fails</span>
		<span class="reserved">if</span> (! YAHOO.util.Dom.inDocument(<span class="reserved">this</span>.element)) {
			<span class="reserved">return</span> false;
		}
	}

	<span class="comment">// Need to get everything into the DOM if it isn't already</span>
	
	<span class="reserved">if</span> ((! <span class="reserved">this</span>.childNodesInDOM[0]) &amp;&amp; <span class="reserved">this</span>.header) {
		<span class="comment">// There is a header, but it's not in the DOM yet... need to add it</span>
		var firstChild = <span class="reserved">this</span>.innerElement.firstChild;
		<span class="reserved">if</span> (firstChild) { <span class="comment">// Insert before first child if exists</span>
			<span class="reserved">this</span>.innerElement.insertBefore(<span class="reserved">this</span>.header, firstChild);
		} <span class="reserved">else</span> { <span class="comment">// Append to empty body because there are no children</span>
			<span class="reserved">this</span>.innerElement.appendChild(<span class="reserved">this</span>.header);
		}
	}

	<span class="reserved">if</span> ((! <span class="reserved">this</span>.childNodesInDOM[1]) &amp;&amp; <span class="reserved">this</span>.body) {
		<span class="comment">// There is a body, but it's not in the DOM yet... need to add it</span>
		<span class="reserved">if</span> (<span class="reserved">this</span>.childNodesInDOM[2]) { <span class="comment">// Insert before footer if exists in DOM</span>
			<span class="reserved">this</span>.innerElement.insertBefore(<span class="reserved">this</span>.body, <span class="reserved">this</span>.childNodesInDOM[2]);
		} <span class="reserved">else</span> { <span class="comment">// Append to element because there is no footer</span>
			<span class="reserved">this</span>.innerElement.appendChild(<span class="reserved">this</span>.body);
		}
	}

	<span class="reserved">if</span> ((! <span class="reserved">this</span>.childNodesInDOM[2]) &amp;&amp; <span class="reserved">this</span>.footer) {
		<span class="comment">// There is a footer, but it's not in the DOM yet... need to add it</span>
		<span class="reserved">this</span>.innerElement.appendChild(<span class="reserved">this</span>.footer);
	}
	
	<span class="reserved">this</span>.cfg.fireDeferredEvents();

	<span class="reserved">this</span>.renderEvent.fire();
	<span class="reserved">return</span> true;
}</pre>
			</div>
		
	</div>
</div>


<div id="footer">
	<hr />
	Copyright &copy; 2004 - 2005 Yahoo! Inc. All rights reserved.
	<br />
	Yahoo! Confidential.
	<br /><br />
	Documentation generated by <a href="http://jsdoc.sourceforge.net/">JSDoc</a>
	version 1.9.5.8
</div>


</body>
</html>
