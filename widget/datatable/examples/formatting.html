<!doctype html public "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Example: DataTable - Custom Formatting (YUI Library)</title>
<link type="text/css" rel="stylesheet" href="../../build/reset/reset.css">
<link type="text/css" rel="stylesheet" href="../../build/fonts/fonts.css">
<link type="text/css" rel="stylesheet" href="../../build/logger/assets/logger.css">
<link type="text/css" rel="stylesheet" href="../../build/datatable/assets/datatable.css">
<link type="text/css" rel="stylesheet" href="./css/examples.css">
<link type="text/css" rel="stylesheet" href="../assets/dpSyntaxHighlighter.css">
<style type="text/css">
/* custom css*/
#formatting {margin:1em;}
#formatting table {border-collapse:collapse;}
#formatting th {background-color:#696969; color:#fff;}/*dark gray*/
#formatting th a {color:#fff;}
#formatting th, #formatting td {border:1px solid #000;padding:.25em;}
#formatting tr.yui-dt-odd {background-color:#eee;} /*light gray*/
#formatting td.flag {padding:6px;}
#formatting td.flag img {width:8px; height:8px;}
#formatting .yui-dt-col-field1 {width:5em;}

/* sorting */
#formatting th .yui-dt-label {margin-right:5px;padding-right:15px;color:#fff;} /*room for arrow*/
#formatting th.yui-dt-asc, #formatting th.yui-dt-desc {background-color:#3F3F3F;} /*dark gray*/
#formatting th.yui-dt-asc .yui-dt-label {background-image: url('img/arrow_up.gif'); background-repeat:no-repeat; background-position:right;} /*arrow up*/
#formatting th.yui-dt-desc .yui-dt-label {background-image: url('img/arrow_dn.gif'); background-repeat:no-repeat; background-position:right;} /*arrow down*/
</style>
</head>
<body>
<div id="hd">
    <h1><img src="./img/logo.gif" class="logo" alt="Y!"/><a href="./">DataTable Widget</a> :: Custom Formatting</h1>
</div>
<div id="bd">
    <div id="formatting"></div>

    <!-- Sample code begins -->
    <div id="code">
        <h3>Sample Code</h3>

        <p>Data:</p>

        <textarea name="code" class="JScript" cols="60" rows="1">
        </textarea>

        <p>CSS:</p>

        <textarea name="code" class="HTML" cols="60" rows="1">
        </textarea>

        <p>Markup:</p>

        <textarea name="code" class="HTML" cols="60" rows="1">
        </textarea>

        <p>JavaScript:</p>

        <textarea name="code" class="JScript" cols="60" rows="1">
        </textarea>
    </div>
    <!-- Code sample ends -->
</div>

<script type="text/javascript" src="../../build/yahoo/yahoo.js"></script>
<script type="text/javascript" src="../../build/dom/dom.js"></script>
<script type="text/javascript" src="../../build/event/event.js"></script>
<script type="text/javascript" src="../../build/element/element-beta.js"></script>
<script type="text/javascript" src="../../build/logger/logger.js"></script>
<script type="text/javascript" src="../../build/datasource/datasource-beta-debug.js"></script>
<script type="text/javascript" src="../../build/datatable/datatable-beta-debug.js"></script>
<script type="text/javascript" src="./js/data.js"></script>
<script type="text/javascript">
YAHOO.example.CustomFormatting = new function() {
    this.myLogger = new YAHOO.widget.LogReader();

    /****************************************************************************/
    /****************************************************************************/
    /****************************************************************************/

    // Define a custom formatter for the Column labeled "flag"
    // draws an up icon if value of field3 is greater than 100,
    // otherwise renders a down icon
    this.myCustomFormatter = function(elCell, oRecord, oColumn, oData) {
        YAHOO.util.Dom.addClass(elCell, "flag");
        if(oRecord.getData("field3") > 100) {
            elCell.innerHTML = '&nbsp;<img src="img/arrow_up.gif">';
        }
        else {
            elCell.innerHTML = '&nbsp;<img src="img/arrow_dn.gif">';
        }
    };

    // Override the built-in formatter
    YAHOO.widget.Column.formatEmail = function(elCell, oRecord, oColumn, oData) {
        var user = oData;
        elCell.innerHTML = "<a href=\"mailto:" + user + "@mycompany.com\">" + user + "</a>";
    };

    var myColumnDefs = [
        {label:"flag", formatter:this.myCustomFormatter}, // use custom formatter
        {label:"button", formatter:YAHOO.widget.DataTable.formatButton}, // use the built-in button formatter
        {label:"check", formatter:YAHOO.widget.DataTable.formatCheckbox}, // use the built-in checkbox formatter
        {key:"field1", sortable:true},
        {key:"field2", sortable:true, formatter:YAHOO.widget.DataTable.formatDate}, // use the built-in date formatter
        {key:"field3", sortable:true},
        {key:"field4", sortable:true, formatter:YAHOO.widget.DataTable.formatCurrency}, // use the built-in currency formatter
        {key:"field5", sortable:true, formatter:YAHOO.widget.DataTable.formatEmail}, // use the overridden email formatter
        {key:"field6", sortable:true, formatter:YAHOO.widget.DataTable.formatLink} // use the built-in link formatter
    ];

    this.myDataSource = new YAHOO.util.DataSource(YAHOO.example.Data.formatting);
    this.myDataSource.responseType = YAHOO.util.DataSource.TYPE_JSON;
    this.myDataSource.responseSchema = {
        resultsList: ["items"],
        // Use the converter methods to populate the RecordSet with the right data types
        fields: [
            {key:"field1", converter:YAHOO.util.DataSource.convertToString}, // point to the string converter
            {key:"field2", converter:YAHOO.util.DataSource.convertToDate}, // point to the date converter
            {key:"field3", converter:YAHOO.util.DataSource.convertToNumber}, // point to the number converter
            {key:"field4", converter:YAHOO.util.DataSource.convertToNumber}, // point to the number converter
            {key:"field5"}, // this is already string data so no converter needed
            {key:"field6"} // this is already string data so no converter needed
        ]
    };

    this.myDataTable = new YAHOO.widget.DataTable("formatting", myColumnDefs,
            this.myDataSource, {caption:"Example: Custom Formatting"});
            
    this.myDataTable.on("buttonClickEvent", function(oArgs){
        var oRecord = this.getRecord(oArgs.target);
        alert(YAHOO.lang.dump(oRecord.getData()));
    });

    this.myDataTable.on("checkboxClickEvent", function(oArgs){
        var elCheckbox = oArgs.target;
        alert("Checkbox was " + (elCheckbox.checked ? "" : "un") + "checked.");
    });
};
</script>
<script type="text/javascript" src="../assets/dpSyntaxHighlighter.js"></script>
<script type="text/javascript">
dp.SyntaxHighlighter.HighlightAll('code');
</script>
</body>
</html>
