YAHOO.widget.Menu=function(_1,_2){if(arguments.length>0){YAHOO.widget.Menu.superclass.constructor.call(this,_1,_2);}};YAHOO.widget.Menu.prototype=new YAHOO.widget.Overlay();YAHOO.widget.Menu.prototype.constructor=YAHOO.widget.Menu;YAHOO.widget.Menu.superclass=YAHOO.widget.Overlay.prototype;YAHOO.widget.Menu.prototype.CSS_CLASS_NAME="yuimenu";YAHOO.widget.Menu.prototype.MENUITEM_TYPE=null;YAHOO.widget.Menu.prototype._aMenuItemGroups=null;YAHOO.widget.Menu.prototype._aListElements=null;YAHOO.widget.Menu.prototype._oEventUtil=YAHOO.util.Event;YAHOO.widget.Menu.prototype._oDom=YAHOO.util.Dom;YAHOO.widget.Menu.prototype._oCurrentMenuItem=null;YAHOO.widget.Menu.prototype._bFiredMouseOverEvent=false;YAHOO.widget.Menu.prototype._bFiredMouseOutEvent=false;YAHOO.widget.Menu.prototype.activeMenuItem=null;YAHOO.widget.Menu.prototype.parent=null;YAHOO.widget.Menu.prototype.srcElement=null;YAHOO.widget.Menu.prototype.mouseOverEvent=null;YAHOO.widget.Menu.prototype.mouseOutEvent=null;YAHOO.widget.Menu.prototype.mouseDownEvent=null;YAHOO.widget.Menu.prototype.mouseUpEvent=null;YAHOO.widget.Menu.prototype.clickEvent=null;YAHOO.widget.Menu.prototype.keyPressEvent=null;YAHOO.widget.Menu.prototype.keyDownEvent=null;YAHOO.widget.Menu.prototype.keyUpEvent=null;YAHOO.widget.Menu.prototype.init=function(_3,_4){if(!this.MENUITEM_TYPE){this.MENUITEM_TYPE=YAHOO.widget.MenuItem;}this._aMenuItemGroups=[];this._aListElements=[];var _5;if(typeof _3=="string"){_5=document.getElementById(_3);}else{if(_3.tagName){_5=_3;}}if(_5){switch(_5.tagName){case "DIV":if(this._oDom.hasClass(_5,"yuimenu")){this.srcElement=_5;if(!_5.id){this._oDom.generateId(_5);}YAHOO.widget.Menu.superclass.init.call(this,_5.id);var _6=this.body.firstChild,i=0;do{switch(_6.tagName){case "UL":this._aListElements[i]=_6;this._aMenuItemGroups[i]=[];i++;break;}}while((_6=_6.nextSibling));if(this._aListElements[0]){this._oDom.addClass(this._aListElements[0],"first");}}break;case "SELECT":this.srcElement=_5;var _7=this._oDom.generateId();YAHOO.widget.Menu.superclass.init.call(this,_7);break;}}else{YAHOO.widget.Menu.superclass.init.call(this,_3);}if(this.element){this._oDom.addClass(this.element,this.CSS_CLASS_NAME);this._oEventUtil.addListener(this.element,"mouseover",this._onElementMouseOver,this,true);this._oEventUtil.addListener(this.element,"mouseout",this._onElementMouseOut,this,true);this._oEventUtil.addListener(this.element,"mousedown",this._onElementMouseDown,this,true);this._oEventUtil.addListener(this.element,"mouseup",this._onElementMouseUp,this,true);this._oEventUtil.addListener(this.element,"click",this._onElementClick,this,true);this._oEventUtil.addListener(this.element,"keydown",this._onElementKeyDown,this,true);this._oEventUtil.addListener(this.element,"keyup",this._onElementKeyUp,this,true);this._oEventUtil.addListener(this.element,"keypress",this._onElementKeyPress,this,true);var _8=YAHOO.util.CustomEvent;this.mouseOverEvent=new _8("mouseOverEvent",this);this.mouseOutEvent=new _8("mouseOutEvent",this);this.mouseDownEvent=new _8("mouseDownEvent",this);this.mouseUpEvent=new _8("mouseUpEvent",this);this.clickEvent=new _8("clickEvent",this);this.keyPressEvent=new _8("keyPressEvent",this);this.keyDownEvent=new _8("keyDownEvent",this);this.keyUpEvent=new _8("keyUpEvent",this);if(_4){this.cfg.applyConfig(_4);}if(this.srcElement){this._initSubTree();}}};YAHOO.widget.Menu.prototype._addMenuItemToGroup=function(_9,_a,_b){if(typeof _b=="number"){var _c=typeof _9=="number"?_9:0,aGroup=this._getMenuItemGroup(_c);if(!aGroup){aGroup=this._createMenuItemGroup(_c);}var _d=(aGroup.length===0);if(aGroup[_b]){aGroup.splice(_b,0,_a);}else{aGroup[_b]=_a;}var _e=aGroup[_b];if(_e){if(_d&&!_e.element.parentNode){this._aListElements[_c].appendChild(_e.element);}else{function getNextMenuItemSibling(_f,_10){return _f[_10]||getNextMenuItemSibling(_f,(_10+1));}var _11=getNextMenuItemSibling(aGroup,(_b+1));if(_11&&!_e.element.parentNode){this._aListElements[_c].insertBefore(_e.element,_11.element);}}_e.parent=this;this._subscribeToMenuItemEvents(_e);this._subscribeSubMenuToRenderEvent(_e);this._updateMenuItemProperties(_c);return _e;}}else{var _c=typeof _9=="number"?_9:0,aGroup=this._getMenuItemGroup(_c);if(!aGroup){aGroup=this._createMenuItemGroup(_c);}var _12=aGroup.length;aGroup[_12]=_a;var _e=aGroup[_12];if(_e){if(!_e.element.parentNode||(_e.element.parentNode&&_e.element.parentNode.nodeType==11)){this._aListElements[_c].appendChild(_e.element);}_e.element.setAttribute("groupindex",_c);_e.element.setAttribute("index",_12);_e.parent=this;_e.index=_12;_e.groupIndex=_c;this._subscribeToMenuItemEvents(_e);this._subscribeSubMenuToRenderEvent(_e);if(_12===0){this._oDom.addClass(_e.element,"first");}return _e;}}};YAHOO.widget.Menu.prototype._removeMenuItemFromGroupByIndex=function(_13,_14){var _15=typeof _13=="number"?_13:0,aGroup=this._getMenuItemGroup(_15),aArray=aGroup.splice(_14,1),oMenuItem=aArray[0];if(oMenuItem){this._updateMenuItemProperties(_15);if(aGroup.length===0){var oUL=this._aListElements[_15];if(this.body&&oUL){this.body.removeChild(oUL);}this._aMenuItemGroups.splice(_15,1);this._aListElements.splice(_15,1);oUL=this._aListElements[0];if(oUL){this._oDom.addClass(oUL,"first");}}return oMenuItem;}};YAHOO.widget.Menu.prototype._removeMenuItemFromGroupByValue=function(_17,_18){var _19=this._getMenuItemGroup(_17),nMenuItems=_19.length,nMenuItemIndex=-1;if(nMenuItems>0){var i=nMenuItems-1;do{if(_19[i]==_18){nMenuItemIndex=i;break;}}while(i--);if(nMenuItemIndex>-1){return this._removeMenuItemFromGroupByIndex(_17,nMenuItemIndex);}}};YAHOO.widget.Menu.prototype._updateMenuItemProperties=function(_1b){var _1c=this._getMenuItemGroup(_1b),nMenuItems=_1c.length;if(nMenuItems>0){var i=nMenuItems-1,oMenuItem;do{if(_1c[i]){_1c[i].index=i;_1c[i].groupIndex=_1b;_1c[i].element.setAttribute("groupindex",_1b);_1c[i].element.setAttribute("index",i);this._oDom.removeClass(_1c[i].element,"first");oMenuItem=_1c[i];}}while(i--);this._oDom.addClass(oMenuItem.element,"first");}};YAHOO.widget.Menu.prototype._createMenuItemGroup=function(_1e){if(!this._aMenuItemGroups[_1e]){this._aMenuItemGroups[_1e]=[];var oUL=document.createElement("ul");this._aListElements[_1e]=oUL;return this._aMenuItemGroups[_1e];}};YAHOO.widget.Menu.prototype._getMenuItemGroup=function(_20){var _21=((typeof _20=="number")?_20:0);return this._aMenuItemGroups[_21];};YAHOO.widget.Menu.prototype._subscribeSubMenuToRenderEvent=function(_22){var _23=_22.cfg.getProperty("submenu");if(_23){this.renderEvent.subscribe(this._onRender,_23);}};YAHOO.widget.Menu.prototype._subscribeToMenuItemEvents=function(_24){_24.focusEvent.subscribe(this._onMenuItemFocus,[this,_24]);_24.blurEvent.subscribe(this._onMenuItemBlur,[this,_24]);_24.cfg.configChangedEvent.subscribe(this._onMenuItemConfigChange,[this,_24]);};YAHOO.widget.Menu.prototype._initSubTree=function(){switch(this.srcElement.tagName){case "DIV":var _25=this._aListElements.length,i=0,oNode;do{oNode=this._aListElements[i].firstChild;do{switch(oNode.tagName){case "LI":this.addMenuItem(new this.MENUITEM_TYPE(oNode,{initsubmenus:(this.cfg.getProperty("initsubmenus"))}),i);break;}}while((oNode=oNode.nextSibling));i++;}while(i<_25);break;case "SELECT":var _26=this.srcElement.firstChild;do{switch(_26.tagName){case "OPTGROUP":case "OPTION":this.addMenuItem((new this.MENUITEM_TYPE(_26,{initsubmenus:(this.cfg.getProperty("initsubmenus"))})));break;}}while((_26=_26.nextSibling));break;}};YAHOO.widget.Menu.prototype._onElementMouseOver=function(_27,_28){this._oEventUtil.stopPropagation(_27);var _29=this._oEventUtil.getTarget(_27,true);if((_29==this.element||this._oDom.isAncestor(this.element,_29))&&!this._bFiredMouseOverEvent){this.mouseOverEvent.fire(_27);this._bFiredMouseOverEvent=true;this._bFiredMouseOutEvent=false;}if(!this._oCurrentMenuItem){var _2a=_29;do{if(_2a&&_2a.tagName=="LI"&&_2a.parentNode.parentNode.parentNode==this.element){var _2b=parseInt(_2a.getAttribute("groupindex"),10),nIndex=parseInt(_2a.getAttribute("index"),10),oMenuItem=this._aMenuItemGroups[_2b][nIndex];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){this._oCurrentMenuItem=oMenuItem;oMenuItem.mouseOverEvent.fire(_27);if(this.activeMenuItem&&this.activeMenuItem!=oMenuItem){if(this.activeMenuItem.cfg.getProperty("selected")){this.activeMenuItem.cfg.setProperty("selected",false);}}oMenuItem.cfg.setProperty("selected",true);oMenuItem.focus();}break;}}while((_2a=_2a.parentNode));}};YAHOO.widget.Menu.prototype._onElementMouseOut=function(_2c,_2d){this._oEventUtil.stopPropagation(_2c);var _2e=this._oEventUtil.getRelatedTarget(_2c);var _2f=true;var _30=false;if(this._oCurrentMenuItem&&_2e){if(_2e==this._oCurrentMenuItem.element||this._oDom.isAncestor(this._oCurrentMenuItem.element,_2e)){_2f=false;}var _31=this._oCurrentMenuItem.cfg.getProperty("submenu");if(_31&&(_2e==_31.element||this._oDom.isAncestor(_31.element,_2e))){_30=true;}}if(this._oCurrentMenuItem&&(_2f||_30)){this._oCurrentMenuItem.mouseOutEvent.fire(_2c);this._oCurrentMenuItem.cfg.setProperty("selected",false);this._oCurrentMenuItem=null;}if(!this._bFiredMouseOutEvent&&(!this._oDom.isAncestor(this.element,_2e)||_30)){this.mouseOutEvent.fire(_2c);this._bFiredMouseOutEvent=true;this._bFiredMouseOverEvent=false;}};YAHOO.widget.Menu.prototype._onElementMouseDown=function(_32,_33){this._oEventUtil.stopPropagation(_32);var _34=this._oEventUtil.getTarget(_32,true),oNode=_34;do{if(oNode&&oNode.tagName=="LI"&&oNode.parentNode.parentNode.parentNode==this.element){var _35=parseInt(oNode.getAttribute("groupindex"),10),nIndex=parseInt(oNode.getAttribute("index"),10),oMenuItem=this._aMenuItemGroups[_35][nIndex];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem.mouseDownEvent.fire(_32);}break;}}while((oNode=oNode.parentNode));this.mouseDownEvent.fire(_32);};YAHOO.widget.Menu.prototype._onElementMouseUp=function(_36,_37){this._oEventUtil.stopPropagation(_36);var _38=this._oEventUtil.getTarget(_36,true),oNode=_38;do{if(oNode&&oNode.tagName=="LI"&&oNode.parentNode.parentNode.parentNode==this.element){var _39=parseInt(oNode.getAttribute("groupindex"),10),nIndex=parseInt(oNode.getAttribute("index"),10),oMenuItem=this._aMenuItemGroups[_39][nIndex];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem.mouseUpEvent.fire(_36);}break;}}while((oNode=oNode.parentNode));this.mouseUpEvent.fire(_36);};YAHOO.widget.Menu.prototype._onElementClick=function(_3a,_3b){var _3c=this._oEventUtil.getTarget(_3a,true);if(_3c.tagName!="A"||(_3c.tagName=="A"&&_3c.getAttribute("href")=="#")){this._oEventUtil.stopPropagation(_3a);}var _3d=_3c;do{if(_3d&&_3d.tagName=="LI"&&_3d.parentNode.parentNode.parentNode==this.element){var _3e=parseInt(_3d.getAttribute("groupindex"),10),nIndex=parseInt(_3d.getAttribute("index"),10),oMenuItem=this._aMenuItemGroups[_3e][nIndex];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem.clickEvent.fire(_3a);var _3f=oMenuItem.cfg.getProperty("url");if(_3c.tagName=="A"&&_3f&&_3f.substr((_3f.length-1),1)=="#"){this._oEventUtil.preventDefault(_3a);}else{var _40=oMenuItem.cfg.getProperty("submenu");if(_3c==oMenuItem.subMenuIndicator&&_40){if(_40.cfg.getProperty("visible")){_40.hide();oMenuItem.focus();}else{oMenuItem.cfg.setProperty("selected",true);_40.show();_40.setInitialSelection();_40.setInitialFocus();}}else{if(_3f&&_3f.substr((_3f.length-1),1)!="#"){document.location=_3f;}}}}break;}}while((_3d=_3d.parentNode));this.clickEvent.fire(_3a);};YAHOO.widget.Menu.prototype._onElementKeyDown=function(_41,_42){this._oEventUtil.stopPropagation(_41);var _43=this._oEventUtil.getTarget(_41,true);if(_43.tagName=="A"&&_43.parentNode.parentNode.parentNode.parentNode==this.element){var _44=parseInt(_43.parentNode.getAttribute("groupindex"),10),nIndex=parseInt(_43.parentNode.getAttribute("index"),10),oMenuItem=this._aMenuItemGroups[_44][nIndex];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem.keyDownEvent.fire(_41);}}this.keyDownEvent.fire(_41);};YAHOO.widget.Menu.prototype._onElementKeyUp=function(_45,_46){this._oEventUtil.stopPropagation(_45);var _47=this._oEventUtil.getTarget(_45,true);if(_47.tagName=="A"&&_47.parentNode.parentNode.parentNode.parentNode==this.element){var _48=parseInt(_47.parentNode.getAttribute("groupindex"),10),nIndex=parseInt(_47.parentNode.getAttribute("index"),10),oMenuItem=this._aMenuItemGroups[_48][nIndex];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem.keyUpEvent.fire(_45);}}this.keyUpEvent.fire(_45);};YAHOO.widget.Menu.prototype._onElementKeyPress=function(_49,_4a){this._oEventUtil.stopPropagation(_49);var _4b=this._oEventUtil.getTarget(_49,true);if(_4b.tagName=="A"&&_4b.parentNode.parentNode.parentNode.parentNode==this.element){var _4c=parseInt(_4b.parentNode.getAttribute("groupindex"),10),nIndex=parseInt(_4b.parentNode.getAttribute("index"),10),oMenuItem=this._aMenuItemGroups[_4c][nIndex];if(oMenuItem&&!oMenuItem.cfg.getProperty("disabled")){oMenuItem.keyPressEvent.fire(_49);}}this.keyPressEvent.fire(_49);};YAHOO.widget.Menu.prototype._onRender=function(_4d,_4e,_4f){_4f.render(_4f.parent.element);};YAHOO.widget.Menu.prototype._onMenuItemFocus=function(_50,_51,_52){var me=_52[0],oMenuItem=_52[1];me.activeMenuItem=oMenuItem;};YAHOO.widget.Menu.prototype._onMenuItemBlur=function(_54,_55,_56){var me=_56[0],oMenuItem=_56[1],oSubmenu=oMenuItem.cfg.getProperty("submenu");if(!oSubmenu||(oSubmenu&&!oSubmenu.cfg.getProperty("visible"))){me.activeMenuItem=null;}};YAHOO.widget.Menu.prototype._onMenuItemConfigChange=function(_58,_59,_5a){var _5b=_59[0][0],me=_5a[0],oMenuItem=_5a[1];switch(_5b){case "submenu":var _5c=_59[0][1];if(_5c){me._subscribeSubMenuToRenderEvent(oMenuItem);}break;case "text":case "helptext":if(me.element.style.width){var _5d=me.element.cloneNode(true);me._oDom.setStyle(_5d,"width","");document.body.appendChild(_5d);var _5e=_5d.offsetWidth+"px";me._oDom.setStyle(me.element,"width",_5e);document.body.removeChild(_5d);}break;}};YAHOO.widget.Menu.prototype.addMenuItem=function(_5f,_60){if(_5f&&_5f instanceof YAHOO.widget.MenuItem){return this._addMenuItemToGroup(_60,_5f);}};YAHOO.widget.Menu.prototype.insertMenuItem=function(_61,_62,_63){if(_61&&_61 instanceof YAHOO.widget.MenuItem){return this._addMenuItemToGroup(_63,_61,_62);}};YAHOO.widget.Menu.prototype.removeMenuItem=function(_64,_65){if(typeof _64!="undefined"){var _66;if(_64 instanceof YAHOO.widget.MenuItem){_66=this._removeMenuItemFromGroupByValue(_65,_64);}else{if(typeof _64=="number"){_66=this._removeMenuItemFromGroupByIndex(_65,_64);}}if(_66){_66.destroy();return _66;}}};YAHOO.widget.Menu.prototype.getMenuItemGroups=function(){return this._aMenuItemGroups;};YAHOO.widget.Menu.prototype.getMenuItem=function(_67,_68){if(typeof _67=="number"){var _69=this._getMenuItemGroup(_68);if(_69){return _69[_67];}}};YAHOO.widget.Menu.prototype.render=function(_6a,_6b){this.beforeRenderEvent.fire();var _6c=this._aListElements.length;if(_6c>0){var i=0,bFirstList=true;do{if(this._aListElements[i]){if(bFirstList){this._oDom.addClass(this._aListElements[i],"first");bFirstList=false;}if(!this._aListElements[i].parentNode||(this._aListElements[i].parentNode&&this._aListElements[i].parentNode.nodeType==11)){this.appendToBody(this._aListElements[i]);}}i++;}while(i<_6c);}if((!this.childNodesInDOM[0])&&this.header){var _6e=this.element.firstChild;if(_6e){this.element.insertBefore(this.header,_6e);}else{this.element.appendChild(this.header);}}if((!this.childNodesInDOM[1])&&this.body){if(this.childNodesInDOM[2]){this.element.insertBefore(this.body,this.childNodesInDOM[2]);}else{this.element.appendChild(this.body);}}if((!this.childNodesInDOM[2])&&this.footer){this.element.appendChild(this.footer);}var me=this;function appendTo(_70){if(typeof _70=="string"){_70=document.getElementById(_70);}if(_70){_70.appendChild(me.element);me.appendEvent.fire();}}if(_6a){if(typeof _6a=="string"){el=document.getElementById(el);if(!el){el=document.createElement("DIV");el.id=elId;}}var _71=[];if(this.browser=="opera"){var _72=this._aMenuItemGroups.length;if(_72>0){var i=_72-1,nMenuItems,n,oImg,oLI;do{if(this._aMenuItemGroups[i]){nMenuItems=this._aMenuItemGroups[i].length;if(nMenuItems>0){n=nMenuItems-1;do{oImg=this._aMenuItemGroups[i][n].subMenuIndicator;oLI=this._aMenuItemGroups[i][n].element;if(this._aMenuItemGroups[i][n]&&oImg){this._oDom.removeClass(oLI,"hasusbmenu");oLI.removeChild(oImg);_71[_71.length]=[oLI,oImg];}}while(n--);}}}while(i--);}}if(_6a.tagName!="BODY"||this.browser=="opera"){document.body.appendChild(this.element);var _73=this.element.offsetWidth+"px";this.cfg.setProperty("width",_73);}appendTo(_6a);if(_71.length>0){var i=_71.length-1;do{this._oDom.addClass(_71[i][0],"hassubmenu");_71[i][0].insertBefore(_71[i][1],_71[i][0].lastChild);}while(i--);}}else{if(!YAHOO.util.Dom._elementInDom(this.element)){return false;}}if(this.srcElement&&this.srcElement.tagName!="DIV"){if(_6b){this.srcElement.style.display="none";}else{var _74=this.srcElement.parentNode;_74.removeChild(this.srcElement);}}this.cfg.fireDeferredEvents();this.renderEvent.fire();return true;};YAHOO.widget.Menu.prototype.destroy=function(){this._oEventUtil.removeListener(this.element,"mouseover",this._onElementMouseOver);this._oEventUtil.removeListener(this.element,"mouseout",this._onElementMouseOut);this._oEventUtil.removeListener(this.element,"mousedown",this._onElementMouseDown);this._oEventUtil.removeListener(this.element,"mouseup",this._onElementMouseUp);this._oEventUtil.removeListener(this.element,"click",this._onElementClick);this._oEventUtil.removeListener(this.element,"keydown",this._onElementKeyDown);this._oEventUtil.removeListener(this.element,"keyup",this._onElementKeyUp);this._oEventUtil.removeListener(this.element,"keypress",this._onElementKeyPress);this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.beforeMoveEvent.unsubscribeAll();var _75=this._aMenuItemGroups.length,nMenuItems,i,n;if(_75>0){i=_75-1;do{if(this._aMenuItemGroups[i]){nMenuItems=this._aMenuItemGroups[i].length;if(nMenuItems>0){n=nMenuItems-1;do{if(this._aMenuItemGroups[i][n]){this._aMenuItemGroups[i][n].destroy();}}while(n--);}}}while(i--);}YAHOO.widget.Menu.superclass.destroy.call(this);};YAHOO.widget.Menu.prototype.enforceConstraints=function(_76,_77,obj){var pos=_77[0];var bod=document.getElementsByTagName("body")[0];var htm=document.getElementsByTagName("html")[0];var _7c=YAHOO.util.Dom.getStyle(bod,"overflow");var _7d=YAHOO.util.Dom.getStyle(htm,"overflow");var x=pos[0];var y=pos[1];var _80=this.element.offsetHeight;var _81=this.element.offsetWidth;var _82=YAHOO.util.Dom.getClientWidth();var _83=YAHOO.util.Dom.getClientHeight();var _84=window.scrollX||document.body.scrollLeft;var _85=window.scrollY||document.body.scrollTop;var _86=_85+10;var _87=_84+10;var _88=_85+_83-_80-10;var _89=_84+_82-_81-10;if(x<10){x=_87;}else{if((x+_81)>_82){if(this.parent&&((x-this.parent.element.offsetWidth)>_81)){x=(x-(this.parent.element.offsetWidth+_81));}else{x=_89;}}}if(y<10){y=_86;}else{if(y>_88){if(this.parent&&(y>_80)){y=((y+this.parent.element.offsetHeight)-_80);}else{y=_88;}}}this.cfg.setProperty("x",x,true);this.cfg.setProperty("y",y,true);};YAHOO.widget.Menu.prototype.initDefaultConfig=function(){YAHOO.widget.Menu.superclass.initDefaultConfig.call(this);this.cfg.addProperty("initsubmenus",true);};YAHOO.widget.Menu.prototype.setInitialFocus=function(){var _8a=this._aMenuItemGroups[0][0];if(_8a){if(_8a.cfg.getProperty("disabled")){_8a=_8a.getNextEnabledSibling();}_8a.focus();}};YAHOO.widget.Menu.prototype.setInitialSelection=function(){var _8b=this._aMenuItemGroups[0][0];if(_8b){if(_8b.cfg.getProperty("disabled")){_8b=_8b.getNextEnabledSibling();}_8b.cfg.setProperty("selected",true);}};YAHOO.widget.Menu.prototype.configIframe=function(_8c,_8d,_8e){YAHOO.widget.Menu.superclass.configIframe.call(this,_8c,_8d,_8e);var _8f=this._oDom.getStyle(this.element,"position");if(this.iframe&&(_8f=="static"||_8f=="relative")){this.iframe.style.display="none";}};YAHOO.widget.Menu.prototype.configVisible=function(_90,_91,_92){var _93=_91[0];if(_93){if(this.parent){var _94=this.parent.parent;var _95=_94.cfg.getProperty("constraintoviewport");this.cfg.setProperty("constraintoviewport",_95);this.parent.subMenuIndicator.alt=this.parent.EXPANDED_SUBMENU_INDICATOR_ALT_TEXT;}YAHOO.widget.Menu.superclass.configVisible.call(this,_90,_91,_92);}else{YAHOO.widget.Menu.superclass.configVisible.call(this,_90,_91,_92);if(this.parent){this.parent.subMenuIndicator.alt=this.parent.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;}if(this.activeMenuItem){if(this.activeMenuItem.cfg.getProperty("selected")){this.activeMenuItem.cfg.setProperty("selected",false);}var _96=this.activeMenuItem.cfg.getProperty("submenu");if(_96&&_96.cfg.getProperty("visible")){_96.hide();}}}};YAHOO.widget.MenuItem=function(_97,_98){if(_97){this.init(_97,_98);}};YAHOO.widget.MenuItem.prototype={SUBMENU_INDICATOR_IMAGE_URL:"http://us.i1.yimg.com/us.yimg.com/i/nt/ic/ut/alt1/menuarorght9_nrm_1.gif",SELECTED_SUBMENU_INDICATOR_IMAGE_URL:"http://us.i1.yimg.com/us.yimg.com/i/nt/ic/ut/alt1/menuarorght9_hov_1.gif",DISABLED_SUBMENU_INDICATOR_IMAGE_URL:"http://us.i1.yimg.com/us.yimg.com/i/nt/ic/ut/alt1/menuarorght9_dim_1.gif",COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT:"Collapsed.  Click to expand.",EXPANDED_SUBMENU_INDICATOR_ALT_TEXT:"Expanded.  Click to collapse.",DISABLED_SUBMENU_INDICATOR_ALT_TEXT:"Disabled.",CSS_CLASS_NAME:"yuimenuitem",SUBMENU_TYPE:null,_oAnchor:null,_oText:null,_oHelpTextEM:null,_oSubmenu:null,_oDom:YAHOO.util.Dom,constructor:YAHOO.widget.MenuItem,index:null,groupIndex:null,parent:null,element:null,srcElement:null,value:null,subMenuIndicator:null,destroyEvent:null,mouseOverEvent:null,mouseOutEvent:null,mouseDownEvent:null,mouseUpEvent:null,clickEvent:null,keyPressEvent:null,keyDownEvent:null,keyUpEvent:null,focusEvent:null,blurEvent:null,init:function(_99,_9a){if(!this.SUBMENU_TYPE){this.SUBMENU_TYPE=YAHOO.widget.Menu;}this.cfg=new YAHOO.util.Config(this);this.cfg.addProperty("text",null,this.configText,this._checkString);this.cfg.addProperty("helptext",null,this.configHelpText);this.cfg.addProperty("url","#",this.configURL);this.cfg.addProperty("emphasis",false,this.configEmphasis,this.cfg.checkBoolean);this.cfg.addProperty("strongemphasis",false,this.configStrongEmphasis,this.cfg.checkBoolean);this.cfg.addProperty("disabled",false,this.configDisabled,this.cfg.checkBoolean);this.cfg.addProperty("selected",false,this.configSelected,this.cfg.checkBoolean);this.cfg.addProperty("submenu",null,this.configSubmenu);this.cfg.addProperty("initsubmenus",((_9a&&(!_9a.initsubmenus))?false:true));if(this._checkString(_99)){this._createRootNodeStructure();this.cfg.setProperty("text",_99);}else{if(this._checkDOMNode(_99)){switch(_99.tagName){case "OPTION":this._createRootNodeStructure();this.cfg.setProperty("text",_99.text);this.cfg.setProperty("value",_99.value);this.srcElement=_99;if(_99.disabled||_99.parentNode.disabled){this.cfg.setProperty("disabled",true);}if(_99.selected){this.cfg.setProperty("selected",true);}break;case "OPTGROUP":this._createRootNodeStructure();this.cfg.setProperty("text",_99.label);this.srcElement=_99;if(_99.disabled||_99.parentNode.disabled){this.cfg.setProperty("disabled",true);}if(this.cfg.getProperty("initsubmenus")){this._initSubTree();}break;case "LI":var _9b=null,sURL=null,sText=null;if(_99.firstChild&&_99.firstChild.nodeType==1&&_99.firstChild.tagName=="A"){_9b=_99.firstChild;}else{if(_99.childNodes[1]&&_99.childNodes[1].nodeType==1&&_99.childNodes[1].tagName=="A"){_9b=_99.childNodes[1];}}if(_9b){sURL=_9b.getAttribute("href");if(sURL==document.location){sURL="#";}if(_9b.innerText){sText=_9b.innerText;}else{var _9c=_9b.ownerDocument.createRange();_9c.selectNodeContents(_9b);sText=_9c.toString();}}else{sText=_99.firstChild.nodeValue;}this.srcElement=_99;this.element=_99;this._oAnchor=_9b;var _9d=this._oDom.hasClass(this.element,"disabled");var _9e=this._oDom.hasClass(this.element,"selected");var _9f;if(_9b.firstChild&&_9b.firstChild.nodeType==1){_9f=_9b.firstChild;}else{if(_9b.childNodes[1]&&_9b.childNodes[1].nodeType==1){_9f=_9b.childNodes[1];}}var _a0=false,bStrongEmphasis=false;if(_9f){this._oText=_9f.firstChild;switch(_9f.tagName){case "EM":_a0=true;break;case "STRONG":bStrongEmphasis=true;break;}}else{this._oText=_9b.firstChild;}var _a1=null;if(_9b.nextSibling&&_9b.nextSibling.nodeType==1&&_9b.nextSibling.tagName=="EM"){_a1=_9b.nextSibling;}else{if(_9b.nextSibling&&_9b.nextSibling.nextSibling&&_9b.nextSibling.nextSibling.nodeType==1&&_9b.nextSibling.nextSibling.tagName=="EM"){_a1=_9b.nextSibling.nextSibling;}}if(_a1){this._oHelpTextEM=_a1;this._oDom.addClass(this.element,"hashelptext");this._oDom.addClass(_9b,"hashelptext");}else{this._oDom.removeClass(this.element,"hashelptext");this._oDom.removeClass(_9b,"hashelptext");}this.cfg.setProperty("text",sText,true);this.cfg.setProperty("helptext",_a1,true);this.cfg.setProperty("url",sURL,true);this.cfg.setProperty("emphasis",_a0,true);this.cfg.setProperty("strongemphasis",bStrongEmphasis,true);this.cfg.setProperty("selected",_9e);this.cfg.setProperty("disabled",_9d);if(this.cfg.getProperty("initsubmenus")){this._initSubTree();}break;}}}if(this.element){this._oDom.addClass(this.element,this.CSS_CLASS_NAME);var _a2=YAHOO.util.CustomEvent;this.destroyEvent=new _a2("destroyEvent",this);this.mouseOverEvent=new _a2("mouseOverEvent",this);this.mouseOutEvent=new _a2("mouseOutEvent",this);this.mouseDownEvent=new _a2("mouseDownEvent",this);this.mouseUpEvent=new _a2("mouseUpEvent",this);this.clickEvent=new _a2("clickEvent",this);this.keyPressEvent=new _a2("keyPressEvent",this);this.keyDownEvent=new _a2("keyDownEvent",this);this.keyUpEvent=new _a2("keyUpEvent",this);this.focusEvent=new _a2("focusEvent",this);this.blurEvent=new _a2("blurEvent",this);if(_9a){this.cfg.applyConfig(_9a);}}},_checkString:function(_a3){return (typeof _a3=="string");},_checkDOMNode:function(_a4){return (_a4&&_a4.tagName);},_createRootNodeStructure:function(){this.element=document.createElement("li");this._oText=document.createTextNode("");this._oAnchor=document.createElement("a");this._oAnchor.appendChild(this._oText);this.cfg.refireEvent("url");this.element.appendChild(this._oAnchor);},_initSubTree:function(){var _a5=this.SUBMENU_TYPE,MenuItem=_a5.MENUITEM_TYPE;if(this.srcElement.childNodes.length>0){var _a6=this.srcElement.firstChild,aOptions=[];do{switch(_a6.tagName){case "DIV":this.cfg.setProperty("submenu",(new _a5(_a6)));break;case "OPTION":aOptions[aOptions.length]=_a6;break;}}while((_a6=_a6.nextSibling));var _a7=aOptions.length;if(_a7>0){this.cfg.setProperty("submenu",(new _a5(this._oDom.generateId())));for(var n=0;n<_a7;n++){this._oSubmenu.addMenuItem((new MenuItem(aOptions[n])));}}}},configText:function(_a9,_aa,_ab){var _ac=_aa[0];if(this._oText){this._oText.nodeValue=_ac;}},configHelpText:function(_ad,_ae,_af){var _b0=_ae[0];var me=this;function initHelpText(){me._oDom.addClass(me.element,"hashelptext");me._oDom.addClass(me._oAnchor,"hashelptext");if(me.cfg.getProperty("disabled")){me.cfg.refireEvent("disabled");}if(me.cfg.getProperty("selected")){me.cfg.refireEvent("selected");}}function removeHelpText(){me._oDom.removeClass(me.element,"hashelptext");me._oDom.removeClass(me._oAnchor,"hashelptext");me.element.removeChild(me._oHelpTextEM);me._oHelpTextEM=null;}if(this._checkDOMNode(_b0)){if(this._oHelpTextEM){var _b2=this._oHelpTextEM.parentNode;_b2.replaceChild(_b0,this._oHelpTextEM);}else{this._oHelpTextEM=_b0;this.element.insertBefore(this._oHelpTextEM,this.subMenuIndicator);}initHelpText();}else{if(this._checkString(_b0)){if(_b0.length===0){removeHelpText();}else{if(!this._oHelpTextEM){this._oHelpTextEM=document.createElement("em");this.element.insertBefore(this._oHelpTextEM,this.subMenuIndicator);}this._oHelpTextEM.innerHTML=_b0;initHelpText();}}else{if(!_b0&&this._oHelpTextEM){removeHelpText();}}}},configURL:function(_b3,_b4,_b5){var _b6=_b4[0];if(!_b6){_b6="#";}this._oAnchor.setAttribute("href",_b6);},configEmphasis:function(_b7,_b8,_b9){var _ba=_b8[0];if(_ba&&this.cfg.getProperty("strongemphasis")){this.cfg.setProperty("strongemphasis",false);}if(this._oAnchor){var oEM;if(_ba){oEM=document.createElement("em");oEM.appendChild(this._oText);this._oAnchor.appendChild(oEM);}else{if(this._oAnchor.firstChild&&this._oAnchor.firstChild.nodeType==1&&this._oAnchor.firstChild.tagName=="EM"){oEM=this._oAnchor.firstChild;}else{if(this._oAnchor.childNodes[1]&&this._oAnchor.childNodes[1].nodeType==1&&this._oAnchor.childNodes[1].tagName=="EM"){oEM=this._oAnchor.childNodes[1];}}this._oAnchor.removeChild(oEM);this._oAnchor.appendChild(this._oText);}}},configStrongEmphasis:function(_bc,_bd,_be){var _bf=_bd[0];if(_bf&&this.cfg.getProperty("emphasis")){this.cfg.setProperty("emphasis",false);}if(this._oAnchor){var _c0;if(_bf){_c0=document.createElement("strong");_c0.appendChild(this._oText);this._oAnchor.appendChild(_c0);}else{if(this._oAnchor.firstChild&&this._oAnchor.firstChild.nodeType==1&&this._oAnchor.firstChild.tagName=="STRONG"){_c0=this._oAnchor.firstChild;}else{if(this._oAnchor.childNodes[1]&&this._oAnchor.childNodes[1].nodeType==1&&this._oAnchor.childNodes[1].tagName=="STRONG"){_c0=this._oAnchor.childNodes[1];}}this._oAnchor.removeChild(_c0);this._oAnchor.appendChild(this._oText);}}},configDisabled:function(_c1,_c2,_c3){var _c4=_c2[0];if(_c4){this.cfg.setProperty("selected",false);this._oAnchor.removeAttribute("href");this._oAnchor.removeAttribute("tabIndex");this._oDom.addClass(this.element,"disabled");this._oDom.addClass(this._oAnchor,"disabled");if(this._oHelpTextEM){this._oDom.addClass(this._oHelpTextEM,"disabled");}if(this.subMenuIndicator){this.subMenuIndicator.src=document.getElementById("yuidisabledsubmenuindicator").src;this.subMenuIndicator.alt=this.DISABLED_SUBMENU_INDICATOR_ALT_TEXT;}}else{this._oAnchor.setAttribute("href",this.cfg.getProperty("url"));this._oAnchor.setAttribute("tabIndex",0);this._oDom.removeClass(this.element,"disabled");this._oDom.removeClass(this._oAnchor,"disabled");if(this._oHelpTextEM){this._oDom.removeClass(this._oHelpTextEM,"disabled");}if(this.subMenuIndicator){this.subMenuIndicator.src=this.SUBMENU_INDICATOR_IMAGE_URL;this.subMenuIndicator.alt=this.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;}}},configSelected:function(_c5,_c6,_c7){var _c8=_c6[0];if(_c8){this._oDom.addClass(this.element,"selected");this._oDom.addClass(this._oAnchor,"selected");if(this._oHelpTextEM){this._oDom.addClass(this._oHelpTextEM,"selected");}if(this.subMenuIndicator){this.subMenuIndicator.src=document.getElementById("yuiselectedsubmenuindicator").src;}}else{this._oDom.removeClass(this.element,"selected");this._oDom.removeClass(this._oAnchor,"selected");if(this._oHelpTextEM){this._oDom.removeClass(this._oHelpTextEM,"selected");}if(this.subMenuIndicator){this.subMenuIndicator.src=document.getElementById("yuisubmenuindicator").src;}}},configSubmenu:function(_c9,_ca,_cb){var _cc=_ca[0];if(_cc){_cc.parent=this;this._oSubmenu=_cc;this._oDom.addClass(this.element,"hassubmenu");this._oDom.addClass(this._oAnchor,"hassubmenu");if(!this.subMenuIndicator){var _cd=document.getElementById("yuisubmenuindicator");if(!_cd){_cd=document.createElement("img");_cd.src=this.SUBMENU_INDICATOR_IMAGE_URL;_cd.alt=this.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;_cd.id="yuisubmenuindicator";var _ce=document.createElement("img");_ce.src=this.SELECTED_SUBMENU_INDICATOR_IMAGE_URL;_ce.id="yuiselectedsubmenuindicator";var _cf=document.createElement("img");_cf.src=this.DISABLED_SUBMENU_INDICATOR_IMAGE_URL;_cf.id="yuidisabledsubmenuindicator";var _d0=document.createElement("div");_d0.style.position="absolute";_d0.style.left="-1000px";_d0.appendChild(_cd);_d0.appendChild(_ce);_d0.appendChild(_cf);document.body.appendChild(_d0);}var _d1=_cd.cloneNode(false);_d1.removeAttribute("id");this.subMenuIndicator=_d1;this.element.appendChild(this.subMenuIndicator);if(this.cfg.getProperty("disabled")){this.cfg.refireEvent("disabled");}if(this.cfg.getProperty("selected")){this.cfg.refireEvent("selected");}}}else{this._oDom.removeClass(this.element,"hassubmenu");this._oDom.removeClass(this._oAnchor,"hassubmenu");if(this.subMenuIndicator){this.element.removeChild(this.subMenuIndicator);}if(this._oSubmenu){this._oSubmenu.destroy();}}},getNextEnabledSibling:function(){if(this.parent instanceof YAHOO.widget.Menu){function getNextArrayItem(_d2,_d3){return _d2[_d3]||getNextArrayItem(_d2,(_d3+1));}var _d4=this.parent.getMenuItemGroups(),oNextMenuItem;if(this.index<(_d4[this.groupIndex].length-1)){oNextMenuItem=getNextArrayItem(_d4[this.groupIndex],(this.index+1));}else{var _d5;if(this.groupIndex<(_d4.length-1)){_d5=this.groupIndex+1;}else{_d5=0;}var _d6=getNextArrayItem(_d4,_d5);oNextMenuItem=getNextArrayItem(_d6,0);}return oNextMenuItem.cfg.getProperty("disabled")?oNextMenuItem.getNextEnabledSibling():oNextMenuItem;}},getPreviousEnabledSibling:function(){if(this.parent instanceof YAHOO.widget.Menu){function getPreviousArrayItem(_d7,_d8){return _d7[_d8]||getPreviousArrayItem(_d7,(_d8-1));}function getFirstItemIndex(_d9,_da){return _d9[_da]?_da:getFirstItemIndex(_d9,(_da+1));}var _db=this.parent.getMenuItemGroups(),oPreviousMenuItem;if(this.index>getFirstItemIndex(_db[this.groupIndex],0)){oPreviousMenuItem=getPreviousArrayItem(_db[this.groupIndex],(this.index-1));}else{var _dc;if(this.groupIndex>getFirstItemIndex(_db,0)){_dc=this.groupIndex-1;}else{_dc=_db.length-1;}var _dd=getPreviousArrayItem(_db,_dc);oPreviousMenuItem=getPreviousArrayItem(_dd,(_dd.length-1));}return oPreviousMenuItem.cfg.getProperty("disabled")?oPreviousMenuItem.getPreviousEnabledSibling():oPreviousMenuItem;}},focus:function(){if(!this.cfg.getProperty("disabled")&&this.parent&&this.parent.cfg.getProperty("visible")){var _de=this.parent.activeMenuItem;if(_de){_de.blur();}this._oAnchor.focus();if(this.parent&&this.parent.browser=="opera"&&this._oSubmenu){this._oAnchor.focus();}this.focusEvent.fire();}},blur:function(){if(!this.cfg.getProperty("disabled")&&this.parent&&this.parent.cfg.getProperty("visible")){this._oAnchor.blur();this.blurEvent.fire();}},destroy:function(){if(this.element){this.mouseOverEvent.unsubscribeAll();this.mouseOutEvent.unsubscribeAll();this.mouseDownEvent.unsubscribeAll();this.mouseUpEvent.unsubscribeAll();this.clickEvent.unsubscribeAll();this.keyPressEvent.unsubscribeAll();this.keyDownEvent.unsubscribeAll();this.keyUpEvent.unsubscribeAll();this.focusEvent.unsubscribeAll();this.blurEvent.unsubscribeAll();this.cfg.configChangedEvent.unsubscribeAll();var _df=this.element.parentNode;if(_df){_df.removeChild(this.element);this.destroyEvent.fire();}this.destroyEvent.unsubscribeAll();}}};