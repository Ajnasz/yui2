YAHOO.widget.TreeView=function(M){if(M){this.init(M);}};YAHOO.widget.TreeView.prototype={id:null,_el:null,_nodes:null,locked:false,_expandAnim:null,_collapseAnim:null,_animCount:0,maxAnim:2,setExpandAnim:function(M){if(YAHOO.widget.TVAnim.isValid(M)){this._expandAnim=M;}},setCollapseAnim:function(M){if(YAHOO.widget.TVAnim.isValid(M)){this._collapseAnim=M;}},animateExpand:function(F,f){if(this._expandAnim&&this._animCount<this.maxAnim){var M=this;var q=YAHOO.widget.TVAnim.getAnim(this._expandAnim,F,function(){M.expandComplete(f);});if(q){++this._animCount;this.fireEvent("animStart",{"node":f,"type":"expand"});q.animate();}return true;}return false;},animateCollapse:function(F,f){if(this._collapseAnim&&this._animCount<this.maxAnim){var M=this;var q=YAHOO.widget.TVAnim.getAnim(this._collapseAnim,F,function(){M.collapseComplete(f);});if(q){++this._animCount;this.fireEvent("animStart",{"node":f,"type":"collapse"});q.animate();}return true;}return false;},expandComplete:function(M){--this._animCount;this.fireEvent("animComplete",{"node":M,"type":"expand"});},collapseComplete:function(M){--this._animCount;this.fireEvent("animComplete",{"node":M,"type":"collapse"});},init:function(q){this.id=q;if("string"!==typeof q){this._el=q;this.id=this.generateId(q);}this.createEvent("animStart",this);this.createEvent("animComplete",this);this.createEvent("collapse",this);this.createEvent("collapseComplete",this);this.createEvent("expand",this);this.createEvent("expandComplete",this);this._nodes=[];YAHOO.widget.TreeView.trees[this.id]=this;this.root=new YAHOO.widget.RootNode(this);var M=YAHOO.widget.LogWriter;},draw:function(){var M=this.root.getHtml();this.getEl().innerHTML=M;this.firstDraw=false;},getEl:function(){if(!this._el){this._el=document.getElementById(this.id);}return this._el;},regNode:function(M){this._nodes[M.index]=M;},getRoot:function(){return this.root;},setDynamicLoad:function(M,q){this.root.setDynamicLoad(M,q);},expandAll:function(){if(!this.locked){this.root.expandAll();}},collapseAll:function(){if(!this.locked){this.root.collapseAll();}},getNodeByIndex:function(q){var M=this._nodes[q];return (M)?M:null;},getNodeByProperty:function(F,q){for(var M in this._nodes){var f=this._nodes[M];if(f.data&&q==f.data[F]){return f;}}return null;},getNodesByProperty:function(f,F){var M=[];for(var q in this._nodes){var J=this._nodes[q];if(J.data&&F==J.data[f]){M.push(J);}}return (M.length)?M:null;},removeNode:function(q,M){if(q.isRoot()){return false;}var F=q.parent;if(F.parent){F=F.parent;}this._deleteNode(q);if(M&&F&&F.childrenRendered){F.refresh();}return true;},_removeChildren_animComplete:function(M){this.unsubscribe(this._removeChildren_animComplete);this.removeChildren(M.node);},removeChildren:function(M){if(M.expanded){if(this._collapseAnim){this.subscribe("animComplete",this._removeChildren_animComplete,this,true);M.collapse();return ;}M.collapse();}while(M.children.length){this._deleteNode(M.children[0]);}M.childrenRendered=false;M.dynamicLoadComplete=false;M.updateIcon();},_deleteNode:function(M){this.removeChildren(M);this.popNode(M);},popNode:function(f){var J=f.parent;var q=[];for(var F=0,M=J.children.length;F<M;++F){if(J.children[F]!=f){q[q.length]=J.children[F];}}J.children=q;J.childrenRendered=false;if(f.previousSibling){f.previousSibling.nextSibling=f.nextSibling;}if(f.nextSibling){f.nextSibling.previousSibling=f.previousSibling;}f.parent=null;f.previousSibling=null;f.nextSibling=null;f.tree=null;delete this._nodes[f.index];},toString:function(){return "TreeView "+this.id;},generateId:function(M){var q=M.id;if(!q){q="yui-tv-auto-id-"+YAHOO.widget.TreeView.counter;++YAHOO.widget.TreeView.counter;}return q;},onExpand:function(M){},onCollapse:function(M){}};YAHOO.augment(YAHOO.widget.TreeView,YAHOO.util.EventProvider);YAHOO.widget.TreeView.nodeCount=0;YAHOO.widget.TreeView.trees=[];YAHOO.widget.TreeView.counter=0;YAHOO.widget.TreeView.getTree=function(q){var M=YAHOO.widget.TreeView.trees[q];return (M)?M:null;};YAHOO.widget.TreeView.getNode=function(q,F){var M=YAHOO.widget.TreeView.getTree(q);return (M)?M.getNodeByIndex(F):null;};YAHOO.widget.TreeView.addHandler=function(q,F,M){if(q.addEventListener){q.addEventListener(F,M,false);}else{if(q.attachEvent){q.attachEvent("on"+F,M);}}};YAHOO.widget.TreeView.removeHandler=function(q,F,M){if(q.removeEventListener){q.removeEventListener(F,M,false);}else{if(q.detachEvent){q.detachEvent("on"+F,M);}}};YAHOO.widget.TreeView.preload=function(A,v){v=v||"ygtv";var F=["tn","tm","tmh","tp","tph","ln","lm","lmh","lp","lph","loading"];var X=[];for(var M=1;M<F.length;M=M+1){X[X.length]="<span class=\""+v+F[M]+"\">&#160;</span>";}var J=document.createElement("div");var q=J.style;q.className=v+F[0];q.position="absolute";q.height="1px";q.width="1px";q.top="-1000px";q.left="-1000px";J.innerHTML=X.join("");document.body.appendChild(J);YAHOO.widget.TreeView.removeHandler(window,"load",YAHOO.widget.TreeView.preload);};YAHOO.widget.TreeView.addHandler(window,"load",YAHOO.widget.TreeView.preload);YAHOO.widget.Node=function(F,q,M){if(F){this.init(F,q,M);}};YAHOO.widget.Node.prototype={index:0,children:null,tree:null,data:null,parent:null,depth:-1,href:null,target:"_self",expanded:false,multiExpand:true,renderHidden:false,childrenRendered:false,dynamicLoadComplete:false,previousSibling:null,nextSibling:null,_dynLoad:false,dataLoader:null,isLoading:false,hasIcon:true,iconMode:0,nowrap:false,_type:"Node",init:function(F,q,M){this.data=F;this.children=[];this.index=YAHOO.widget.TreeView.nodeCount;++YAHOO.widget.TreeView.nodeCount;this.expanded=M;this.createEvent("parentChange",this);if(q){q.appendChild(this);}},applyParent:function(q){if(!q){return false;}this.tree=q.tree;this.parent=q;this.depth=q.depth+1;if(!this.href){this.href="javascript:"+this.getToggleLink();}this.tree.regNode(this);q.childrenRendered=false;for(var F=0,M=this.children.length;F<M;++F){this.children[F].applyParent(this);}this.fireEvent("parentChange");return true;},appendChild:function(q){if(this.hasChildren()){var M=this.children[this.children.length-1];M.nextSibling=q;q.previousSibling=M;}this.children[this.children.length]=q;q.applyParent(this);if(this.childrenRendered&&this.expanded){this.getChildrenEl().style.display="";}return q;},appendTo:function(M){return M.appendChild(this);},insertBefore:function(M){var F=M.parent;if(F){if(this.tree){this.tree.popNode(this);}var q=M.isChildOf(F);F.children.splice(q,0,this);if(M.previousSibling){M.previousSibling.nextSibling=this;}this.previousSibling=M.previousSibling;this.nextSibling=M;M.previousSibling=this;this.applyParent(F);}return this;},insertAfter:function(M){var F=M.parent;if(F){if(this.tree){this.tree.popNode(this);}var q=M.isChildOf(F);if(!M.nextSibling){this.nextSibling=null;return this.appendTo(F);}F.children.splice(q+1,0,this);M.nextSibling.previousSibling=this;this.previousSibling=M;this.nextSibling=M.nextSibling;M.nextSibling=this;this.applyParent(F);}return this;},isChildOf:function(q){if(q&&q.children){for(var F=0,M=q.children.length;F<M;++F){if(q.children[F]===this){return F;}}}return -1;},getSiblings:function(){return this.parent.children;},showChildren:function(){if(!this.tree.animateExpand(this.getChildrenEl(),this)){if(this.hasChildren()){this.getChildrenEl().style.display="";}}},hideChildren:function(){if(!this.tree.animateCollapse(this.getChildrenEl(),this)){this.getChildrenEl().style.display="none";}},getElId:function(){return "ygtv"+this.index;},getChildrenElId:function(){return "ygtvc"+this.index;},getToggleElId:function(){return "ygtvt"+this.index;},getEl:function(){return document.getElementById(this.getElId());},getChildrenEl:function(){return document.getElementById(this.getChildrenElId());},getToggleEl:function(){return document.getElementById(this.getToggleElId());},getToggleLink:function(){return "YAHOO.widget.TreeView.getNode('"+this.tree.id+"',"+this.index+").toggle()";},collapse:function(){if(!this.expanded){return ;}var M=this.tree.onCollapse(this);if(false===M){return ;}M=this.tree.fireEvent("collapse",this);if(false===M){return ;}if(!this.getEl()){this.expanded=false;}else{this.hideChildren();this.expanded=false;this.updateIcon();}M=this.tree.fireEvent("collapseComplete",this);},expand:function(F){if(this.expanded){return ;}var M=true;if(!F){M=this.tree.onExpand(this);if(false===M){return ;}M=this.tree.fireEvent("expand",this);}if(false===M){return ;}if(!this.getEl()){this.expanded=true;return ;}if(!this.childrenRendered){this.getChildrenEl().innerHTML=this.renderChildren();}else{}this.expanded=true;this.updateIcon();if(this.isLoading){this.expanded=false;return ;}if(!this.multiExpand){var f=this.getSiblings();for(var q=0;q<f.length;++q){if(f[q]!=this&&f[q].expanded){f[q].collapse();}}}this.showChildren();M=this.tree.fireEvent("expandComplete",this);},updateIcon:function(){if(this.hasIcon){var M=this.getToggleEl();if(M){M.className=this.getStyle();}}},getStyle:function(){if(this.isLoading){return "ygtvloading";}else{var q=(this.nextSibling)?"t":"l";var M="n";if(this.hasChildren(true)||(this.isDynamic()&&!this.getIconMode())){M=(this.expanded)?"m":"p";}return "ygtv"+q+M;}},getHoverStyle:function(){var M=this.getStyle();if(this.hasChildren(true)&&!this.isLoading){M+="h";}return M;},expandAll:function(){for(var M=0;M<this.children.length;++M){var q=this.children[M];if(q.isDynamic()){alert("Not supported (lazy load + expand all)");break;}else{if(!q.multiExpand){alert("Not supported (no multi-expand + expand all)");break;}else{q.expand();q.expandAll();}}}},collapseAll:function(){for(var M=0;M<this.children.length;++M){this.children[M].collapse();this.children[M].collapseAll();}},setDynamicLoad:function(M,q){if(M){this.dataLoader=M;this._dynLoad=true;}else{this.dataLoader=null;this._dynLoad=false;}if(q){this.iconMode=q;}},isRoot:function(){return (this==this.tree.root);},isDynamic:function(){var M=(!this.isRoot()&&(this._dynLoad||this.tree.root._dynLoad));return M;},getIconMode:function(){return (this.iconMode||this.tree.root.iconMode);},hasChildren:function(M){return (this.children.length>0||(M&&this.isDynamic()&&!this.dynamicLoadComplete));},toggle:function(){if(!this.tree.locked&&(this.hasChildren(true)||this.isDynamic())){if(this.expanded){this.collapse();}else{this.expand();}}},getHtml:function(){this.childrenRendered=false;var M=[];M[M.length]="<div class=\"ygtvitem\" id=\""+this.getElId()+"\">";M[M.length]=this.getNodeHtml();M[M.length]=this.getChildrenHtml();M[M.length]="</div>";return M.join("");},getChildrenHtml:function(){var M=[];M[M.length]="<div class=\"ygtvchildren\"";M[M.length]=" id=\""+this.getChildrenElId()+"\"";if(!this.expanded||!this.hasChildren()){M[M.length]=" style=\"display:none;\"";}M[M.length]=">";if((this.hasChildren(true)&&this.expanded)||(this.renderHidden&&!this.isDynamic())){M[M.length]=this.renderChildren();}M[M.length]="</div>";return M.join("");},renderChildren:function(){var M=this;if(this.isDynamic()&&!this.dynamicLoadComplete){this.isLoading=true;this.tree.locked=true;if(this.dataLoader){setTimeout(function(){M.dataLoader(M,function(){M.loadComplete();});},10);}else{if(this.tree.root.dataLoader){setTimeout(function(){M.tree.root.dataLoader(M,function(){M.loadComplete();});},10);}else{return "Error: data loader not found or not specified.";}}return "";}else{return this.completeRender();}},completeRender:function(){var q=[];for(var M=0;M<this.children.length;++M){q[q.length]=this.children[M].getHtml();}this.childrenRendered=true;return q.join("");},loadComplete:function(){this.getChildrenEl().innerHTML=this.completeRender();this.dynamicLoadComplete=true;this.isLoading=false;this.expand(true);this.tree.locked=false;},getAncestor:function(q){if(q>=this.depth||q<0){return null;}var M=this.parent;while(M.depth>q){M=M.parent;}return M;},getDepthStyle:function(M){return (this.getAncestor(M).nextSibling)?"ygtvdepthcell":"ygtvblankdepthcell";},getNodeHtml:function(){return "";},refresh:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.hasIcon){var M=this.getToggleEl();if(M){M.className=this.getStyle();}}},toString:function(){return "Node ("+this.index+")";}};YAHOO.augment(YAHOO.widget.Node,YAHOO.util.EventProvider);YAHOO.widget.TextNode=function(F,q,M){if(F){this.init(F,q,M);this.setUpLabel(F);}};YAHOO.extend(YAHOO.widget.TextNode,YAHOO.widget.Node,{labelStyle:"ygtvlabel",labelElId:null,label:null,textNodeParentChange:function(){if(this.tree&&!this.tree.hasEvent("labelClick")){this.tree.createEvent("labelClick",this.tree);}},setUpLabel:function(M){this.textNodeParentChange();this.subscribe("parentChange",this.textNodeParentChange);if(typeof M=="string"){M={label:M};}this.label=M.label;this.data.label=M.label;if(M.href){this.href=M.href;}if(M.target){this.target=M.target;}if(M.style){this.labelStyle=M.style;}this.labelElId="ygtvlabelel"+this.index;},getLabelEl:function(){return document.getElementById(this.labelElId);},getNodeHtml:function(){var F=[];F[F.length]="<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">";F[F.length]="<tr>";for(var M=0;M<this.depth;++M){F[F.length]="<td class=\""+this.getDepthStyle(M)+"\"><div class=\"ygtvspacer\"></div></td>";}var q="YAHOO.widget.TreeView.getNode('"+this.tree.id+"',"+this.index+")";F[F.length]="<td";F[F.length]=" id=\""+this.getToggleElId()+"\"";F[F.length]=" class=\""+this.getStyle()+"\"";if(this.hasChildren(true)){F[F.length]=" onmouseover=\"this.className=";F[F.length]=q+".getHoverStyle()\"";F[F.length]=" onmouseout=\"this.className=";F[F.length]=q+".getStyle()\"";}F[F.length]=" onclick=\"javascript:"+this.getToggleLink()+"\">";F[F.length]="<div class=\"ygtvspacer\">";F[F.length]="</div>";F[F.length]="</td>";F[F.length]="<td ";F[F.length]=(this.nowrap)?" nowrap=\"nowrap\" ":"";F[F.length]=" >";F[F.length]="<a";F[F.length]=" id=\""+this.labelElId+"\"";F[F.length]=" class=\""+this.labelStyle+"\"";F[F.length]=" href=\""+this.href+"\"";F[F.length]=" target=\""+this.target+"\"";F[F.length]=" onclick=\"return "+q+".onLabelClick("+q+")\"";if(this.hasChildren(true)){F[F.length]=" onmouseover=\"document.getElementById('";F[F.length]=this.getToggleElId()+"').className=";F[F.length]=q+".getHoverStyle()\"";F[F.length]=" onmouseout=\"document.getElementById('";F[F.length]=this.getToggleElId()+"').className=";F[F.length]=q+".getStyle()\"";}F[F.length]=" >";F[F.length]=this.label;F[F.length]="</a>";F[F.length]="</td>";F[F.length]="</tr>";F[F.length]="</table>";return F.join("");},onLabelClick:function(M){return M.tree.fireEvent("labelClick",M);},toString:function(){return "TextNode ("+this.index+") "+this.label;}});YAHOO.widget.RootNode=function(M){this.init(null,null,true);this.tree=M;};YAHOO.extend(YAHOO.widget.RootNode,YAHOO.widget.Node,{getNodeHtml:function(){return "";},toString:function(){return "RootNode";},loadComplete:function(){this.tree.draw();},collapse:function(){},expand:function(){}});YAHOO.widget.HTMLNode=function(f,F,q,M){if(f){this.init(f,F,q);this.initContent(f,M);}};YAHOO.extend(YAHOO.widget.HTMLNode,YAHOO.widget.Node,{contentStyle:"ygtvhtml",contentElId:null,content:null,initContent:function(q,M){this.setHtml(q);this.contentElId="ygtvcontentel"+this.index;this.hasIcon=M;},setHtml:function(q){this.data=q;this.html=(typeof q==="string")?q:q.html;var M=this.getContentEl();if(M){M.innerHTML=this.html;}},getContentEl:function(){return document.getElementById(this.contentElId);},getNodeHtml:function(){var q=[];q[q.length]="<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">";q[q.length]="<tr>";for(var M=0;M<this.depth;++M){q[q.length]="<td class=\""+this.getDepthStyle(M)+"\"><div class=\"ygtvspacer\"></div></td>";}if(this.hasIcon){q[q.length]="<td";q[q.length]=" id=\""+this.getToggleElId()+"\"";q[q.length]=" class=\""+this.getStyle()+"\"";q[q.length]=" onclick=\"javascript:"+this.getToggleLink()+"\"";if(this.hasChildren(true)){q[q.length]=" onmouseover=\"this.className=";q[q.length]="YAHOO.widget.TreeView.getNode('";q[q.length]=this.tree.id+"',"+this.index+").getHoverStyle()\"";q[q.length]=" onmouseout=\"this.className=";q[q.length]="YAHOO.widget.TreeView.getNode('";q[q.length]=this.tree.id+"',"+this.index+").getStyle()\"";}q[q.length]="><div class=\"ygtvspacer\"></div></td>";}q[q.length]="<td";q[q.length]=" id=\""+this.contentElId+"\"";q[q.length]=" class=\""+this.contentStyle+"\"";q[q.length]=(this.nowrap)?" nowrap=\"nowrap\" ":"";q[q.length]=" >";q[q.length]=this.html;q[q.length]="</td>";q[q.length]="</tr>";q[q.length]="</table>";return q.join("");},toString:function(){return "HTMLNode ("+this.index+")";}});YAHOO.widget.MenuNode=function(F,q,M){if(F){this.init(F,q,M);this.setUpLabel(F);}this.multiExpand=false;};YAHOO.extend(YAHOO.widget.MenuNode,YAHOO.widget.TextNode,{toString:function(){return "MenuNode ("+this.index+") "+this.label;}});YAHOO.widget.TVAnim=function(){return {FADE_IN:"TVFadeIn",FADE_OUT:"TVFadeOut",getAnim:function(q,M,F){if(YAHOO.widget[q]){return new YAHOO.widget[q](M,F);}else{return null;}},isValid:function(M){return (YAHOO.widget[M]);}};}();YAHOO.widget.TVFadeIn=function(M,q){this.el=M;this.callback=q;};YAHOO.widget.TVFadeIn.prototype={animate:function(){var f=this;var F=this.el.style;F.opacity=0.1;F.filter="alpha(opacity=10)";F.display="";var q=0.4;var M=new YAHOO.util.Anim(this.el,{opacity:{from:0.1,to:1,unit:""}},q);M.onComplete.subscribe(function(){f.onComplete();});M.animate();},onComplete:function(){this.callback();},toString:function(){return "TVFadeIn";}};YAHOO.widget.TVFadeOut=function(M,q){this.el=M;this.callback=q;};YAHOO.widget.TVFadeOut.prototype={animate:function(){var F=this;var q=0.4;var M=new YAHOO.util.Anim(this.el,{opacity:{from:1,to:0.1,unit:""}},q);M.onComplete.subscribe(function(){F.onComplete();});M.animate();},onComplete:function(){var M=this.el.style;M.display="none";M.filter="alpha(opacity=100)";this.callback();},toString:function(){return "TVFadeOut";}};YAHOO.register("treeview",YAHOO.widget.TreeView,{version:"@VERSION@",build:"@BUILD@"});