<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

<link type="text/css" rel="stylesheet" href="../../../build/fonts/fonts.css">
<link type="text/css" rel="stylesheet" href="../../../build/reset/reset.css">
<link type="text/css" rel="stylesheet" href="../../../build/container/assets/container.css">
<link type="text/css" rel="stylesheet" href="../../../build/logger/assets/logger.css">
<link rel="stylesheet" type="text/css" href="../../../build/colorpicker/assets/skins/sam/colorpicker.css" ></link>

<script type="text/javascript" src="../../../build/yahoo/yahoo.js"></script>
<script type="text/javascript" src="../../../build/dom/dom.js"></script>
<script type="text/javascript" src="../../../build/event/event-debug.js"></script>
<script type="text/javascript" src="../../../build/dragdrop/dragdrop.js" ></script>
<script type="text/javascript" src="../../../build/connection/connection.js" ></script>
<script type="text/javascript" src="../../../build/container/container.js"></script>


<script type="text/javascript" src="../../build/logger/logger.js" ></script>
<script type="text/javascript" src="../../build/animation/animation.js" ></script>
<script type="text/javascript" src="../../build/element/element-beta-debug.js" ></script>
<script type="text/javascript" src="../../build/slider/slider-debug.js" ></script>

<script type="text/javascript" src="../src/js/Color.js" ></script>
<script type="text/javascript" src="../src/js/ColorPicker.js" ></script>

<style>
    body { background:#eee }
    label { display:block;float:left;width:45%;clear:left; }
    .clear { clear:both; }
    #resp { font-family:courier;margin:10px;padding:5px;border:1px solid #ccc;background:#fff;}
</style>

<script type="text/javascript">

    (function() {
        YAHOO.namespace("example.colorpicker");
        var ex=YAHOO.example.colorpicker,
            Event=YAHOO.util.Event,
            Dom=YAHOO.util.Dom,
            lang=YAHOO.lang;

        function init() {
            
            // Define various event handlers for Dialog
            var handleSubmit = function() {
                this.submit();
            };
            var handleCancel = function() {
                this.cancel();
            };
            var handleSuccess = function(o) {
                var response = o.responseText;
                response = response.split("<!")[0];
                document.getElementById("resp").innerHTML = response;
                eval(response);
            };
            var handleFailure = function(o) {
                alert("Submission failed: " + o.status);
            };

            // Instantiate the Dialog
            ex.dialog = new
                YAHOO.widget.Dialog("yui-picker-panel", { 
                        width : "380px",
                        fixedcenter : true,
                        visible : false, 
                        constraintoviewport : true,
                        buttons : [ { text:"Submit", handler:handleSubmit, isDefault:true },
                                    { text:"Cancel", handler:handleCancel } ]
                    });
 
            //Event.onDOMReady(function() {
            ex.dialog.renderEvent.subscribe(function() {
                    if (!ex.picker) {
                        YAHOO.log("instantiating the color picker", "warn");
                        if (location.search.indexOf("debug") > -1) {
                            ex.lr = new YAHOO.widget.LogReader(")");
                        }
                        ex.picker = new YAHOO.widget.ColorPicker("yui-picker", {
                                container: ex.dialog
                                //showcontrols: false,  // default is true, false hides the entire set of controls
                                //showhexcontrols: true, // default is false
                                //showhsvcontrols: true  // default is false
                            });

                        // listen to rgbChange to be notified about new values
                        //ex.picker.on("rgbChange", function(o) {
                                //alert(lang.dump(o.newValue));
                             //})
                    }
                });
       
            // Validate the entries in the form to require that both first and last name are entered
            ex.dialog.validate = function() {

            };

            // Wire up the success and failure handlers
            ex.dialog.callback = { success: handleSuccess, failure: handleFailure };
            
            // Render the Dialog
            ex.dialog.render();

            Event.on("show", "click", ex.dialog.show, ex.dialog, true);
            Event.on("hide", "click", ex.dialog.hide, ex.dialog, true);
            Event.on("btnhsv", "click", function(e) {
                        var p = ex.picker;
                        p.set(p.OPT.SHOW_HSV_CONTROLS, !p.get(p.OPT.SHOW_HSV_CONTROLS));
                    }, ex.dialog, true);
            Event.on("btnhex", "click", function(e) {
                        var p = ex.picker;
                        p.set(p.OPT.SHOW_HEX_CONTROLS, !p.get(p.OPT.SHOW_HEX_CONTROLS));
                    }, ex.dialog, true);
            Event.on("btnrgb", "click", function(e) {
                        var p = ex.picker;
                        p.set(p.OPT.SHOW_RGB_CONTROLS, !p.get(p.OPT.SHOW_RGB_CONTROLS));
                    }, ex.dialog, true);
            Event.on("btnhexsummary", "click", function(e) {
                        var p = ex.picker;
                        p.set(p.OPT.SHOW_HEX_SUMMARY, !p.get(p.OPT.SHOW_HEX_SUMMARY));
                    }, ex.dialog, true);
            Event.on("btnwebsafe", "click", function(e) {
                        var p = ex.picker;
                        p.set(p.OPT.SHOW_WEBSAFE, !p.get(p.OPT.SHOW_WEBSAFE));
                    }, ex.dialog, true);
        }

        //Event.onDOMReady(init);
        Event.on(window, "load", init);

})();

</script>
    </head>
    <body>
        <div>
          <button id="show">Show Color Picker</button> 
          <button id="hide">Hide Color Picker</button>
          <button id="btnhsv">Show/hide HSV fields</button>
          <button id="btnhex">Show/hide HEX field</button>
          <button id="btnrgb">Show/hide RGB field</button>
          <button id="btnhexsummary">Show/hide HEX summary info</button>
          <button id="btnwebsafe">Show/hide Websafe Swatch</button>
        </div>
        <div id="yui-picker-panel" class="yui-picker-panel">
          <div class="hd">Please choose a color</div>
          <div class="bd">
              <form name="yui-picker-form">
                <div class="yui-picker" id="yui-picker"></div>
              </form>
          </div>
          <div class="ft"></div>
        </div>
    </body>
</html>
