<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link type="text/css" rel="stylesheet" href="../../../build/reset-fonts-grids/reset-fonts-grids.css"> 
    <link type="text/css" rel="stylesheet" href="../../../build/logger/assets/logger.css">
    <link type="text/css" rel="stylesheet" href="../../../build/yuitest/assets/testlogger.css">
    <link type="text/css" rel="stylesheet" href="../../../build/base/base.css"> 
    <link type="text/css" rel="stylesheet" href="../assets/inline-editor-core.css"> 
    <title>Inlineeditor</title>
    <script type="text/javascript" src="../../../build/yahoo/yahoo-min.js"></script>
    <script type="text/javascript" src="../../../build/dom/dom-min.js"></script>
    <script type="text/javascript" src="../../../build/event/event-min.js"></script>
    <script type="text/javascript" src="../../../build/logger/logger-min.js"></script>
    <script type="text/javascript" src="../../../build/element/element-min.js"></script>
    <script type="text/javascript" src="../../../build/yuitest/yuitest-min.js"></script>
    <script type="text/javascript" src="../../../build/animation/animation.js"></script> 
    <script type="text/javascript" src="../js/InlineEditor.js"></script>
    <script type="text/javascript" charset="utf-8">
        var init = function() {
                // YAHOO.widget.Logger.enableBrowserConsole();
                var logger = new YAHOO.widget.LogReader();
                YAHOO.util.Event.throwErrors = true;
                var ed = new YAHOO.widget.InlineEditor('element');
                ed.subscribe('saveEvent', function(values){
                            YAHOO.log('new field value is: ' + values.field, 'info');
                        });
                var ed2 = new YAHOO.widget.InlineEditor('paragraph', {
                                type: 'textarea',
                                processBeforeSave: function(value) {
                                    var output = value.replace(/\n/g, '<br>');
                                    return output;
                                },
                                processBeforeRead: function(value) {
                                    var output = value.replace(/<br\s*\/?>/g, '\n');
                                    return output;
                                }
                            });
                ed2.subscribe('valueNotValidEvent', function() {
                            YAHOO.log('value not valid', 'error');
                        })
                ed2.subscribe('saveEvent', function(){
                            YAHOO.log('new field value is: ' + this.get('value'), 'info');
                        });
                var ed3 = new YAHOO.widget.InlineEditor('paragraph-allow-empty', {type: 'textarea', allowEmpty: true, saveKeys: {ctrl: false,keys:[13]}});
                ed.subscribe('saveEvent', function(values){
                            YAHOO.log('new field value is: ' + values.field, 'info');
                            return false;
                        });
                var ed4 = new YAHOO.widget.InlineEditor('span-for-select', {type: 'select', selectableValues: {
                            ingyom: 1,
                            bingyom: 2,
                            malibe: 3,
                            tuta: 4,
                            libe: 5,
                            talibe: 6
                        }});
                var ed5 = new YAHOO.widget.InlineEditor('span-for-radio', {type: 'radio', selectableValues: {
                            ingyom: 1,
                            bingyom: 2,
                            malibe: 3,
                            tuta: 4,
                            libe: 5,
                            talibe: 6
                        }});

                var ed5 = new YAHOO.widget.InlineEditor('span-for-custom', {type: 'mytype', fieldGenerator: function(type, fieldName, value, selectableValues) {
                            var field = document.createElement('input');
                            field.type = 'text';
                            field.name = fieldName;
                            field.value = value;
                            return field;
                        }});

                var ed6 = new YAHOO.widget.InlineEditor('span-for-custom-multi', {type: 'mytype', fieldGenerator: function(type, fieldName, value, selectableValues) {
                            var span = document.createElement('span');
                            span.innerHTML = '<input type="text" name="' +fieldName+ '" value="'+ value + '"/><input type="text" name="' +fieldName+ '2" value="'+ value + '">';
                            return span;
                        }});
                ed6.subscribe('saveEvent', function(args){
                    YAHOO.log("first field's value is: " + args[0], 'info');
                    YAHOO.log("second field's value is: " + args[1].field2, 'info');
                });

                var ed7 = new YAHOO.widget.InlineEditor('span-for-checkbox', {type: 'checkbox', selectableValues:{
                    'true': true,
                    'false':false
                    }});
                ed7.subscribe('saveEvent', function(args){
                    console.log(args);
                    YAHOO.log("field's value is: " + args[0], 'info');
                });
                YAHOO.log('inline editor initialized', 'info');
                ED5 = ed5;
            };
        YAHOO.util.Event.onDOMReady(init);
    </script>
</head>
<body>
  <div id="doc">
     <h1 id="element">Hello</h1>
     <p id="paragraph">When you read/write this pragraph, it's content will be processed.<br>Basically the new line chars well be replaced to &lt;br&gt; and vica versa.</p>
     <p id="paragraph-allow-empty">You can save this paragraph even if it's empty</p>
     <p><span id="span-for-select">bingyom</span></p>
     <p><span id="span-for-radio">tuta</span></p>
     <p><span id="span-for-checkbox">true</span></p>
     <p><span id="span-for-custom">custom</span></p>
     <p><span id="span-for-custom-multi">custom with multiple fields</span></p>
 </div>
</body>
</html>
