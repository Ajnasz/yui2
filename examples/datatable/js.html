<!doctype html public "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Build Table from Scratch</title>
<link type="text/css" rel="stylesheet" href="../../build/fonts/fonts.css">
<link type="text/css" rel="stylesheet" href="../../build/logger/assets/logger.css">
<style type="text/css">
table {border-collapse:collapse;margin:1em;}
th, td {border:1px solid black;}
.yui-dt-odd {background-color:#eee;}
.yui-dt-rowselected {background-color:#f00;}

#fixed table{width:30em;}



th {background-color:#696969;color:#fff;}
.yui-dt-sortable {cursor:hand;cursor:pointer;margin:0 4px 0 4px;}
.yui-dt-headcontainer {position:relative;}
.yui-dt-headresizer {position:absolute;right:-4px;bottom:0;width:6px;height:100%;cursor:w-resize;cursor:col-resize;}





#scroll  {
   width:40em;margin-bottom:3em;
}


#scroll  thead {
   background:#696969; /*  IE needs a bgcolor to hide tbody as it scrolls */
   border:1px solid #000;
   display:block; /* enables tbody scrolling for safari and opera */
}

#scroll  thead th {
   width:10em; /* any value seems to here, just need something */
}

#scroll  tbody {
   display:block; /* enables tbody scrolling for safari and opera */
   height:10em;
   overflow:auto; /* for scrolling other than IE */
}

/* IE specific */
#scroll  {
   height:10em;
   *overflow-y:auto;
}

#scroll  tbody {
   *height:auto; /* override the non IE height */
}

#scroll thead tr {
   position:relative;  /* IE cant scroll tbody, so trick it into fixing thead */
}

#scroll tbody td {
    width:10em;
}



</style>
</head>
<body>
<h1>Build Table from Scratch</h1>

<div id="fixed"></div>

<div id="scroll"></div>

<div id="xhr"></div>

<script type="text/javascript" src="../../build/yahoo/yahoo.js"></script>
<script type="text/javascript" src="../../build/dom/dom.js"></script>
<script type="text/javascript" src="../../build/event/event-debug.js"></script>
<script type="text/javascript" src="../../build/connection/connection.js"></script>
<script type="text/javascript" src="../../build/dragdrop/dragdrop.js"></script>
<script type="text/javascript" src="../../build/datatable/datatable-debug.js"></script>
<script type="text/javascript" src="../../build/logger/logger.js"></script>
<script type="text/javascript" src="./js/sampledata.js"></script>
<script language="JavaScript">
var myLogger = new YAHOO.widget.LogReader();

/****************************************************************************/
/****************************************************************************/
/****************************************************************************/


var myFormattedColumnset = [
    {id:"po1",key:"id",text:"PO ID",sortable:true,currentSortDir:"asc",resizeable:true},
    {id:"po3",key:"quantity",text:"Quantity",sortable:true,resizeable:true},
    {id:"po4",key:"amount",text:"$ Total",sortable:true,resizeable:true,editable:true},
    {id:"po2",key:"date",text:"Date",sortable:true,resizeable:true,defaultSortDir:"desc",isLast:true}
];

var myFormatCell2 = function(elCell, oRecord, oColumn){
    if(oColumn.key === "date") {
        elCell.innerHTML = oRecord[oColumn.key].getMonth() + "/" + oRecord[oColumn.key].getDate()  + "/" + oRecord[oColumn.key].getYear();
    }
    else if(oColumn.key === "amount") {
        elCell.innerHTML = "$"+oRecord[oColumn.key];
    }
    else {
        elCell.innerHTML = oRecord[oColumn.key];
    }
    if(oColumn.editable) {
        YAHOO.util.Dom.addClass(elCell,"yui-dt-editable");
    }
};

var myFormattedDataSource = new YAHOO.widget.DataSource(aPurchaseOrderObjects);
var myFormattedDataTable = new YAHOO.widget.DataTable("fixed",myFormattedColumnset,myFormattedDataSource,{formatCell: myFormatCell2, fixedwidth:true});


/****************************************************************************/
/****************************************************************************/
/****************************************************************************/

// Custom sort functionality to sort by areacode within states
YAHOO.example.sortStatesAsc = function(a, b) {
    if(YAHOO.util.Sort.compareAsc(a.state, b.state) !== 0) {
        return YAHOO.util.Sort.compareAsc(a.state, b.state);
    }
    else {
        return YAHOO.util.Sort.compareAsc(a.areacode, b.areacode);
    }
};
YAHOO.example.sortStatesDesc = function(a, b) {
    if(YAHOO.util.Sort.compareDesc(a.state, b.state) !== 0) {
        return YAHOO.util.Sort.compareDesc(a.state, b.state);
    }
    else {
        return YAHOO.util.Sort.compareDesc(b.areacode, a.areacode);
    }
};

var myAreacodesColumnset = [
    {id:"c1",key:"areacode",text:"Area Codes",sortable:true,currentSortDir:"asc"},
    {id:"c2",key:"state",text:"States",sortable:true,sortAsc:YAHOO.example.sortStatesAsc,sortDesc:YAHOO.example.sortStatesDesc}
];

var myAreacodesDataSource = new YAHOO.widget.DataSource(aAreacodeObjects);
var myAreacodesDataTable = new YAHOO.widget.DataTable("scroll",myAreacodesColumnset,myAreacodesDataSource);


/****************************************************************************/
/****************************************************************************/
/****************************************************************************/

var myXHRColumnset = [
    {id:"c2",key:"Title",text:"Title",sortable:true,resizeable:true,sortAsc:YAHOO.util.Sort.compareTextAsc,sortDesc:YAHOO.util.Sort.compareTextDesc},
    {id:"c1",key:"Summary",text:"Summary",sortable:true,resizeable:true,sortAsc:YAHOO.util.Sort.compareTextAsc,sortDesc:YAHOO.util.Sort.compareTextDesc}
];

var myXHRDataSource = new YAHOO.widget.XHRDataSource("./php/ysearch_proxy.php");
//myXHRDataSource.responseType = myXHRDataSource.TYPE_XML;
//myXHRDataSource.queryMatchContains = true;
//myXHRDataSource.scriptQueryAppend = "results=5"; // Needed for YWS
//myXHRDataSource.resultsAsObjects = true;
//alert(myXHRDataSource.getResponse("madonna"));

var myXHRDataTable = new YAHOO.widget.DataTable("xhr", myXHRColumnset, myXHRDataSource,{initRequest:"query=madonna&results=5"});
myXHRDataTable.aSchema = ["Result","Title","Summary"];
myXHRDataTable.responseStripAfter = "\n<!-";


</script>

</body>
</html>
