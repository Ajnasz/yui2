<?php 
$title="Yahoo! UI Library: Rich Text Editor";
$section="editor";
$component="Rich Text Editor";
$highlightSyntax = true;
$releasenotes = true;
include "../inc/header.inc";
?>
<style>
li.new, li.new code {
    color: #639;
}
</style>
<div id="yui-main">
<div class="yui-b">
  <div class="yui-ge">
      <div class="yui-u first">
	  
	  
<div id="promo" class="component">
  <h1>Rich Text Editor</h1>
  <p><img src="assets/editor.png" alt="The Rich Text Editor interface with the default YUI Sam Skin applied." width="350" height="225" class="example">The Rich Text Editor is a UI control that replaces a standard HTML textarea; it allows for the rich formatting of text content, including common structural treatments like lists, formatting treatments like bold and italic text, and drag-and-drop inclusion and sizing of images.  The Rich Text Editor's toolbar is extensible via a plugin architecture so that advanced implementations can achieve a high degree of customization.</p>
  
  <p>In order to give you the greatest possible control over the size and performance of the Rich Text Editor codebase, we provide two versions of the Editor module and two versions of the buttons that live on the Toolbar:</p>
  
  <ul>
    <li><strong>Editor:</strong> Editor contains all features described on this page;</li>
    <li><strong>SimpleEditor:</strong> SimpleEditor contains a subset of Editor's features. (See &quot;<a href="#choosing">Choosing Between Editor and SimpleEditor</a>&quot; for more details.)</li>
    <li><strong>ToolbarButtonAdvanced: </strong>The advanced Toolbar buttons are based on YUI Buttons; they are more richly featured at the cost of more dependencies.</li>
    <li><strong>ToolbarButton: </strong>The more simple Toolbar buttons have fewer dependencies and so are lighter on the page; they do not support progressive enhancement nor menu-button functionality. (See "<a href="#toolbar">Changing the Toolbar</a>" for more about your Toolbar choices.)</li>
    </ul>
  <p>Choose the right combination of features in your Editor and Toolbar to get the right tradeoff between size and richness for your application.</p>

  <div>
    <h4>On This Page:</h4>
    <ul>
        <li><a href="#start">Getting Started</a></li>
        <li><a href="#using">Using the Rich Text Editor</a></li>
        <li><a href="#mobile">YUI on Mobile Devices</a></li>
        <li><a href="#support">Support &amp; Community</a></li>
	    <li><a href="#filingbugs">Filing Bugs and Feature Requests</a></li>
    </ul>
  </div>

<?php
include('../inc/quicklinks.inc');
?>

</div>

<h2 class="first" id="video">Video: Rich Text Editing with YUI</h2>
<p>In this 36 minute video, YUI Rich Text Editor author Dav Glass takes you on a guided tour of the component, including both how to use and how to extend the base functionality. [<a href="http://us.dl1.yimg.com/download.yahoo.com/dl/ydn/yui/theater/glass-rte.m4v">iPod/iPhone compatible download also available</a>.]</p>

<object width="512" height="323"><param name="movie" value="http://d.yimg.com/static.video.yahoo.com/yep/YV_YEP.swf?ver=2.1.12" /><param name="allowFullScreen" value="true" /><param name="flashVars" value="id=7378948&vid=2359450&lang=en-us&intl=us&thumbUrl=http://us.i1.yimg.com/us.yimg.com/p/i/bcst/videosearch/2719/62261130.jpeg" /><embed src="http://d.yimg.com/static.video.yahoo.com/yep/YV_YEP.swf?ver=2.1.12" type="application/x-shockwave-flash" width="512" height="323" allowFullScreen="true" flashVars="id=7378948&vid=2359450&lang=en-us&intl=us&thumbUrl=http://us.i1.yimg.com/us.yimg.com/p/i/bcst/videosearch/2719/62261130.jpeg" ></embed></object>

<h2 id="start">Getting Started</h2>
<p>To use the Editor, include the following source files in your web page:</p>
<textarea name="code" class="HTML" cols="60" rows="1">
<!-- Skin CSS file -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/assets/skins/sam/skin.css">
<!-- Utility Dependencies -->
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/element/element-beta-min.js"></script> 
<!-- Needed for Menus, Buttons and Overlays used in the Toolbar -->
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/container/container_core-min.js"></script>
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/menu/menu-min.js"></script>
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/button/button-min.js"></script>
<!-- Source file for Rich Text Editor-->
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/editor/editor-min.js"></script>
</textarea>
<p>To use the SimpleEditor, include the following source files in your web page:</p>
<textarea name="code" class="HTML" cols="60" rows="1">
<!-- Skin CSS file -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/assets/skins/sam/skin.css">
<!-- Utility Dependencies -->
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/element/element-beta-min.js"></script> 
<!-- Needed for Menus, Buttons and Overlays used in the Toolbar -->
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/container/container_core-min.js"></script>
<!-- Source file for Rich Text Editor-->
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/editor/simpleeditor-min.js"></script>
</textarea>
<?php
include "../inc/include-notice.inc";
?>

<h2 id="using">Using the Rich Text Editor</h2>
<p>This section describes several common uses of the Rich Text Editor. It contains these subsections:</p>
<ul>
<li><a href="#choosing">Choosing Between Editor and SimpleEditor</a></li>
<li><a href="#rendering">Rendering the Editor</a></li>
<li><a href="#renderingsimple">Rendering the SimpleEditor</a></li>
<li><a href="#getdata">Getting the data from the Editor</a></li>
<li><a href="#toolbar">Changing the Toolbar</a></li>
<li><a href="#events">Listening for Events</a></li>
<li><a href="#dynamic_events">Dynamic Events</a></li>
<li><a href="#plugins">Plugins</a></li>
<li><a href="#overrides">Overriding execCommands</a></li>
<li><a href="#toolbar_moments">Toolbar Interactions</a></li>
<li><a href="#showhide">Showing and Hiding</a></li>
<li><a href="#skinning">Skinning the Editor</a></li>
</ul>

<h3 id="choosing">Choosing Between Editor and SimpleEditor</h3>
<p>The SimpleEditor Control is a smaller more basic version of the Editor Control. Most of the editing features found in the main Editor Control exist in the SimpleEditor version. However a few were removed:</p>
<ul>
    <li>Advanced Image editing &mdash; replaced with a simple Javascript prompt</li>
    <li>Advanced Link editing &mdash; replaced with a simple Javascript prompt</li>
    <li>Advanced Drop Down Menus &mdash; replaced with standard HTML Select Elements</li>
    <li>Header editing</li>
    <li>Removing of Format</li>
    <li>Superscript &amp; Subscript</li>
    <li>Indenting &amp; Outdenting</li>
    <li>No support for <code>YAHOO.widget.EditorWindow</code> &mdash; The floating panels used for image and link editing</li>
</ul>
<p>The major difference between the two editors are their dependencies.</p>
<div class="yui-g">
    <div class="yui-u first">
        <p>SimpleEditor's dependencies are:</p>
        <ul>
            <li><a href="http://developer.yahoo.com/yui/yahoo/">YAHOO</a></li>
            <li><a href="http://developer.yahoo.com/yui/dom/">Dom</a></li>
            <li><a href="http://developer.yahoo.com/yui/event/">Event</a></li>
            <li><a href="http://developer.yahoo.com/yui/element/">Element</a></li>
            <li><a href="http://developer.yahoo.com/yui/container/">Container Core</a> (optional)</li>
            <li><a href="http://developer.yahoo.com/yui/animation/">Animation</a> (optional)</li>
            <li><a href="http://developer.yahoo.com/yui/dragdrop/">DragDrop</a> (optional)</li>
            <li><a href="http://developer.yahoo.com/yui/resize/">Resize</a> (optional)</li>
        </ul>
	</div>
    <div class="yui-u">
        <p>Editor's dependencies are:</p>
        <ul>
            <li><a href="http://developer.yahoo.com/yui/yahoo/">YAHOO</a></li>
            <li><a href="http://developer.yahoo.com/yui/dom/">Dom</a></li>
            <li><a href="http://developer.yahoo.com/yui/event/">Event</a></li>
            <li><a href="http://developer.yahoo.com/yui/element/">Element</a></li>
            <li><a href="http://developer.yahoo.com/yui/container/">Container Core</a></li>
            <li><a href="http://developer.yahoo.com/yui/menu/">Menu</a></li>
            <li><a href="http://developer.yahoo.com/yui/button/">Button</a></li>
            <li><a href="http://developer.yahoo.com/yui/animation/">Animation</a> (optional)</li>
            <li><a href="http://developer.yahoo.com/yui/dragdrop/">DragDrop</a> (optional)</li>
            <li><a href="http://developer.yahoo.com/yui/resize/">Resize</a> (optional)</li>
        </ul>
	</div>
</div>

<h3 id="rendering">Rendering the Editor</h3>
<p>The Rich Text Editor is designed to replace an existing HTML <code>&lt;textarea&gt;</code> control.  Users whose browsers do not support JavaScript will therefore see a standard <code>&lt;textarea&gt;</code> in place of the Rich Text Editor.  The base markup for this approach is as follows:</p>


<textarea name="code" class="HTML" cols="60" rows="1">
&lt;body class="yui-skin-sam"&gt;
&lt;textarea name="msgpost" id="msgpost" cols="50" rows="10"&gt;
    <strong>Your</strong> HTML <em>code</em> goes here.<br>
    This text will be pre-loaded in the editor when it is rendered.
&lt;/textarea&gt;
&lt;/body&gt;
</textarea>

<p>With this markup in place, the JavaScript to instantiate the Rich Text Editor involves a simple constructor to which is passed a configuration object.  Once instantiated, you use the <code>render</code> method to place the Rich Text Editor on the page:</p>

<textarea name="code" class="JScript" cols="60" rows="1">
var myEditor = new YAHOO.widget.Editor('msgpost', {
    height: '300px',
    width: '522px',
    dompath: true, //Turns on the bar at the bottom
    animate: true //Animates the opening, closing and moving of Editor windows
});
myEditor.render();
</textarea>

<p>The full list of configuration options that you can pass in your constructor can be found in the <a href="/yui/docs/YAHOO.widget.Editor.html#animate">API documentation</a>.</p>

<p>With the simple markup and script above, and including the skin stylesheet for Rich Text Editor, you will see rendered to your page a rich control that looks like this:</p>

<img src="assets/screenshot.jpg" alt="The Rich Text Editor Control" border="0" height="497" width="545"/>

<h3 id="renderingsimple">Rendering the SimpleEditor</h3>

<p>You render the SimpleEditor Control the same as the Editor Control, only you call the <code>SimpleEditor</code> constructor instead.</p>

<textarea name="code" class="JScript" cols="60" rows="1">
var myEditor = new YAHOO.widget.SimpleEditor('msgpost', {
    height: '300px',
    width: '522px',
    dompath: true //Turns on the bar at the bottom
});
myEditor.render();
</textarea>

<p>With the simple markup and script above, and including the skin stylesheet for Rich Text Editor, you will see rendered to your page a rich control that looks like this:</p>

<img src="assets/screenshot-simple.jpg" alt="The Simple Rich Text Editor Control" border="0" height="411" width="542"/>


<h3 id="getdata">Getting the data from the Editor</h3>

<p>There are a couple of ways to get the data from the editor. The first way is to let the Editor do it for you by setting the <code>handleSubmit</code> configuration option.</p>
<p>Setting the <code>handleSubmit</code> configuration option, the Editor will attempt to attach itself to its parent form's submit event. Then it will call its <code>saveHTML</code> method, then proceed with the form submission.</p>

<p>The manual way, is to call the <code>saveHTML</code> method yourself. Like this:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
var myEditor = new YAHOO.widget.Editor('msgpost');
myEditor.render();

//Inside an event handler after the Editor is rendered
YAHOO.util.Event.on('somebutton', 'click', function() {
    //Put the HTML back into the text area
    myEditor.saveHTML();

    //The var html will now have the contents of the textarea
    var html = myEditor.get('element').value;
});
</textarea>

<h3 id="toolbar">Changing the toolbar</h3>

<p>The default toolbar included with the editor makes every currently supported feature available by default. You can override this config before the editor is rendered by passing in an object literal of a new toolbar to the constructor.</p>

<p>See this <a href="/yui/examples/editor/toolbar_editor.html">example for the full toolbar config</a></p>

<textarea name="code" class="JScript" cols="60" rows="1">
var myEditor = new YAHOO.widget.Editor('msgpost', {
    height: '200px',
    width: '385px',
    dompath: false,
    animate: true,
    toolbar: {
        titlebar: 'My Editor',
        buttons: [
            { group: 'textstyle', label: 'Font Style',
                buttons: [
                    { type: 'push', label: 'Bold', value: 'bold' },
                    { type: 'push', label: 'Italic', value: 'italic' },
                    { type: 'push', label: 'Underline', value: 'underline' },
                    { type: 'separator' },
                    { type: 'select', label: 'Arial', value: 'fontname', disabled: true,
                        menu: [
                            { text: 'Arial', checked: true },
                            { text: 'Arial Black' },
                            { text: 'Comic Sans MS' },
                            { text: 'Courier New' },
                            { text: 'Lucida Console' },
                            { text: 'Tahoma' },
                            { text: 'Times New Roman' },
                            { text: 'Trebuchet MS' },
                            { text: 'Verdana' }
                        ]
                    },
                    { type: 'spin', label: '13', value: 'fontsize', range: [ 9, 75 ], disabled: true },
                    { type: 'separator' },
                    { type: 'color', label: 'Font Color', value: 'forecolor', disabled: true },
                    { type: 'color', label: 'Background Color', value: 'backcolor', disabled: true }
                ]
            }
        ]
    }
});
myEditor.render();
</textarea>

<p>The Editor's Toolbar supports 2 types of buttons: <code>advanced</code> and <code>basic</code>.</p>

<p><strong>Note</strong>: To use the <code>advanced</code> button type you will need to make sure you include the <a href="http://developer.yahoo.com/yui/menu/">Menu</a> and <a href="http://developer.yahoo.com/yui/button/">Button</a> Controls.</p>

<p>The following are advanced button types:</p>
<ul>
    <li><strong>Push</strong>: Push buttons are provided via the <a href="http://developer.yahoo.com/yui/button/">YUI Button Control</a>.</li>
    <li><strong>Menu</strong>: Menu buttons are provided via the <a href="http://developer.yahoo.com/yui/button/">YUI Button Control</a>.</li>
    <li><strong>Select</strong>: The Select button is a hybrid of the menu button that mimics an HTML <code>&lt;select&gt;</code> element.</li>
    <li><strong>Color</strong>: The Color button is another hybrid menu button that contains an interactive color picker; note that this color picker is not an implementation of the <a href="http://developer.yahoo.com/yui/colorpicker/">YUI Color Picker Control</a> but rather a dedicated text-editing control optimized for styling text.</li>
    <li><strong>Spin</strong>: The Spin button is a hybrid of a Push button that adds a pair of up and down arrows to the side of the button. It is generally used to allow the user to select a value from a range of numeric values. Selecting one of the buttons causes the value to "spin" up and down the range of possible values.</li>
    <li><strong>Separator</strong>: The Separator button gives you a way to place a bar ("|") in between two buttons. The separator bar is also given a unique classname so you can use it to style the toolbar as needed.</li>
</ul>

<p>The following are basic button types:</p>
<ul>
    <li><strong>Push</strong>: Push buttons are provided via the default toolbar.</li>
    <li><strong>Menu</strong>: Menu buttons are provided via the default toolbar.</li>
    <li><strong>Select</strong>: The Select button is an HTML <code>&lt;select&gt;</code> element.</li>
    <li><strong>Color</strong>: The Color button is a hybrid menu button that contains an interactive color picker; note that this color picker is not an implementation of the <a href="http://developer.yahoo.com/yui/colorpicker/">YUI Color Picker Control</a> but rather a dedicated text-editing control optimized for styling text.</li>
    <li><strong>Spin</strong>: The Spin button is a hybrid of a Push button that adds a pair of up and down arrows to the side of the button. It is generally used to allow the user to select a value from a range of numeric values. Selecting one of the buttons causes the value to "spin" up and down the range of possible values.</li>
    <li><strong>Separator</strong>: The Separator button gives you a way to place a bar ("|") in between two buttons. The separator bar is also given a unique classname so you can use it to style the toolbar as needed.</li>
</ul>

<p>Example code for each of these button types is <a href="#toolbar">included in the toolbar section above</a>. You can also see a few examples of using the different button types in the <a href="/yui/examples/editor/">Editor's example section</a>.</p>

<p>With the above code you would get an Editor that looked like this:</p>
<img src="assets/screenshot2.jpg" alt="Rich Text Editor Screenshot" width="400" height="292">

<h3 id="events">Events</h3>
<p>The Rich Text Editor and the Toolbar are both loaded with Custom Events to which you can subscribe as you customize the editor's behavior to suit the specific needs of your application.</p>
<p>Some of the more common Rich Text Editor events include the following; for a full list, including the arguments passed to each event, see the <a href="/yui/docs/module_editor.html">API documentation</a> for Rich Text Editor:</p>
<div class="yui-g">
    <div class="yui-u first">
        <p>SimpleEditor Events</p>
        <ul>
            <li>Editor Render Events
                <ul>
                    <li><code>toolbarLoaded</code></li>
                    <li><code>afterRender</code></li>
                    <li><code>editorContentLoaded</code></li>
                </ul>
            </li>
            <li>Editor HTML Event Mapping
                <ul>
                    <li><code>editorMouseUp</code></li>
                    <li><code>editorMouseDown</code></li>
                    <li><code>editorDoubleClick</code></li>
                    <li><code>editorKeyUp</code></li>
                    <li><code>editorKeyPress</code></li>
                    <li><code>editorKeyDown</code></li>
                </ul>
            </li>
            <li>Editor Command Execution Events
                <ul>
                    <li><code>beforeNodeChange</code></li>
                    <li><code>afterNodeChange</code></li>
                    <li><code>beforeExecCommand</code></li>
                    <li><code>afterExecCommand</code></li>
                </ul>
            </li>
            <li>Toolbar Events (accessed via <code>EditorObj.toolbar.on()</code>)
                <ul>
                    <li><code>toolbarExpanded</code></li>
                    <li><code>toolbarCollapsed</code></li>
                    <li><code>colorPickerClicked</code></li>
                    <li><code>cmdClick</code> (dynamic event)</li>
                    <li><code>menucmdClick</code> (dynamic event)</li>
                    <li><code>buttonClick</code></li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="yui-u">
        <p>Editor Events</p>
        <ul>
            <li>Editor Render Events
                <ul>
                    <li><code>toolbarLoaded</code></li>
                    <li><code>afterRender</code></li>
                    <li><code>editorContentLoaded</code></li>
                </ul>
            </li>
            <li>Editor HTML Event Mapping
                <ul>
                    <li><code>beforeEditorMouseUp</code></li>
                    <li><code>editorMouseUp</code></li>
                    <li><code>beforeEditorMouseDown</code></li>
                    <li><code>editorMouseDown</code></li>
                    <li><code>beforeEditorClick</code></li>
                    <li><code>editorClick</code></li>
                    <li><code>beforeEditorDoubleClick</code></li>
                    <li><code>editorDoubleClick</code></li>
                    <li><code>beforeEditorKeyUp</code></li>
                    <li><code>editorKeyUp</code></li>
                    <li><code>beforeEditorKeyPress</code></li>
                    <li><code>editorKeyPress</code></li>
                    <li><code>beforeEditorKeyDown</code></li>
                    <li><code>editorKeyDown</code></li>
                </ul>
            </li>
            <li>Editor Command Execution Events
                <ul>
                    <li><code>beforeNodeChange</code></li>
                    <li><code>afterNodeChange</code></li>
                    <li><code>beforeExecCommand</code></li>
                    <li><code>afterExecCommand</code></li>
                </ul>
            </li>
            <li class="new">Editor Window Events
                <ul>
                    <li><code>beforeOpenWindow</code></li>
                    <li><code>afterOpenWindow</code></li>
                    <li><code>closeWindow</code></li>
                    <li><code>windowCMDOpen</code> (dynamic event)</li>
                    <li><code>windowCMDClose</code> (dynamic event)</li>
                    <li><code>windowRender</code></li>
                    <li><code>windowInsertImageRender</code></li>
                    <li><code>windowCreateLinkRender</code></li>
                </ul>
            </li>
            <li>Toolbar Events (accessed via <code>EditorObj.toolbar.on()</code>)
                <ul>
                    <li><code>toolbarExpanded</code></li>
                    <li><code>toolbarCollapsed</code></li>
                    <li><code>colorPickerClicked</code></li>
                    <li><code>cmdClick</code> (dynamic event)</li>
                    <li><code>menucmdClick</code> (dynamic event)</li>
                    <li><code>buttonClick</code></li>
                </ul>
            </li>
        </ul>
    </div>
</div>
<h3 id="dynamic_events">Dynamic Events</h3>
<p>Dynamic Events are special CustomEvent's that are dynamically created based on the value of a button in the Toolbar.</p>
<p>For example, if you had a button called "bold" you will be able to listen for the "boldClick" event or if you had a button called "foo", you would be able to listen for the "fooClick" event.</p>
<p>These events are best described with the following code:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
var myEditor = new YAHOO.widget.Editor('msgpost', {
    //Snippet from button config
    buttons: [
        { type: 'push', label: 'Bold', value: 'bold' },
        { type: 'push', label: 'My Button 1', value: 'mybutton1' },
        { type: 'push', label: 'My Button 2', value: 'mybutton2' }
    ]
});

myEditor.on('toolbarLoaded', function() {
    //Using the Dynamic Event cmdClick where cmd is the value of the button above
    this.toolbar.on('boldClick', function(o) {
        alert('Bold Button was clicked');
    });
    //Using the Dynamic Event cmdClick where cmd is the value of the button above
    this.toolbar.on('mybutton1Click', function(o) {
        alert('mybutton1 was clicked');
    });
    //Standard Custom Event fired for all button clicks
    this.toolbar.on('buttonClick', function(o) {
        switch(o.button.value) {
            case 'bold':
                //Bold Code Here
                break;
            case 'mybutton1':
                //My Button 1 Code Here
                break;
            case 'mybutton2':
                //My Button 2 Code Here
                break;
        }
    });
}, myEditor, true);

myEditor.render();
</textarea>

<p>Please refer to the <a href="/yui/docs/module_editor.html">API documentation</a> for a full list of Custom Events that are available for the Rich Text Editor.</p>

<h3 id="plugins">Plugins</h3>

<p>The Rich Text Editor's toolbar has a flexible plugin architecture that allows you to customize the editor's behavior for the purposes of your own application.</p>

<p>The example below will add a new button to the default toolbar. When this custom button is clicked it will insert the following HTML: "<code>&lt;b&gt;This is the text to insert.&lt;/b&gt;</code>"  But the button will only be enabled if the user has focused a <code>&lt;div&gt;</code>, so this text will never be inserted into an element within the editor other than a <code>&lt;div&gt;</code>.</p>

<textarea name="code" class="JScript" cols="60" rows="1">//Start with the constructor for our RTE:
var myEditor = new YAHOO.widget.Editor('msgpost', {
    height: '300px',
    width: '522px'
});

//Use the toolbarLoaded Custom Event; when that event fires,
//we will execute a function that adds or custom button:
myEditor.on('toolbarLoaded', function() {
    //Simple button config
    var button = {
        type: 'push',
        label: 'My Button 3',
        value: 'mybutton3',
        disabled: false
    };
    
    //Add the button to the toolbar; "this"
    //refers to myEditor, our RTE instance:
    this.toolbar.addButton(button);

    //Now listen for the new buttons click and do something with it.
    //Note that "mybutton3Click" is an event synthesized for us
    //automatically because that's the value we gave our button
    //above:
    this.toolbar.on('mybutton3Click', function(o) {
        this.execCommand('inserthtml', '&lt;b&gt;This is the text to insert.&lt;/b&gt;');
    }, myEditor, true);

    //Setup the button to be enabled, disabled or selected
    this.on('afterNodeChange', function(o) {
        //Get the selected element
        var el = this._getSelectedElement();

        //Get the button we want to manipulate
        var button = this.toolbar.getButtonByValue('mybutton3');

        if (el && el.tagName == 'div') {
            this.toolbar.enableButton(button);
        }
    }, this, true);
}, myEditor, true);

myEditor.render();
</textarea>


<h3 id="overrides">Overriding execCommands</h3>

<p>The Rich Text Editor uses a method based approach for applying <code>execCommand</code> commands on selected text/elements. For example, when you call <code>myEditor.execCommand('forecolor', 'FF0000');</code>, the editor actually calls an internal method called <code>cmd_forecolor</code>.
This method will then process the command and act on it. It will return an array telling the <code>execCommand</code> method whether it should or should not execute the <code>document.execCommand</code> method.</p>

<p>Below is an example of the <code>cmd_forecolor</code> method.</p>

<textarea name="code" class="JScript" cols="60" rows="1">
cmd_forecolor: function(value) {
    var exec = true,
        el = this._getSelectedElement();

        if (!this._isElement(el, 'body')) {
            Dom.setStyle(el, 'color', value);
            this._selectNode(el);
            exec = false;
        } else {
            this._createCurrentElement('span', { color: value });
            this._selectNode(this.currentElement[0]);
            exec = false;
        }
        return [exec];
},
</textarea>

<p>Using this technique, you can add support for your own <code>execCommands</code>, or change the way that the Editor handles them.</p>

<h3 id="toolbar_moments">Toolbar Interactions and the nodeChange Event</h3>

<p>If you're intereseted in extending the Toolbar with custom buttons (see the Flickr and Calendar examples that do this), the following section contains important information.</p>

<p>The <code>nodeChange</code> event is your way of knowing when an interesting moment occurs inside of the Editor.  Keep in mind that the editing canvas itself (the place where the user is inputting rich text) is, under the hood, an HTML document loaded within an <code>iframe</code> with <code>designMode</code> turned on &mdash; which is to say it has a DOM full of nodes. When the user is typing, she is adding to a single DOM node.  But when she mouses to a new location, selects new texts, or performs any other action that changes the cursor's current position in the DOM, the <code>nodeChange</code> event fires to let you know that the user appears to be performing an interesting action.  Common user actions that can fire <code>nodeChange</code> include mousedown, mouseup, arrow keys and other keypress events. </p>

<p>
    When a <code>nodeChange</code> event is fired off via an internal editor event (or by manually calling <code>myEditor.nodeChange()</code> in your own script), all of the Toolbar's buttons need to update their status to reflect the new state of the user's editor.  All of the buttons that ship with the Rich Text Editor fall into one of three groups:</p>
<ol>
  <li><strong>Can be enabled or disabled depending on the state of the editor.</strong> This group is enabled when the user has selected content in the editor and disabled when the user is merely typing.</li>
  <li><strong>Always enabled. </strong>The &quot;show hidden elements&quot; button, for example, is always enabled.</li>
  <li><strong>Always disabled.</strong> By default, there are no buttons that are always disabled; under some specific circumstances, there may be times when you want to place a custom button in this category (eg, if you've added a feature that is not always available to all users). </li>
</ol>
<p>The Toolbar goes through the following states in updating its buttons:</p>

    <ul>
        <li>Loop through the <code>_disabled</code> array (that is, the list of buttons that should be disabled when there is no selected content in the editor) and...</li>
		<ol>
			<li>...if there is <strong>no selection</strong> then:
				<ul>
					<li>Disable all buttons in the array.</li>
				</ul>
			</li>
			<li>If there <strong>is a selection</strong> then:
				<ul>
					<li>Enable each button NOT in the <code>_alwaysDisabled</code> object.</li>
					<li>If a button is NOT in the <code>_alwaysEnabled</code> object, it will deselect the button.</li>
				</ul>
			</li>
		</ol>
    </ul>
    <p>For custom buttons that you add to the Editor, it is best practice to subscribe to the <code>afterNodeChange</code> event and update your button's enabled/disabled state at that time.  See the Calendar example for sample code that allows you to do this.
</p>

<textarea name="code" class="JScript">
/* These are the overrides to manipulate to control the behavior of the toolbar */
_disabled: [
    'createlink',
    'forecolor',
    'backcolor',
    'fontname', 
    'fontsize',
    'superscript',
    'subscript',
    'removeformat',
    'heading'
],
_alwaysDisabled: { },
_alwaysEnabled: { hiddenelements: true }
</textarea>

<h3 id="showhide">Showing and Hiding the Editor</h3>
<p>The Rich Text Editor includes two convenience methods used when showing and hiding the editor. The methods are <code>show()</code> and <code>hide()</code>.</p>
<p>These methods <strong>do not</strong> control the display properties of the editor. They are designed to plugin to an event given by the editor's parent container. See the <a href="/yui/examples/editor/tabview_editor.html">Editor inside a TabView control example here</a> for more information.</p>
<p>By setting the editor's container or a parent element of the editor to display none, the editor can become un-responsive. So using the show method will allow the editor to fix itself and start behaving again. On the other hand, you don't want the editor doing any processing when it is hidden. So calling the hide method will close all open editor windows and stop all background processes and timers.</p>
<p>A simple example of using the show and hide events on a Container Control</p>
<textarea name="code" class="JScript">
//panel in a reference to a Container Control (Panel/Overlay/Dialog)
//myEditor is a reference to your Editor instance

//Setup the show event
panel.showEvent.subscribe(myEditor.show, myEditor, true);

//Setup the hide event
panel.hideEvent.subscribe(myEditor.hide, myEditor, true);
</textarea>

<h3 id="skinning">Skinning the Editor</h3>
<p>The Rich Text Editor comes with a default presentation or "skin," part of the "Sam Skin" visual treatment that accompanies most YUI controls. You can read more about the general approach to skinning YUI components <a href="/yui/articles/skinning/">in this in-depth article</a>.</p>

<p>The CSS provided with the Rich Text Editor is comprised of core, functional CSS as well as the Sam Skin visual treatment.</p>

<p><img src="assets/screenshot.jpg" alt="The Rich Text Editor Control" border="0" height="497" width="545"/></p>

<p>To explore the CSS which controls the Rich Text Editor's presentation, please review <a href="/yui/examples/editor/skinning_editor.html">the Rich Text Editor's Skinning Example</a> wherein the full CSS for the control is displayed.</p>

<p>For your convenience we have provided the Rich Text Editor's sprite PSD file in a <a href="assets/rte-skinning.zip">zip available here</a>.</p>


<?php
include "../inc/mobileSection.inc";
?>

<p>The YUI Rich Text Editor does not currently support the iPhone or the Nokia N95. Due to the interaction model (specifically, the inability to make a selection), the Editor will not function as expected. In our tests, it appears that the Apple and Nokia Webkit implementations don't event recognize the Editor as an editing field &mdash; meaning that these browsers are, at present, deliberately not supporting the use of an iframe in design mode.</p>

<p>The best way to get around this is to not render the Editor when you come across one of these browsers. Take a look at <a href="/yui/yahoo/#mobile">this example of browser detection in the Yahoo Global Object for ways of doing that</a>.</p>

<?php 
include "../inc/support.inc";
?>

		</div>
         <div class="yui-u">
		 	
			<div id="cheatsheet">
				<h3>Rich Text Editor Cheat Sheet:</h3>
				
				<a href="http://yuiblog.com/assets/pdf/cheatsheets/editor.pdf"><img src="http://us.i1.yimg.com/us.yimg.com/i/ydn/yuiweb/img/cheatsheet-images/editor.gif" width="178" height="136" alt="Cheat Sheet for the Rich Text Editor."></a>
				
				<p><a href="/yui/docs/assets/cheatsheets.zip">Download full set of cheat sheets.</a></p>
			</div>
			
			<div id="examples">
<?php 
	include("../inc/examplesNav/".$section.".inc");
?>
		   </div>
           <div id="morereading">
            <h3>More Reading about the YUI Rich Text Editor</h3>
            <ul>
            	<li><a href="http://ericmiraglia.com/yui/demos/editor-dialog.php">Example: Editor in a Dialog Control</a></li>
            	<li><a href="http://drupal.org/project/yui_editor">YUI Rich Text Editor for Drupal</a>, by Jeff C. Decker (and others)</li>
                <li><a href="http://yuiblog.com/blog/2007/08/13/rte-notes/">Some Notes on the YUI Rich Text Editor</a>, by RTE author <a href="http://blog.davglass.com/">Dav Glass</a></li>
                <li><a href="http://williamduff.name/YahooPages/">Yahoo! Pages</a> - <a href="http://williamduff.name/">William Duff - (UICU) Univerisity Hack Day Winner</a></li>
                <li><a href="http://www.niallkennedy.com/blog/2007/08/yui-rich-text-editor.html">YUI Rich Text Editor for blog comments</a>, by <a href="http://www.niallkennedy.com/">Niall Kennedy</a></li>
                <li><a href="http://www.builderau.com.au/program/html/soa/Support-rich-text-with-the-Yahoo-User-Interface-Library/0,339028420,339284662,00.htm">Support rich text with the Yahoo! User Interface Library</a>, by <a href="http://www.builderau.com.au/">Tony Patton, TechRepublic</a></li>
                <li><a href="http://allmybrain.com/2007/10/16/an-image-upload-extension-for-yui-rich-text-editor/">An Image Upload Extension for YUI Rich Text Editor</a>. by <a href="http://allmybrain.com/">Dennis Muhlestein</a></li>
            </ul>
           </div>
<?php 
$thisURI="http://developer.yahoo.com/yui/editor/";
require_once('../inc/badge.inc');
?>
<h3 id="delicious">YUI Rich Text Editor on del.icio.us:</h3>
<div class="delicious">
<?php require('../inc/badge-html.inc'); ?>
</div>

		 </div>
      </div>

</div>
</div>

<?php include "../inc/side.inc" ?>
<?php include "../inc/footer.inc" ?>

