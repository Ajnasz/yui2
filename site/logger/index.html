<?php 
$title="Yahoo! UI Library: Logger";
$section="logger";
$component="Logger Control";
$highlightSyntax = true;
$releasenotes = true;
include "../inc/header.inc";
?>

<div id="yui-main">
<div class="yui-b">
  <div class="yui-ge">
      <div class="yui-u first">

<div id="promo" class="component">
  <h1>Logger</h1>
  <p><img src="http://us.i1.yimg.com/us.yimg.com/i/ydn/yuiweb/img/logger.gif" width="225" height="209" class="example" alt="Image: The Logger's optional UI.">The Logger Control provides a simple way to read or write log messages with
  a single line of code. With this control, you can tap into the rich
  event-driven messages included with the YUI Library's debug files; This
  messaging allows you to get a fuller picture of the inner workings of any YUI
  Library component. The Logger Control provides a simple messaging interface
  that allows you to filter, pause, resume, and clear log messages on your
  screen.  Whether or not you invoke this UI, you can monitor log output via the
  FireBug extension for Firefox or via the Safari JavaScript console. The Logger Control supports
  logging messages with customizable categories and
  sources. Adventurous developers can extend Logger to build their own
  implementations to suit any requirement.</p>
  <div>
    <h4>On This Page:</h4>
    <ul>
      <li><a href="#start">Getting Started</a></li>
      <li><a href="#using">Using Logger</a></li>
      <li><a href="#skinning">Skinning Logger</a></li>
      <li><a href="#mobile">YUI on Mobile Devices</a></li>
      <li><a href="#support">Support &amp; Community</a></li><li><a href="#filingbugs">Filing Bugs and Feature Requests</a></li>
    </ul>
  </div>

<?php
include('../inc/quicklinks.inc');
?>

</div>
<h2 class="first">Getting Started<a name="start"></a></h2>
<p>To use the Logger component, include the following source files in your
  web page with the script tag:</p>
<textarea name="code" class="HTML" cols="60" rows="1">&lt;!--CSS file (default YUI Sam Skin) --&gt;
&lt;link type="text/css" rel="stylesheet" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/logger/assets/skins/sam/logger.css"&gt;

&lt;!-- Dependencies --&gt;
&lt;script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yahoo-dom-event/yahoo-dom-event.js"&gt;&lt;/script&gt;

&lt;!-- OPTIONAL: Drag and Drop (not required if not enabling drag and drop) --&gt;
&lt;script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/dragdrop/dragdrop-min.js"&gt;&lt;/script&gt;

&lt;!-- Source file --&gt;
&lt;script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/logger/logger-min.js"&gt;&lt;/script&gt;
</textarea>
<?php
include "../inc/include-notice.inc";
?>

<h3>Reading Log Messages</h3>
<p>Instantiate a LogReader to display log messages on your web page:</p>
<textarea name="code" class="JScript" cols="60" rows="1"><script type="text/javascript">
var myLogReader = new YAHOO.widget.LogReader();
</script>
</textarea>

<p>Attach a LogReader to a specific HTML element by passing the element's ID to Logger's constructor:</p>
<textarea name="code" class="JScript" cols="60" rows="1"><div id="myLogger"></div>
<script type="text/javascript">
var myLogReader = new YAHOO.widget.LogReader("myLogger");
</script>
</textarea>

<p>Attach a LogReader to a specific HTML element by passing an element reference to Logger's constructor:</p>
<textarea name="code" class="JScript" cols="60" rows="1"><script type="text/javascript">
var myContainer = document.body.appendChild(document.createElement("div"));
var myLogReader = new YAHOO.widget.LogReader(myContainer);
</script>
</textarea>

<h3>Writing Log Messages</h3>
<p>Use the <code>YAHOO.log()</code> function, part of the <a href="../yahoo/">Yahoo Global Object</a>, to write log messages from anywhere in your code:</p>
<textarea name="code" class="JScript" cols="60" rows="1"><script type="text/javascript">
// Assigns default category "info" and default source "global"
YAHOO.log("My log message");
</script>
</textarea>

<p>Assign a category to your log message:</p>
<textarea name="code" class="JScript" cols="60" rows="1"><script type="text/javascript">
// Assigns the category "source", which has a pre-defined style
YAHOO.log("My log message", "warn");
</script>
</textarea>

<p>Assign a custom category to your log message:</p>
<textarea name="code" class="JScript" cols="60" rows="1"><style>
.yui-log .mycategory {background-color:#7B0099;} /* customize a color */
</style>

...

<script type="text/javascript">
// Assigns a custom, case-insensitive category "mycategory", which will
// be styled by the custom CSS you define with the same string
YAHOO.log("My log message", "mycategory");
</script>
</textarea>

<p>Assign a category and a source to your log message:</p>
<textarea name="code" class="JScript" cols="60" rows="1"><script type="text/javascript">
YAHOO.log("My log message", "error", "buggyscript.js");
</script>
</textarea>

<h2>Using Logger <a name="using"></a></h2>
<p>This section describes in more detail the Logger, LogReader, and LogWriter classes, as well as some common configuration cases.</p>

<h3>The Logger Class</h3>
<p><code>YAHOO.widget.Logger</code> is a singleton class that manages incoming log messages and makes them
available for output to LogReader instances. By setting the Logger property
<code>maxStackEntries</code>, you can cap the number of log messages the Logger will manage.
Once the limit is reached, the oldest log message will be evicted to make room
for the newer entry.</p>

<p>Some browsers have implemented a
global <code>console.log()</code> method which can serve various functionalities. For instance,
if you have the FireBug extension to Firefox installed, or the Safari JavaScript
console enabled, logging messages to <code>console.log()</code> will output to browser-specific components.
By default, the YUI Logger does not call this method, but you may wish
enable this feature by calling <code>YAHOO.widget.Logger.enableBrowserConsole()</code>. Once enabled,
calling <code>YAHOO.widget.Logger.disableBrowserConsole()</code> will disable this feature.</p>

<p>The Logger class also allows you to clear out all previous log messages:</p>

<textarea name="code" class="JScript" cols="60" rows="1"><script type="text/javascript">
   // Clears internal array of log message objects and clears all previous
   // log messages from any LogReaders.
   YAHOO.widget.Logger.reset();
</script></textarea>

<h3>The LogReader Class</h3>
<p><code>YAHOO.widget.LogReader</code> class creates a standalone UI control on
a web page to easily display Logger messages included with debug builds of the YUI
Library. LogReaders allow you to take full advantage of features like filtration
by category and by source. The LogReader interface also allows you to pause and
resume logging during script execution. Although LogReader has been
pre-defined with a modestly configurable look and feel, advanced implementers
may fully customize LogReader's CSS or subclass LogReader entirely for a
customized experience.</p>

<p>Visibility of the LogReader UI is controlled using calls to <code>show()</code> and <code>hide()</code>.  By default, the LogReader is visible.</p>

<textarea name="code" class="JScript" cols="60" rows="1">
   // Hide the Log Reader UI (no loss of log messages)
   myLogReader.hide();

   // Show the Log Reader UI
   myLogReader.show();
</textarea>

<h4>Common Configurations</h4>
<p>The following properties are configurable using an object literal to set values
in the constructor:</p>

<dl>
<dt>width</dt>
<dd>Width of console</dd>
<dt>height</dt>
<dd>Height of container</dd>
<dt>left/top/right/bottom</dt>
<dd>Position from edge of viewport</dd>
<dt>footerEnabled</dt>
<dd>If false, hides the footer</dd>
<dt>logReaderEnabled</dt>
<dd>If false, LogReader is paused</dd>
<dt>thresholdMax</dt>
<dd>Maximum number of messages to show in the console</dd>
<dt>thresholdMin</dt>
<dd>How many messages to keep displayed when thresholdMax is reached and console
is cleared</dd>
<dt>draggable</dt>
<dd>If false, disables LogReader draggability, otherwise console is draggable
(requires Drag and Drop Utility)</dd>
<dt>outputBuffer</dt>
<dd>Size of output buffer in milliseconds -- higher values will enhance performance</dd>
<dt>newestOnTop</dt>
<dd>If false, new entries will be added below previous entries</dd>
<dt>verboseOutput</dt>
<dd>If false, log entries will be printed in a more compact format</dd>
<dt>entryFormat</dt>
<dd>innerHTML template to customize the printed log entries</dd>
</dl>

<textarea name="code" class="JScript" cols="60" rows="1">
var myConfigs = {
    width: "20px",
    height: "30em",
    newestOnTop: false,
    footerEnabled: false
};
var myContainer = null; // LogReader will create markup from scratch
var myLogReader = new YAHOO.widget.LogReader(myContainer, myConfigs);
</textarea>

<h4>Customizing Output</h4>
<p>The LogReader class allows you to customize the output format of log messages in three ways:</p>
<ol>
    <li>The config <code>verboseOutput</code> toggles between the default verbose and compact formats</li>
    <li>The config <code>entryFormat</code> assigns a format template used to generate the entries' innerHTML strings</li>
    <li>The LogReader's <code>formatMsg</code> method can be overridden with custom code</li>
</ol>

<h5><code>entryFormat</code> Templates</h5>
<textarea name="code" class="JScript" cols="60" rows="1">
   // Customize the formatting of output to LogReader
   myLogReader.formatMsg = function(oLogMsg) {
      var category = oLogMsg.category;
      return '<p><span class="'+category+'">'+category+'</span> '+ oLogMsg.msg+'</p>';
   };
</textarea>

<p><code>entryFormat</code> templates can contain markup as well as any of the following bracketed placeholders:</p>
<ul>
    <li>category</li>
    <li>label</li>
    <li>sourceAndDetail</li>
    <li>message</li>
    <li>localTime</li>
    <li>elapsedTime</li>
    <li>totalTime</li>
</ul>

<p>For example, the template used for verbose log entries (the default setting), is:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
    YAHOO.widget.LogReader.VERBOSE_TEMPLATE =
        "<span class='{category}'>{label}</span>{totalTime}ms (+{elapsedTime}) {localTime}:</p><p>{sourceAndDetail}</p><p>{message}</p>";
</textarea>

<h5>Customizing <code>formatMsg</code></h5>
<textarea name="code" class="JScript" cols="60" rows="1">
   // Customize the formatting of output to LogReader
   myLogReader.formatMsg = function(oLogMsg) {
      var category = oLogMsg.category;
      return '<p><span class="'+category+'">'+category+'</span> '+ oLogMsg.msg+'</p>';
   };
</textarea>

<h3>The LogWriter Class</h3>
<p>The <code>YAHOO.widget.LogWriter</code> class provides a shortcut for implementers who are logging many
messages from the same source. For instance, if you are debugging a class
written in JavaScript, you may want to instantiate a single LogWriter to write
logs for the entire class:</p>

<textarea name="code" class="JScript" cols="60" rows="1">
var MyClass = function(){
    // Define a toString() for your class that can
    // identify the class and any instance information
    this.toString() = function() {
        return "MyClass instance data";
    };
    
    // Instantiate a LogWriter
    this.logger = new YAHOO.widget.LogWriter(this.toString());

    // Now you can write log messages from your LogWriter
    this.logger.log("A new MyClass has been created","info");
};

// Every instance of your class can have its own LogWriter
MyClass.prototype.logger = null;

// This will log a message that is filterable by category and by source
var myInstance = new MyClass();
</textarea>

<p>Note that when you supply a space-delimited string to the LogWriter
constructor, the first word of the string will be used to assign a source to the
log message, and the rest of the string will be prepended to the log message for
supplementary detail. LogReader will parse the string at the first empty space
character. If there are no empty spaces in the string, the entire string will be
used to assign a source to the log message.</p>

<h2>Skinning Logger <a name="skinning"></a></h2>
<p>The Logger comes with a default presentation or "skin," part of the
"Sam Skin" visual treatment that accompanies most YUI controls. You can read
more about the general approach to skinning YUI components
<a href="/yui/articles/skinning/">in this in-depth article</a>.</p>

<p>In the case of the Logger Control, there is no "core" CSS treatment —
which is to say that there is no CSS that is considered essential to the
functioning of the control. All of the CSS provided with Logger is part of
the Sam Skin visual treatment.</p>

<p><img src="../docs/assets/logger.gif" alt="The Logger Control" width="225" height="209" border="0" /></p>

<p>To explore the CSS which controls the Logger's presentation, please
review <a href="/yui/examples/logger/log_skinning.html">the Logger
Skinning Example</a> wherein the full CSS for the control is displayed.</p>

<?php
include "../inc/mobileSection.inc";
?>

<p>The Logger control has been tested on several high-end smart phones without
any major known issues. It is meant primarily as a development tool, and therefore
it is not recommended in production environments. Due to the inherent limitations
found in mobile platforms, implementers should take into account the following
preliminary list of known issues:</p>

<ul>
<li>The LogReader console may take up precious real estate.</li>
<li>Output to the LogReader may experience delays due to the high-latency environment.</li>
<li>Support for the native browser <code>console.log()</code> function may be unreliable at
best or altogether non-existent.</li>
</ul>

<?php
include "../inc/support.inc";
?>

		</div>
         <div class="yui-u">
		 	
			<div id="cheatsheet">
				<h3>Logger Control Cheat Sheet:</h3>
				
				<a href="http://yuiblog.com/assets/pdf/cheatsheets/logger.pdf"><img src="http://us.i1.yimg.com/us.yimg.com/i/ydn/yuiweb/img/cheatsheet-images/logger.gif" width="178" height="132" alt="Cheat Sheet for the Logger Control."></a>
				
				<p><a href="/yui/docs/assets/cheatsheets.zip">Download full set of cheat sheets.</a></p>
			</div>
			
			<div id="examples">
<?php 
	include("../inc/examplesNav/".$section.".inc");
?>
		   </div>

			<div id="morereading">
				<h3>More Reading about the YUI Logger Control:</h3>
				
				<ul>
					<li><a href="http://codebetter.com/blogs/jay.kimble/archive/2007/02/22/JavaScript-API_2700_s-and-Debugging.aspx">JavaScript API's and Debugging</a>, by Jay Kimble (reviews several JavaScript debugging controls)</li>
		 		</ul>
		   </div>

<?php 
$thisURI="http://developer.yahoo.com/yui/logger/";
require_once('../inc/badge.inc');
?>
<h3 id="delicious">YUI Logger on del.icio.us:</h3>
<div class="delicious">
<?php require('../inc/badge-html.inc'); ?>
</div>

		 </div>
      </div>

</div>
</div>

<?php include "../inc/side.inc" ?>
<?php include "../inc/footer.inc" ?>
