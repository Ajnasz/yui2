<?php 
$title="Yahoo! UI Library: YUI Test";
$section="yuitest";
$component="Testing Framework";
$highlightSyntax = true;
$releasenotes = true;
include("../inc/header.inc");
?>

<div id="yui-main">
<div class="yui-b">
  <div class="yui-ge">
      <div class="yui-u first">

<div id="promo" class="component">

    <h1><?php echo $title; ?></h1>
    <p>YUI Test is a testing framework for browser-based JavaScript solutions. Using YUI Test, you can easily add unit testing to your JavaScript solutions. While not a direct port from any specific xUnit framework, YUI Test does derive some characteristics from <a href="http://www.nunit.org/">nUnit</a> and <a href="http://www.junit.org/">JUnit</a>.</p> 
    <p>YUI Test features:</p>
    <ul>
        <li>Rapid creation of <strong>test cases</strong> through simple syntax.</li>
        <li>Advanced <strong>failure detection</strong> for methods that throw errors.</li>
        <li>Grouping of related test cases using <strong>test suites</strong>.</li>
        <li><strong>Asynchronous tests</strong> for testing events and Ajax communication.</li>
        <li><strong>DOM Event simulation</strong> in all A-grade browsers.</li>
    </ul>
    <div>
        <h4>On This Page:</h4>
        <ul>
            <li><a href="#video">Video: Test-Driven Development with YUI Test</a></li>
            <li><a href="#start">Getting Started</a></li>
            <li><a href="#testcases">Using Test Cases</a></li>
            <li><a href="#assertions">Assertions</a></li>
            <li><a href="#useractions">Simulating User Actions</a></li>
            <li><a href="#asynctests">Asynchronous Tests</a></li>
            <li><a href="#testsuites">Test Suites</a></li>
            <li><a href="#running-tests">Running Tests</a></li>
            <li><a href="#viewing-results">Viewing Results</a></li>
            <li><a href="#test-reporting">Test Reporting</a></li>
            <li><a href="#mobile">YUI on Mobile Devices</a></li>
            <li><a href="#support">Support &amp; Community</a></li><li><a href="#filingbugs">Filing Bugs and Feature Requests</a></li>
        </ul>
		
    </div>

<?php
include('../inc/quicklinks.inc');
?>
  
</div>

        <h2 id="video" class="first">Video: Test-Driven Development with YUI Test</h2>
        
        <p>In this 48-minute tech talk from October 2008, Yahoo! engineer Nicholas C. Zakas introduces you to the world of test-driven development and how it can be applied to JavaScript projects using YUI Test. [<a href="http://us.dl1.yimg.com/download.yahoo.com/dl/ydn/yui/theater/zakas-yuitest.m4v">iPod/iPhone compatible download also available</a>.]</p>
        
<p><object width="512" height="322"><param name="movie" value="http://d.yimg.com/static.video.yahoo.com/yep/YV_YEP.swf?ver=2.2.30" /><param name="allowFullScreen" value="true" /><param name="AllowScriptAccess" VALUE="always" /><param name="bgcolor" value="#000000" /><param name="flashVars" value="id=10267335&vid=3737228&lang=en-us&intl=us&thumbUrl=http%3A//us.i1.yimg.com/us.yimg.com/p/i/bcst/videosearch/5631/73581987.jpeg&embed=1" /><embed src="http://d.yimg.com/static.video.yahoo.com/yep/YV_YEP.swf?ver=2.2.30" type="application/x-shockwave-flash" width="512" height="322" allowFullScreen="true" AllowScriptAccess="always" bgcolor="#000000" flashVars="id=10267335&vid=3737228&lang=en-us&intl=us&thumbUrl=http%3A//us.i1.yimg.com/us.yimg.com/p/i/bcst/videosearch/5631/73581987.jpeg&embed=1" ></embed></object></p>


    
<h2 id="start">Getting Started</h2>
<p>To use YUI Test, include the following source files in your web page:</p>
<textarea name="code" class="HTML" cols="60" rows="1"><!--CSS-->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/logger/assets/logger.css">
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yuitest/assets/testlogger.css">

<!-- Dependencies --> 
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/logger/logger-min.js"></script>

<!-- Source File -->
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yuitest/yuitest-min.js"></script>
</textarea>
<?php
include "../inc/include-notice.inc";
?>
<h2 id="testcases">Using Test Cases</h2>
<p>The basis of YUI Test is the <code>YAHOO.tool.TestCase</code> object. A <code>TestCase</code> object is created by using the 
  <code>YAHOO.tool.TestCase</code> constructor and passing in an object containing methods and other information with which 
  to initialize the test case. Typically, the argument is an object literal, for example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testSomething : function () {
            ...
        },

        testSomethingElse : function () {
            ...
        }
    });
</script> 
</textarea>  
<p>In this example, a simple test case is created named &quot;TestCase Name&quot;. The <code>name</code> property is automatically
  applied to the test case so that it can be distinguished from other test cases that may be run during the same cycle. The two
  methods in this example are tests methods ( <code>testSomething()</code> and <code>testSomethingElse())</code>, which means
  that they are methods designed to test a specific piece of functional code. Each test method name must begin with <code>test</code> in order to be recognized and
  run as a test and each should have one or more <a href="#assertions">assertions</a> that test data for validity.</p>
  
<h3 id="setup-and-teardown">setUp() and tearDown()</h3>  
<p>As each test method is called, it may be necessary to setup information before it's run and then potentially clean up that information 
  after the test is run. The <code>setUp()</code> method is run before each and every test in the test case and likewise the <code>tearDown()</code> method is run 
  after each test is run. These methods should be used in conjunction to create objects before a test is run and free up memory after the 
  test is run. For example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Setup and tear down
        //---------------------------------------------
        
        setUp : function () {
            this.data = { name : "Nicholas", age : 28 };
        },
    
        tearDown : function () {
            delete this.data;
        },

        //---------------------------------------------
        // Tests
        //---------------------------------------------

        testName: function () {
            YAHOO.util.Assert.areEqual("Nicholas", this.data.name, "Name should be 'Nicholas'");
        },
    
        testAge: function () {
            YAHOO.util.Assert.areEqual(28, this.data.age, "Age should be 28");
        }    
    });
</script> 
</textarea>   
<p>In this example, a <code>setUp()</code> method creates a data object with some basic information. Each property of the data object is checked with 
  a different test, <code>testName()</code> tests the value of <code>data.name</code> while <code>testAge()</code> tests the value of <code>data.age</code>. Afterwards, the data object is deleted 
  to free up the memory. Real-world implementations will have more complex tests, of course, but they should follow the basic pattern you see in the above code.</p>
<p><strong>Note: </strong>Both <code>setUp()</code> and <code>tearDown()</code> are optional methods and are only used when defined.</p>

<h3 id="ignoring">Ignoring Tests</h3>
<p>There may be times when you want to ignore a test (perhaps the test is invalid for your purposes or the functionality is being re-engineered and so it shouldn't be tested at this time). To specify tests to ignore, 
  use the <code>_should.ignore</code> property and name each test to skip as a property whose value is set to <code>true</code>:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Special instructions
        //---------------------------------------------
        
        _should: {
            ignore: {
                testName: true //ignore this test
            }
        },
    
        //---------------------------------------------
        // Setup and tear down
        //---------------------------------------------
    
        setUp : function () {
            this.data = { name : "Nicholas", age : 28 };
        },
        
        tearDown : function () {
            delete this.data;
        },
      
        //---------------------------------------------
        // Tests
        //---------------------------------------------        
    
        testName: function () {
            YAHOO.util.Assert.areEqual("Nicholas", this.data.name, "Name should be 'Nicholas'");
        },
    
        testAge: function () {
            YAHOO.util.Assert.areEqual(28, this.data.age, "Age should be 28");
        }

    });
</script> 
</textarea>  
<p>Here, the <code>testName()</code> method will be ignored when the test case is run. This is accomplished by first defining the special <code>_should</code> 
  property and within it, an <code>ignore</code> property. The ignore property is an object containing name-value pairs representing the names of the tests 
  to ignore. By defining a property named &quot;testName&quot; and setting its value to <code>true</code>, it says that the method named &quot;testName&quot; 
  should not be executed.</p>

<h3 id="intentional-errors">Intentional Errors</h3>
<p>There may be a time that a test throws an error that was expected. For instance, perhaps you're testing a function that should throw an error if invalid data 
  is passed in. A thrown error in this case can signify that the test has passed. To indicate that 
  a test should throw an error, use the <code>_should.error</code> property.  For example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    function sortArray(array) {
        if (array instanceof Array){
            array.sort();
        } else {
            throw new TypeError("Expected an array");
        }
    }
    
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Special instructions
        //---------------------------------------------
        
        _should: {
            error: {
                testSortArray: true //this test should throw an error
            }
        },

        //---------------------------------------------
        // Tests
        //---------------------------------------------        
    
        testSortArray: function () {
            sortArray(12);  //this should throw an error
        }

    });
</script> 
</textarea>  
<p>In this example, a test case is created to test the standalone <code>sortArray()</code> function, which simply accepts an array and calls its <code>sort()</code> method. 
  But if the argument is not an array, an error is thrown. When <code>testSortArray()</code> is called, it throws an error because a number is passed into <code>sortArray()</code>. 
  Since the <code>_should.error</code> object has a property called &quot;testSortArray&quot; set to <code>true</code>, this indicates that <code>testSortArray()</code> should 
  pass only if an error is thrown.</p>
<p>It is possible to be more specific about the error that should be thrown. By setting a property in <code>_should.error</code> to a string, you can
  specify that only a specific error message can be construed as a passed test.  Here's an example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    function sortArray(array) {
        if (array instanceof Array){
            array.sort();
        } else {
            throw new TypeError("Expected an array");
        }
    }
    
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Special instructions
        //---------------------------------------------
        
        _should: {
            error: {
                testSortArray: "Expected an array"
            }
        },

        //---------------------------------------------
        // Tests
        //---------------------------------------------        
    
        testSortArray: function () {
            sortArray(12);  //this should throw an error
        }

    });
</script> 
</textarea>    
<p>In this example, the <code>testSortArray()</code> test will only pass if the error that is thrown has a message of &quot;Expected an array&quot;.
  If a different error occurs within the course of executing <code>testSortArray()</code>, then the test will fail due to an unexpected error.</p>
<p>If you're unsure of the message but know the type of error that will be thrown, you can specify the error constructor for the error
you're expecting to occur:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    function sortArray(array) {
        if (array instanceof Array){
            array.sort();
        } else {
            throw new TypeError("Expected an array");
        }
    }
    
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Special instructions
        //---------------------------------------------
        
        _should: {
            error: {
                testSortArray: TypeError
            }
        },

        //---------------------------------------------
        // Tests
        //---------------------------------------------        
    
        testSortArray: function () {
            sortArray(12);  //this should throw an error
        }

    });
</script> 
</textarea> 
<p>In this example, the test will pass if a <code>TypeError</code> gets thrown; if any other type of error is thrown,
the test will fail. A word of caution: <code>TypeError</code> is the most frequently thrown error by browsers,
so specifying a <code>TypeError</code> as expected may give false passes.</p>
<p>To narrow the margin of error between checking for an error message and checking the error type, you can create a specific error
  object and set that in the <code>_should.error</code> property, such as:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    function sortArray(array) {
        if (array instanceof Array){
            array.sort();
        } else {
            throw new TypeError("Expected an array");
        }
    }
    
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Special instructions
        //---------------------------------------------
        
        _should: {
            error: {
                testSortArray: new TypeError("Expected an array")
            }
        },

        //---------------------------------------------
        // Tests
        //---------------------------------------------        
    
        testSortArray: function () {
            sortArray(12);  //this should throw an error
        }

    });
</script> 
</textarea> 
<p>Using this code, the <code>testSortArray()</code> method will only pass if a <code>TypeError</code> object is thrown with a message of
  &quot;Expected an array&quot;; if any other type of error occurs, then the test fails due to an unexpected error.</p>
<p><strong>Note: </strong>If a test is marked as expecting an error, the test will fail unless that specific error is thrown. If the test
  completes without an error being thrown, then it fails.</p>  
<h2 id="assertions">Assertions</h2>
<p>Test methods use assertions to check the validity of a particular action or function. An assertion method tests (asserts) that a 
condition is valid; if not, it throws an error that causes the test to fail. If all assertions pass within a test method, 
it is said that the test has passed. To aid in writing tests, the <code>YAHOO.util.Assert</code> object contains several assertion
methods that can be used to validate data.</p>
<p>Topics covered in this section include:</p>
<ul>
    <li><a href="#equality">Equality Assertions</a></li>
    <li><a href="#sameness">Sameness Assertions</a></li>
    <li><a href="#datatypes">Data Type Assertions</a></li>
    <li><a href="#specialvalues">Special Value Assertions</a></li>
    <li><a href="#forcedfailures">Forced Failures</a></li>
</ul>
<h3 id="equality">Equality Assertions</h3>
<p>The simplest assertions are <code>areEqual()</code> and <code>areNotEqual()</code>. Both methods accept three arguments: the expected value,
  the actual value, and an optional failure message (a default one is generated if this argument is omitted). For example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testEqualityAsserts : function () {
            var Assert = YAHOO.util.Assert;
            
            Assert.areEqual(5, 5);     //passes
            Assert.areEqual(5, "5");     //passes
            Assert.areNotEqual(5, 6);  //passes
            Assert.areEqual(5, 6, "Five was expected."); //fails
        }
    });
</script> 
</textarea>   
<p>These methods use the double equals (<code>==</code>) operator to determine if two values are equal, so type coercion may occur. This means
  that the string <code>"5"</code> and the number <code>5</code> are considered equal because the double equals sign converts the number to
  a string before doing the comparison. If you don't want values to be converted for comparison purposes, use the sameness assertions instead.</p>

<h3 id="sameness">Sameness Assertions</h3>
<p>The sameness assertions are <code>areSame()</code> and <code>areNotSame()</code>, and these accept the same three arguments as the equality
  assertions: the expected value, the actual value, and an optional failure message. Unlike the equality assertions, these methods use
  the triple equals operator (<code>===</code>) for comparisions, assuring that no type coercion will occur. For example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testSamenessAsserts : function () {
            var Assert = YAHOO.util.Assert;
            
            Assert.areSame(5, 5);      //passes
            Assert.areSame(5, "5");    //fails
            Assert.areNotSame(5, 6);   //passes
            Assert.areNotSame(5, "5"); //passes
            Assert.areSame(5, 6, "Five was expected."); //fails
        }
    });
</script> 
</textarea>   
<p><strong>Note: </strong>Even though this example shows multiple assertions failing, a test will stop as soon as one
  assertion fails, causing all others to be skipped.</p>

<h3 id="datatypes">Data Type Assertions</h3>
<p>There may be times when some data should be of a particular type. To aid in this case, there are several methods that test the data type
  of variables. Each of these methods accepts two arguments: the data to test and an optional failure message. The data type assertions are as
  follows:</p>
<ul>
    <li><code>isArray()</code> - passes only if the value is an instance of <code>Array</code>.</li>
    <li><code>isBoolean()</code> - passes only if the value is a Boolean.</li>
    <li><code>isFunction()</code> - passes only if the value is a function.</li>
    <li><code>isNumber()</code> - passes only if the value is a number.</li>
    <li><code>isObject()</code> - passes only if the value is an object or a function.</li>
    <li><code>isString()</code> - passes only if the value is a string.</li>
</ul>
<p>These are used as in the following example: </p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testDataTypeAsserts : function () {
            var Assert = YAHOO.util.Assert;
            
            Assert.isString("Hello world");     //passes
            Assert.isNumber(1);                 //passes
            Assert.isArray([]);                 //passes
            Assert.isObject([]);                //passes
            Assert.isFunction(function(){});    //passes
            Assert.isBoolean(true);             //passes
            Assert.isObject(function(){});      //passes

            Assert.isNumber("1", "Value should be a number.");  //fails
            Assert.isString(1, "Value should be a string.");    //fails
        }
    });
</script> 
</textarea>
<p>In addition to these specific data type assertions, there are two generic data type assertions.</p>
<p>The <code>isTypeOf()</code> method tests the string returned when the <code>typeof</code> operator is applied to a value. This
  method accepts three arguments: the type that the value should be (&quot;string&quot;, &quot;number&quot;, 
  &quot;boolean&quot;, &quot;undefined&quot;, &quot;object&quot;, or &quot;function&quot;), the value to test,  and an optional failure message. 
  For example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testTypeOf : function () {
            var Assert = YAHOO.util.Assert;
            
            Assert.isTypeOf("string", "Hello world");   //passes
            Assert.isTypeOf("number", 1);               //passes
            Assert.isTypeOf("boolean", true);           //passes
            Assert.isTypeOf("number", 1.5);             //passes
            Assert.isTypeOf("function", function(){});  //passes
            Assert.isTypeOf("object", {});              //passes
            Assert.isTypeOf("undefined", this.blah);    //passes
            
            Assert.isTypeOf("number", "Hello world", "Value should be a number."); //fails
            
        }
    });
</script> 
</textarea>
<p>If you need to test object types instead of simple data types, you can also use the <code>isInstanceOf()</code> assertion, which accepts three 
  arguments: the constructor function to test for, the value to test, and an optional failure message. This assertion uses the <code>instanceof</code>
  operator to determine if it should pass or fail. Example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testInstanceOf : function () {
            var Assert = YAHOO.util.Assert;
            
            Assert.isInstanceOf(Object, {});    //passes
            Assert.isInstanceOf(Array, []);     //passes            
            Assert.isInstanceOf(Object, []);     //passes            
            Assert.isInstanceOf(Function, function(){});  //passes
            Assert.isInstanceOf(Object, function(){});  //passes
            
            Assert.isTypeOf(Array, {}, "Value should be an array."); //fails
            
        }
    });
</script> 
</textarea>

<h3 id="specialvalues">Special Value Assertions</h3>
<p>There are numerous special values in JavaScript that may occur in code. These include <code>true</code>, <code>false</code>, <code>NaN</code>,
  <code>null</code>, and <code>undefined</code>. There are a number of assertions designed to test for these values specifically:</p>
<ul>
  <li><code>isFalse()</code> - passes if the value is <code>false</code>.</li>
  <li><code>isTrue()</code> - passes if the value is <code>true</code>.</li>
  <li><code>isNaN()</code> - passes if the value is <code>NaN</code>.</li>
  <li><code>isNotNaN()</code> - passes if the value is not <code>NaN</code>.</li>
  <li><code>isNull()</code> - passes if the value is <code>null</code>.</li>
  <li><code>isNotNull()</code> - passes if the value is not <code>null</code>.</li>
  <li><code>isUndefined()</code> - passes if the value is <code>undefined</code>.</li>
  <li><code>isNotUndefined()</code> - passes if the value is not <code>undefined</code>.</li>
</ul>
<p>Each of these methods accepts two arguments: the value to test and an optional failure message. All of the assertions expect the
  exact value (no type cohersion occurs), so for example calling <code>isFalse(0)</code> will fail.</p>  
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testSpecialValues : function () {
            var Assert = YAHOO.util.Assert;
            
            Assert.isFalse(false);      //passes
            Assert.isTrue(true);        //passes            
            Assert.isNaN(NaN);          //passes            
            Assert.isNaN(5 / "5");      //passes
            Assert.isNotNaN(5);         //passes
            Assert.isNull(null);        //passes
            Assert.isNotNull(undefined);    //passes
            Assert.isUndefined(undefined);  //passes
            Assert.isNotUndefined(null);    //passes
            
            Assert.isUndefined({}, "Value should be undefined."); //fails
            
        }
    });
</script> 
</textarea>    
<h3 id="forcedfailures">Forced Failures</h3>
<p>While most tests fail as a result of an assertion, there may be times when 
  you want to force a test to fail or create your own assertion method. To do this, use the 
  <code>fail()</code> method to force a test method to fail immediately:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testForceFail : function () {
            YAHOO.util.Assert.fail();  //causes the test to fail
        }
    });
</script> 
</textarea>    
<p>In this case, the <code>testForceFail()</code> method does nothing but force 
  the method to fail. Optionally, you can pass in a message to <code>fail()</code> 
  which will be displayed as the failure message:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        testForceFail : function () {
            YAHOO.util.Assert.fail("I decided this should fail.");
        }
    });
</script> 
</textarea> 
<p>When the failure of this method is reported, the message &quot;I decided this should fail.&quot; will be reported.</p>
<h2 id="useractions">Simulating User Actions</h2>
<p>Simply testing function calls may not be adequate enough due to the level of interactivity provided by web applications. Since many operations require a
  user to initiate them, the <code>YAHOO.util.UserAction</code> object provides methods to simulate basic user events involving the keyboard
  and mouse.</p>
<p>Simulated events are browser-created events that, most of the time, behave exactly as user-initated events. Events bubble as they normally would
  and <code>event</code> objects are created with properties containing data about the event (sometimes these properties are browser-specific, so it's
  recommended that you make use of the browser-equalizing methods of <code>YAHOO.util.Event</code> to retrieve the appropriate values for
  properties such as <code>target</code>, <code>relatedTarget</code>, and <code>charCode</code>. All event handlers are called synchronously
  at each event target throughout the event's lifetime.</p>  
<h3>Mouse Events</h3>
<p>There are seven mouse events that can be simulated using methods on <code>UserAction</code>:</p>
<ul>
  <li>click</li>
  <li>dblclick</li>
  <li>mousedown</li>
  <li>mouseup</li>
  <li>mouseover</li>
  <li>mouseout</li>
  <li>mousemove</li>
</ul>
<p>Each event is fired by a corresponding method on <code>UserAction</code> that accepts two arguments: the target of the event and
  an optional object specifying additional information for the event. To simulate a click on the document's body element,
  for example, the following code can be used:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    YAHOO.util.UserAction.click(document.body);
</script> 
</textarea>
<p>This code simulates a click with all of the default properties on the <code>event</code> object. To specify additional information,
  such as the Shift key being down, the second argument must be used and the exact DOM name for the event property specified (there is
  browser-normalizing logic that translates these into browser-specific properties when necessary):
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    YAHOO.util.UserAction.click(document.body, { shiftKey: true });
</script> 
</textarea>  
<p>In this updated example, a click event is fired on the document's body while simulating that the Shift key is down.</p>
<p>The extra properties to specify vary depending on the event being simulated and are limited to this list:</p>
<ul>
  <li>detail - Indicates the number of times a button was clicked (DOM-compliant browsers only).</li>
  <li>screenX/screenY - coordinates of the mouse event in relation to the entire screen (DOM-compliant browsers only).</li>
  <li>clientX/clientY - coordinates of the mouse event in relation to the browser client area.</li>
  <li>ctrlKey/altKey/shiftKey/metaKey - the state of the Ctrl, Alt, Shift, and Meta keys, respectively (true for down, false for up).</li>
  <li>button - the button being used for the event, 0 for left (default), 1 for right, 2 for center.</li>
  <li>relatedTarget - the element the mouse moved from (during a mouseover event) or to (during a mouseout event). You should
    use <code>YAHOO.util.Event.getRelatedTarget()</code> to retrieve this value from the generated <code>event</code> object
    as it will be translated into browser-specific property names as necessary.</li>
</ul>
<p>Examples of the different methods and their extra properties:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var element = document.getElementById("myDiv");
    
    //simulate a click Alt key down
    YAHOO.util.UserAction.click(element, { altKey: true});
    
    //simulate a double click with Ctrl key down
    YAHOO.util.UserAction.dblclick(element, { ctrlKey: true });
    
    //simulate a mouse over
    YAHOO.util.UserAction.mouseover(element, { relatedTarget: document.body });
    
    //simulate a mouse out
    YAHOO.util.UserAction.mouseout(element, { relatedTarget: document.body });
    
    //simulate a mouse down at point (100,100) in the client area
    YAHOO.util.UserAction.mousedown(element, { clientX: 100, clientY: 100 });
    
    //simulate a mouse up at point (100,100) in the client area
    YAHOO.util.UserAction.mouseup(element, { clientX: 100, clientY: 100 });
    
    //simulate a mouse move at point (200, 200) in the client area
    YAHOO.util.UserAction.mousemove(document.body, { clientX: 200, clientY: 200 });

</script> 
</textarea>
<h3>Key Events</h3>
<p>There are three key event simulations available using <code>UserAction</code>:</p>
<ul>
  <li>keyup</li>
  <li>keydown</li>
  <li>keypress</li>
</ul>
<p>As with the mouse events, each key event has a corresponding method of the same name and accepts two arguments, which are the
  target of the event and an object specifying additional properties for the event. For key events, the second argument is required
  as you must specify which key was interacted with. For <code>keyup()</code> and <code>keydown()</code>, the <code>keyCode</code> 
  property must be specified; for <code>keypress()</code>, the <code>charCode</code> property must be included. In many cases,
  <code>keyCode</code> and <code>charCode</code> may be the same value to represent the same key (97, for instance, represents the &quot;A&quot;
  key as well as being the ASCII code for the letter &quot;a&quot;). For example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var element = document.getElementById("myDiv");
    
    //simulate a keydown on the A key
    YAHOO.util.UserAction.keydown(element, { keyCode: 97 });

    //simulate a keyup on the A key
    YAHOO.util.UserAction.keydown(element, { keyCode: 97 });
    
    //simulate typing "a"
    YAHOO.util.UserAction.keypress(element, { charCode: 97 });    

</script> 
</textarea>
<p>Key events also support the <code>ctrlKey</code>, <code>altKey</code>, <code>shiftKey</code>, and <code>metaKey</code> event properties.</p>
<p><strong>Note:</strong> Due to differences in browser implementations, key events may not be simulated in the same manner across 
  all browsers. For instance, when simulating a keypress event on a textbox, only Firefox will update the textbox with the new character
  of the key that was simulated to be pressed. For other browsers, the events are still registered and all event handlers are called,
  however, the textbox display and <code>value</code> property are not updated. These differences should go away as browser support
  for simulated events improves in the future.</p>
<p><strong>Safari 2.x Developers:</strong> Due to a bug in the Safari 2.x codebase, simulating a keydown event may cause the browser to 
  crash. This issue has been resolved in Safari 3.x.</p>  
<h2 id="asynctests">Asynchronous Tests</h2>
<p>YUI Test allows you to pause a currently running test and resume either after a set amount of time or 
  at another designated time. The <code>TestCase</code> object has a method called <code>wait()</code>. When <code>wait()</code>
  is called, the test immediately exits (meaning that any code after that point will be ignored) and waits for a signal to resume
  the test.</p>
<p>A test may be resumed after a certain amount of time by passing in two arguments to <code>wait()</code>: a function to execute
  and the number of milliseconds to wait before executing the function (similar to using <code>setTimeout()</code>). The function
  passed in as the first argument will be executed as part of the current test (in the same scope) after the specified amount of time.
  For example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Setup and tear down
        //---------------------------------------------
        
        setUp : function () {
            this.data = { name : "Nicholas", age : 29 };
        },
    
        tearDown : function () {
            delete this.data;
        },

        //---------------------------------------------
        // Tests
        //---------------------------------------------

        testAsync: function () {
            YAHOO.util.Assert.areEqual("Nicholas", this.data.name, "Name should be 'Nicholas'");
            
            //wait 1000 milliseconds and then run this function
            this.wait(function(){
                YAHOO.util.Assert.areEqual(29, this.data.age, "Age should be 29");
            
            }, 1000);   
        }  
    });
</script> 
</textarea>   
<p>In this code, the <code>testAsync()</code> function does one assertion, then waits 1000 milliseconds before performing
  another assertion. The function passed into <code>wait()</code> is still in the scope of the original test, so it has
  access to <code>this.data</code> just as the original part of the test does. Timed waits are helpful in situations when
  there are no events to indicate when the test should resume.</p>
<p>If you want a test to wait until a specific event occurs before resuming, the <code>wait()</code> method can be called
  without any arguments. At that point, testing will resume only when the <code>resume()</code> method is called. The 
  <code>resume()</code> method accepts a single argument, which is a function to run when the test resumes. This function
  should specify additional assertions. The following tests to see if the <code>Anim</code> object has performed its
  animation completely:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    var oTestCase = new YAHOO.tool.TestCase({
    
        name: "TestCase Name",
        
        //---------------------------------------------
        // Tests
        //---------------------------------------------

        testAnimation : function (){
            var Assert = YAHOO.util.Assert;
            var YUD = YAHOO.util.Dom;
            
            //animate width to 400px
            var myAnim = new YAHOO.util.Anim('testDiv', { width: { to: 400 } }, 3, YAHOO.util.Easing.easeOut);
            
            //assign oncomplete handler
            myAnim.onComplete.subscribe(function(){
            
                //tell the TestRunner to resume
                this.resume(function(){
                
                    Assert.areEqual(YUD.get("testDiv").offsetWidth, 400, "Width of the DIV should be 400.");
                
                });
            
            }, this, true);

            //start the animation
            myAnim.animate();
            
            //wait until something happens
            this.wait();
        
        }  
    });
</script> 
</textarea>   
<p>In this example, an <code>Anim</code> object is used to animate the width of an element to 400 pixels. When the animation
  is complete, the <code>onComplete</code> method is fired, so that is where the <code>resume()</code> method is called. The
  function passed into <code>resume()</code> simply tests that the final width of the element is indeed 400 pixels. Note that
  for this to work, the scope of the event handler had to be adjusted by passing in the second and third arguments to 
  <code>subscribe()</code>. Once the event handler is set up, the animation begins and then the <code>wait()</code> method is
  called without any arguments. At that point, testing stops until the animation completes and <code>resume()</code> is called.</p>
<h2 id="testsuites">Test Suites</h2>
<p>For large web applications, you'll probably have many test cases that should be run during a testing phase. A test suite helps to handle multiple test cases 
  by grouping them together into functional units that can be run together. To create new test suite, use the <code>YAHOO.tool.TestSuite</code> 
  constructor and pass in the name of the test suite. The name you pass in is for logging purposes and allows you to discern which <code>TestSuite</code> instance currently running. For example: </p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    //create the test suite
    var oSuite = new YAHOO.tool.TestSuite("TestSuite Name");
    
    //add test cases
    oSuite.add(new YAHOO.tool.TestCase({
        ...
    }));
    oSuite.add(new YAHOO.tool.TestCase({
        ...
    }));
    oSuite.add(new YAHOO.tool.TestCase({
        ...
    }));
</script> 
</textarea>   
<p>Here, a test suite is created and three test cases are added to it using the <code>add()</code> method. The test suite now contains all of the 
  information to run a series of tests.</p>
<p>It's also possible to add other multiple <code>TestSuite</code> instances together under a parent <code>TestSuite</code> using the same <code>add()</code> method:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    
    //create a test suite
    var oSuite = new YAHOO.tool.TestSuite("TestSuite Name");
    
    //add a test case
    oSuite.add(new YAHOO.tool.TestCase({
        ...
    });
    
    //create another suite
    var oAnotherSuite = new YAHOO.tool.TestSuite("test_suite_name");
    
    //add a test case
    oAnotherSuite.add(new YAHOO.tool.TestCase({
        ...
    });
    
    //add the second suite to the first
    oSuite.add(oAnotherSuite);
</script> 
</textarea> 
<p>By grouping test suites together under a parent test suite you can more effectively manage testing of particular aspects of an application.</p>
<p>Test suites may also have <code>setUp()</code> and <code>tearDown()</code> methods. A test suite's <code>setUp()</code> method is called before
  the first test in the first test case is executed (prior to the test case's <code>setUp()</code> method); a test suite's <code>tearDown()</code>
  method executes after all tests in all test cases/suites have been executed (after the last test case's <code>tearDown()</code> method). To specify
  these methods, pass an object literal into the <code>YAHOO.tool.TestSuite</code> constructor:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">
    
    //create a test suite
    var oSuite = new YAHOO.tool.TestSuite({
        name : "TestSuite Name",
        
        setUp : function () {
            //test-suite-level setup 
        },
        
        tearDown: function () {
            //test-suite-level teardown
        }
    });

</script> 
</textarea>   
<p>Test suite <code>setUp()</code> and <code>tearDown()</code> may be helpful in setting up global objects that are necessary for a multitude of tests
  and test cases.</p>  
<h2 id="running-tests">Running Tests</h2>
<p>In order to run test cases and test suites, use the <code>YAHOO.tool.TestRunner</code> object. This object is a singleton that
  simply runs all of the tests in test cases and suites, reporting back on passes and failures. To determine which test cases/suites
  will be run, add them to the <code>TestRunner</code> using the <code>add()</code> method. Then, to run the tests, call the <code>run()</code>
  method:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    //add the test cases and suites
    YAHOO.tool.TestRunner.add(oTestCase);
    YAHOO.tool.TestRunner.add(oTestSuite);
    
    //run all tests
    YAHOO.tool.TestRunner.run();

</script> 
</textarea>
<p>If at some point you decide not to run the tests that have already been added to the <code>TestRunner</code>, they can be removed by calling <code>clear()</code>:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    YAHOO.tool.TestRunner.clear();

</script> 
</textarea>
<p>Making this call removes all test cases and test suites that were added using the <code>add()</code> method.</p>

<h3>TestRunner Events</h3>
<p>The <code>TestRunner</code> provides results and information about the process by publishing several events. These events can occur at four
  different points of interest: at the test level, at the test case level, at the test suite level, and at the <code>TestRunner</code> level.
  The data available for each event depends completely on the type of event and the level at which the event occurs.</p>  
  
<h4>Test-Level Events</h4>
<p>Test-level events occur during the execution of specific test methods. There are three test-level events:</p>
<ul>
    <li><code>TestRunner.TEST_PASS_EVENT</code> - occurs when the test passes.</li>
    <li><code>TestRunner.TEST_FAIL_EVENT</code> - occurs when the test fails.</li>
    <li><code>TestRunner.TEST_IGNORE_EVENT</code> - occurs when a test is ignored.</li>
</ul>
<p>For each of these events, the event data object has three properties:</p>
<ul>
    <li><code>type</code> - indicates the type of event that occurred.</li>
    <li><code>testCase</code> - the test case that is currently being run.</li>
    <li><code>testName</code> - the name of the test that was just executed or ignored.</li>
</ul>
<p>For <code>TestRunner.TEST_FAIL_EVENT</code>, an <code>error</code> property containing the error object
  that caused the test to fail.</p>

<h3>TestCase-Level Events</h3>
<p>There are two events that occur at the test case level:</p>
<ul>
    <li><code>TestRunner.TEST_CASE_BEGIN_EVENT</code> - occurs when the test case is next to be executed but before the first test is run.</li>
    <li><code>TestRunner.TEST_CASE_COMPLETE_EVENT</code> - occurs when all tests in the test case have been executed or ignored.</li>
</ul>
<p>For these two events, the event data object has three properties:</p>
<ul>
    <li><code>type</code> - indicates the type of event that occurred.</li>
    <li><code>testCase</code> - the test case that is currently being run.</li>
</ul>
<p>For <code>TEST_CASE_COMPLETE_EVENT</code>, an additional property called <code>results</code> is included. The <code>results</code>
  property is an object containing the aggregated results for all tests in the test case (it does not include information about tests that
  were ignored). Each test that was run has an entry in the <code>result</code> object where the property name is the name of the test method 
  and the value is an object with two properties: <code>result</code>, which is either "pass" or "fail", and <code>message</code>, which is a 
  text description of the result (simply "Test passed" when a test passed or the error message when a test fails). Additionally, the 
  <code>failed</code> property indicates the number of tests that failed in the test case, the <code>passed</code> property indicates the 
  number of tests that passed, and the <code>total</code> property indicates the total number of tests executed. A typical <code>results</code>
  object looks like this:</p>
<textarea name="code" class="JScript" cols="60" rows="1">

    {
        failed: 1,
        passed: 1,
        ignored: 0,
        total: 2,
        type: "testcase",
        name: "Test Case 0",
    
        test0: {
            result: "pass",
            message: "Test passed",
            type: "test",
            name: "test0"
        },
        
        test1: {
            result: "fail",
            message: "Assertion failed",
            type: "test",
            name: "test1"
        }
    }

</textarea>  
<p>The <code>TEST_CASE_COMPLETE_EVENT</code> provides this information for transparency into the testing process.</p>

<h3>TestSuite-Level Events</h3>
<p>There are two events that occur at the test suite level:</p>
<ul>
    <li><code>TestRunner.TEST_SUITE_BEGIN_EVENT</code> - occurs when the test suite is next to be executed but before the first test is run.</li>
    <li><code>TestRunner.TEST_SUITE_COMPLETE_EVENT</code> - occurs when all tests in all test cases in the test suite have been executed or ignored.</li>
</ul>
<p>For these two events, the event data object has three properties:</p>
<ul>
    <li><code>type</code> - indicates the type of event that occurred.</li>
    <li><code>testSuite</code> - the test suite that is currently being run.</li>
</ul>
<p>The <code>TEST_SUITE_COMPLETE_EVENT</code> also has a <code>results</code> property, which contains aggregated results for all of the
  test cases (and other test suites) it contains. Each test case and test suite contained within the main suite has an entry in the
  <code>results</code> object, forming a hierarchical structure of data. A typical <code>results</code> object may look like this:</p>
<textarea name="code" class="JScript" cols="60" rows="1">

    {    
        failed: 2,
        passed: 2,
        ignored: 0,
        total: 4,
        type: "testsuite",
        name: "Test Suite 0",
    
        testCase0: {
            failed: 1,
            passed: 1,
            ignored: 0,
            total: 2,
            type: "testcase",
            name: "testCase0",
    
            test0: {
                result: "pass",
                message: "Test passed."
                type: "test",
                name: "test0"
            },            
            test1: {
                result: "fail",
                message: "Assertion failed.",
                type: "test",
                name: "test1"
            }
        },
        testCase1: {
            failed: 1,
            passed: 1,
            ignored: 0,
            total: 2,
            type: "testcase",
            name: "testCase1",
    
            test0: {
                result: "pass",
                message: "Test passed.",
                type: "test",
                name: "test0"
            },            
            test1: {
                result: "fail",
                message: "Assertion failed.",
                type: "test",
                name: "test1"
            }
        }
    }   

</textarea>  
<p>This example shows the results for a test suite with two test cases, but there may be test suites contained within test suites. In that case,
  the hierarchy is built out accordingly, for example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">

    {
        failed: 3,
        passed: 3,
        ignored: 0,
        total: 6,
        type: "testsuite",
        name: "Test Suite 0",
    
        testCase0: {
            failed: 1,
            passed: 1,
            ignored: 0,
            total: 2,
            type: "testcase",
            name: "testCase0",
    
            test0: {
                result: "pass",
                message: "Test passed.",
                type: "test",
                name: "test0"                
            },            
            test1: {
                result: "fail",
                message: "Assertion failed.",
                type: "test",
                name: "test1"                
            }
        },
        
        testCase1: {
            failed: 1,
            passed: 1,
            ignored: 0,
            total: 2,
            type: "testcase",
            name: "testCase1",
    
            test0: {
                result: "pass",
                message: "Test passed.",
                type: "test",
                name: "test0"                
            },            
            test1: {
                result: "fail",
                message: "Assertion failed.",
                type: "test",
                name: "test1"                
            }
        },
        
        testSuite0:{
            failed: 1,
            passed: 1,
            ignored: 0,
            total: 2,
            type: "testsuite",
            name: "testSuite0",        
        
            testCase2: {
                failed: 1,
                passed: 1,
                ignored: 0,
                total: 2,
                type: "testcase",
                name: "testCase2",
    
                test0: {
                    result: "pass",
                    message: "Test passed.",
                    type: "test",
                    name: "test0"
                },   
         
                test1: {
                    result: "fail",
                    message: "Assertion failed.",
                    type: "test",
                    name: "test1"
                }
            }
        }
    } 

</textarea>  
<p>In this code, the test suite contained another test suite named &quot;testSuite0&quot;, which is included in the results along
  with its test cases. At each level, the results are aggregated so that you can tell how many tests passed or failed within each
  test case or test suite.</p>

<h3>TestRunner-Level Events</h3>
<p>There are two events that occur at the <code>TestRunner</code> level:</p>
<ul>
    <li><code>TestRunner.BEGIN_EVENT</code> - occurs when testing is about to begin but before any tests are run.</li>
    <li><code>TestRunner.COMPLETE_EVENT</code> - occurs when all tests in all test cases and test suites have been executed or ignored.</li>
</ul>
<p>The data object for these events contain a <code>type</code> property, indicating the type of event that occurred. <code>COMPLETE_EVENT</code>
  also includes a <code>results</code> property that is formatted the same as the data returned from <code>TEST_SUITE_COMPLETE_EVENT</code> and
  contains rollup information for all test cases and tests suites that were added to the <code>TestRunner</code>.</p>

<h4>Subscribing to Events</h4>  
<p>You can subscribe to particular events by calling the <code>subscribe()</code> method 
  (see the <a href="http://developer.yahoo.com/yui/docs/YAHOO.util.EventProvider.html#subscribe">documentation</a>). Your event handler code
  should expect a single object to be passed in as an argument. This object provides information about the event that just occured. Minimally,
  the object has a <code>type</code> property that tells you which type of event occurred. Example:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    function handleTestFail(data){
        alert("Test named '" + data.testName + "' failed with message: '" + data.error.message + "'.");
    }

    var TestRunner = YAHOO.tool.TestRunner;
    TestRunner.subscribe(TestRunner.TEST_FAIL_EVENT, handleTestFail);
    TestRunner.run();

</script> 
</textarea>
<p>In this code, the <code>handleTestFail()</code> function is assigned as an event handler for <code>TEST_FAIL_EVENT</code>. You can also
  use a single event handler to subscribe to any number of events, using the event data object's <code>type</code> property to determine
  what to do:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    function handleTestResult(data){
        var TestRunner = YAHOO.tool.TestRunner;
        
        switch(data.type) {
            case TestRunner.TEST_FAIL_EVENT:
                alert("Test named '" + data.testName + "' failed with message: '" + data.error.message + "'.");
                break;
            case TestRunner.TEST_PASS_EVENT:
                alert("Test named '" + data.testName + "' passed.");
                break;
            case TestRunner.TEST_IGNORE_EVENT:
                alert("Test named '" + data.testName + "' was ignored.");
                break;
        }
        
    }

    var TestRunner = YAHOO.tool.TestRunner;
    TestRunner.subscribe(TestRunner.TEST_FAIL_EVENT, handleTestResult);
    TestRunner.subscribe(TestRunner.TEST_IGNORE_EVENT, handleTestResult);
    TestRunner.subscribe(TestRunner.TEST_PASS_EVENT, handleTestResult);
    TestRunner.run();

</script> 
</textarea>
<h2 id="viewing-results">Viewing Results</h2>
<p>To view the results of tests, create a new <code>YAHOO.tool.TestLogger</code> object. The <code>TestLogger</code> is a subclass of the
  <a href="/yui/logger">Logger</a> widget that is specifically designed to output results from the <code>TestRunner</code>. Before calling 
  <code>TestRunner.run()</code>, create a new instance of the <code>TestLogger</code> to ensure that all results are reported:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
<script type="text/javascript">

    var oLogger = new YAHOO.tool.TestLogger();
    YAHOO.tool.TestRunner.run();

</script> 
</textarea>  
<p>Once created, you can filter the data to show only tests that passed, only tests that failed, etc.</p>

<h2 id="test-reporting">Test Reporting</h2>
<p>When all tests have been completed and the results object has been returned, you can post those results to a server
using a <code>YAHOO.tool.TestReporter</code> object. A <code>TestReporter</code> object creates a form that is POSTed
to a specific URL with the following fields:</p>
<ul>
    <li><code>results</code> - the serialized results object.</li>
    <li><code>useragent</code> - the user-agent string of the browser.</li>
    <li><code>timestamp</code> - the date and time that the report was sent.</li>
</ul>
<p>You can create a new <code>TestReporter</code> object by passing in the URL to report to. The results object can
then be passed into the <code>report()</code> method to submit the results:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
var oReporter = new YAHOO.tool.TestReporter("http://www.yourserver.com/path/to/target");
oReporter.report(results);
</textarea>
<p>The form submission happens behind-the-scenes and will not cause your page to navigate away. This operation is
one direction; the reporter does not get any content back from the server.</p>
<h3>Serialization Formats</h3>
<p>There are two predefined serialization formats for results objects: XML (the default) and JSON. The format can be
specified in the <code>TestReporter</code> constructor by passing in <code>YAHOO.tool.TestFormat.XML</code> or 
<code>YAHOO.tool.TestFormat.JSON</code> (when no argument is specified, <code>YAHOO.tool.TestFormat.XML</code> is used:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
var oReporter = new YAHOO.tool.TestReporter("http://www.yourserver.com/path/to/target", YAHOO.tool.TestFormat.JSON);
</textarea>
<p>The XML format outputs results in the following
format:</p>
<textarea name="code" class="HTML" cols="60" rows="1">
<report name="YUI Test Results" passed="5" failed="3" ignored="1" total="5">
  <testsuite name="yuisuite" passed="5" failed="0" ignored="0" total="5">
    <testcase name="YAHOO.util.Anim" passed="5" failed="0" ignored="0" total="5">
      <test name="test_getEl" result="pass" message="Test passed" /> 
      <test name="test_isAnimated" result="pass" message="Test passed" /> 
      <test name="test_stop" result="pass" message="Test passed" /> 
      <test name="test_onStart" result="pass" message="Test passed" /> 
      <test name="test_endValue" result="pass" message="Test passed" /> 
    </testcase>
  </testsuite>
</report>
</textarea> 
<p>The JSON format requires the <a href="/yui/json/">JSON utility</a> to be loaded on the page and outputs results in a format that follows the object/array hierarchy of the results object, such as:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
{
    "passed": 5,
    "failed": 0,
    "ignored": 0,
    "total": 0,
    "type": "report",
    "name": "YUI Test Results",
    
    "yuisuite":{
        "passed": 5,
        "failed": 0,
        "ignored": 0,
        "total": 0,
        "type": "testsuite",
        "name": "yuisuite",
        
        "YAHOO.util.Anim":{
            "passed": 5,
            "failed": 0,
            "ignored": 0,
            "total": 0,
            "type":"testcase",
            "name":"YAHOO.util.Anim",
            
            "test_getEl":{
                "result":"pass",
                "message":"Test passed.",
                "type":"test",
                "name":"test_getEl"            
            },
            "test_isAnimated":{
                "result":"pass",
                "message":"Test passed.",
                "type":"test",
                "name":"test_isAnimated"            
            },
            "test_stop":{
                "result":"pass",
                "message":"Test passed.",
                "type":"test",
                "name":"test_stop"            
            },
            "test_onStart":{
                "result":"pass",
                "message":"Test passed.",
                "type":"test",
                "name":"test_onStart"            
            },
            "test_endValue":{
                "result":"pass",
                "message":"Test passed.",
                "type":"test",
                "name":"test_endValue"            
            }        
        }
    }
}
</textarea>
<p>Each of the formats produces a string with no extra white space (white space and indentation shown here is for readability
purposes only).</p>
<h3>Custom Fields</h3>
<p>You can optionally specify additional fields to be sent with the results report by using the <code>addField()</code> method.
This method accepts two arguments: a name and a value. Any field added using <code>addField()</code> is POSTed along with
the default fields back to the server:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
oReporter.addField("color", "blue");
oReporter.addField("message", "Hello world!");
</textarea>
<p>Note that if you specify a field name that is the same as a default field, the custom field is ignored in favor of 
the default field.</p>

<?php include "../inc/mobileSection.inc"; ?>

<p>YUI Test works with only minor issues on mobile devices. Things to be aware of:</p>
<ul>
    <li>Asynchronous tests may not work. Certain mobile browsers, such as Opera Mini 4, do not support the 
        <code>setTimeout()</code> function, which is necessary for asynchronous tests. YUI Test will automatically
        revert to synchronous mode for running tests in this situation and any tests that the <code>wait()</code>
        method will throw an error.</li>
    <li>Not all mouse and keyboard events are support on mobile devices, so attempting to simulate these events
        will cause tests to fail. Most mobile browsers do not support <code>mouseover</code> or <code>mouseout</code> and
        many do not support key events at all.</li>
</ul>

<?php 
include("../inc/support.inc");
?>

	  </div>
         <div class="yui-u">
		 	
			<div id="cheatsheet">
				<h3>YUI Test Cheat Sheet:</h3>
				
				<a href="http://yuiblog.com/assets/pdf/cheatsheets/yuitest.pdf"><img src="http://us.i1.yimg.com/us.yimg.com/i/ydn/yuiweb/img/cheatsheet-images/yuitest.gif" width="178" height="132" alt="Cheat Sheet for the YUI Test Utility"></a>
				
				<p><a href="/yui/docs/assets/cheatsheets.zip">Download full set of cheat sheets.</a></p>
			</div>
			
			<div id="examples">
<?php 
	include("../inc/examplesNav/".$section.".inc");
?>
		   </div>

<?php 
$thisURI="http://developer.yahoo.com/yui/yuitest/";
require_once('../inc/badge.inc');
?>
<h3 id="delicious">YUI Test on del.icio.us:</h3>
<div class="delicious">
<?php require('../inc/badge-html.inc'); ?>
</div>
		 </div>
    </div>

</div>
</div>

<?php include("../inc/side.inc"); ?>
<?php include("../inc/footer.inc"); ?>
