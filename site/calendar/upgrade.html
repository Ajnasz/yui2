<?php 
$title="Yahoo! UI Library: Calendar";
$section="calendar";
$highlightSyntax=true;
include "../inc/header.inc";
?>
<div id="yui-main">
<div class="yui-b">
<div id="promo" class="component">
	<h1>Yahoo! UI Library: Calendar 0.12 Upgrade Guide </h1>
	<p>As of the 0.12 release, the Calendar component has undergone significant API changes to make the control easier to configure. If using the default constructor (only specifying HTML IDs for rendering the Calendar), no changes are required in order to get up and running with the new version. However, any implementations using custom configuration properties such as pre-selected dates and localization must be adapted in order to function properly.</p>
	<p>This guide will provide examples of common usage scenarios and how to migrate them to take advantage of the new configuration features of Calendar 0.12.</p>
	<p><strong>Note:</strong> The full documentation for Calendar's 0.12 version is provided on <a href="index.html">the main Calendar documentation page</a> and in <a href="../docs/calendar/">the API documents for Calendar</a>; this page is intended solely to help you make a transition from an earlier version of the control.  If you're just getting started with Calendar, please refer to <a href="index.html">the 0.12 documentation</a>.</p>
	<div>
    <h4>Topics:</h4>
    <ul>
      <li><a href="#instantiating">Instantiating the Calendar </a></li>
      <li><a href="#config">Configuration Properties</a></li>
      <li><a href="#multi">Multi-Page Calendars Using CalendarGroup</a></li>
      <li><a href="#render">Styling and Customizing Calendar Cells</a></li>
      <li><a href="#localization">Localization</a></li>
      <li><a href="#events">Handling Events</a></li>
    </ul>
  </div>
</div>
<h2 id="instantiating" class="first">Instantiating the Calendar</h2>
 
<p>In Calendar 0.12, the configuration properties formerly known as <code>monthyear</code> and <code>selected</code> have been moved to take advantage of the new <code>config</code> argument that can be passed to the constructor. If these properties are not being set, it is not necessary to change the Calendar code at all. Previously, the Calendar was constructed like this:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
var cal1 = new YAHOO.widget.Calendar("cal1",
                                     "cal1Container",
                                     "5/2007",
                                     "5/5/2007-5/27/2007,5/30/2007");
</textarea>
<p>The new constructor, which adds the <code>config</code> argument (see lines 3 and 4 below), allows the currently displayed calendar page and selected dates to be specified as a part of this new configuration argument, rather than as arguments of the constructor:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
var cal1 = new YAHOO.widget.Calendar("cal1",
                                     "cal1Container",
                                    { pagedate: "5/2007",
                                      selected: "5/5/2007-5/27/2007,5/30/2007" } );
</textarea>
<p>The <code>config</code> argument can also be used to set other configuration properties, which will be covered in the next section.</p>
<h2 id="config">Configuration Properties</h3>
<p>Previous versions of Calendar required that configuration options be set using the <code>Options</code> and <code>Locale</code> objects prior to rendering. Calendar 0.12 provides the ability to configure the Calendar during instantiation or at runtime using the Calendar's new <code>cfg</code> object. Previously, setting the <code>MULTI_SELECT</code> property was accomplished by changing the value in the <code>Options</code> object:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
cal1.Options.MULTI_SELECT = true;
</textarea>
<p>The most common ways to configure properties in Calendar 0.12 are via the constructor or by using the <code>cfg</code> object's <code>setProperty</code> method:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
// In the constructor, via an object literal:
var cal1 = new YAHOO.widget.Calendar(&quot;myCalendar&quot;, &quot;myCalendarContainer&quot;, { MULTI_SELECT: true });
// Via &quot;setProperty&quot;, at runtime, after the Calendar has been rendered
myCalendar.cfg.setProperty("MULTI_SELECT", true);
</textarea>
<h2>Multi-Page Calendars using CalendarGroup <a name="multi"></a></h3>
<p>In Calendar 0.11.x, instantiating a multi-page calendar required the use of the <code>Calendar2up</code> class. For Calendar 0.12, the default multi-page calendar is called <code>CalendarGroup</code>. Previously, the <code>pages</code> array had to be manipulated directly in order to make changes to a multi-page calendar's individual configuration properties. In Calendar 0.12, the configuration interfaces have been synchronized to allow a CalendarGroup to be configured directly in the same way as the Calendar.</p>
<textarea name="code" class="JScript" cols="60" rows="1">
// The previous Calendar2up object's configuration was set by 
// manipulating the pages separately
var calOld = new YAHOO.widget.Calendar2up("cal", "calContainer");
calOld.pages[0].Options.MULTI_SELECT = true;
calOld.pages[1].Options.MULTI_SELECT = true;
// Now, CalendarGroup allows direct manipulation of configuration properties.
var calNew = new YAHOO.widget.CalendarGroup("cal1", "calContainer1");
calNew.cfg.setProperty("MULTI_SELECT", true);
</textarea>
<p>CalendarGroup also introduces a new argument, <code>pages</code>, that can be set using the configuration methods described above. This argument is set to 2 by default, meaning that a CalendarGroup will display 2 pages at a time. Setting this argument to a higher number will increase the number of pages displayed simultaneously. However, it should be noted that performance may decrease when the <code>pages</code> property is set to an unusually high number.</p>
<h2>Styling and Customizing Calendar Cells <a name="render"></a></h2>
<p>The familiar interface for <code>addRenderer</code> that Calendar 0.11.x used for adding renderer functions to a Calendar instance remains unchanged for Calendar 0.12. However, a new styling mechanism has been implemented that allows cells to be styled more easily using CSS rules. Meaningful class names have been applied to the Calendar's various elements, making it easy to style specific dates:</p>
<table width="672">
  <tbody>
    <tr class="odd">
      <th width="21%"> Field </th>
      <th width="21%">Class Identifier </th>
      <th width="29%" style="width:25%">Format</th>
      <th width="29%">Example</th>
    </tr>
    <tr>
      <td> Year </td>
      <td> y </td>
      <td> yyyy (full year) </td>
      <td> .y2006 </td>
    </tr>
    <tr class="odd">
      <td> Month </td>
      <td> m </td>
      <td>mm (month, 1-12) </td>
      <td>.m7</td>
    </tr>
    <tr>
      <td>Week Number </td>
      <td> w </td>
      <td> ww (week number, 1-52) </td>
      <td> .w6 </td>
    </tr>
    <tr class="odd">
      <td> Weekday </td>
      <td> wd </td>
      <td> w (weekday number, 0-6) </td>
      <td> .wd4 </td>
    </tr>
    <tr>
      <td> Day of Month </td>
      <td> d </td>
      <td> dd (day of month, 1-31) </td>
      <td> .d22 </td>
    </tr>
  </tbody>
</table>
<p>For instance, the class selector <code>.y2006 .m8 .d22</code> would allow the styling of 8/22/2006 through CSS:</p>
<textarea name="code" class="HTML" cols="60" rows="1">
<style>
.y2006 .m8 .d22 { background-color:yellow }
</style>
</textarea>
<p>The <code>addRenderer</code> function can still be used to customize the contents of cells for both Calendar and CalendarGroup.</p>
<h2 id="localization">Localization</h2>
<p>Localization now takes advantage of the same configuration mechanism used by other properties in Calendar 0.12. Instead of setting locale properties against the <code>Locale</code> object, the properties can be set directly using the same familiar names from 0.11.x. In the code sample below, all references to <code>cal.Locale</code> have been modififed to use <code>cfg.setProperty</code>:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
var cal1 = new YAHOO.widget.Calendar("cal1","cal1Container");
// Correct formats for Germany: dd.mm.yyyy, dd.mm, mm.yyyy
cal1.cfg.setProperty("DATE_FIELD_DELIMITER", ".");
cal1.cfg.setProperty("MDY_DAY_POSITION", 1);
cal1.cfg.setProperty("MDY_MONTH_POSITION", 2);
cal1.cfg.setProperty("MDY_YEAR_POSITION", 3);
cal1.cfg.setProperty("MD_DAY_POSITION", 1);
cal1.cfg.setProperty("MD_MONTH_POSITION", 2);
// Date labels for German locale
cal1.cfg.setProperty("MONTHS_SHORT",   ["Jan", "Feb", "M\u00E4r", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez"]);
cal1.cfg.setProperty("MONTHS_LONG",    ["Januar", "Februar", "M\u00E4rz", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"]);
cal1.cfg.setProperty("WEEKDAYS_1CHAR", ["S", "M", "D", "M", "D", "F", "S"]);
cal1.cfg.setProperty("WEEKDAYS_SHORT", ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"]);
cal1.cfg.setProperty("WEEKDAYS_MEDIUM",["Son", "Mon", "Die", "Mit", "Don", "Fre", "Sam"]);
cal1.cfg.setProperty("WEEKDAYS_LONG",  ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"]);
cal1.render();
</textarea>
<p>In addition, specifying which set of labels to use has become easier, thanks to the <code>LOCALE_MONTHS</code> and <code>LOCALE_WEEKDAYS</code> properties:</p>
  <table>
    <tbody>
      <tr>
        <th> Name </th>
        <th>Type</th>
        <th>Default</th>
        <th>Description</th>
      </tr>
      <tr>
        <td> LOCALE_MONTHS </td>
        <td> String </td>
        <td>&quot;long&quot; </td>
        <td>The format of the month title to be displayed. Possible values are &quot;short&quot;, &quot;medium&quot;, and &quot;long&quot;. </td>
      </tr>
      <tr class="odd">
        <td> LOCALE_WEEKDAYS </td>
        <td> String </td>
        <td>&quot;short&quot; </td>
        <td>The format of the weekday title to be displayed. Possible values are &quot;1char&quot;, &quot;short&quot;, &quot;medium&quot;, and &quot;long&quot;. </td>
      </tr>
	</tbody>
  </table>
<p>These properties can be set using the same configuration syntax used by other properties:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
	cal1.cfg.setProperty("LOCALE_MONTHS", "short");
	cal1.cfg.setProperty("LOCALE_WEEKDAYS", "medium");
</textarea>
<h2 id="events">Handling Events</h2>
<p>Prior to Calendar 0.12, events were defined as functions, such as <code>onSelect</code> and <code>onDeselect</code>. To achieve custom behaviors, these prototypal functions could be overridden on your Calendar instance:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
//0.11.x syntax:
cal1.onSelect = myFunction;
</textarea>
<p>In Calendar 0.12, all event functions have been replaced with Custom Event objects (see the <a href="../event/">Event Utility</a> for more details), allowing event handlers to subscribe to these events dynamically. This provides added flexibility to allow more than one event handler to be subscribed to any given event.  But this added flexibility comes at the cost of a a syntax change:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
//new 0.12 syntax for custom event subscription:
cal1.selectEvent.subscribe(myFunction, cal1, true);
</textarea>
<p>The second argument in the above code snippet is the scope in which to execute the function, and the third argument indicates that the scope should be corrected so that <code>this</code> refers to <code>cal1</code> (in this case, the Calendar instance).</p>
<?php 
include "../inc/support.inc";
?>
</div>
</div>
<?php include "../inc/side.inc" ?>
<?php include "../inc/footer.inc" ?>
