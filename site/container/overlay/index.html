<?php 
$title="Yahoo! UI Library: Overlay";
$section="container";
$component="Overlay Control";
$highlightSyntax = true;
$releasenotes = true;
include "../../inc/header.inc";
?>
<div id="yui-main">
<div class="yui-b">
  <div class="yui-ge">
      <div class="yui-u first">
<div id="promo" class="component">
<h1>Yahoo! UI Library: Overlay</h1>
<p> The Overlay control is an extension of <a href="../module/index.html">Module</a>; its role is to facilitate the creation of modular content that is absolutely positioned above the flow of a page. It adds additional functionality to <a href="../module/index.html">Module</a>, including methods for positioning, multiple custom events for monitoring internal property changes, and a built-in IFRAME solution for dealing with SELECT element bleed-through in Internet Explorer. </p>
<p><strong>Note:</strong> Overlay is a building block for other UI controls and
  does not in and of itself solve a particular interaction problem; if you're
  looking for a specific implementation of Overlay, check out the <a href="../tooltip/">Tooltip</a>, <a href="../panel/">Panel</a>, <a href="../dialog/">Dialog</a> and <a href="../simpledialog/">SimpleDialog</a> controls.</p>
<div>
    <h4>On This Page:</h4>
    <ul>
      <li><a href="#start">Getting Started</a></li>
      <li><a href="#using">Using Overlay</a></li>
      <li><a href="#support">Support &amp; Community</a></li><li><a href="#filingbugs">Filing Bugs and Feature Requests</a></li>
    </ul>
  </div>

<?php
include('../../inc/quicklinks.inc');
?>

</div>
<h2 class="first">Getting Started<a name="start"></a></h2>
<p>To use Overlay, include the following code in your page:</p> 
<textarea name="code" class="HTML" cols="60" rows="1">
<!-- Sam Skin CSS -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/container/assets/skins/sam/container.css">

<!-- Dependencies -->
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yahoo-dom-event/yahoo-dom-event.js"></script>

<!-- OPTIONAL: Animation (only required if using ContainerEffect) -->
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/animation/animation-min.js"></script>

<!-- Source file -->
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/container/container-min.js"></script>
</textarea>

<p>If you are <em>not</em> using <a href="../tooltip/">Tooltip</a>, <a href="../panel/">Panel</a>, <a href="../dialog/">Dialog</a>, or <a href="../simpledialog/">SimpleDialog</a>, you may substitute <code>container-min.js</code> with the smaller <code>container_core-min.js</code> file:</p>

<textarea name="code" class="HTML" cols="60" rows="1">
<!-- If not using Tooltip, Panel, Dialog, or SimpleDialog: -->
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/container/container_core-min.js"></script>
</textarea>

<p>Note that a CSS file is not required if you're only using <code>container_core-min.js</code>, however for the Overlay to operate as designed,
it does need to be positioned absolutely. The <code>yui-overlay</code> class applied to all overlays can be used to define your own rule to apply
<code>position:absolute</code> for all overlays. Alternatively you could include the <code>container.css</code> file mentioned above, but since it only has a single 
rule which applies to Overlays, it's overkill if you're aiming to optimize the amount of code required for your page.</p>

<?php
include "../../inc/include-notice.inc";
?>
<h2>Using Overlay<a name="using"></a></h2>
<p>This section describes common tasks for creating and using Overlay.  It contains
these sections:</p>
<ul> 
<li><a href="#html">Defining Overlay Markup</a></li>
<li><a href="#init">Initializing Overlay</a></li>
<li><a href="#position">Positioning the Overlay </a></li>
<li><a href="#stack">Stacking the Overlay</a></li>
<li><a href="#render">Rendering the Overlay </a></li>
<li><a href="#config">Configuration Properties</a></li>
</ul>
<p>
Note that Overlay inherits its constructor and configuration, as well as several other important methods, from Module. See <a href="../module/index.html">Module</a> for more information on how to utilize Module's features.</p>
<h3> Defining Overlay Markup<a name="html"></a></h3>
<p>
In its most basic form, the HTML markup for an Overlay looks like this:</p>
<textarea name="code" class="HTML" cols="60" rows="1"><div id="myOverlay">
  <div class="hd"></div> 
  <div class="bd"></div> 
  <div class="ft"></div> 
</div>
</textarea>
<h3>Initializing Overlay<a name="init"></a></h3>
<p>
To instantiate an Overlay around a pre-existing piece of markup (as exemplified above), simply pass the id of your modular content to the Overlay constructor:
</p>
<textarea name="code" class="JScript" cols="60" rows="1">var myOverlay = new YAHOO.widget.Overlay("myOverlay");</textarea>
<h3>Positioning the Overlay<a name="position"></a></h3>
<p>Overlay has several useful methods that can be used to position the Overlay, by either specifying specific pixel coordinates, or using special methods for contextually aligning or centering the Overlay.</p>
<p>To position an Overlay using pixel coordinates, use the <code>x</code>, <code>y</code>, or <code>xy</code> properties:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
// Set the x position
myOverlay.cfg.setProperty("x", 100);
// Set the y positon
myOverlay.cfg.setProperty("y", 200);
// Set the x and y positions simultaneously
myOverlay.cfg.setProperty("xy", [100,200]);
</textarea>
<p>To center an Overlay manually, you can call its <code>center()</code> method:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
// Center the Overlay
myOverlay.center();
</textarea>
<p>An alternative to manually centering the Overlay is to set its <code>fixedcenter</code> property to always keep the Overlay centered in the viewport:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
// Center the Overlay
myOverlay.cfg.setProperty("fixedcenter", true);
</textarea>
<p>To align an Overlay to another element on the page contextually, you can set the <code>context</code> property:</p>
<textarea name="code" class="JScript" cols="60" rows="1">
// This call says that myOverlay's top right corner should be snapped to "myContextEl"'s top left corner.
myOverlay.cfg.setProperty("context", ["myContextEl", "tr", "tl"]);
// To change the alignment later, you can also call "align" once the context property has already been set.
// This call will change the alignment so that myOverlay's top right corner is snapped to "myContextEl"'s bottom left corner.
myOverlay.align("tr", "bl"); 
</textarea>
<p>
Context based alignment by default is a one time operation - the Overlay will be aligned to the context element once, when the property is set (or, if the developer calls Overlay's <code>align()</code> method as shown above).
For example, unlike the <code>fixedcenter</code> property which repositions the Overlay when the window is resized or scrolled, <code>context</code> does not realign the Overlay with the context element in response to <code>windowScroll</code> or <code>windowResize</code> events. This is because in most use cases,
the page co-ordinates of the context element remains unchanged when the user scrolls or resizes the window.
</p>
<p>
However if the layout of your page could result in the page co-orindates of the context element being modified (e.g. in fluid layouts), you can provide an optional 
list of events which should trigger context element re-alignment as shown below:
</p>
<textarea name="code" class="JScript" cols="60" rows="1">
// myOverlay's top right corner should be snapped to "myContextEl"'s top left corner, and we should realign just before the Overlay is shown, or whenever the window is resized:
myOverlay.cfg.setProperty("context", ["myContextEl", "tr", "tl", ["beforeShow", "windowResize"]]);
</textarea>

<h3>Rendering the Overlay<a name="render"></a></h3>
<p>
Once initialized, an Overlay is rendered in the same way as <a href="../module/index.html#render">Module</a>, by invoking the
<code>render()</code> method. As with Module, if the Overlay was not created from markup you need to pass to the render
method, the parent element to which the Overlay should be added.
</p>

<h3>Stacking the Overlay<a name="stack"></a></h3>
<p>
One piece of core functionality provided by Overlay is support for a <code>zIndex</code> 
configuration property that enables it to be stacked above other elements on the page. 
The zIndex configuration property is an interface for setting the 
<a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-z-index">CSS z-index property</a>, and 
understanding how the browser handles z-index values is therefore an important part of using the  
Overlay control and its subclasses.
</p>
<p>
A commonly asked question when working with Overlays is <em>"Why is my Overlay rendered under DIV X,
even though DIV X has a z-index of 10, and I've set the z-index of my Overlay to 9999?"</em>.
Understanding stacking contexts will help you answer this question.
</p>
<h4>Understanding z-index and stacking contexts</h4>
<p>
Relatively and absolutely positioned elements can overlap other elements on the page. In situations where
elements overlap, the browser uses the CSS z-index property to determine how overlapping elements are 
stacked on top of each other along the z-axis: Generally speaking elements with higher z-indices are 
rendered above elements with lower z-indices.
</p>
<p>Consider the following simple markup structure:</p>
<textarea name="code" class="HTML" cols="60" rows="1">
    <body>
        <!-- DIV A and B are statically positioned, DIV A1, B1 are absolutely positioned -->
        <div id="A">
            <div id="A1" style="position:absolute;z-index:20;">A1, z-index = 20</div>
        </div>

        <div id="B">
            <div id="B1" style="position:absolute;z-index:10;">B1, z-index = 10</div>
        </div>
    </body>
</textarea>
<p>In the example above, <code>DIV A1</code> would be rendered on top of <code>DIV B1</code> 
if they were to overlap. <code>DIV A1</code> and <code>DIV B1</code> both have the same 
<em>stacking context</em>, the root or <code>body</code> element, and are stacked relative to 
each other within this context based on their z-index values.
</p>
<p>
However, if <code>DIV A</code> and <code>DIV B</code> are either relatively or 
absolutely positioned, the scenario changes:
</p>
<textarea name="code" class="HTML" cols="60" rows="1">
    <body>
        <!-- DIV A and B are now relatively positioned -->
        <div id="A" style="position:relative; z-index:1">
            <div id="A1" style="position:absolute;z-index:20;">A1, z-index = 20</div>
        </div>
        <div id="B" style="position:relative; z-index:2">
            <div id="B1" style="position:absolute;z-index:10;">B1, z-index = 10</div>
        </div>
    </body>
</textarea>
<p>
   <code>DIV B1 (z-index=10)</code> will be rendered on top of <code>DIV A1 (z-index=20)</code>, even though it has a lower z-index. 
</p>
<p>
   With different, positioned, parent elements, <code>DIV A1</code> and <code>DIV B1</code> no 
   longer share a stacking context.  As per the 
   <a href="http://www.w3.org/TR/CSS21/visuren.html#layers">W3C layering spec</a>, 
   <code>DIV A</code> and <code>DIV B</code> establish stacking contexts since they are relatively 
   positioned <strong>AND</strong> have a z-index defined.  Therefore, when determining how to 
   stack the elements the browser doesn't compare their z-index values relative to each other, but 
   rather to other elements in the stacking contexts established by their separate parent elements.
</p>

<p>
Additionally, since <code>DIV A</code> and <code>DIV B</code> share a stacking context (<code>body</code>), 
they are stacked so that <code>DIV B (z-index=2)</code> is placed above <code>DIV A (z-index=1)</code>, 
based on their z-index values.  Furthermore, any elements which are children of <code>DIV A</code> 
will always be below <code>DIV B</code> and any of its children.  No matter how high or low  
the z-indices of <code>DIV A1</code> and <code>DIV B1</code> are set, <code>DIV B1</code> will 
always stack above <code>DIV A1</code>, because <code>DIV B</code> is stacked above <code>DIV A</code>.
</p>

<p>
As mentioned above, positioned elements with a specified z-index will establish new stacking 
contexts for their child nodes. This is true for all A-Grade browsers. However in IE even 
positioned elements that <em>lack a defined z-index</em> establish a new stacking context.  
This is considered to be an <a href="http://therealcrisp.xs4all.nl/meuk/IE-zindexbug.html">IE bug</a>.
</p>

<p>
To completely avoid the potential impact of ancestor elements establishing new stacking contexts, 
render Overlays into the document's <code>&#60;body&#62;</code> element.  Doing so will gaurantee 
that all Overlay instances exist within the same stacking context, making it easier to manage how 
they are stacked above all other elements in the page.
</p>

<h3>Configuration Properties<a name="config"></a></h3>
<p>Overlay has the following configuration properties, which it passes on to all of its subclasses through inheritance:</p>
<div class="apisummary">
    <table>
    <tbody>
    <tr><th> Name </th><th>Type</th><th>Default</th><th>Description</th></tr>
    <tr class="odd"><td> x </td><td> Number </td><td> null </td><td> Sets the element's "left" style property. </td></tr>
    <tr><td> y </td><td> Number </td><td> null </td><td> Sets the element's "top" style property. </td></tr>
    <tr class="odd"><td> xy </td><td> Array </td><td> null </td><td> Sets the element's "top" and "left" style properties. </td></tr>
    <tr>
        <td> context </td>
        <td> Array </td>
        <td> null </td>
        <td>
            Allows the Overlay to be aligned relative to a context element. The property expects an array value with the format: <code>[contextElementOrId, overlayCorner, contextElementCorner]</code>,
            where "contextElementOrId" is the context element or the id of the context element. 
            </p>
            <p>
            The corner parameters are one of the following string values: "tr" (top right), "tl" (top left), "br" (bottom right), or "bl" (bottom left) and define which corners of the overlay and context element should be aligned.
            </p>
            <p>
            The array also supports an optional 4th entry, which is an array of event names which should trigger re-alignment of the Overlay with the currently configured context element. 
            E.g.: <code>[contextElementOrId, overlayCorner, contextElementCorner, ["beforeShow"]]</code> will re-align the Overlay to the context element just before it's shown.</p>
        </td>
    </tr>
    <tr class="odd">
    <td> effect </td>
    <td> Object / Object[] </td>
    <td> none </td>
    <td> Sets the ContainerEffect (one or many) that should be used when
      showing and hiding the Overlay. </td>
    </tr>
    <tr><td> fixedcenter </td><td> Boolean </td><td> false </td><td> Specifies whether the Overlay should be automatically centered in the viewport on window scroll and resize. </td></tr>
    <tr class="odd"><td> width </td><td> String </td><td> null </td><td> Sets the element's "width" style property. </td></tr>
    <tr><td> height </td><td> String </td><td> null </td><td> Sets the element's "height" style property. </td></tr>
    <tr class="odd"><td> zIndex </td><td> Number </td><td> null </td><td> Sets the element's "z-index" style property. </td></tr>
    <tr><td> constraintoviewport </td><td> Boolean </td><td> false </td><td> If set to true the Overlay will try to remain inside the confines of the size of viewport. </td></tr>
    <tr class="odd">
        <td> iframe </td><td> Boolean </td><td> false (true by default for IE 6 and below) </td>
        <td> If set to true the Overlay will have and iframe behind it to prevent other elements with a higher z-index from poking through. </td>
    </tr>
    <tr>
        <td> autofillheight </td>
        <td> String </td>
        <td> "body" </td>
        <td> Which container element (header, body or footer) should be sized to fill out any remaining 
        vertical space when a height is set on the container using the <code>height</code> configuration property. Supported values are "header", "body" and "footer". Can be set to null (or false) to turn off the feature.
        </td>
    </tr>
    </tbody>
    </table>
</div>
    <p>Overlay inherits the following properties: </p>
    <div class="apisummary short">
      <table>
        <tbody>
          <tr>
            <th> Name </th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
          <tr class="odd">
            <td> visible </td>
            <td> Boolean </td>
            <td> true </td>
            <td> Sets whether or not the Overlay is visible on the page (Overlay uses the CSS "visibility" property to control this).</td>
          </tr>
          <tr>
            <td> monitorresize </td>
            <td> Boolean </td>
            <td> true </td>
            <td> Configures whether or not to create a hidden off-screen element
              that can be used to monitor for text size changes in the DOM. </td>
          </tr>
        </tbody>
      </table>
    </div>
<?php 
include "../../inc/support.inc";
?>
        </div>
         <div class="yui-u">
            
            <div id="examples">
<?php 
    include("../../inc/examplesNav/".$section.".inc");
?>
           </div>
           
            <div id="morereading">
                <h3>More Reading about the YUI Overlay Control:</h3>
                
                <ul>
                  <li><a href="http://allmybrain.com/2007/12/05/creating-image-preview-tooltips-with-the-yui-overlay-widget/">Creating Image Preview Tooltips with the YUI Overlay Widget</a>, by Dennis Mulestein</li>
               </ul>
           </div>

<?php 
$thisURI="http://developer.yahoo.com/yui/container/overlay/";
require_once('../../inc/badge.inc');
?>
<h3 id="delicious">YUI Overlay on del.icio.us:</h3>
<div class="delicious">
<?php require('../../inc/badge-html.inc'); ?>
</div>

     
         </div>
      </div>
</div>
</div>
<?php include "../../inc/side.inc" ?>
<?php include "../../inc/footer.inc" ?>
