<?php 
$title="Yahoo! UI Library: Color Picker Control";
$section="colorpicker";
$component="Color Picker Control";
$highlightSyntax = true;
$releasenotes = true;
include "../inc/header.inc";
?>

<div id="yui-main">
<div class="yui-b">
  <div class="yui-ge">
      <div class="yui-u first">
	  
  <div id="promo" class="component">
    <h1>Yahoo! UI Library: Color Picker Control</h1>

<p>The Color Picker Control provides a rich visual interface for color selection.  The interaction is a familiar one from the desktop paradigm: Color range and saturation are adjusted via sliders while the technical details of the current color are displayed in RGB, hex, and/or HSV formats.</p>

<p>The Color Picker Control can be used inline or displayed within a popup <a href="http://developer.yahoo.com/yui/container/dialog/">Dialog</a>; you'll find examples of both of these implementations in the <a href="../examples/colorpicker/">examples section</a>.</p>
 
    
    <div>
    <h4>On This Page:</h4>
    <ul>
        <li><a href="#start">Getting Started</a></li>
        <li><a href="#using">Using the Color Picker Control</a> </li>
        <li><a href="#config">Configuring a Color Picker Control Intance</a> </li>
        <li><a href="#events">Custom Events in Color Picker</a></li>
        <li><a href="#api">API Methods in Color Picker</a></li>
        <li><a href="#customIds">Customizing Color Picker Element IDs</a></li>
        <li><a href="#intl">Internationalizing the Color Picker UI</a></li>
        <li><a href="#formdata">Making Use of Color Picker's Form Data</a></li>
        <li><a href="#skinning">Skinning the Color Picker</a></li>
        <li><a href="#knownissues">Known Issues</a></li>
        <li><a href="#support">Support &amp; Community</a></li>
	    <li><a href="#filingbugs">Filing Bugs and Feature Requests</a></li>
    </ul>
  </div>

<?php
include('../inc/quicklinks.inc');
?>
    
  </div>

  <h2 class="first">Getting Started<a name="start"></a></h2>
  <p>To use the Color Picker Control, include the following source
  files in your web page with the <code>&lt;script&gt;</code> and <code>&lt;link&gt;</code> tags.  It is recommended that you use the <code>utilities.js</code> rollup of all the YUI Utilities when using Color Picker.  Color Picker's richest user experience requires the <a href="http://developer.yahoo.com/yui/animation/">Animation Utility</a>, and when used within a <a href="http://developer.yahoo.com/yui/container/dialog/">Dialog Control</a> the Color Picker commonly uses <a href="http://developer.yahoo.com/yui/connection/">Connection Manager</a> to save values back to the server.  Using <code>utilities.js</code> gives you all the potential power of Color Picker's optional dependencies in addition to its required ones &mdash; and all in a single file.  (The minimum requirements for Color Picker are <a href="http://developer.yahoo.com/yui/yahoo/">Yahoo</a>, <a href="http://developer.yahoo.com/yui/dom/">Dom</a>, <a href="http://developer.yahoo.com/yui/event/">Event</a>, <a href="http://developer.yahoo.com/yui/element/">Element</a>, <a href="http://developer.yahoo.com/yui/dragdrop/">Drag and Drop</a>, and <a href="http://developer.yahoo.com/yui/slider/">Slider</a>.)</p>
  
  <textarea name="code" class="HTML" cols="60" rows="1">
<!-- Dependencies --> 
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/utilities/utilities.js" ></script>
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/slider/slider-min.js" ></script>

<!-- Color Picker source files for CSS and JavaScript -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/colorpicker/assets/skins/sam/colorpicker.css">
<script type="text/javascript" src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/colorpicker/colorpicker-min.js" ></script>
</textarea>
<?php
include "../inc/include-notice.inc";
?>

<h2 id="using">Basic Setup: Instantiating a Color Picker via Script</h2>

<p>The simplest way to use Color Picker is to create a container element on the page &mdash; say, an empty <code>&lt;div&gt;</code> &mdash; and let Color Picker automatically create its DOM structure for you on the fly. You might find yourself doing this when you already are providing accessible form fields on the page for color-value entry that don't require a JavaScript-enabled browser; in that case, Color Picker becomes a useful augmentation of the user's experience without closing the door to devices or browsers that don't support JavaScript.</p>

<p>In this simple case, you begin with markup for the containing element: </p>

<textarea name="code" class="HTML" cols="60" rows="1"><div id="container"></div></textarea>

<p>With your container in place, you can now instantiate your Color Picker and pass into its constructor any special configuration values you wish to use for this instance.</p>

<textarea name="code" class="JScript" cols="60" rows="1">var picker = new YAHOO.widget.ColorPicker("container", {
	showhsvcontrols: true,
	showhexcontrols: true,
	images: {
		PICKER_THUMB: "picker_thumb.png",
		HUE_THUMB: "hue_thumb.png"
	}
});</textarea>

<p>(<strong>Note:</strong> As is always the case with <a href="http://developer.yahoo.com/yui/slider/">Slider Control</a> implementations, you achieve best performance by referencing draggable "thumb" images directly rather than using CSS background images.  By default, Color Picker will load these images from Yahoo! servers.  As exemplified above, it is easy to customize the location of the thumb images being used.)</p>

<p>With the above script on the page, the Color Picker renders itself immediately and automatically, yielding a visual control that looks like this:</p>

<p><a href="../examples/colorpicker/colorpicker-fromscript.html"><img src="../docs/assets/colorpicker.jpg" alt="The Color Picker Control" width="410" height="212" border="0" /></a></p>

<p>If your containing element (the <code>&lt;div&gt;</code> with the id of <code>container</code> in the above example) is wrapped in a form, all of the form field values that appear as part of the Color Picker's interface will be submitted along with any other form fields contained within the form.</p>

<h2 id="config">Configuring a Color Picker Control Intance</h2>

<p>In the <a href="#using">simple example above</a>, three configuration options are shown: <code>showhsvcontrols</code>, <code>showhexcontrols</code>, and <code>images</code>.  The second argument of the Color Picker constructor is the right place to specify all your configurations.</p>

<p>Some of the common configuration options include:</p>

<div class="apisummary">
<table>
    <thead>
		<tr>
			<th>Configuration Option</th>
			<th>Purpose</th>
		</tr>
    </thead>
	<tbody>
        <tr class="odd">
            <td>showcontrols</td>
            <td>(boolean) Hide/show the entire set of controls.  Default: true.</td>
        </tr>
        <tr>
            <td>showhexcontrols</td>
            <td>(boolean) Hide/show the hex controls.  Default: true.</td>
        </tr>
        <tr class="odd">
            <td>showhexsummary</td>
            <td>(boolean) Hide/show the hex summary.  Default: true.</td>
        </tr>
        <tr>
            <td>showhsvcontrols</td>
            <td>(boolean) Hide/show the HSV controls.  Default: false.</td>
        </tr>

        <tr class="odd">
            <td>showrgbcontrols</td>
            <td>(boolean) Hide/show the RGB controls.  Default: true.</td>
        </tr>
		
        <tr>
            <td>showwebsafe</td>
            <td>(boolean) Hide/show the websafe-color swatch.  Default: true.</td>
        </tr>

	</tbody>
</table>
</div>

<p>Refer to <a href="../docs/YAHOO.widget.ColorPicker.html">the API documentation</a> for all of the configuration options that can be set for a Color Picker instance.</p>


<h2 id="events">Custom Events in Color Picker</h2>

<p>The Color Picker Control exposes one "interesting moment" in its interaction, and that moment is when the Color Picker's color value changes.  This event is the <code>rgbChange</code> event, and you subscribe to using the following syntax (assuming you've instantiated Color Picker and assigned it to the variable <code>picker</code>):</p>

<textarea name="code" class="JScript" cols="60" rows="1">//a listener for logging RGB color changes;
//this will only be visible if logger is enabled:
var onRgbChange = function(o) {
	/*o is an object
		{ newValue: (array of R, G, B values),
		  prevValue: (array of R, G, B values),
		  type: "rgbChange"
		 }
	*/
	YAHOO.log("The new color value is " + o.newValue, "info", "example");
}

//subscribe to the rgbChange event;
picker.on("rgbChange", onRgbChange);</textarea>

<p>Note that <code>rgbChange</code> fires any time the user updates the color value by interacting with the Color Picker.  The event may also change when a script calls the picker's <code>setValue</code> method; that method will fire <code>rgbChange</code> by default, but you can also call <code>setValue</code> silently and suppress the <code>rgbChange</code> event that would otherwise result.</p>

<h2 id="api">API Methods in Color Picker</h2>

<p>Color Picker offers only one commonly-used API method: <code>setValue</code>.  <code>setValue</code> updates the currently displayed color in the picker instance and optionally suppresses the resulting <code>rgbChange</code> event. <code>setValue</code> takes two arguments:</p>
<ol>
  <li><strong>New RGB value:</strong> an array containing the new RGB value to which the Color Picker should be set.</li>
  <li><strong>Silent flag: </strong>if true, the value will be set silently and no <code>rgbChange</code> event will fire.</li>
</ol>

<p>Here's a simple example of how you might use <code>setValue</code> to reset a Color Picker instance to white, assuming you had instantiated a Color Picker and assigned it to the variable <code>picker</code>:</p>

<textarea name="code" class="JScript" cols="60" rows="1"><button id="reset">Reset Color to White</button> 

<script>
//use setValue to reset the value to white:
YAHOO.util.Event.on("reset", "click", function(e) {
	myPicker.setValue([255, 255, 255], false); //false here means that rgbChange
											   //will fire; true would silence it
});
</script>
</textarea>

<p><code>setValue</code> is the recommended approach for setting the initial value of your Color Picker instance (that is, you should instantiate your Color Picker and then immediately call <code>setValue</code> to set its initial value.</p>

<h2 id="customIds">Customizing Color Picker Element IDs</h2>

<p>Color Picker uses a static, predefined set of element IDs for the DOM elements it creates on the page. You can specify new IDs to use for Color Picker by passing a new set of IDs into the constructor.</p>

<textarea name="code" class="JScript" cols="60" rows="1">//These are the default values.
var myPicker = new YAHOO.widget.ColorPicker("yui-picker", {
	ids: {
		R: 				"yui-picker-r",
		R_HEX: 			"yui-picker-rhex",
		G: 				"yui-picker-g",
		G_HEX: 			"yui-picker-ghex",
		B: 				"yui-picker-b",
		B_HEX: 			"yui-picker-bhex", 
		H: 				"yui-picker-h",
		S: 				"yui-picker-s", 
		V: 				"yui-picker-v",
		PICKER_BG: 		"yui-picker-bg",
		PICKER_THUMB:	"yui-picker-thumb",
		HUE_BG: 		"yui-picker-hue-bg",
		HUE_THUMB: 		"yui-picker-hue-thumb", 
		HEX: 			"yui-picker-hex",
		SWATCH: 		"yui-picker-swatch",
		WEBSAFE_SWATCH: "yui-picker-websafe-swatch",
		CONTROLS: 		"yui-picker-controls",
		RGB_CONTROLS: 	"yui-picker-rgb-controls",
		HSV_CONTROLS: 	"yui-picker-hsv-controls",
		HEX_CONTROLS: 	"yui-picker-hex-controls",
		HEX_SUMMARY: 	"yui-picker-hex-summary",
		CONTROLS_LABEL: "yui-picker-controls-label"	
	}
});</textarea>

<h2 id="intl">Internationalizing the Color Picker UI</h2>

<p>Just as you can customize the element ID strings used by Color Picker, you can also customize the text labels used within the interface &mdash; whether for purposes of internationalization or simply to give the UI your own flavor.  Here's the full constructor configuration syntax populated with the default values for Color Picker's text strings:</p>

<textarea name="code" class="JScript" cols="60" rows="1">//These are the default values.
var myPicker = new YAHOO.widget.ColorPicker("yui-picker", {
	txt: {
		ILLEGAL_HEX: 	"Illegal hex value entered",
		SHOW_CONTROLS: 	"Show color details",
		HIDE_CONTROLS: 	"Hide color details",
		CURRENT_COLOR: 	"Currently selected color: {rgb}",
		CLOSEST_WEBSAFE:"Closest websafe color: {rgb}. Click to select.",
		R: 				"R", 
		G: 				"G",
		B: 				"B", 
		H: 				"H",
		S: 				"S",
		V:				"V",
		HEX: 			"#",
        DEG:            "\u00B0",
		PERCENT: 		"%"	
	}
});</textarea>

<p>If you are updating the text labels, you are required to supply values for
all of the labels.  If you are only changing some of the labels, the easiest
way to do this is to combine your new values with the default set with
YAHOO.lang.merge:</p>

<textarea name="code" class="JScript" cols="60" rows="1">
var txt = YAHOO.lang.merge(
        YAHOO.widget.ColorPicker.prototype.TXT, {
                R: "Red",
                G: "Green",
                B: "Blue"
        });

var myPicker = new YAHOO.widget.ColorPicker("yui-picker", {
    txt: txt
});</textarea>

<h2 id="formdata">Making Use of Color Picker's Form Data</h2>

<p>Depending on how you configure your Color Picker Control, there are three formats into which color information is encoded:</p>
<ol>
  <li><strong>RGB:</strong> In the RGB format, color is described in terms of red, green and blue values, with each value described as an integer between 0 and 255. An RGB value of [0,0,0] is black; a value of [255,255,255] is white. </li>
  <li><strong>HSV</strong>: HSV is an alternative to RGB in which color is represented in terms of hue, saturation, and value (brightness).</li>
  <li><strong>Hexadecimal</strong>: The hex value for a color comprises a hexadecimal encoding of the color's RGB value, with each of the three colors represented by its hexadecimal value; this is also known as a &quot;hex triplet&quot; because it runs together the three hex values into a single string. For example, the hex value for 255 is <code>FF</code>; hence, the color white in hexadecimal markup is represented as <code>FFFFFF</code>. In the HTML and CSS standards, we generally prefix hex values with the # sign: <code>#FFFFFF</code>. Hex color descriptions are important because they are the most common way to identify color in HTML and CSS documents.</li>
  </ol>
<p>Color Picker allows you to extract RGB, HSV and hexadecimal values from any color the user has selected. Optionally, you can allow the user to have direct access to RGB, HSV, and hexadecimal values via form fields. When the user updates the form fields, the Color Picker automatically updates to reflect the new value (assuming it is a valid value).</p>
<p>When a form is submitted containing Color Picker data, you will find the following form fields: </p>

<div class="apisummary">
<table>
    <thead>
		<tr>
			<th>Field Name </th>
			<th>Contents</th>
		</tr>
    </thead>
	<tbody>
        <tr class="odd">
            <td>yui-picker-r</td>
            <td>Red value for RGB; 0-255. </td>
        </tr>
        <tr>
            <td>yui-picker-g</td>
            <td>Green value for RGB; 0-255. </td>
        </tr>
        <tr class="odd">
            <td>yui-picker-b</td>
            <td>Blue value for RGB; 0-255. </td>
        </tr>
        <tr>
            <td>yui-picker-h</td>
            <td>Hue value in HSV space; 0-360. </td>
        </tr>

        <tr class="odd">
            <td>yui-picker-s</td>
            <td>Saturation value in HSV space; 0-100 (%). </td>
        </tr>
        <tr>
            <td>yui-picker-v</td>
            <td>Value/brightness value in HSV space; 0-100 (%). </td>
        </tr>
        <tr class="odd">
            <td>yui-picker-hex</td>
            <td>Hexadecimal (hex triplet) value for the selected color ; 000000-FFFFFF. </td>
        </tr>

	</tbody>
</table>
</div>

<p>These form fields can be passed to the server via a traditional form post or via Ajax using Connection Manager.  We've provided <a href="../examples/colorpicker/colorpicker-dialog-from-script.html">a detailed example of how to make use of Color Picker in a Dialog Control</a> while implementing Connection Manager to transport the data to the server.</p>

<h2 id="skinning">Skinning the Color Picker Control</h2>

<p>The Color Picker comes with a default presentation or "skin," part of the "Sam Skin" visual treatment that accompanies most YUI controls.  You can read more about the general approach to skinning YUI components <a href="/yui/articles/skinning/">in this in-depth article</a>.</p>

<p>In the case of the Color Picker Control, there is no "core" CSS treatment &mdash; which is to say that there is no CSS that is considered essential to the functioning of the control.  All of the CSS provided with Color Picker is part of the Sam Skin visual treatment.</p>

<p><a href="../examples/colorpicker/colorpicker-fromscript.html"><img src="../docs/assets/colorpicker.jpg" alt="The Color Picker Control" width="410" height="212" border="0" /></a></p>

<p>To explore the CSS which controls the Color Picker's presentation, please review <a href="/yui/examples/colorpicker/colorpicker-skinning.html">the Color Picker Skinning Example</a> wherein the full CSS for the control is displayed.</p>

<h2 id="knownissues">Known Issues</h2>
<h4>Gradient doesn't display properly in Internet Explorer 6</h4>
<img src="../docs/assets/colorpicker_mask_issue.png" alt="capture of gradient mask not showing">
<p>ColorPicker uses a transparent png mask to create the gradient effect in the Saturation/Value portion of the ColorPicker.  For IE6, this mask is applied using a Microsoft proprietary <code>filter</code> in the included CSS.</p>
<textarea name="code" class="CSS" rows="1" cols="60">
/* snip */
*html .yui-picker-bg {
background-image: none;
filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../../build/colorpicker/assets/picker_mask.png', sizingMethod='scale');
}
/* snip */
</textarea>
<p>However, AlphaImageLoader's src is resolved relative to the <em>page</em>, not the CSS file as is typical of CSS <code>url(...)</code> references.  This means that the path specified in YUI's sam skin will be incorrect unless your page is located on your server accordingly.  If you experience this issue, you can work around it by including the following CSS on your page in a <code>&lt;style&gt;</code> block or in another attached stylesheet:</p>
<textarea name="code" class="CSS" rows="1" cols="60">
*html .yui-picker-bg {
filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='PATH/FROM/THIS/PAGE/TO/build/colorpicker/assets/picker_mask.png', sizingMethod='scale');
}
</textarea>

<?php 
include "../inc/support.inc";
?>

    </div>
         <div class="yui-u">
		 	
			<div id="cheatsheet">
				<h3><?php echo $component;?> Cheat Sheet:</h3>
				
				<a href="http://yuiblog.com/assets/pdf/cheatsheets/<?php echo $section;?>.pdf"><img src="http://us.i1.yimg.com/us.yimg.com/i/ydn/yuiweb/img/cheatsheet-images/<?php echo $section;?>.gif" width="178" height="135" alt="Cheat Sheet for the <?php echo $component;?>."></a>
				
				<p><a href="/yui/docs/assets/cheatsheets.zip">Download full set of cheat sheets.</a></p>
			</div>

<div id="examples">
<?php 
	include("../inc/examplesNav/".$section.".inc");
?>
</div>


<?php 
$thisURI="http://developer.yahoo.com/yui/$section/";
require_once('../inc/badge.inc');
?>
<h3 id="delicious">YUI <?php echo $component;?> on del.icio.us:</h3>
<div class="delicious">
<?php require('../inc/badge-html.inc'); ?>
</div>

		 </div>
  </div>

</div>
</div>

<?php include "../inc/side.inc" ?>
<?php include "../inc/footer.inc" ?>


