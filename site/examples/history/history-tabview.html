<?php
$prepend = '<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/tabview/assets/skins/sam/tabview.css" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.6.0/build/button/assets/skins/sam/button.css" />
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/yuiloader/yuiloader-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/dom/dom-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/event/event-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/element/element-beta-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/tabview/tabview-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/history/history-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.6.0/build/button/button-min.js"></script>

<!--there is no custom header content for this example-->

';
$section="examples";
$highlightSyntax = true;
$assetsDirectory = "assets/";
$releasenotes = false;
$bodyclass = " yui-skin-sam";
$title = "YUI Library Examples: Browser History Manager: TabView Control";
include("../../inc/header.inc"); 
?>
		
	
	<div id="yui-main">
		<div class="yui-b">
		  <div class="yui-ge">
			  <div class="yui-u first example">

    
	<div class="promo">
	<h1>Browser History Manager: TabView Control</h1>
	
	<div class="exampleIntro">
	<p>
  This example demonstrates how to use the Browser History Manager
  to remember which tabs have been visited with the TabView widget
  and dynamically update it when the user presses the browser's
  back/forward buttons.
</p>
			
	</div>	
					
	<div class="example-container module ">
			<div class="hd exampleHd">
			<p class="newWindowButton yui-skin-sam"><!--<span id="newWindowLinkx"><span class="first-child">--><a href="history-tabview_clean.html" target="_blank">View example in new window.</a><!--</span></span>-->		
		</div>		<div id="example-canvas" class="bd">
	
		
	<!--BEGIN SOURCE CODE FOR EXAMPLE =============================== -->
	
	<style>

#yui-history-iframe {
  position:absolute;
  top:0; left:0;
  width:1px; height:1px; /* avoid scrollbars */
  visibility:hidden;
}

#demo { margin-bottom:1em; }

</style>

<!-- Static markup required for browser history management. Note that these
     could be created using document.write in a script block. But they have
     to be created while the page is being parsed, so it cannot be done
     from an imported script file. Also, these have to be created as early
     as possible to avoid problems on Internet Explorer.
     Note that "magic URLs" such as:

         javascript:document.open();document.write(new Date().getTime());document.close();

     and such do NOT work on IE6! Only a real document works (that "real
     document" does not need to be an HTML document. It can be an image
     as well. Using an asset that you use somewhere else on your site,
     instead of a separate asset avoids an unnecessary server round trip.
     Finally, note that the iframe is only used on Internet Explorer.
     If this page is server generated (by a PHP script for example), it is
     a good idea to create the IFrame ONLY for Internet Explorer (use
     server side user agent sniffing) -->

<iframe id="yui-history-iframe" src="assets/blank.html"></iframe>
<input id="yui-history-field" type="hidden">

<!-- Static markup required for the TabView widget. -->

<div id="demo" class="yui-navset yui-navset-top">
  <ul class="yui-nav">
    <li><a href="#tab1"><em>Tab One Label</em></a></li>
    <li title="active" class="selected"><a href="#tab2"><em>Tab Two Label</em></a></li>
    <li title="" class=""><a href="#tab3"><em>Tab Three Label</em></a></li>
  </ul>
  <div class="yui-content">
    <div style="display: none;" id="tab1"><p>Tab One Content</p></div>
    <div style="display: block;" id="tab2"><p>Tab Two Content</p></div>
    <div style="display: none;" id="tab3"><p>Tab Three Content</p></div>
  </div>
</div>

<script>

(function () {

    // The initially selected tab will be chosen in the following order:
    //
    // URL fragment identifier (it will be there if the user previously
    // bookmarked the application in a specific state)
    //
    //         or
    //
    // "tab0" (default)

    var bookmarkedTabViewState = YAHOO.util.History.getBookmarkedState("tabview");
    var initialTabViewState = bookmarkedTabViewState || "tab0";

    var tabView;

    // Register our TabView module. Module registration MUST
    // take place before calling YAHOO.util.History.initialize.
    YAHOO.util.History.register("tabview", initialTabViewState, function (state) {
        // This is called after calling YAHOO.util.History.navigate, or after the user
        // has trigerred the back/forward button. We cannot discrminate between
        // these two situations.

        // "state" can be "tab0", "tab1" or "tab2".
        // Select the right tab:
        tabView.set("activeIndex", state.substr(3));
    });

    function handleTabViewActiveTabChange (e) {
        var newState, currentState;

        newState = "tab" + this.getTabIndex(e.newValue);

        try {
            currentState = YAHOO.util.History.getCurrentState("tabview");
            // The following test is crucial. Otherwise, we end up circling forever.
            // Indeed, YAHOO.util.History.navigate will call the module onStateChange
            // callback, which will call tabView.set, which will call this handler
            // and it keeps going from here...
            if (newState != currentState) {
                YAHOO.util.History.navigate("tabview", newState);
            }
        } catch (e) {
            tabView.set("activeIndex", newState.substr(3));
        }
    }

    function initTabView () {
        // Instantiate the TabView control...
        tabView = new YAHOO.widget.TabView("demo");
        tabView.addListener("activeTabChange", handleTabViewActiveTabChange);
    }

    // Use the Browser History Manager onReady method to instantiate the TabView widget.
    YAHOO.util.History.onReady(function () {
        var currentState;

        initTabView();

        // This is the tricky part... The onLoad event is fired when the user
        // comes back to the page using the back button. In this case, the
        // actual tab that needs to be selected corresponds to the last tab
        // selected before leaving the page, and not the initially selected tab.
        // This can be retrieved using getCurrentState:
        currentState = YAHOO.util.History.getCurrentState("tabview");
        tabView.set("activeIndex", currentState.substr(3));
    });

    // Initialize the browser history management library.
    try {
        YAHOO.util.History.initialize("yui-history-field", "yui-history-iframe");
    } catch (e) {
        // The only exception that gets thrown here is when the browser is
        // not supported (Opera, or not A-grade) Degrade gracefully.
        initTabView();
    }

})();

</script>
	
	<!--END SOURCE CODE FOR EXAMPLE =============================== -->
	
		
		</div>
		
	
	</div>			
	</div>
		
	<h2>Basic markup</h2>

<p>
  In our example, the TabView widget relies on the following markup:
</p>

<textarea name="code" class="HTML" cols="60" rows="1">
<div id="demo" class="yui-navset yui-navset-top">
  <ul class="yui-nav">
    <li><a href="#tab1"><em>Tab One Label</em></a></li>
    <li title="active" class="selected"><a href="#tab2"><em>Tab Two Label</em></a></li>
    <li title="" class=""><a href="#tab3"><em>Tab Three Label</em></a></li>
  </ul>
  <div class="yui-content">
    <div style="display: none;" id="tab1"><p>Tab One Content</p></div>
    <div style="display: block;" id="tab2"><p>Tab Two Content</p></div>
    <div style="display: none;" id="tab3"><p>Tab Three Content</p></div>
  </div>
</div>
</textarea>

<h2>Add the markup required by the Browser History Manager</h2>

<textarea name="code" class="HTML" cols="60" rows="1">
<iframe id="yui-history-iframe" src="assets/blank.html"></iframe>
<input id="yui-history-field" type="hidden">
</textarea>

<p>
  This markup should be inserted right after the opening <code>body</code> tag.
</p>

<h2 class="first">Import the source files and dependencies</h2>

<p>
  In our example, we need the Event Utility, DOM Utility, TabView Widget, and the Browser History Manager:
</p>

<textarea name="code" class="HTML" cols="60" rows="1">
<link rel="stylesheet" type="text/css" href="tabview.css"/>
<script src="yahoo-dom-event.js"></script>
<script src="element-beta.js"></script>
<script src="tabview.js"></script>
<script src="history.js"></script>
</textarea>

<h2>Design your application</h2>

<p>
  In our simple example, we have only one module, represented by the TabView widget. We will refer to this module using the identifier
  "tabview". The state of the TabView module will be represented using the string <code>"tab"</code> followed by the selected tab
  index (e.g. <code>"tab2"</code> if the third tab is selected)
</p>

<h2>Retrieve the initial state of the TabView module</h2>

<p>
  Use the <code>YAHOO.util.History.getBookmarkedState</code> method and default to the first tab:
</p>

<textarea name="code" class="JScript" cols="60" rows="1">
var bookmarkedTabViewState = YAHOO.util.History.getBookmarkedState("tabview");
var initialTabViewState = bookmarkedTabViewState || "tab0";
</textarea>

<h2>Register the TabView module</h2>

<p>
  Use the <code>YAHOO.util.History.register</code> method, passing in the TabView module identifier, the initial state of the TabView
  module, and the callback function that will be called when the state of the TabView module has changed:
</p>

<textarea name="code" class="JScript" cols="60" rows="1">
YAHOO.util.History.register("tabview", initialTabViewState, function (state) {
    // Select the tab according to the "state" parameter:
    tabView.set("activeIndex", state.substr(3));
});
</textarea>

<h2>Write the code that initializes your application</h2>

<textarea name="code" class="JScript" cols="60" rows="1">
var tabView;

function initTabView () {
    // Instantiate the TabView control...
    tabView = new YAHOO.widget.TabView("demo");
    tabView.addListener("activeTabChange", handleTabViewActiveTabChange);
}
</textarea>

<h2>Use the Browser History Manager <code>onReady</code> method</h2>

<p>
  Use the Browser History Manager <code>onReady</code> method to instantiate the TabView widget. Also, retrieve the current
  state of the TabView module, and use that state to select the right tab (the current state may be different from the initial
  state under certain circumstances - see the User's Guide)
</p>

<textarea name="code" class="JScript" cols="60" rows="1">
YAHOO.util.History.onReady(function () {
    var currentState;

    initTabView();

    // This is the tricky part... The onLoad event is fired when the user
    // comes back to the page using the back button. In this case, the
    // actual tab that needs to be selected corresponds to the last tab
    // selected before leaving the page, and not the initially selected tab.
    // This can be retrieved using getCurrentState:
    currentState = YAHOO.util.History.getCurrentState("tabview");
    tabView.set("activeIndex", currentState.substr(3));
});
</textarea>

<h2>Add history entries</h2>

<p>
  A new history entry must be added every time the user selects a tab. Use the TabView widget's <code>activeTabChange</code>
  event handler (set to <code>handleTabViewActiveTabChange</code> - see above):
</p>

<textarea name="code" class="JScript" cols="60" rows="1">
function handleTabViewActiveTabChange (e) {
    var newState, currentState;

    newState = "tab" + this.getTabIndex(e.newValue);

    try {
        currentState = YAHOO.util.History.getCurrentState("tabview");
        // The following test is crucial. Otherwise, we end up circling forever.
        // Indeed, YAHOO.util.History.navigate will call the module onStateChange
        // callback, which will call tabView.set, which will call this handler
        // and it keeps going from here...
        if (newState != currentState) {
            YAHOO.util.History.navigate("tabview", newState);
        }
    } catch (e) {
        tabView.set("activeIndex", newState.substr(3));
    }
}
</textarea>

<h2>Initialize the Browser History Manager</h2>

<p>
  Simply call <code>YAHOO.util.History.initialize</code>, passing in the id of the input field and IFrame we inserted
  in our static markup:
</p>

<textarea name="code" class="JScript" cols="60" rows="1">
// Initialize the browser history management library.
try {
    YAHOO.util.History.initialize("yui-history-field", "yui-history-iframe");
} catch (e) {
    // The only exception that gets thrown here is when the browser is
    // not supported (Opera, or not A-grade) Degrade gracefully.
    initTabView();
}
</textarea>

<h2>Configuration for This Example</h2>

<p>You can load the necessary JavaScript and CSS for this example from Yahoo's servers.  <a href="http://developer.yahoo.com/yui/articles/hosting/?yahoo&dom&event&element&tabview&history&MIN#configure">Click here to load the YUI Dependency Configurator with all of this example's dependencies preconfigured</a>.</p>

				</div>
				<div class="yui-u">
					
				
					<div id="examples">
						<h3 class='firstContent'>Browser History Manager Examples:</h3>
	
						<div id="exampleToc">
							<ul>
								<li><a href='../history/history-navbar.html'>Simple Navigation Bar</a></li><li class='selected'><a href='../history/history-tabview.html'>TabView Control</a></li><li><a href='../history/history-calendar.html'>Calendar Control</a></li><li><a href='../history/history-multiple.html'>Multiple Modules</a></li>							</ul>
						</div>
					</div>
					
					<div id="module">
						<h3>More Browser History Manager Resources:</h3>
						<ul>
							<li><a href="http://developer.yahoo.com/yui/history/">User's Guide</a></li>
						<li><a href="../../docs/module_history.html">API Documentation</a></li>
                            
                            
							<li><a href="http://yuiblog.com/assets/pdf/cheatsheets/history.pdf">Cheat Sheet PDF</a></li></ul>
					</div>
			  </div>
		</div>
		
		</div>
	</div>


	<?php 
	$append = "

<script src='../../assets/YUIexamples.js'></script>

";
	include("../../inc/side.inc");
	include("../../inc/footer.inc");
	?>