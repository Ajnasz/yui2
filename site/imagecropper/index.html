<?php 
$title="Yahoo! UI Library: ImageCropper";
$section="imagecropper";
$component="ImageCropper";
$highlightSyntax = true;
$releasenotes = true;
include "../inc/header.inc";
?>
<div id="yui-main">
<div class="yui-b">
  <div class="yui-ge">
      <div class="yui-u first">
	  
	  
<div id="promo" class="component">
  <h1>ImageCropper</h1>
  <p>The ImageCropper Control gives you an interactive interface for getting the dimensions to crop an image.</p>
  <p><strong>Note:</strong> The ImageCropper control is being released as a
  <em>beta</em> component.  Please <a href="../articles/faq/#beta">refer to the FAQ</a>
  for what we mean by this designation. We look forward to your feedback
  <a href="http://tech.groups.yahoo.com/group/ydn-javascript/">in the YUI Forums</a>.</p>

  <div>
    <h4>On This Page:</h4>
    <ul>
        <li><a href="#start">Getting Started</a></li>
        <li><a href="#setup">Setting up an ImageCropper</a></li>
        <li><a href="#config">Configuring an ImageCropper</a></li>
        <li><a href="#events">ImageCropper Events</a></li>
        <li><a href="#coords">Getting the crop area</a></li>
        <li><a href="#skinning">Skinning ImageCropper</a></li>
        <li><a href="#knownissues">Known Issues</a></li>        
        <li><a href="#mobile">YUI on Mobile Devices</a></li>
        <li><a href="#support">Support &amp; Community</a></li>
	    <li><a href="#filingbugs">Filing Bugs and Feature Requests</a></li>
    </ul>
  </div>

<?php
include('../inc/quicklinks.inc');
?>

</div>
<h2 class="first" id="start">Getting Started</h2>
<p>To use the ImageCropper Control, include the following source files in your web page:</p>
<textarea name="code" class="HTML" cols="60" rows="1">
<!-- Skin CSS file -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/assets/skins/sam/resize.css">
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/assets/skins/sam/imagecropper.css">
<!-- Utility Dependencies -->
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/yahoo-dom-event/yahoo-dom-event.js"></script> 
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/dragdrop/dragdrop-min.js"></script> 
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/element/element-beta-min.js"></script> 
<!-- Source file for the Resize Utility -->
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/resize/resize-beta-min.js"></script>
<!-- Source file for the ImageCropper Control -->
<script src="http://yui.yahooapis.com/<?php echo($yuiCurrentVersion);?>/build/imagecropper/imagecropper-beta-min.js"></script>
</textarea>
<?php
include "../inc/include-notice.inc";
?>

<h2 id="setup">Setting up an ImageCropper</h2>
<p>Setting up an ImageCropper Control is as easy as this:</p>
<textarea name="code" class="HTML">

<img src="yui.jpg" id="crop1">

<script type="text/javascript">
var imgCrop = new YAHOO.widget.ImageCropper('crop1');
</script>
</textarea>
<p>Using the above code will get you a rich control that looks something like this:</p>
<img src="assets/crop1.jpg">

<h2 id="config">Configuring an ImageCropper</h2>
<p>The ImageCropper Control is based on the <a href="/yui/resize/">Resize Utility</a> and it inherits some of it's configuration options.</p>


<div class="apisummary short">
    <table border="0" id="crop_config">
        <tr class="odd">
            <th>Name</th>
            <th>Type</th>
            <th>Default</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>initialXY</td>
            <td>Array</td>
            <td>[10, 10]</td>
            <td>Array of the XY position that we need to set the crop element to when we build it.</td>
        </tr>
        <tr class="odd">
            <td>keyTick</td>
            <td>Number</td>
            <td>1</td>
            <td>The pixel tick for the arrow keys.</td>
        </tr>
        <tr>
            <td>shiftKeyTick</td>
            <td>Number</td>
            <td>10</td>
            <td>The pixel tick for shift + the arrow keys.</td>
        </tr>
        <tr class="odd">
            <td>useKeys</td>
            <td>Boolean</td>
            <td>true</td>
            <td>Should we use the Arrow keys to position the crop element.</td>
        </tr>
        <tr>
            <td>status</td>
            <td>Boolean</td>
            <td>true</td>
            <td>Show the Resize Utility status</td>
        </tr>
        <tr class="odd">
            <td>minHeight</td>
            <td>Number</td>
            <td>50</td>
            <td>MinHeight of the crop area</td>
        </tr>
        <tr>
            <td>minWidth</td>
            <td>Number</td>
            <td>50</td>
            <td>MinWidth of the crop area</td>
        </tr>
        <tr class="odd">
            <td>ratio</td>
            <td>Boolean</td>
            <td>false</td>
            <td>Set the ratio config option of the Resize Utlility</td>
        </tr>
        <tr>
            <td>initHeight</td>
            <td>Number</td>
            <td>1/4 of the image height</td>
            <td>Set the initlal height of the crop area</td>
        </tr>
        <tr class="odd">
            <td>initWidth</td>
            <td>Number</td>
            <td>1/4 of the image width</td>
            <td>Set the initlal width of the crop area</td>
        </tr>
    </table>
</div>

<h3 id="events">ImageCropper Events</h3>
<p>Here is a list of the <a href="http://developer.yahoo.com/yui/event/#customevent">Custom Events</a> that the ImageCropper Control fires:</p>

<div class="apisummary short">
    <table border="0" id="crop_config">
        <tr class="odd">
            <th>Name</th>
            <th>Payload</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>dragEvent</td>
            <td>MouseMove Event</td>
            <td>When the DragDrop dragEvent is fired for the config option draggable.</td>
        </tr>
        <tr class="odd">
            <td>startResizeEvent</td>
            <td>Resize Object</td>
            <td>When when a resize action is started.</td>
        </tr>
        <tr>
            <td>beforeResize</td>
            <td>Height, Width, Top, Left</td>
            <td>Fires before every element resize after the size calculations, returning false will stop the resize.</td>
        </tr>
        <tr class="odd">
            <td>resizeEvent</td>
            <td>Height, Width, Top, Left</td>
            <td>On every element resize (only fires once when used with proxy config setting).</td>
        </tr>
        <tr>
            <td>moveEvent</td>
            <td>Height, Width, Top, Left</td>
            <td>Fires on every element move. Inside these methods: _handleKeyPress, _handleDragEvent, _handleResizeEvent</td>
        </tr>
    </table>
</div>

<h2 id="coords">Getting the crop area</h2>
<p>Now that we have an interface, we need to get the crop data from the ImageCropper Control. We can do this with the <code>getCropCoords</code> method, like this:</p>
<textarea name="code" class="JScript">
    //setup a new cropper
    var cropImg = new YAHOO.widget.ImageCropper('img1');
    //get the crop area 
    var cropArea = cropImg.getCropCoords();
    
    // cropArea now looks like this:

    {
        top: 70,
        left: 122,
        height: 86,
        width: 172,
        image: 'yui.jpg'
    }
</textarea>

<p>Now that we have the top, left, height &amp; width of the crop reagion, here is some sample PHP code for cropping that image based on the data from the ImageCropper Control.</p>
<textarea name="code" class="PHP">
//We are using the ImageMagick convert utility
//http://www.imagemagick.org/
$convert = '/usr/local/bin/convert';

//You should do your own security checks here
$top = $_GET['top'];
$left = $_GET['left'];
$height = $_GET['height'];
$width = $_GET['width'];

$tmpFile = mktime().'-out.jpg';

//You should do your own security checks here

copy('./yui.jpg', './tmp/'.$tmpFile);

$outFile = 'cropped-'.mktime().'.jpg';

$comm = $convert.' tmp/'.$tmpFile.' -crop '.$width.'x'.$height.'+'.$left.'+'.$top.' tmp/'.$outFile;
system($comm);

</textarea>
<p>Take a look at the <a href="/yui/examples/imagecropper/">ImageCropper examples</a> section for more details..</p>

<h2 id="skinning">Skinning ImageCropper</h2>
<p>The ImageCropper Control comes with a default presentation or "skin," part of the "Sam Skin" visual treatment that accompanies most YUI controls. You can read more about the general approach to skinning YUI components <a href="/yui/articles/skinning/">in this in-depth article</a>.</p>

<p>The CSS provided with the ImageCropper Control is comprised of core, functional CSS as well as the Sam Skin visual treatment.</p>

<p>To explore the CSS which controls the ImageCropper's presentation, please review <a href="/yui/examples/imagecropper/skinning_resize.html">the ImageCropper's Skinning Example</a> wherein the full CSS for the control is displayed.</p>

<h2 id="knownissues">Known Issues in 2.5.1</h2>
<p>Currently the ImageCropper Control doesn't support scaled images. All images must be used at full scale.</p>

<?php
include "../inc/mobileSection.inc";
?>

<p>The YUI ImageCropper Control does not currently support the iPhone or the Nokia N95. Due to the interaction model (specifically, the inability to drag and drop), the ImageCropper Control will not function as expected.</p>


<?php 
include "../inc/support.inc";
?>

		</div>
         <div class="yui-u">
		 	
			<div id="cheatsheet">
				<h3>ImageCropper Cheat Sheet:</h3>
				
				<a href="http://yuiblog.com/assets/pdf/cheatsheets/imagecropper.pdf"><img src="http://us.i1.yimg.com/us.yimg.com/i/ydn/yuiweb/img/cheatsheet-images/imagecropper.gif" width="178" height="121" alt="Cheat Sheet for the ImageCropper Control."></a>
				
			  <p><a href="/yui/docs/assets/cheatsheets.zip">Download full set of cheat sheets.</a></p>
			</div>
			
			<div id="examples">
<?php 
	include("../inc/examplesNav/".$section.".inc");
?>
		   </div>
		   
<?php 
$thisURI="http://developer.yahoo.com/yui/imagecropper/";
require_once('../inc/badge.inc');
?>
<h3 id="delicious">YUI ImageCropper on del.icio.us:</h3>
<div class="delicious">
<?php require('../inc/badge-html.inc'); ?>
</div>

		 </div>
      </div>

</div>
</div>

<?php include "../inc/side.inc" ?>
<?php include "../inc/footer.inc" ?>

