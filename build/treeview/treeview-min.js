YAHOO.widget.TreeView=function(a){if(a){this.init(a);}};YAHOO.widget.TreeView.prototype={id:null,_el:null,_nodes:null,locked:false,_expandAnim:null,_collapseAnim:null,_animCount:0,maxAnim:2,setExpandAnim:function(a){if(YAHOO.widget.TVAnim.isValid(a)){this._expandAnim=a;}},setCollapseAnim:function(a){if(YAHOO.widget.TVAnim.isValid(a)){this._collapseAnim=a;}},animateExpand:function(k,E){if(this._expandAnim&&this._animCount<this.maxAnim){var p=this;var w=YAHOO.widget.TVAnim.getAnim(this._expandAnim,k,function(){p.expandComplete(E);});if(w){++this._animCount;this.fireEvent("animStart",{"node":E,"type":"expand"});w.animate();}return true;}return false;},animateCollapse:function(k,E){if(this._collapseAnim&&this._animCount<this.maxAnim){var p=this;var w=YAHOO.widget.TVAnim.getAnim(this._collapseAnim,k,function(){p.collapseComplete(E);});if(w){++this._animCount;this.fireEvent("animStart",{"node":E,"type":"collapse"});w.animate();}return true;}return false;},expandComplete:function(a){--this._animCount;this.fireEvent("animComplete",{"node":a,"type":"expand"});},collapseComplete:function(a){--this._animCount;this.fireEvent("animComplete",{"node":a,"type":"collapse"});},init:function(p){this.id=p;if("string"!==typeof p){this._el=p;this.id=this.generateId(p);}this.createEvent("animStart",this);this.createEvent("animComplete",this);this.createEvent("collapse",this);this.createEvent("collapseComplete",this);this.createEvent("expand",this);this.createEvent("expandComplete",this);this._nodes=[];YAHOO.widget.TreeView.trees[this.id]=this;this.root=new YAHOO.widget.RootNode(this);var a=YAHOO.widget.LogWriter;},draw:function(){var a=this.root.getHtml();this.getEl().innerHTML=a;this.firstDraw=false;},getEl:function(){if(!this._el){this._el=document.getElementById(this.id);}return this._el;},regNode:function(a){this._nodes[a.index]=a;},getRoot:function(){return this.root;},setDynamicLoad:function(a,p){this.root.setDynamicLoad(a,p);},expandAll:function(){if(!this.locked){this.root.expandAll();}},collapseAll:function(){if(!this.locked){this.root.collapseAll();}},getNodeByIndex:function(p){var a=this._nodes[p];return (a)?a:null;},getNodeByProperty:function(w,p){for(var a in this._nodes){var k=this._nodes[a];if(k.data&&p==k.data[w]){return k;}}return null;},getNodesByProperty:function(k,w){var a=[];for(var p in this._nodes){var E=this._nodes[p];if(E.data&&w==E.data[k]){a.push(E);}}return (a.length)?a:null;},removeNode:function(w,a){if(w.isRoot()){return false;}var k=w.parent;if(k.parent){k=k.parent;}this._deleteNode(w);if(a&&k&&k.childrenRendered){k.refresh();}return true;},removeChildren:function(a){while(a.children.length){this._deleteNode(a.children[0]);}a.childrenRendered=false;a.dynamicLoadComplete=false;if(a.expanded){a.collapse();}else{a.updateIcon();}},_deleteNode:function(a){this.removeChildren(a);this.popNode(a);},popNode:function(M){var R=M.parent;var k=[];for(var E=0,w=R.children.length;E<w;++E){if(R.children[E]!=M){k[k.length]=R.children[E];}}R.children=k;R.childrenRendered=false;if(M.previousSibling){M.previousSibling.nextSibling=M.nextSibling;}if(M.nextSibling){M.nextSibling.previousSibling=M.previousSibling;}M.parent=null;M.previousSibling=null;M.nextSibling=null;M.tree=null;delete this._nodes[M.index];},toString:function(){return "TreeView "+this.id;},generateId:function(a){var p=a.id;if(!p){p="yui-tv-auto-id-"+YAHOO.widget.TreeView.counter;++YAHOO.widget.TreeView.counter;}return p;},onExpand:function(a){},onCollapse:function(a){}};YAHOO.augment(YAHOO.widget.TreeView,YAHOO.util.EventProvider);YAHOO.widget.TreeView.nodeCount=0;YAHOO.widget.TreeView.trees=[];YAHOO.widget.TreeView.counter=0;YAHOO.widget.TreeView.getTree=function(p){var a=YAHOO.widget.TreeView.trees[p];return (a)?a:null;};YAHOO.widget.TreeView.getNode=function(p,w){var a=YAHOO.widget.TreeView.getTree(p);return (a)?a.getNodeByIndex(w):null;};YAHOO.widget.TreeView.addHandler=function(p,w,a){if(p.addEventListener){p.addEventListener(w,a,false);}else{if(p.attachEvent){p.attachEvent("on"+w,a);}}};YAHOO.widget.TreeView.removeHandler=function(p,w,a){if(p.removeEventListener){p.removeEventListener(w,a,false);}else{if(p.detachEvent){p.detachEvent("on"+w,a);}}};YAHOO.widget.TreeView.preload=function(M,E){E=E||"ygtv";var w=["tn","tm","tmh","tp","tph","ln","lm","lmh","lp","lph","loading"];var R=[];for(var a=1;a<w.length;a=a+1){R[R.length]="<span class=\""+E+w[a]+"\">&#160;</span>";}var k=document.createElement("div");var p=k.style;p.className=E+w[0];p.position="absolute";p.height="1px";p.width="1px";p.top="-1000px";p.left="-1000px";k.innerHTML=R.join("");document.body.appendChild(k);YAHOO.widget.TreeView.removeHandler(window,"load",YAHOO.widget.TreeView.preload);};YAHOO.widget.TreeView.addHandler(window,"load",YAHOO.widget.TreeView.preload);YAHOO.widget.Node=function(w,p,a){if(w){this.init(w,p,a);}};YAHOO.widget.Node.prototype={index:0,children:null,tree:null,data:null,parent:null,depth:-1,href:null,target:"_self",expanded:false,multiExpand:true,renderHidden:false,childrenRendered:false,dynamicLoadComplete:false,previousSibling:null,nextSibling:null,_dynLoad:false,dataLoader:null,isLoading:false,hasIcon:true,iconMode:0,nowrap:false,_type:"Node",init:function(w,p,a){this.data=w;this.children=[];this.index=YAHOO.widget.TreeView.nodeCount;++YAHOO.widget.TreeView.nodeCount;this.expanded=a;this.createEvent("parentChange",this);if(p){p.appendChild(this);}},applyParent:function(p){if(!p){return false;}this.tree=p.tree;this.parent=p;this.depth=p.depth+1;if(!this.href){this.href="javascript:"+this.getToggleLink();}this.tree.regNode(this);p.childrenRendered=false;for(var w=0,a=this.children.length;w<a;++w){this.children[w].applyParent(this);}this.fireEvent("parentChange");return true;},appendChild:function(p){if(this.hasChildren()){var a=this.children[this.children.length-1];a.nextSibling=p;p.previousSibling=a;}this.children[this.children.length]=p;p.applyParent(this);if(this.childrenRendered&&this.expanded){this.getChildrenEl().style.display="";}return p;},appendTo:function(a){return a.appendChild(this);},insertBefore:function(a){var k=a.parent;if(k){if(this.tree){this.tree.popNode(this);}var w=a.isChildOf(k);k.children.splice(w,0,this);if(a.previousSibling){a.previousSibling.nextSibling=this;}this.previousSibling=a.previousSibling;this.nextSibling=a;a.previousSibling=this;this.applyParent(k);}return this;},insertAfter:function(a){var k=a.parent;if(k){if(this.tree){this.tree.popNode(this);}var w=a.isChildOf(k);if(!a.nextSibling){this.nextSibling=null;return this.appendTo(k);}k.children.splice(w+1,0,this);a.nextSibling.previousSibling=this;this.previousSibling=a;this.nextSibling=a.nextSibling;a.nextSibling=this;this.applyParent(k);}return this;},isChildOf:function(p){if(p&&p.children){for(var w=0,a=p.children.length;w<a;++w){if(p.children[w]===this){return w;}}}return -1;},getSiblings:function(){return this.parent.children;},showChildren:function(){if(!this.tree.animateExpand(this.getChildrenEl(),this)){if(this.hasChildren()){this.getChildrenEl().style.display="";}}},hideChildren:function(){if(!this.tree.animateCollapse(this.getChildrenEl(),this)){this.getChildrenEl().style.display="none";}},getElId:function(){return "ygtv"+this.index;},getChildrenElId:function(){return "ygtvc"+this.index;},getToggleElId:function(){return "ygtvt"+this.index;},getEl:function(){return document.getElementById(this.getElId());},getChildrenEl:function(){return document.getElementById(this.getChildrenElId());},getToggleEl:function(){return document.getElementById(this.getToggleElId());},getToggleLink:function(){return "YAHOO.widget.TreeView.getNode('"+this.tree.id+"',"+this.index+").toggle()";},collapse:function(){if(!this.expanded){return ;}var a=this.tree.onCollapse(this);if(false===a){return ;}a=this.tree.fireEvent("collapse",this);if(false===a){return ;}if(!this.getEl()){this.expanded=false;}else{this.hideChildren();this.expanded=false;this.updateIcon();}a=this.tree.fireEvent("collapseComplete",this);},expand:function(w){if(this.expanded){return ;}var a=true;if(!w){a=this.tree.onExpand(this);if(false===a){return ;}a=this.tree.fireEvent("expand",this);}if(false===a){return ;}if(!this.getEl()){this.expanded=true;return ;}if(!this.childrenRendered){this.getChildrenEl().innerHTML=this.renderChildren();}else{}this.expanded=true;this.updateIcon();if(this.isLoading){this.expanded=false;return ;}if(!this.multiExpand){var k=this.getSiblings();for(var p=0;p<k.length;++p){if(k[p]!=this&&k[p].expanded){k[p].collapse();}}}this.showChildren();a=this.tree.fireEvent("expandComplete",this);},updateIcon:function(){if(this.hasIcon){var a=this.getToggleEl();if(a){a.className=this.getStyle();}}},getStyle:function(){if(this.isLoading){return "ygtvloading";}else{var p=(this.nextSibling)?"t":"l";var a="n";if(this.hasChildren(true)||(this.isDynamic()&&!this.getIconMode())){a=(this.expanded)?"m":"p";}return "ygtv"+p+a;}},getHoverStyle:function(){var a=this.getStyle();if(this.hasChildren(true)&&!this.isLoading){a+="h";}return a;},expandAll:function(){for(var a=0;a<this.children.length;++a){var p=this.children[a];if(p.isDynamic()){alert("Not supported (lazy load + expand all)");break;}else{if(!p.multiExpand){alert("Not supported (no multi-expand + expand all)");break;}else{p.expand();p.expandAll();}}}},collapseAll:function(){for(var a=0;a<this.children.length;++a){this.children[a].collapse();this.children[a].collapseAll();}},setDynamicLoad:function(a,p){if(a){this.dataLoader=a;this._dynLoad=true;}else{this.dataLoader=null;this._dynLoad=false;}if(p){this.iconMode=p;}},isRoot:function(){return (this==this.tree.root);},isDynamic:function(){var a=(!this.isRoot()&&(this._dynLoad||this.tree.root._dynLoad));return a;},getIconMode:function(){return (this.iconMode||this.tree.root.iconMode);},hasChildren:function(a){return (this.children.length>0||(a&&this.isDynamic()&&!this.dynamicLoadComplete));},toggle:function(){if(!this.tree.locked&&(this.hasChildren(true)||this.isDynamic())){if(this.expanded){this.collapse();}else{this.expand();}}},getHtml:function(){this.childrenRendered=false;var a=[];a[a.length]="<div class=\"ygtvitem\" id=\""+this.getElId()+"\">";a[a.length]=this.getNodeHtml();a[a.length]=this.getChildrenHtml();a[a.length]="</div>";return a.join("");},getChildrenHtml:function(){var a=[];a[a.length]="<div class=\"ygtvchildren\"";a[a.length]=" id=\""+this.getChildrenElId()+"\"";if(!this.expanded||!this.hasChildren()){a[a.length]=" style=\"display:none;\"";}a[a.length]=">";if((this.hasChildren(true)&&this.expanded)||(this.renderHidden&&!this.isDynamic())){a[a.length]=this.renderChildren();}a[a.length]="</div>";return a.join("");},renderChildren:function(){var a=this;if(this.isDynamic()&&!this.dynamicLoadComplete){this.isLoading=true;this.tree.locked=true;if(this.dataLoader){setTimeout(function(){a.dataLoader(a,function(){a.loadComplete();});},10);}else{if(this.tree.root.dataLoader){setTimeout(function(){a.tree.root.dataLoader(a,function(){a.loadComplete();});},10);}else{return "Error: data loader not found or not specified.";}}return "";}else{return this.completeRender();}},completeRender:function(){var p=[];for(var a=0;a<this.children.length;++a){p[p.length]=this.children[a].getHtml();}this.childrenRendered=true;return p.join("");},loadComplete:function(){this.getChildrenEl().innerHTML=this.completeRender();this.dynamicLoadComplete=true;this.isLoading=false;this.expand(true);this.tree.locked=false;},getAncestor:function(w){if(w>=this.depth||w<0){return null;}var a=this.parent;while(a.depth>w){a=a.parent;}return a;},getDepthStyle:function(a){return (this.getAncestor(a).nextSibling)?"ygtvdepthcell":"ygtvblankdepthcell";},getNodeHtml:function(){return "";},refresh:function(){this.getChildrenEl().innerHTML=this.completeRender();if(this.hasIcon){var a=this.getToggleEl();if(a){a.className=this.getStyle();}}},toString:function(){return "Node ("+this.index+")";}};YAHOO.augment(YAHOO.widget.Node,YAHOO.util.EventProvider);YAHOO.widget.TextNode=function(w,p,a){if(w){this.init(w,p,a);this.setUpLabel(w);}};YAHOO.extend(YAHOO.widget.TextNode,YAHOO.widget.Node,{labelStyle:"ygtvlabel",labelElId:null,label:null,textNodeParentChange:function(){if(this.tree&&!this.tree.hasEvent("labelClick")){this.tree.createEvent("labelClick",this.tree);}},setUpLabel:function(a){this.textNodeParentChange();this.subscribe("parentChange",this.textNodeParentChange);if(typeof a=="string"){a={label:a};}this.label=a.label;this.data.label=a.label;if(a.href){this.href=a.href;}if(a.target){this.target=a.target;}if(a.style){this.labelStyle=a.style;}this.labelElId="ygtvlabelel"+this.index;},getLabelEl:function(){return document.getElementById(this.labelElId);},getNodeHtml:function(){var w=[];w[w.length]="<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">";w[w.length]="<tr>";for(var a=0;a<this.depth;++a){w[w.length]="<td class=\""+this.getDepthStyle(a)+"\"><div class=\"ygtvspacer\"></div></td>";}var p="YAHOO.widget.TreeView.getNode('"+this.tree.id+"',"+this.index+")";w[w.length]="<td";w[w.length]=" id=\""+this.getToggleElId()+"\"";w[w.length]=" class=\""+this.getStyle()+"\"";if(this.hasChildren(true)){w[w.length]=" onmouseover=\"this.className=";w[w.length]=p+".getHoverStyle()\"";w[w.length]=" onmouseout=\"this.className=";w[w.length]=p+".getStyle()\"";}w[w.length]=" onclick=\"javascript:"+this.getToggleLink()+"\">";w[w.length]="<div class=\"ygtvspacer\">";w[w.length]="</div>";w[w.length]="</td>";w[w.length]="<td ";w[w.length]=(this.nowrap)?" nowrap=\"nowrap\" ":"";w[w.length]=" >";w[w.length]="<a";w[w.length]=" id=\""+this.labelElId+"\"";w[w.length]=" class=\""+this.labelStyle+"\"";w[w.length]=" href=\""+this.href+"\"";w[w.length]=" target=\""+this.target+"\"";w[w.length]=" onclick=\"return "+p+".onLabelClick("+p+")\"";if(this.hasChildren(true)){w[w.length]=" onmouseover=\"document.getElementById('";w[w.length]=this.getToggleElId()+"').className=";w[w.length]=p+".getHoverStyle()\"";w[w.length]=" onmouseout=\"document.getElementById('";w[w.length]=this.getToggleElId()+"').className=";w[w.length]=p+".getStyle()\"";}w[w.length]=" >";w[w.length]=this.label;w[w.length]="</a>";w[w.length]="</td>";w[w.length]="</tr>";w[w.length]="</table>";return w.join("");},onLabelClick:function(a){return a.tree.fireEvent("labelClick",a);},toString:function(){return "TextNode ("+this.index+") "+this.label;}});YAHOO.widget.RootNode=function(a){this.init(null,null,true);this.tree=a;};YAHOO.extend(YAHOO.widget.RootNode,YAHOO.widget.Node,{getNodeHtml:function(){return "";},toString:function(){return "RootNode";},loadComplete:function(){this.tree.draw();},collapse:function(){},expand:function(){}});YAHOO.widget.HTMLNode=function(k,w,p,a){if(k){this.init(k,w,p);this.initContent(k,a);}};YAHOO.extend(YAHOO.widget.HTMLNode,YAHOO.widget.Node,{contentStyle:"ygtvhtml",contentElId:null,content:null,initContent:function(p,a){this.setHtml(p);this.contentElId="ygtvcontentel"+this.index;this.hasIcon=a;},setHtml:function(p){this.data=p;this.html=(typeof p==="string")?p:p.html;var a=this.getContentEl();if(a){a.innerHTML=this.html;}},getContentEl:function(){return document.getElementById(this.contentElId);},getNodeHtml:function(){var p=[];p[p.length]="<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">";p[p.length]="<tr>";for(var a=0;a<this.depth;++a){p[p.length]="<td class=\""+this.getDepthStyle(a)+"\"><div class=\"ygtvspacer\"></div></td>";}if(this.hasIcon){p[p.length]="<td";p[p.length]=" id=\""+this.getToggleElId()+"\"";p[p.length]=" class=\""+this.getStyle()+"\"";p[p.length]=" onclick=\"javascript:"+this.getToggleLink()+"\"";if(this.hasChildren(true)){p[p.length]=" onmouseover=\"this.className=";p[p.length]="YAHOO.widget.TreeView.getNode('";p[p.length]=this.tree.id+"',"+this.index+").getHoverStyle()\"";p[p.length]=" onmouseout=\"this.className=";p[p.length]="YAHOO.widget.TreeView.getNode('";p[p.length]=this.tree.id+"',"+this.index+").getStyle()\"";}p[p.length]="><div class=\"ygtvspacer\"></div></td>";}p[p.length]="<td";p[p.length]=" id=\""+this.contentElId+"\"";p[p.length]=" class=\""+this.contentStyle+"\"";p[p.length]=(this.nowrap)?" nowrap=\"nowrap\" ":"";p[p.length]=" >";p[p.length]=this.html;p[p.length]="</td>";p[p.length]="</tr>";p[p.length]="</table>";return p.join("");},toString:function(){return "HTMLNode ("+this.index+")";}});YAHOO.widget.MenuNode=function(w,p,a){if(w){this.init(w,p,a);this.setUpLabel(w);}this.multiExpand=false;};YAHOO.extend(YAHOO.widget.MenuNode,YAHOO.widget.TextNode,{toString:function(){return "MenuNode ("+this.index+") "+this.label;}});YAHOO.widget.TVAnim=function(){return {FADE_IN:"TVFadeIn",FADE_OUT:"TVFadeOut",getAnim:function(p,a,w){if(YAHOO.widget[p]){return new YAHOO.widget[p](a,w);}else{return null;}},isValid:function(a){return (YAHOO.widget[a]);}};}();YAHOO.widget.TVFadeIn=function(a,p){this.el=a;this.callback=p;};YAHOO.widget.TVFadeIn.prototype={animate:function(){var E=this;var k=this.el.style;k.opacity=0.1;k.filter="alpha(opacity=10)";k.display="";var w=0.4;var p=new YAHOO.util.Anim(this.el,{opacity:{from:0.1,to:1,unit:""}},w);p.onComplete.subscribe(function(){E.onComplete();});p.animate();},onComplete:function(){this.callback();},toString:function(){return "TVFadeIn";}};YAHOO.widget.TVFadeOut=function(a,p){this.el=a;this.callback=p;};YAHOO.widget.TVFadeOut.prototype={animate:function(){var k=this;var w=0.4;var p=new YAHOO.util.Anim(this.el,{opacity:{from:1,to:0.1,unit:""}},w);p.onComplete.subscribe(function(){k.onComplete();});p.animate();},onComplete:function(){var a=this.el.style;a.display="none";a.filter="alpha(opacity=100)";this.callback();},toString:function(){return "TVFadeOut";}};YAHOO.register("treeview",YAHOO.widget.TreeView,{version:"@VERSION@",build:"@BUILD@"});