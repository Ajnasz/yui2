(function(){var C=YAHOO.util.Dom,A=YAHOO.util.Event,D=YAHOO.lang;var B=function(F,E){var G={element:F,attributes:E||{}};B.superclass.constructor.call(this,G.element,G.attributes);};B._instances={};B.getResizeById=function(E){if(B._instances[E]){return B._instances[E];}return false;};YAHOO.extend(B,YAHOO.util.Element,{CSS_RESIZE:"yui-resize",CSS_DRAG:"yui-draggable",CSS_HOVER:"yui-resize-hover",CSS_PROXY:"yui-resize-proxy",CSS_WRAP:"yui-resize-wrap",CSS_KNOB:"yui-resize-knob",CSS_HIDDEN:"yui-resize-hidden",CSS_HANDLE:"yui-resize-handle",CSS_STATUS:"yui-resize-status",CSS_GHOST:"yui-resize-ghost",CSS_RESIZING:"yui-resize-resizing",_resizeEvent:null,dd:null,browser:YAHOO.env.ua,_positioned:null,_dds:null,_wrap:null,_proxy:null,_handles:null,_currentHandle:null,_currentDD:null,_cache:null,_active:null,_createProxy:function(){if(this.get("proxy")){this._proxy=document.createElement("div");this._proxy.className=this.CSS_PROXY;this._proxy.style.height=this.get("element").clientHeight+"px";this._proxy.style.width=this.get("element").clientWidth+"px";document.body.appendChild(this._proxy);}else{this.set("animate",false);}},_createWrap:function(){this._positioned=false;switch(this.get("element").tagName.toLowerCase()){case"img":case"textarea":case"input":case"iframe":case"select":this.set("wrap",true);break;}if(this.get("wrap")){this._wrap=document.createElement("div");this._wrap.id=this.get("element").id+"_wrap";this._wrap.className=this.CSS_WRAP;C.setStyle(this._wrap,"width",this.get("width"));C.setStyle(this._wrap,"height",this.get("height"));var F=C.getStyle(this.get("element"),"position");C.setStyle(this._wrap,"position",((F=="static")?"relative":F));C.setStyle(this._wrap,"top",C.getStyle(this.get("element"),"top"));C.setStyle(this._wrap,"left",C.getStyle(this.get("element"),"left"));if(C.getStyle(this.get("element"),"position")=="absolute"){this._positioned=true;C.setStyle(this.get("element"),"position","relative");C.setStyle(this.get("element"),"top","0");C.setStyle(this.get("element"),"left","0");}var E=this.get("element").parentNode;E.replaceChild(this._wrap,this.get("element"));this._wrap.appendChild(this.get("element"));}else{this._wrap=this.get("element");if(C.getStyle(this._wrap,"position")=="absolute"){this._positioned=true;}}if(this.get("draggable")){this._setupDragDrop();}if(this.get("hover")){C.addClass(this._wrap,this.CSS_HOVER);}if(this.get("knobHandles")){C.addClass(this._wrap,this.CSS_KNOB);}if(this.get("hiddenHandles")){C.addClass(this._wrap,this.CSS_HIDDEN);}C.addClass(this._wrap,this.CSS_RESIZE);},_setupDragDrop:function(){C.addClass(this._wrap,this.CSS_DRAG);this.dd=new YAHOO.util.DD(this._wrap,this.get("id")+"-resize",{dragOnly:true});this.dd.on("dragEvent",function(){this.fireEvent("dragEvent",arguments);},this,true);},_createHandles:function(){this._handles={};this._dds={};var F=this.get("handles");for(var E=0;E<F.length;E++){this._handles[F[E]]=document.createElement("div");this._handles[F[E]].id=C.generateId(this._handles[F[E]]);this._handles[F[E]].className=this.CSS_HANDLE+" "+this.CSS_HANDLE+"-"+F[E];this._wrap.appendChild(this._handles[F[E]]);A.on(this._handles[F[E]],"mouseover",this._handleMouseOver,this,true);A.on(this._handles[F[E]],"mouseout",this._handleMouseOut,this,true);this._dds[F[E]]=new YAHOO.util.DragDrop(this._handles[F[E]],this.get("id")+"-handle-"+F);this._dds[F[E]].on("startDragEvent",this._handleStartDrag,this._dds[F[E]],this);this._dds[F[E]].on("mouseDownEvent",this._handleMouseDown,this._dds[F[E]],this);}this._status=document.createElement("span");this._status.className=this.CSS_STATUS;document.body.insertBefore(this._status,document.body.firstChild);},_ieSelectFix:function(){return false;},_ieSelectBack:null,_setAutoRatio:function(E){if(this.get("autoRatio")){if(E&&E.shiftKey){this.set("ratio",true);if(this.browser.ie){this._ieSelectBack=document.body.onselectstart;document.body.onselectstart=this._ieSelectFix;}}else{this.set("ratio",this._configs.ratio._initialConfig.value);}}},_handleMouseDown:function(F,E){if(C.getStyle(this._wrap,"position")=="absolute"){this._positioned=true;}if(E&&E[0]){this._setAutoRatio(E[0]);}},_handleMouseOver:function(G){C.removeClass(this._wrap,this.CSS_RESIZE);if(this.get("hover")){C.removeClass(this._wrap,this.CSS_HOVER);}var E=A.getTarget(G);if(C.hasClass(E,this.CSS_HANDLE)&&!this._active){C.addClass(E,this.CSS_HANDLE+"-active");for(var F in this._handles){if(D.hasOwnProperty(this._handles,F)){if(this._handles[F]==E){C.addClass(E,this.CSS_HANDLE+"-"+F+"-active");break;}}}}C.addClass(this._wrap,this.CSS_RESIZE);},_handleMouseOut:function(G){C.removeClass(this._wrap,this.CSS_RESIZE);if(this.get("hover")&&!this._active){C.addClass(this._wrap,this.CSS_HOVER);}var E=A.getTarget(G);if(C.hasClass(E,this.CSS_HANDLE)&&!this._active){C.removeClass(E,this.CSS_HANDLE+"-active");for(var F in this._handles){if(D.hasOwnProperty(this._handles,F)){if(this._handles[F]==E){C.removeClass(E,this.CSS_HANDLE+"-"+F+"-active");break;}}}}C.addClass(this._wrap,this.CSS_RESIZE);},_handleStartDrag:function(I,G,F){var E=F.getDragEl();if(C.hasClass(E,this.CSS_HANDLE)){if(C.getStyle(this._wrap,"position")=="absolute"){this._positioned=true;}this._active=true;this._currentDD=F;if(this._proxy){this._proxy.style.visibility="visible";this._proxy.style.zIndex="1000";this._proxy.style.height=this.get("element").clientHeight+"px";this._proxy.style.width=this.get("element").clientWidth+"px";}for(var H in this._handles){if(D.hasOwnProperty(this._handles,H)){if(this._handles[H]==E){this._currentHandle=H;var J="_handle_for_"+H;C.addClass(E,this.CSS_HANDLE+"-"+H+"-active");F.on("dragEvent",this[J],this,true);F.on("mouseUpEvent",this._handleMouseUp,this,true);break;}}}C.addClass(E,this.CSS_HANDLE+"-active");if(this.get("proxy")){var K=C.getXY(this.get("element"));C.setXY(this._proxy,K);if(this.get("ghost")){this.addClass(this.CSS_GHOST);}}C.addClass(this._wrap,this.CSS_RESIZING);this._setCache();this._updateStatus(this._cache.height,this._cache.width,this._cache.top,this._cache.left);
this.fireEvent("startResize",{type:"startresize",target:this});}},_setCache:function(){this._cache.xy=C.getXY(this._wrap);C.setXY(this._wrap,this._cache.xy);this._cache.height=this.get("clientHeight");this._cache.width=this.get("clientWidth");this._cache.start.height=this._cache.height;this._cache.start.width=this._cache.width;this._cache.start.top=this._cache.xy[1];this._cache.start.left=this._cache.xy[0];this._cache.top=this._cache.xy[1];this._cache.left=this._cache.xy[0];},_handleMouseUp:function(F){this._active=false;var G="_handle_for_"+this._currentHandle;this._currentDD.unsubscribe("dragEvent",this[G],this,true);this._currentDD.unsubscribe("mouseUpEvent",this._handleMouseUp,this,true);C.removeClass(this._handles[this._currentHandle],this.CSS_HANDLE+"-"+this._currentHandle+"-active");C.removeClass(this._handles[this._currentHandle],this.CSS_HANDLE+"-active");this._currentHandle=null;if(!this.get("animate")){if(this.get("setSize")){this.set("height",this._cache.height);this.set("width",this._cache.width);}else{this.set("height",this._cache.height,true);this.set("width",this._cache.width,true);}}if(this._proxy){this._proxy.style.visibility="hidden";this._proxy.style.zIndex="-1";if(this.get("setSize")){this.resize(F,this._cache.height,this._cache.width,this._cache.top,this._cache.left,true);}else{this.fireEvent("resize",{ev:"resize",target:this,height:this._cache.height,width:this._cache.width,top:this._cache.top,left:this._cache.left});}if(this.get("ghost")){this.removeClass(this.CSS_GHOST);}}C.removeClass(this._wrap,this.CSS_RESIZING);if(this.get("hover")){C.addClass(this._wrap,this.CSS_HOVER);}if(this._status){C.setStyle(this._status,"display","none");}if(this.browser.ie){document.body.onselectstart=this._ieSelectBack;}for(var E in this._handles){if(D.hasOwnProperty(this._handles,E)){C.removeClass(this._handles[E],this.CSS_HANDLE+"-active");}}if(this.get("hover")&&!this._active){C.addClass(this._wrap,this.CSS_HOVER);}this._resizeEvent=null;},_setRatio:function(K,N,Q,I){var O=K,G=N;if(this.get("ratio")){var P=this._cache.height,H=this._cache.width,F=parseInt(this.get("height"),10),L=parseInt(this.get("width"),10),M=this.get("maxHeight"),R=this.get("minHeight"),E=this.get("maxWidth"),J=this.get("minWidth");switch(this._currentHandle){case"l":K=F*(N/L);K=Math.min(Math.max(R,K),M);N=L*(K/F);Q=(this._cache.start.top-(-((F-K)/2)));I=(this._cache.start.left-(-((L-N))));break;case"r":K=F*(N/L);K=Math.min(Math.max(R,K),M);N=L*(K/F);Q=(this._cache.start.top-(-((F-K)/2)));break;case"t":N=L*(K/F);K=F*(N/L);I=(this._cache.start.left-(-((L-N)/2)));Q=(this._cache.start.top-(-((F-K))));break;case"b":N=L*(K/F);K=F*(N/L);I=(this._cache.start.left-(-((L-N)/2)));break;case"bl":K=F*(N/L);N=L*(K/F);I=(this._cache.start.left-(-((L-N))));break;case"br":K=F*(N/L);N=L*(K/F);break;case"tl":K=F*(N/L);N=L*(K/F);I=(this._cache.start.left-(-((L-N))));Q=(this._cache.start.top-(-((F-K))));break;case"tr":K=F*(N/L);N=L*(K/F);I=(this._cache.start.left);Q=(this._cache.start.top-(-((F-K))));break;}O=this._checkHeight(K);G=this._checkWidth(N);if((O!=K)||(G!=N)){Q=0;I=0;}}return[O,G,Q,I];},_updateStatus:function(K,G,J,F){if(this._resizeEvent&&(!D.isString(this._resizeEvent))){if(this.get("status")){C.setStyle(this._status,"display","inline");}K=((K===0)?this._cache.start.height:K);G=((G===0)?this._cache.start.width:G);var I=parseInt(this.get("height"),10),E=parseInt(this.get("width"),10);if(isNaN(I)){I=parseInt(K,10);}if(isNaN(E)){E=parseInt(G,10);}var L=(parseInt(K,10)-I);var H=(parseInt(G,10)-E);this._cache.offsetHeight=L;this._cache.offsetWidth=H;this._status.innerHTML="<strong>"+parseInt(K,10)+" x "+parseInt(G,10)+"</strong><em>"+((L>0)?"+":"")+L+" x "+((H>0)?"+":"")+H+"</em>";C.setXY(this._status,[A.getPageX(this._resizeEvent)+12,A.getPageY(this._resizeEvent)+12]);}},reset:function(){this.resize(null,this._cache.start.height,this._cache.start.width,this._cache.start.top,this._cache.start.left,true);return this;},resize:function(L,J,O,P,H,F){this._resizeEvent=L;var G=this._wrap,I=this.get("animate"),N=true;if(this._proxy&&!F){G=this._proxy;I=false;}if(this.get("autoRatio")){this._setAutoRatio(L);}if(this._positioned){if(this._proxy){P=this._cache.top-P;H=this._cache.left-H;}}var K=this._setRatio(J,O,P,H);J=parseInt(K[0],10);O=parseInt(K[1],10);P=parseInt(K[2],10);H=parseInt(K[3],10);if(P==0){P=C.getY(G);}if(H==0){H=C.getX(G);}this._updateStatus(J,O,P,H);if(this._positioned){if(this._proxy&&F){if(!I){G.style.top=this._proxy.style.top;G.style.left=this._proxy.style.left;}else{P=this._proxy.style.top;H=this._proxy.style.left;}}else{if(!this.get("ratio")&&!this._proxy){P=this._cache.top+-(P);H=this._cache.left+-(H);}if(P){if(this.get("minY")){if(P<this.get("minY")){P=this.get("minY");}}if(this.get("maxY")){if((P+J)>this.get("maxY")){P=(this.get("maxY")-J);}}}if(H){if(this.get("minX")){if(H<this.get("minX")){H=this.get("minX");}}if(this.get("maxX")){if((H+O)>this.get("maxX")){H=(this.get("maxX")-O);}}}}}var M=this.fireEvent("beforeResize",{ev:"beforeResize",target:this,height:J,width:O,top:P,left:H});if(M===false){return false;}if(this._positioned){if(this._proxy&&F){}else{if(P){C.setY(G,P);this._cache.top=P;}if(H){C.setX(G,H);this._cache.left=H;}}}if(J){this._cache.height=J;if(!I){N=true;if(this._proxy&&F){if(!this.get("setSize")){N=false;}}if(N){G.style.height=J+"px";}if((this._proxy&&F)||!this._proxy){if(this._wrap!=this.get("element")){this.get("element").style.height=J+"px";}}}}if(O){this._cache.width=O;if(!I){N=true;if(this._proxy&&F){if(!this.get("setSize")){N=false;}}if(N){G.style.width=O+"px";}if((this._proxy&&F)||!this._proxy){if(this._wrap!=this.get("element")){this.get("element").style.width=O+"px";}}}}if(I){if(YAHOO.util.Anim){var E=new YAHOO.util.Anim(G,{height:{to:this._cache.height},width:{to:this._cache.width}},this.get("animateDuration"),this.get("animateEasing"));if(this._positioned){if(P){E.attributes.top={to:parseInt(P,10)};}if(H){E.attributes.left={to:parseInt(H,10)};}}if(this._wrap!=this.get("element")){E.onTween.subscribe(function(){this.get("element").style.height=G.style.height;
this.get("element").style.width=G.style.width;},this,true);}E.onComplete.subscribe(function(){this.set("height",J);this.set("width",O);this.fireEvent("resize",{ev:"resize",target:this,height:J,width:O,top:P,left:H});},this,true);E.animate();}}else{if(this._proxy&&!F){this.fireEvent("proxyResize",{ev:"proxyresize",target:this,height:J,width:O,top:P,left:H});}else{this.fireEvent("resize",{ev:"resize",target:this,height:J,width:O,top:P,left:H});}}return this;},_handle_for_br:function(G,F){var H=this._setWidth(F[0].e);var E=this._setHeight(F[0].e);this.resize(F[0].e,E,H,0,0);},_handle_for_bl:function(H,G){var I=this._setWidth(G[0].e,true);var F=this._setHeight(G[0].e);var E=(I-this._cache.width);this.resize(G[0].e,F,I,0,E);},_handle_for_tl:function(I,G){var J=this._setWidth(G[0].e,true);var F=this._setHeight(G[0].e,true);var H=(F-this._cache.height);var E=(J-this._cache.width);this.resize(G[0].e,F,J,H,E);},_handle_for_tr:function(H,F){var I=this._setWidth(F[0].e);var E=this._setHeight(F[0].e,true);var G=(E-this._cache.height);this.resize(F[0].e,E,I,G,0);},_handle_for_r:function(G,F){this._dds.r.setYConstraint(0,0);var H=this._setWidth(F[0].e);var E=this._setHeight(F[0].e);this.resize(F[0].e,0,H,0,0);},_handle_for_l:function(G,F){this._dds.l.setYConstraint(0,0);var H=this._setWidth(F[0].e,true);var E=(H-this._cache.width);this.resize(F[0].e,0,H,0,E);},_handle_for_b:function(G,F){this._dds.b.setXConstraint(0,0);var E=this._setHeight(F[0].e);this.resize(F[0].e,E,0,0,0);},_handle_for_t:function(H,F){this._dds.t.setXConstraint(0,0);var E=this._setHeight(F[0].e,true);var G=(E-this._cache.height);this.resize(F[0].e,E,0,G,0);},_setWidth:function(H,J){var I=this._cache.xy[0],G=this._cache.width,E=A.getPageX(H),F=(E-I);if(J){F=(I-E)+parseInt(this.get("width"),10);}F=this._snapTick(F,this.get("yTicks"));F=this._checkWidth(F);return F;},_checkWidth:function(E){if(this.get("minWidth")){if(E<=this.get("minWidth")){E=this.get("minWidth");}}if(this.get("maxWidth")){if(E>=this.get("maxWidth")){E=this.get("maxWidth");}}return E;},_checkHeight:function(E){if(this.get("minHeight")){if(E<=this.get("minHeight")){E=this.get("minHeight");}}if(this.get("maxHeight")){if(E>=this.get("maxHeight")){E=this.get("maxHeight");}}return E;},_setHeight:function(G,I){var H=this._cache.xy[1],F=this._cache.height,J=A.getPageY(G),E=(J-H);if(I){E=(H-J)+parseInt(this.get("height"),10);}E=this._snapTick(E,this.get("xTicks"));E=this._checkHeight(E);return E;},_snapTick:function(G,F){if(!G||!F){return G;}var H=G;var E=G%F;if(E>0){if(E>(F/2)){H=G+(F-E);}else{H=G-E;}}return H;},init:function(F,E){this._cache={xy:[],height:0,width:0,top:0,left:0,offsetHeight:0,offsetWidth:0,start:{height:0,width:0,top:0,left:0}};B.superclass.init.call(this,F,E);if(E.height){this.set("height",parseInt(E.height,10));}if(E.width){this.set("width",parseInt(E.width,10));}var G=F;if(!D.isString(G)){G=C.generateId(G);}B._instances[G]=this;this._active=false;this._createWrap();this._createProxy();this._createHandles();},getProxyEl:function(){return this._proxy;},getWrapEl:function(){return this._wrap;},getStatusEl:function(){return this._status;},getActiveHandleEl:function(){return this._handles[this._currentHandle];},isActive:function(){return((this._active)?true:false);},initAttributes:function(E){B.superclass.initAttributes.call(this,E);this.setAttributeConfig("wrap",{writeOnce:true,validator:YAHOO.lang.isBoolean,value:E.wrap||false});this.setAttributeConfig("handles",{writeOnce:true,value:E.handles||["r","b","br"],validator:function(F){if(D.isString(F)&&F.toLowerCase()=="all"){F=["t","b","r","l","bl","br","tl","tr"];}if(!D.isArray(F)){F=F.replace(/, /g,",");F=F.split(",");}this._configs.handles.value=F;}});this.setAttributeConfig("width",{value:E.width||parseInt(this.getStyle("width"),10),validator:YAHOO.lang.isNumber,method:function(F){F=parseInt(F,10);this.setStyle("width",F+"px");this._cache.width=F;this._configs.width.value=F;}});this.setAttributeConfig("height",{value:E.height||parseInt(this.getStyle("height"),10),validator:YAHOO.lang.isNumber,method:function(F){F=parseInt(F,10);this.setStyle("height",F+"px");this._cache.height=F;this._configs.height.value=F;}});this.setAttributeConfig("minWidth",{value:E.minWidth||15,validator:YAHOO.lang.isNumber});this.setAttributeConfig("minHeight",{value:E.minHeight||15,validator:YAHOO.lang.isNumber});this.setAttributeConfig("maxWidth",{value:E.maxWidth||10000,validator:YAHOO.lang.isNumber});this.setAttributeConfig("maxHeight",{value:E.maxHeight||10000,validator:YAHOO.lang.isNumber});this.setAttributeConfig("minY",{value:E.minY||false});this.setAttributeConfig("minX",{value:E.minX||false});this.setAttributeConfig("maxY",{value:E.maxY||false});this.setAttributeConfig("maxX",{value:E.maxX||false});this.setAttributeConfig("animate",{value:E.animate||false,validator:function(G){var F=true;if(!YAHOO.util.Anim){F=false;}return F;}});this.setAttributeConfig("animateEasing",{value:E.animateEasing||function(){var G=false;try{G=YAHOO.util.Easing.easeOut;}catch(F){}return G;}()});this.setAttributeConfig("animateDuration",{value:E.animateDuration||0.5});this.setAttributeConfig("proxy",{value:E.proxy||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("ratio",{value:E.ratio||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("ghost",{value:E.ghost||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("draggable",{value:E.draggable||false,validator:YAHOO.lang.isBoolean,method:function(F){if(F&&this._wrap){this._setupDragDrop();}else{if(this.dd){C.removeClass(this._wrap,this.CSS_DRAG);this.dd.unreg();}}}});this.setAttributeConfig("hover",{value:E.hover||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("hiddenHandles",{value:E.hiddenHandles||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("knobHandles",{value:E.knobHandles||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("xTicks",{value:E.xTicks||false});this.setAttributeConfig("yTicks",{value:E.yTicks||false});
this.setAttributeConfig("status",{value:E.status||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("autoRatio",{value:E.autoRatio||false,validator:YAHOO.lang.isBoolean});this.setAttributeConfig("setSize",{value:((E.setSize===false)?false:true),validator:YAHOO.lang.isBoolean});},destroy:function(){for(var F in this._handles){if(D.hasOwnProperty(this._handles,F)){A.purgeElement(this._handles[F]);this._handles[F].parentNode.removeChild(this._handles[F]);}}if(this._proxy){this._proxy.parentNode.removeChild(this._proxy);}if(this.dd){this.dd.unreg();C.removeClass(this._wrap,this.CSS_DRAG);}if(this._wrap!=this.get("element")){this.setStyle("position","");this.setStyle("top","");this.setStyle("left","");this._wrap.parentNode.replaceChild(this.get("element"),this._wrap);}this.removeClass(this.CSS_RESIZE);delete YAHOO.util.Resize._instances[this.get("id")];for(var E in this){if(D.hasOwnProperty(this,E)){this[E]=null;delete this[E];}}},toString:function(){if(this.get){return"Resize (#"+this.get("id")+")";}return"Resize Utility";}});YAHOO.util.Resize=B;})();YAHOO.register("resize",YAHOO.util.Resize,{version:"@VERSION@",build:"@BUILD@"});