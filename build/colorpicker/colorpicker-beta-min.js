YAHOO.util.Color=function(){var V="0123456789ABCDEF",U=YAHOO.lang;return {real2dec:function(J){return Math.min(255,Math.round(J*256));},hsv2rgb:function(m,u,k){if(U.isArray(m)){return this.hsv2rgb.call(this,m[0],m[1],m[2]);}var J,y,I,C,z,T,H,P;C=Math.floor((m/60)%6);z=(m/60)-C;T=k*(1-u);H=k*(1-z*u);P=k*(1-(1-z)*u);switch(C){case 0:J=k;y=P;I=T;break;case 1:J=H;y=k;I=T;break;case 2:J=T;y=k;I=P;break;case 3:J=T;y=H;I=k;break;case 4:J=P;y=T;I=k;break;case 5:J=k;y=T;I=H;break;}var a=this.real2dec;return [a(J),a(y),a(I)];},rgb2hsv:function(J,C,m){if(U.isArray(J)){return this.rgb2hsv.call(this,J[0],J[1],J[2]);}J=J/255;C=C/255;m=m/255;var H,y,a,i,q,z;H=Math.min(Math.min(J,C),m);y=Math.max(Math.max(J,C),m);a=y-H;switch(y){case H:i=0;break;case J:i=60*(C-m)/a;if(C<m){i+=360;}break;case C:i=(60*(m-J)/a)+120;break;case m:i=(60*(J-C)/a)+240;break;}q=(y===0)?0:1-(H/y);var T=[Math.round(i),q,y];return T;},rgb2hex:function(T,H,J){if(U.isArray(T)){return this.rgb2hex.call(this,T[0],T[1],T[2]);}var i=this.dec2hex;return i(T)+i(H)+i(J);},dec2hex:function(J){J=parseInt(J,10);J=(U.isNumber(J))?J:0;J=(J>255||J<0)?0:J;return V.charAt((J-J%16)/16)+V.charAt(J%16);},hex2dec:function(H){var b=function(T){return V.indexOf(T.toUpperCase());};var J=H.split("");return ((b(J[0])*16)+b(J[1]));},hex2rgb:function(J){var b=this.hex2dec;return [b(J.substr(0,2)),b(J.substr(2,2)),b(J.substr(4,2))];},websafe:function(T,H,J){if(U.isArray(T)){return this.websafe.call(this,T[0],T[1],T[2]);}var i=function(b){if(U.isNumber(b)){b=Math.min(Math.max(0,b),255);var C,m;for(C=0;C<256;C=C+51){m=C+51;if(b>=C&&b<=m){return (b-C>25)?m:C;}}}return b;};return [i(T),i(H),i(J)];}};}();(function(){var T=0;var u=function(){var b=document.createElement("div");if(this.CSS.BASE){b.className=this.CSS.BASE;}return b;};YAHOO.widget.ColorPicker=function(F,b){T=T+1;b=b||{};if(arguments.length===1&&!YAHOO.lang.isString(F)&&!F.nodeName){b=F;F=b.element||null;}if(!F&&!b.element){F=u.call(this,b);}YAHOO.widget.ColorPicker.superclass.constructor.call(this,F,b);};YAHOO.extend(YAHOO.widget.ColorPicker,YAHOO.util.Element);var P=YAHOO.widget.ColorPicker.prototype,k=YAHOO.widget.Slider,s=YAHOO.util.Color,J=YAHOO.util.Dom,v=YAHOO.util.Event,K=YAHOO.lang,z=K.substitute;var n="yui-picker";P.ID={R:n+"-r",R_HEX:n+"-rhex",G:n+"-g",G_HEX:n+"-ghex",B:n+"-b",B_HEX:n+"-bhex",H:n+"-h",S:n+"-s",V:n+"-v",PICKER_BG:n+"-bg",PICKER_THUMB:n+"-thumb",HUE_BG:n+"-hue-bg",HUE_THUMB:n+"-hue-thumb",HEX:n+"-hex",SWATCH:n+"-swatch",WEBSAFE_SWATCH:n+"-websafe-swatch",CONTROLS:n+"-controls",RGB_CONTROLS:n+"-rgb-controls",HSV_CONTROLS:n+"-hsv-controls",HEX_CONTROLS:n+"-hex-controls",HEX_SUMMARY:n+"-hex-summary",CONTROLS_LABEL:n+"-controls-label"};P.TXT={ILLEGAL_HEX:"Illegal hex value entered",SHOW_CONTROLS:"Show color details",HIDE_CONTROLS:"Hide color details",CURRENT_COLOR:"Currently selected color: {rgb}",CLOSEST_WEBSAFE:"Closest websafe color: {rgb}. Click to select.",R:"R",G:"G",B:"B",H:"H",S:"S",V:"V",HEX:"#",DEG:"¡",PERCENT:"%"};P.IMAGE={PICKER_THUMB:"../../build/colorpicker/assets/picker_thumb.png",HUE_THUMB:"../../build/colorpicker/assets/hue_thumb.png"};P.DEFAULT={PICKER_SIZE:180};P.OPT={HUE:"hue",SATURATION:"saturation",VALUE:"value",RED:"red",GREEN:"green",BLUE:"blue",HSV:"hsv",RGB:"rgb",WEBSAFE:"websafe",HEX:"hex",PICKER_SIZE:"pickersize",SHOW_CONTROLS:"showcontrols",SHOW_RGB_CONTROLS:"showrgbcontrols",SHOW_HSV_CONTROLS:"showhsvcontrols",SHOW_HEX_CONTROLS:"showhexcontrols",SHOW_HEX_SUMMARY:"showhexsummary",SHOW_WEBSAFE:"showwebsafe",CONTAINER:"container",IDS:"ids",ELEMENTS:"elements",TXT:"txt",IMAGES:"images",ANIMATE:"animate"};var g=function(){var b=this.get(this.OPT.PICKER_SIZE),F=this.get(this.OPT.HUE);F=b-Math.round(F/360*b);if(F===b){F=0;}this.hueSlider.setValue(F);};var h=function(){var F=this.get(this.OPT.PICKER_SIZE),l=this.get(this.OPT.SATURATION),b=this.get(this.OPT.VALUE);l=Math.round(l*F/100);b=Math.round(F-(b*F/100));this.pickerSlider.setRegionValue(l,b);};var Y=function(){g.call(this);h.call(this);};P.setValue=function(F,b){b=(b)||false;this.set(this.OPT.RGB,F,b);Y.call(this);};P.hueSlider=null;P.pickerSlider=null;var w=function(){var b=this.get(this.OPT.PICKER_SIZE),F=(b-this.hueSlider.getValue())/b;F=Math.round(F*360);return (F===360)?0:F;};var I=function(){return this.pickerSlider.getXValue()/this.get(this.OPT.PICKER_SIZE);};var f=function(){var b=this.get(this.OPT.PICKER_SIZE);return (b-this.pickerSlider.getYValue())/b;};var q=function(){var l=this.get(this.OPT.RGB),G=this.get(this.OPT.WEBSAFE),Q=this.getElement(this.ID.SWATCH),F=l.join(","),b=this.get(this.OPT.TXT);J.setStyle(Q,"background-color","rgb("+F+")");Q.title=K.substitute(b.CURRENT_COLOR,{"rgb":"#"+this.get(this.OPT.HEX)});Q=this.getElement(this.ID.WEBSAFE_SWATCH);F=G.join(",");J.setStyle(Q,"background-color","rgb("+F+")");Q.title=K.substitute(b.CLOSEST_WEBSAFE,{"rgb":"#"+s.rgb2hex(G)});};var t=function(){var Q=w.call(this),l=I.call(this),b=f.call(this);var F=s.hsv2rgb(Q,l,b);this.set(this.OPT.RGB,F);};var U=function(){this.getElement(this.ID.H).value=this.get(this.OPT.HUE);this.getElement(this.ID.S).value=this.get(this.OPT.SATURATION);this.getElement(this.ID.V).value=this.get(this.OPT.VALUE);this.getElement(this.ID.R).value=this.get(this.OPT.RED);this.getElement(this.ID.R_HEX).innerHTML=s.dec2hex(this.get(this.OPT.RED));this.getElement(this.ID.G).value=this.get(this.OPT.GREEN);this.getElement(this.ID.G_HEX).innerHTML=s.dec2hex(this.get(this.OPT.GREEN));this.getElement(this.ID.B).value=this.get(this.OPT.BLUE);this.getElement(this.ID.B_HEX).innerHTML=s.dec2hex(this.get(this.OPT.BLUE));this.getElement(this.ID.HEX).value=this.get(this.OPT.HEX);};var o=function(Q){var F=w.call(this);this.set(this.OPT.HUE,F,true);var b=s.hsv2rgb(F,1,1);var l="rgb("+b.join(",")+")";J.setStyle(this.getElement(this.ID.PICKER_BG),"background-color",l);if(this.hueSlider.valueChangeSource===this.hueSlider.SOURCE_UI_EVENT){t.call(this);}U.call(this);q.call(this);};var m=function(l){var F=I.call(this),b=f.call(this);this.set(this.OPT.SATURATION,Math.round(F*100),true);this.set(this.OPT.VALUE,Math.round(b*100),true);if(this.pickerSlider.valueChangeSource===this.pickerSlider.SOURCE_UI_EVENT){t.call(this);}U.call(this);q.call(this);};var X=function(b){var F=v.getCharCode(b);if(F===38){return 3;}else{if(F===13){return 6;}else{if(F===40){return 4;}else{if(F>=48&&F<=57){return 1;}else{if(F>=97&&F<=102){return 2;}else{if(F>=65&&F<=70){return 2;}else{if("8, 9, 13, 27, 37, 39".indexOf(F)>-1){return 5;}else{return 0;}}}}}}}};var y=function(F,b,Q){var l=b.value;if(Q!==this.OPT.HEX){l=parseInt(l,10);}if(l!==this.get(Q)){this.set(Q,l);}};var C=function(l,b,G){var Q=X(l);var F=(l.shiftKey)?10:1;switch(Q){case 6:y.apply(this,arguments);break;case 3:this.set(G,Math.min(this.get(G)+F,255));U.call(this);break;case 4:this.set(G,Math.max(this.get(G)-F,0));U.call(this);break;default:}};var V=function(F,b,Q){var l=X(F);if(l===6){y.apply(this,arguments);}};var r=function(F,b){var l=X(F);switch(l){case 6:case 5:case 1:break;case 2:if(b!==true){break;}default:v.stopEvent(F);return false;}};var a=function(b){return r(b,true);};P.getElement=function(b){return this.get(this.OPT.ELEMENTS)[this.get(this.OPT.IDS)[b]];};var H=function(){var Q,l,O,G,M,b=this.get(this.OPT.IDS),E=this.get(this.OPT.TXT),d=this.get(this.OPT.IMAGES),L=function(e,j){var Z=document.createElement(e);if(j){K.augmentObject(Z,j,true);}return Z;},A=function(e,j){var Z=K.merge({autocomplete:"off",value:"0",size:3,maxlength:3},j);Z.name=Z.id;return new L(e,Z);};var F=this.get("element");Q=new L("div",{id:b[this.ID.PICKER_BG],className:"yui-picker-bg",tabIndex:-1,hideFocus:true});l=new L("div",{id:b[this.ID.PICKER_THUMB],className:"yui-picker-thumb"});O=new L("img",{src:d.PICKER_THUMB});l.appendChild(O);Q.appendChild(l);F.appendChild(Q);Q=new L("div",{id:b[this.ID.HUE_BG],className:"yui-picker-hue-bg",tabIndex:-1,hideFocus:true});l=new L("div",{id:b[this.ID.HUE_THUMB],className:"yui-picker-hue-thumb"});O=new L("img",{src:d.HUE_THUMB});l.appendChild(O);Q.appendChild(l);F.appendChild(Q);Q=new L("div",{id:b[this.ID.CONTROLS],className:"yui-picker-controls"});F.appendChild(Q);F=Q;Q=new L("div",{className:"hd"});l=new L("a",{id:b[this.ID.CONTROLS_LABEL],href:"#"});Q.appendChild(l);F.appendChild(Q);Q=new L("div",{className:"bd"});F.appendChild(Q);F=Q;Q=new L("ul",{id:b[this.ID.RGB_CONTROLS],className:"yui-picker-rgb-controls"});l=new L("li");l.appendChild(document.createTextNode(E.R+" "));G=new A("input",{id:b[this.ID.R],className:"yui-picker-r"});l.appendChild(G);Q.appendChild(l);l=new L("li");l.appendChild(document.createTextNode(E.G+" "));G=new A("input",{id:b[this.ID.G],className:"yui-picker-g"});l.appendChild(G);Q.appendChild(l);l=new L("li");l.appendChild(document.createTextNode(E.B+" "));G=new A("input",{id:b[this.ID.B],className:"yui-picker-b"});l.appendChild(G);Q.appendChild(l);F.appendChild(Q);Q=new L("ul",{id:b[this.ID.HSV_CONTROLS],className:"yui-picker-hsv-controls"});l=new L("li");l.appendChild(document.createTextNode(E.H+" "));G=new A("input",{id:b[this.ID.H],className:"yui-picker-h"});l.appendChild(G);l.appendChild(document.createTextNode(" "+E.DEG));Q.appendChild(l);l=new L("li");l.appendChild(document.createTextNode(E.S+" "));G=new A("input",{id:b[this.ID.S],className:"yui-picker-s"});l.appendChild(G);l.appendChild(document.createTextNode(" "+E.PERCENT));Q.appendChild(l);l=new L("li");l.appendChild(document.createTextNode(E.V+" "));G=new A("input",{id:b[this.ID.V],className:"yui-picker-v"});l.appendChild(G);l.appendChild(document.createTextNode(" "+E.PERCENT));Q.appendChild(l);F.appendChild(Q);Q=new L("ul",{id:b[this.ID.HEX_SUMMARY],className:"yui-picker-hex_summary"});l=new L("li",{id:b[this.ID.R_HEX]});Q.appendChild(l);l=new L("li",{id:b[this.ID.G_HEX]});Q.appendChild(l);l=new L("li",{id:b[this.ID.B_HEX]});Q.appendChild(l);F.appendChild(Q);Q=new L("div",{id:b[this.ID.HEX_CONTROLS],className:"yui-picker-hex-controls"});Q.appendChild(document.createTextNode(E.HEX+" "));l=new A("input",{id:b[this.ID.HEX],className:"yui-picker-hex",size:6,maxlength:6});Q.appendChild(l);F.appendChild(Q);F=this.get("element");Q=new L("div",{id:b[this.ID.SWATCH],className:"yui-picker-swatch"});F.appendChild(Q);Q=new L("div",{id:b[this.ID.WEBSAFE_SWATCH],className:"yui-picker-websafe-swatch"});F.appendChild(Q);};var x=function(F,b){v.on(this.getElement(F),"keydown",function(Q,l){C.call(l,Q,this,b);},this);v.on(this.getElement(F),"keypress",a,this);v.on(this.getElement(F),"blur",function(Q,l){y.call(l,Q,this,b);},this);};P.initPicker=function(){var M=this.OPT,G=this.get(M.IDS),F=this.get(M.ELEMENTS),b,Q,O;for(b in this.ID){if(K.hasOwnProperty(this.ID,b)){G[this.ID[b]]=G[b];}}Q=J.get(G[this.ID.PICKER_BG]);if(!Q){H.call(this);}else{}for(b in G){if(K.hasOwnProperty(G,b)){Q=J.get(G[b]);O=J.generateId(Q);G[b]=O;G[G[b]]=O;F[O]=Q;}}F=[M.SHOW_CONTROLS,M.SHOW_RGB_CONTROLS,M.SHOW_HSV_CONTROLS,M.SHOW_HEX_CONTROLS,M.SHOW_HEX_SUMMARY,M.SHOW_WEBSAFE];for(b=0;b<F.length;b=b+1){this.set(F[b],this.get(F[b]));}var l=this.get(M.PICKER_SIZE);this.hueSlider=k.getVertSlider(this.getElement(this.ID.HUE_BG),this.getElement(this.ID.HUE_THUMB),0,l);this.hueSlider.subscribe("change",o,this,true);this.pickerSlider=k.getSliderRegion(this.getElement(this.ID.PICKER_BG),this.getElement(this.ID.PICKER_THUMB),0,l,0,l);this.pickerSlider.subscribe("change",m,this,true);v.on(this.getElement(this.ID.WEBSAFE_SWATCH),"click",function(E){this.setValue(this.get(M.WEBSAFE));},this,true);v.on(this.getElement(this.ID.CONTROLS_LABEL),"click",function(E){this.set(M.SHOW_CONTROLS,!this.get(M.SHOW_CONTROLS));v.preventDefault(E);},this,true);x.call(this,this.ID.R,this.OPT.RED);x.call(this,this.ID.G,this.OPT.GREEN);x.call(this,this.ID.B,this.OPT.BLUE);x.call(this,this.ID.H,this.OPT.HUE);x.call(this,this.ID.S,this.OPT.SATURATION);x.call(this,this.ID.V,this.OPT.VALUE);v.on(this.getElement(this.ID.HEX),"keydown",function(L,E){V.call(E,L,this,E.OPT.HEX);},this);v.on(this.getElement(this.ID.HEX),"keypress",r,this);v.on(this.getElement(this.ID.HEX),"blur",function(L,E){y.call(E,L,this,E.OPT.HEX);},this);};var i=function(){var b=[this.get(this.OPT.RED),this.get(this.OPT.GREEN),this.get(this.OPT.BLUE)];this.set(this.OPT.RGB,b);Y.call(this);};var R=function(){var F=[this.get(this.OPT.HUE),this.get(this.OPT.SATURATION)/100,this.get(this.OPT.VALUE)/100];var b=s.hsv2rgb(F);this.set(this.OPT.RGB,b);Y.call(this);};var D=function(){var G=this.get(this.OPT.HEX),b=G.length;if(b===3){var M=G.split(""),Q;for(Q=0;Q<b;Q=Q+1){M[Q]=M[Q]+M[Q];}G=M.join("");}if(G.length!==6){return false;}var F=s.hex2rgb(G);this.setValue(F);};P.initAttributes=function(b){b=b||{};YAHOO.widget.ColorPicker.superclass.initAttributes.call(this,b);this.setAttributeConfig(this.OPT.PICKER_SIZE,{value:b.size||this.DEFAULT.PICKER_SIZE});this.setAttributeConfig(this.OPT.HUE,{value:b.hue||0,validator:K.isNumber});this.setAttributeConfig(this.OPT.SATURATION,{value:b.saturation||0,validator:K.isNumber});this.setAttributeConfig(this.OPT.VALUE,{value:b.value||100,validator:K.isNumber});this.setAttributeConfig(this.OPT.RED,{value:b.red||255,validator:K.isNumber});this.setAttributeConfig(this.OPT.GREEN,{value:b.red||255,validator:K.isNumber});this.setAttributeConfig(this.OPT.BLUE,{value:b.blue||255,validator:K.isNumber});this.setAttributeConfig(this.OPT.HEX,{value:b.hex||"FFFFFF",validator:K.isString});this.setAttributeConfig(this.OPT.RGB,{value:b.rgb||[255,255,255],method:function(M){this.set(this.OPT.RED,M[0],true);this.set(this.OPT.GREEN,M[1],true);this.set(this.OPT.BLUE,M[2],true);var E=s.websafe(M);this.set(this.OPT.WEBSAFE,E,true);var O=s.rgb2hex(M);this.set(this.OPT.HEX,O,true);var G=s.rgb2hsv(M);this.set(this.OPT.HUE,G[0],true);this.set(this.OPT.SATURATION,Math.round(G[1]*100),true);this.set(this.OPT.VALUE,Math.round(G[2]*100),true);},readonly:true});this.setAttributeConfig(this.OPT.CONTAINER,{value:null,method:function(G){if(G){G.showEvent.subscribe(function(){this.pickerSlider.focus();},this,true);}}});this.setAttributeConfig(this.OPT.WEBSAFE,{value:b.websafe||[255,255,255]});var l=b.ids||K.merge({},this.ID);if(!b.ids&&T>1){for(var F in l){if(K.hasOwnProperty(l,F)){l[F]=l[F]+T;}}}this.setAttributeConfig(this.OPT.IDS,{value:l,writeonce:true});this.setAttributeConfig(this.OPT.TXT,{value:b.txt||this.TXT,writeonce:true});this.setAttributeConfig(this.OPT.IMAGES,{value:b.images||this.IMAGE,writeonce:true});this.setAttributeConfig(this.OPT.ELEMENTS,{value:{},readonly:true});var Q=function(O,G){var M=(K.isString(O)?this.getElement(O):O);J.setStyle(M,"display",(G)?"":"none");};this.setAttributeConfig(this.OPT.SHOW_CONTROLS,{value:(b.showcontrols)||true,method:function(G){var M=J.getElementsByClassName("bd","div",this.getElement(this.ID.CONTROLS))[0];Q.call(this,M,G);this.getElement(this.ID.CONTROLS_LABEL).innerHTML=(G)?this.get(this.OPT.TXT).HIDE_CONTROLS:this.get(this.OPT.TXT).SHOW_CONTROLS;}});this.setAttributeConfig(this.OPT.SHOW_RGB_CONTROLS,{value:(b.showrgbcontrols)||true,method:function(G){Q.call(this,this.ID.RGB_CONTROLS,G);}});this.setAttributeConfig(this.OPT.SHOW_HSV_CONTROLS,{value:(b.showhsvcontrols)||false,method:function(G){Q.call(this,this.ID.HSV_CONTROLS,G);if(G&&this.get(this.OPT.SHOW_HEX_SUMMARY)){this.set(this.OPT.SHOW_HEX_SUMMARY,false);}}});this.setAttributeConfig(this.OPT.SHOW_HEX_CONTROLS,{value:(b.showhexcontrols)||false,method:function(G){Q.call(this,this.ID.HEX_CONTROLS,G);}});this.setAttributeConfig(this.OPT.SHOW_WEBSAFE,{value:(b.showwebsafe)||true,method:function(G){Q.call(this,this.ID.WEBSAFE_SWATCH,G);}});this.setAttributeConfig(this.OPT.SHOW_HEX_SUMMARY,{value:(b.showhexsummary)||true,method:function(G){Q.call(this,this.ID.HEX_SUMMARY,G);if(G&&this.get(this.OPT.SHOW_HSV_CONTROLS)){this.set(this.OPT.SHOW_HSV_CONTROLS,false);}}});this.setAttributeConfig(this.OPT.ANIMATE,{value:(b.animate)||true,method:function(G){this.pickerSlider.animate=G;this.hueSlider.animate=G;}});this.on(this.OPT.HUE+"Change",R,this,true);this.on(this.OPT.SATURATION+"Change",R,this,true);this.on(this.OPT.VALUE+"Change",h,this,true);this.on(this.OPT.RED+"Change",i,this,true);this.on(this.OPT.GREEN+"Change",i,this,true);this.on(this.OPT.BLUE+"Change",i,this,true);this.on(this.OPT.HEX+"Change",D,this,true);this.initPicker();};})();YAHOO.register("colorpicker",YAHOO.widget.ColorPicker,{version:"@VERSION@",build:"@BUILD@"});