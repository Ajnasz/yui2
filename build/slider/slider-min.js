YAHOO.widget.Slider=function(b,g,z,S){if(b){this.init(b,g,true);this.initSlider(S);this.initThumb(z);}};YAHOO.widget.Slider.getHorizSlider=function(z,b,n,S,g){return new YAHOO.widget.Slider(z,z,new YAHOO.widget.SliderThumb(b,z,n,S,0,0,g),"horiz");};YAHOO.widget.Slider.getVertSlider=function(b,S,g,n,z){return new YAHOO.widget.Slider(b,b,new YAHOO.widget.SliderThumb(S,b,0,0,g,n,z),"vert");};YAHOO.widget.Slider.getSliderRegion=function(b,S,v,n,g,O,z){return new YAHOO.widget.Slider(b,b,new YAHOO.widget.SliderThumb(S,b,v,n,g,O,z),"region");};YAHOO.widget.Slider.ANIM_AVAIL=true;YAHOO.extend(YAHOO.widget.Slider,YAHOO.util.DragDrop,{initSlider:function(g){this.type=g;this.createEvent("change",this);this.createEvent("slideStart",this);this.createEvent("slideEnd",this);this.isTarget=false;this.animate=YAHOO.widget.Slider.ANIM_AVAIL;this.backgroundEnabled=true;this.tickPause=40;this.enableKeys=true;this.keyIncrement=20;this.moveComplete=true;this.animationDuration=0.2;this.SOURCE_UI_EVENT=1;this.SOURCE_SET_VALUE=2;this.valueChangeSource=0;this._silent=false;},initThumb:function(z){var g=this;this.thumb=z;z.cacheBetweenDrags=true;if(z._isHoriz&&z.xTicks&&z.xTicks.length){this.tickPause=Math.round(360/z.xTicks.length);}else{if(z.yTicks&&z.yTicks.length){this.tickPause=Math.round(360/z.yTicks.length);}}z.onAvailable=function(){return g.setStartSliderState();};z.onMouseDown=function(){return g.focus();};z.startDrag=function(){g._slideStart();};z.onDrag=function(){g.fireEvents(true);};z.onMouseUp=function(){g.thumbMouseUp();};},onAvailable:function(){var g=YAHOO.util.Event;g.on(this.id,"keydown",this.handleKeyDown,this,true);g.on(this.id,"keypress",this.handleKeyPress,this,true);},handleKeyPress:function(b){if(this.enableKeys){var g=YAHOO.util.Event;var z=g.getCharCode(b);switch(z){case 37:case 38:case 39:case 40:case 36:case 35:g.preventDefault(b);break;default:}}},handleKeyDown:function(n){if(this.enableKeys){var R=YAHOO.util.Event;var b=R.getCharCode(n),N=this.thumb;var z=this.getXValue(),O=this.getYValue();var w=false;var S=true;switch(b){case 37:z-=this.keyIncrement;break;case 38:O-=this.keyIncrement;break;case 39:z+=this.keyIncrement;break;case 40:O+=this.keyIncrement;break;case 36:z=N.leftConstraint;O=N.topConstraint;break;case 35:z=N.rightConstraint;O=N.bottomConstraint;break;default:S=false;}if(S){if(N._isRegion){this.setRegionValue(z,O,true);}else{var g=(N._isHoriz)?z:O;this.setValue(g,true);}R.stopEvent(n);}}},setStartSliderState:function(){this.setThumbCenterPoint();this.baselinePos=YAHOO.util.Dom.getXY(this.getEl());this.thumb.startOffset=this.thumb.getOffsetFromParent(this.baselinePos);if(this.thumb._isRegion){if(this.deferredSetRegionValue){this.setRegionValue.apply(this,this.deferredSetRegionValue,true);this.deferredSetRegionValue=null;}else{this.setRegionValue(0,0,true,true,true);}}else{if(this.deferredSetValue){this.setValue.apply(this,this.deferredSetValue,true);this.deferredSetValue=null;}else{this.setValue(0,true,true,true);}}},setThumbCenterPoint:function(){var g=this.thumb.getEl();if(g){this.thumbCenterPoint={x:parseInt(g.offsetWidth/2,10),y:parseInt(g.offsetHeight/2,10)};}},lock:function(){this.thumb.lock();this.locked=true;},unlock:function(){this.thumb.unlock();this.locked=false;},thumbMouseUp:function(){if(!this.isLocked()&&!this.moveComplete){this.endMove();}},onMouseUp:function(){if(!this.isLocked()&&!this.moveComplete){this.endMove();}},getThumb:function(){return this.thumb;},focus:function(){this.valueChangeSource=this.SOURCE_UI_EVENT;var g=this.getEl();if(g.focus){try{g.focus();}catch(z){}}this.verifyOffset();if(this.isLocked()){return false;}else{this._slideStart();return true;}},onChange:function(g,z){},onSlideStart:function(){},onSlideEnd:function(){},getValue:function(){return this.thumb.getValue();},getXValue:function(){return this.thumb.getXValue();},getYValue:function(){return this.thumb.getYValue();},handleThumbChange:function(){},setValue:function(O,b,S,g){this._silent=g;this.valueChangeSource=this.SOURCE_SET_VALUE;if(!this.thumb.available){this.deferredSetValue=arguments;return false;}if(this.isLocked()&&!S){return false;}if(isNaN(O)){return false;}var z=this.thumb;var v,n;this.verifyOffset(true);if(z._isRegion){return false;}else{if(z._isHoriz){this._slideStart();v=z.initPageX+O+this.thumbCenterPoint.x;this.moveThumb(v,z.initPageY,b);}else{this._slideStart();n=z.initPageY+O+this.thumbCenterPoint.y;this.moveThumb(z.initPageX,n,b);}}return true;},setRegionValue:function(R,g,S,n,z){this._silent=z;this.valueChangeSource=this.SOURCE_SET_VALUE;if(!this.thumb.available){this.deferredSetRegionValue=arguments;return false;}if(this.isLocked()&&!n){return false;}if(isNaN(R)){return false;}var b=this.thumb;this.verifyOffset(true);if(b._isRegion){this._slideStart();var O=b.initPageX+R+this.thumbCenterPoint.x;var v=b.initPageY+g+this.thumbCenterPoint.y;this.moveThumb(O,v,S);return true;}return false;},verifyOffset:function(z){var g=YAHOO.util.Dom.getXY(this.getEl());if(g[0]!=this.baselinePos[0]||g[1]!=this.baselinePos[1]){this.thumb.resetConstraints();this.baselinePos=g;return false;}return true;},moveThumb:function(O,v,n,S){var R=this.thumb;var w=this;if(!R.available){return ;}R.setDelta(this.thumbCenterPoint.x,this.thumbCenterPoint.y);var z=R.getTargetCoord(O,v);var b=[z.x,z.y];this._slideStart();if(this.animate&&YAHOO.widget.Slider.ANIM_AVAIL&&R._graduated&&!n){this.lock();this.curCoord=YAHOO.util.Dom.getXY(this.thumb.getEl());setTimeout(function(){w.moveOneTick(b);},this.tickPause);}else{if(this.animate&&YAHOO.widget.Slider.ANIM_AVAIL&&!n){this.lock();var g=new YAHOO.util.Motion(R.id,{points:{to:b}},this.animationDuration,YAHOO.util.Easing.easeOut);g.onComplete.subscribe(function(){w.endMove();});g.animate();}else{R.setDragElPos(O,v);if(!S){this.endMove();}}}},_slideStart:function(){if(!this._sliding){if(!this._silent){this.onSlideStart();this.fireEvent("slideStart");}this._sliding=true;}},_slideEnd:function(){if(this._sliding&&this.moveComplete){if(!this._silent){this.onSlideEnd();this.fireEvent("slideEnd");}this._sliding=false;this._silent=false;this.moveComplete=false;}},moveOneTick:function(z){var n=this.thumb,S;var v=null;if(n._isRegion){v=this._getNextX(this.curCoord,z);var g=(v)?v[0]:this.curCoord[0];v=this._getNextY([g,this.curCoord[1]],z);}else{if(n._isHoriz){v=this._getNextX(this.curCoord,z);}else{v=this._getNextY(this.curCoord,z);}}if(v){this.curCoord=v;this.thumb.alignElWithMouse(n.getEl(),v[0],v[1]);if(!(v[0]==z[0]&&v[1]==z[1])){var b=this;setTimeout(function(){b.moveOneTick(z);},this.tickPause);}else{this.endMove();}}else{this.endMove();}},_getNextX:function(g,z){var S=this.thumb;var v;var b=[];var n=null;if(g[0]>z[0]){v=S.tickSize-this.thumbCenterPoint.x;b=S.getTargetCoord(g[0]-v,g[1]);n=[b.x,b.y];}else{if(g[0]<z[0]){v=S.tickSize+this.thumbCenterPoint.x;b=S.getTargetCoord(g[0]+v,g[1]);n=[b.x,b.y];}else{}}return n;},_getNextY:function(g,z){var S=this.thumb;var v;var b=[];var n=null;if(g[1]>z[1]){v=S.tickSize-this.thumbCenterPoint.y;b=S.getTargetCoord(g[0],g[1]-v);n=[b.x,b.y];}else{if(g[1]<z[1]){v=S.tickSize+this.thumbCenterPoint.y;b=S.getTargetCoord(g[0],g[1]+v);n=[b.x,b.y];}else{}}return n;},b4MouseDown:function(g){this.thumb.autoOffset();this.thumb.resetConstraints();},onMouseDown:function(z){if(!this.isLocked()&&this.backgroundEnabled){var g=YAHOO.util.Event.getPageX(z);var b=YAHOO.util.Event.getPageY(z);this.focus();this.moveThumb(g,b);}},onDrag:function(z){if(!this.isLocked()){var g=YAHOO.util.Event.getPageX(z);var b=YAHOO.util.Event.getPageY(z);this.moveThumb(g,b,true,true);}},endMove:function(){this.unlock();this.moveComplete=true;this.fireEvents();},fireEvents:function(b){var z=this.thumb;if(!b){z.cachePosition();}if(!this.isLocked()){if(z._isRegion){var n=z.getXValue();var S=z.getYValue();if(n!=this.previousX||S!=this.previousY){if(!this._silent){this.onChange(n,S);this.fireEvent("change",{x:n,y:S});}}this.previousX=n;this.previousY=S;}else{var g=z.getValue();if(g!=this.previousVal){if(!this._silent){this.onChange(g);this.fireEvent("change",g);}}this.previousVal=g;}this._slideEnd();}},toString:function(){return ("Slider ("+this.type+") "+this.id);}});YAHOO.augment(YAHOO.widget.Slider,YAHOO.util.EventProvider);YAHOO.widget.SliderThumb=function(O,z,n,S,g,v,b){if(O){YAHOO.widget.SliderThumb.superclass.constructor.call(this,O,z);this.parentElId=z;}this.isTarget=false;this.tickSize=b;this.maintainOffset=true;this.initSlider(n,S,g,v,b);this.scroll=false;};YAHOO.extend(YAHOO.widget.SliderThumb,YAHOO.util.DD,{startOffset:null,_isHoriz:false,_prevVal:0,_graduated:false,getOffsetFromParent0:function(b){var g=YAHOO.util.Dom.getXY(this.getEl());var z=b||YAHOO.util.Dom.getXY(this.parentElId);return [(g[0]-z[0]),(g[1]-z[1])];},getOffsetFromParent:function(R){var g=this.getEl(),n;if(!this.deltaOffset){var w=YAHOO.util.Dom.getXY(g);var v=R||YAHOO.util.Dom.getXY(this.parentElId);n=[(w[0]-v[0]),(w[1]-v[1])];var z=parseInt(YAHOO.util.Dom.getStyle(g,"left"),10);var X=parseInt(YAHOO.util.Dom.getStyle(g,"top"),10);var S=z-n[0];var b=X-n[1];if(isNaN(S)||isNaN(b)){}else{this.deltaOffset=[S,b];}}else{var N=parseInt(YAHOO.util.Dom.getStyle(g,"left"),10);var O=parseInt(YAHOO.util.Dom.getStyle(g,"top"),10);n=[N+this.deltaOffset[0],O+this.deltaOffset[1]];}return n;},initSlider:function(S,b,g,n,z){this.initLeft=S;this.initRight=b;this.initUp=g;this.initDown=n;this.setXConstraint(S,b,z);this.setYConstraint(g,n,z);if(z&&z>1){this._graduated=true;}this._isHoriz=(S||b);this._isVert=(g||n);this._isRegion=(this._isHoriz&&this._isVert);},clearTicks:function(){YAHOO.widget.SliderThumb.superclass.clearTicks.call(this);this.tickSize=0;this._graduated=false;},getValue:function(){if(!this.available){return 0;}var g=(this._isHoriz)?this.getXValue():this.getYValue();return g;},getXValue:function(){if(!this.available){return 0;}var g=this.getOffsetFromParent();return (g[0]-this.startOffset[0]);},getYValue:function(){if(!this.available){return 0;}var g=this.getOffsetFromParent();return (g[1]-this.startOffset[1]);},toString:function(){return "SliderThumb "+this.id;},onChange:function(g,z){}});if("undefined"==typeof YAHOO.util.Anim){YAHOO.widget.Slider.ANIM_AVAIL=false;}YAHOO.register("slider",YAHOO.widget.Slider,{version:"@VERSION@",build:"@BUILD@"});