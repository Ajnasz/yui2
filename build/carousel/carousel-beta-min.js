(function(){var L;YAHOO.widget.Carousel=function(n,m){this._navBtns={prev:[],next:[]};this._pages={el:null,num:0,cur:0};YAHOO.widget.Carousel.superclass.constructor.call(this,n,m);};var P=YAHOO.widget.Carousel,b=YAHOO.util.Dom,Z=YAHOO.util.Event,k=YAHOO.lang;L="Carousel";var N={},E="afterScroll",X="beforeHide",H="beforePageChange",e="beforeScroll",T="beforeShow",B="blur",S="focus",W="hide",M="itemAdded",j="itemRemoved",C="itemSelected",J="loadItems",G="navigationStateChange",O="noItems",c="pageChange",F="render",Q="show",U="startAutoPlay",l="stopAutoPlay",I="uiUpdate";function V(){var n=this._firstItem,m;if(n>=this.get("numItems")-1){if(this.get("isCircular")){m=0;}else{this.stopAutoPlay();}}else{m=n+this.get("numVisible");}this.scrollTo.call(this,m);}function R(n,m){var o=document.createElement(n);m=m||{};if(m.className){b.addClass(o,m.className);}if(m.parent){m.parent.appendChild(o);}if(m.id){o.setAttribute("id",m.id);}if(m.content){if(m.content.nodeName){o.appendChild(m.content);}else{o.innerHTML=m.content;}}return o;}function a(o,n,m){var q;if(!o){return 0;}function p(t,s){var u;u=parseInt(b.getStyle(t,s),10);return k.isNumber(u)?u:0;}function r(t,s){var u;u=parseFloat(b.getStyle(t,s));return k.isNumber(u)?u:0;}if(typeof m=="undefined"){m="int";}switch(n){case"height":q=o.offsetHeight;if(q>0){q+=p(o,"marginTop")+p(o,"marginBottom");}else{q=r(o,"height")+p(o,"marginTop")+p(o,"marginBottom")+p(o,"borderTopWidth")+p(o,"borderBottomWidth")+p(o,"paddingTop")+p(o,"paddingBottom");}break;case"width":q=o.offsetWidth;if(q>0){q+=p(o,"marginLeft")+p(o,"marginRight");}else{q=r(o,"width")+p(o,"marginLeft")+p(o,"marginRight")+p(o,"borderLeftWidth")+p(o,"borderRightWidth")+p(o,"paddingLeft")+p(o,"paddingRight");}break;default:if(m=="int"){q=p(o,n);if(n=="marginRight"&&YAHOO.env.ua.webkit){q=p(o,"marginLeft");}}else{if(m=="float"){q=r(o,n);}else{q=b.getStyle(o,n);}}break;}return q;}function K(o){var p,n=0,m=false;if(this._itemsTable.numItems===0){return 0;}if(typeof o=="undefined"){if(this._itemsTable.size>0){return this._itemsTable.size;}}if(k.isUndefined(this._itemsTable.items[0])){return 0;}p=b.get(this._itemsTable.items[0].id);if(typeof o=="undefined"){m=this.get("isVertical");}else{m=o=="height";}if(m){n=a(p,"height");}else{n=a(p,"width");}if(typeof o=="undefined"){this._itemsTable.size=n;}return n;}function f(o){var n=0,m=0;n=K.call(this);m=n*o;if(this.get("isVertical")){m-=o;}return m;}function Y(){var q=this.get("firstVisible"),n=0,m=this.get("numItems"),o=this.get("numVisible"),p=this.get("revealAmount");n=q+o-1+(p?1:0);n=n>m-1?m-1:n;if(!this.getItem(q)||!this.getItem(n)){this.fireEvent(J,{ev:J,first:q,last:n,num:n-q});}}function d(m,n){n.scrollPageBackward();Z.preventDefault(m);}function g(m,n){n.scrollPageForward();Z.preventDefault(m);}function i(r,m){var u,w=this.CLASSES,n,t=this._firstItem,o=this.get("isCircular"),s=this.get("numItems"),v=this.get("numVisible"),q=m,p=t+v-1;u=v>1&&!o&&q>r;if(q>=0&&q<s){if(!k.isUndefined(this._itemsTable.items[q])){n=b.get(this._itemsTable.items[q].id);if(n){b.removeClass(n,w.SELECTED_ITEM);}}}if(k.isNumber(r)){r=parseInt(r,10);r=k.isNumber(r)?r:0;}else{r=t;}if(k.isUndefined(this._itemsTable.items[r])){this.scrollTo(r);}if(!k.isUndefined(this._itemsTable.items[r])){n=b.get(this._itemsTable.items[r].id);if(n){b.addClass(n,w.SELECTED_ITEM);}}if(r<t||r>p){if(u){this.scrollTo(t-v,true);}else{this.scrollTo(r);}}}function h(){var o=false,n=this.CLASSES,q,r,m,p;r=this.get("element").id;if(k.isUndefined(N[r])||!N[r].rendered){return;}m=this.get("navigation");p=this._firstItem+this.get("numVisible");if(m.prev){if(this.get("numItems")===0||this._firstItem===0){if(this.get("numItems")===0||!this.get("isCircular")){Z.removeListener(m.prev,"click",d);b.addClass(m.prev,n.FIRST_NAV_DISABLED);for(q=0;q<this._navBtns.prev.length;q++){this._navBtns.prev[q].setAttribute("disabled","true");}this._prevEnabled=false;}else{o=!this._prevEnabled;}}else{o=!this._prevEnabled;}if(o){Z.on(m.prev,"click",d,this);b.removeClass(m.prev,n.FIRST_NAV_DISABLED);for(q=0;q<this._navBtns.prev.length;q++){this._navBtns.prev[q].removeAttribute("disabled");}this._prevEnabled=true;}}o=false;if(m.next){if(p>=this.get("numItems")){if(!this.get("isCircular")){Z.removeListener(m.next,"click",g);b.addClass(m.next,n.DISABLED);for(q=0;q<this._navBtns.next.length;q++){this._navBtns.next[q].setAttribute("disabled","true");}this._nextEnabled=false;}else{o=!this._nextEnabled;}}else{o=!this._nextEnabled;}if(o){Z.on(m.next,"click",g,this);b.removeClass(m.next,n.DISABLED);for(q=0;q<this._navBtns.next.length;q++){this._navBtns.next[q].removeAttribute("disabled");}this._nextEnabled=true;}}this.fireEvent(G,{next:this._nextEnabled,prev:this._prevEnabled});}function A(m){if(!k.isObject(m)){return;}switch(m.ev){case M:this._syncUiForItemAdd(m);break;case j:this._syncUiForItemRemove(m);break;case J:this._syncUiForLazyLoading(m);break;}this.fireEvent(I);}function D(q,n,o){var s=this,r=s.get("currentPage"),p,m=s.get("numVisible");p=parseInt(s._firstItem/m,10);if(p!=r){s.setAttributeConfig("currentPage",{value:p});s.fireEvent(c,p);}if(!o){if(s.get("selectOnScroll")){if(q!=s._selectedItem){s.set("selectedItem",s._getSelectedItem(q));}}}delete s._autoPlayTimer;if(s.get("autoPlay")>0){s.startAutoPlay();}s.fireEvent(E,{first:q,last:n},s);}P.getById=function(m){return N[m]?N[m].object:false;};YAHOO.extend(P,YAHOO.util.Element,{_animObj:null,_carouselEl:null,_clipEl:null,_firstItem:0,_isAnimationInProgress:false,_itemsTable:null,_navBtns:null,_navEl:null,_nextEnabled:true,_pages:null,_prevEnabled:true,_recomputeSize:true,CLASSES:{BUTTON:"yui-carousel-button",CAROUSEL:"yui-carousel",CAROUSEL_EL:"yui-carousel-element",CONTAINER:"yui-carousel-container",CONTENT:"yui-carousel-content",DISABLED:"yui-carousel-button-disabled",FIRST_NAV:" yui-carousel-first-button",FIRST_NAV_DISABLED:"yui-carousel-first-button-disabled",FIRST_PAGE:"yui-carousel-nav-first-page",FOCUSSED_BUTTON:"yui-carousel-button-focus",HORIZONTAL:"yui-carousel-horizontal",NAVIGATION:"yui-carousel-nav",NEXT_PAGE:"yui-carousel-next",NAV_CONTAINER:"yui-carousel-buttons",PREV_PAGE:"yui-carousel-prev",SELECTED_ITEM:"yui-carousel-item-selected",SELECTED_NAV:"yui-carousel-nav-page-selected",VERTICAL:"yui-carousel-vertical",VERTICAL_CONTAINER:"yui-carousel-vertical-container",VISIBLE:"yui-carousel-visible"},CONFIG:{FIRST_VISIBLE:0,ITEM_LOADING:"<img "+'src="../../build/carousel/assets/ajax-loader.gif" '+'alt="Loading" '+'style="margin-top:-32px;position:relative;top:50%;">',MAX_PAGER_BUTTONS:5,MIN_WIDTH:99,NUM_VISIBLE:3},STRINGS:{NEXT_BUTTON_TEXT:"Next Page",PAGER_PREFIX_TEXT:"Go to page ",PREVIOUS_BUTTON_TEXT:"Previous Page"},addItem:function(s,n){var q,r,p,m,o=this.get("numItems");
if(!s){return false;}if(k.isString(s)||s.nodeName){r=s.nodeName?s.innerHTML:s;}else{if(k.isObject(s)){r=s.content;}else{return false;}}q=s.className||"";m=s.id?s.id:b.generateId();if(k.isUndefined(n)){this._itemsTable.items.push({item:r,className:q,id:m});}else{if(n<0||n>=o){return false;}this._itemsTable.items.splice(n,0,{item:r,className:q,id:m});}this._itemsTable.numItems++;if(o<this._itemsTable.items.length){this.set("numItems",this._itemsTable.items.length);}this.fireEvent(M,{pos:n,ev:M});return true;},addItems:function(m){var o,q,p=true;if(!k.isArray(m)){return false;}for(o=0,q=m.length;o<q;o++){if(this.addItem(m[o][0],m[o][1])===false){p=false;}}return p;},blur:function(){this._carouselEl.blur();this.fireEvent(B);},clearItems:function(){var m=this.get("numItems");while(m>0){if(!this.removeItem(0)){}if(this._itemsTable.numItems===0){this.set("numItems",0);break;}m--;}this.fireEvent(O);},focus:function(){var q,r,s,p,v,u,w,n,o,m;u=this.get("element").id;if(k.isUndefined(N[u])||!N[u].rendered){return;}if(this._isAnimationInProgress){return;}m=this.get("selectedItem");w=this.get("numVisible");n=this.get("selectOnScroll");o=(m>=0)?this.getItem(m):null;q=this.get("firstVisible");v=q+w-1;s=(m<q||m>v);r=(o&&o.id)?b.get(o.id):null;p=this._itemsTable;if(!n&&s){r=(p&&p.items&&p.items[q])?b.get(p.items[q].id):null;}if(r){try{r.focus();}catch(t){}}this.fireEvent(S);},hide:function(){if(this.fireEvent(X)!==false){this.removeClass(this.CLASSES.VISIBLE);this.fireEvent(W);}},init:function(o,n){var m=o,p=false;if(!o){return;}this._itemsTable={loading:{},numItems:0,items:[],size:0};if(k.isString(o)){o=b.get(o);}else{if(!o.nodeName){return;}}P.superclass.init.call(this,o,n);if(o){if(!o.id){o.setAttribute("id",b.generateId());}p=this._parseCarousel(o);if(!p){this._createCarousel(m);}}else{o=this._createCarousel(m);}m=o.id;this.initEvents();if(p){this._parseCarouselItems();}if(!n||typeof n.isVertical=="undefined"){this.set("isVertical",false);}this._parseCarouselNavigation(o);this._navEl=this._setupCarouselNavigation();N[m]={object:this,rendered:false};Y.call(this);},initAttributes:function(m){m=m||{};P.superclass.initAttributes.call(this,m);this.setAttributeConfig("carouselEl",{validator:k.isString,value:m.carouselEl||"OL"});this.setAttributeConfig("carouselItemEl",{validator:k.isString,value:m.carouselItemEl||"LI"});this.setAttributeConfig("currentPage",{readOnly:true,value:0});this.setAttributeConfig("firstVisible",{method:this._setFirstVisible,validator:this._validateFirstVisible,value:m.firstVisible||this.CONFIG.FIRST_VISIBLE});this.setAttributeConfig("selectOnScroll",{validator:k.isBoolean,value:m.selectOnScroll||true});this.setAttributeConfig("numVisible",{method:this._setNumVisible,validator:this._validateNumVisible,value:m.numVisible||this.CONFIG.NUM_VISIBLE});this.setAttributeConfig("numItems",{method:this._setNumItems,validator:this._validateNumItems,value:this._itemsTable.numItems});this.setAttributeConfig("scrollIncrement",{validator:this._validateScrollIncrement,value:m.scrollIncrement||1});this.setAttributeConfig("selectedItem",{method:this._setSelectedItem,validator:k.isNumber,value:-1});this.setAttributeConfig("revealAmount",{method:this._setRevealAmount,validator:this._validateRevealAmount,value:m.revealAmount||0});this.setAttributeConfig("isCircular",{validator:k.isBoolean,value:m.isCircular||false});this.setAttributeConfig("isVertical",{method:this._setOrientation,validator:k.isBoolean,value:m.isVertical||false});this.setAttributeConfig("navigation",{method:this._setNavigation,validator:this._validateNavigation,value:m.navigation||{prev:null,next:null,page:null}});this.setAttributeConfig("animation",{validator:this._validateAnimation,value:m.animation||{speed:0,effect:null}});this.setAttributeConfig("autoPlay",{validator:k.isNumber,value:m.autoPlay||0});},initEvents:function(){var n=this,m=this.CLASSES;n.on("keydown",n._keyboardEventHandler);n.on(E,h);n.on(M,A);n.on(j,A);n.on(C,n.focus);n.on(J,A);n.on(G,n.focus);n.on(O,function(o){n.scrollTo(0);h.call(n);n._syncPagerUi();});n.on(c,n._syncPagerUi);n.on(F,function(o){h.call(n,o);n._syncPagerUi(o);});n.on("selectedItemChange",function(o){i.call(n,o.newValue,o.prevValue);if(o.newValue>=0){n._updateTabIndex(n.getElementForItem(o.newValue));}n.fireEvent(C,o.newValue);});n.on(I,function(o){h.call(n,o);n._syncPagerUi(o);});n.on("firstVisibleChange",function(o){if(!n.get("selectOnScroll")){if(o.newValue>=0){n._updateTabIndex(n.getElementForItem(o.newValue));}}});n.on("click",function(o){n._itemClickHandler(o);n._pagerClickHandler(o);});Z.onFocus(n.get("element"),function(o,p){p._updateNavButtons(Z.getTarget(o),true);},n);Z.onBlur(n.get("element"),function(o,p){p._updateNavButtons(Z.getTarget(o),false);},n);},getElementForItem:function(m){if(m<0||m>=this.get("numItems")){return null;}if(this._itemsTable.numItems>m){if(!k.isUndefined(this._itemsTable.items[m])){return b.get(this._itemsTable.items[m].id);}}return null;},getElementForItems:function(){var n=[],m;for(m=0;m<this._itemsTable.numItems;m++){n.push(this.getElementForItem(m));}return n;},getItem:function(m){if(m<0||m>=this.get("numItems")){return null;}if(this._itemsTable.numItems>m){if(!k.isUndefined(this._itemsTable.items[m])){return this._itemsTable.items[m];}}return null;},getItems:function(m){return this._itemsTable.items;},getItemPositionById:function(p){var m=0,o=this._itemsTable.numItems;while(m<o){if(!k.isUndefined(this._itemsTable.items[m])){if(this._itemsTable.items[m].id==p){return m;}}m++;}return -1;},removeItem:function(n){var o,m=this.get("numItems");if(n<0||n>=m){return false;}o=this._itemsTable.items.splice(n,1);if(o&&o.length==1){this._itemsTable.numItems--;this.set("numItems",m-1);this.fireEvent(j,{item:o[0],pos:n,ev:j});return true;}return false;},render:function(o){var n=this.CONFIG,m=this.CLASSES,p;this.addClass(m.CAROUSEL);if(!this._clipEl){this._clipEl=this._createCarouselClip();this._clipEl.appendChild(this._carouselEl);}if(o){this.appendChild(this._clipEl);this.appendTo(o);
this._setClipContainerSize();}else{if(!b.inDocument(this.get("element"))){return false;}this.appendChild(this._clipEl);}if(this.get("isVertical")){p=K.call(this);p=p<n.MIN_WIDTH?n.MIN_WIDTH:p;this.setStyle("width",p+"px");this.addClass(m.VERTICAL);}else{this.addClass(m.HORIZONTAL);}if(this.get("numItems")<1){this._setContainerSize();}else{this.set("selectedItem",this.get("firstVisible"));}N[this.get("element").id].rendered=true;this.fireEvent(F);return true;},scrollBackward:function(){this.scrollTo(this._firstItem-this.get("scrollIncrement"));},scrollForward:function(){this.scrollTo(this._firstItem+this.get("scrollIncrement"));},scrollPageBackward:function(){this.scrollTo(this._firstItem-this.get("numVisible"));},scrollPageForward:function(){this.scrollTo(this._firstItem+this.get("numVisible"));},scrollTo:function(z,n){var m,r=this.get("animation"),p=this.get("isCircular"),y,x,w=this._firstItem,u=this.get("numItems"),v=this.get("numVisible"),q,t=this.get("currentPage"),o,s;if(z==w){return;}if(this._isAnimationInProgress){return;}if(z<0){if(p){z=u+z;}else{return;}}else{if(u>0&&z>u-1){if(this.get("isCircular")){z=u-z;}else{return;}}}x=(this._firstItem>z)?"backward":"forward";s=w+v;s=(s>u-1)?u-1:s;o=this.fireEvent(e,{dir:x,first:w,last:s});if(o===false){return;}this.fireEvent(H,{page:t});y=w-z;this._firstItem=z;this.set("firstVisible",z);Y.call(this);s=z+v;s=(s>u-1)?u-1:s;q=f.call(this,y);m=r.speed>0;if(m){this._animateAndSetCarouselOffset(q,z,s,n);}else{this._setCarouselOffset(q);D.call(this,z,s,n);}},show:function(){var m=this.CLASSES;if(this.fireEvent(T)!==false){this.addClass(m.VISIBLE);this.fireEvent(Q);}},startAutoPlay:function(){var m=this,n=this.get("autoPlay");if(n>0){if(!k.isUndefined(this._autoPlayTimer)){return;}this.fireEvent(U);this._autoPlayTimer=setTimeout(function(){V.call(m);},n);}},stopAutoPlay:function(){if(!k.isUndefined(this._autoPlayTimer)){clearTimeout(this._autoPlayTimer);delete this._autoPlayTimer;this.set("autoPlay",0);this.fireEvent(l);}},toString:function(){return L+(this.get?" (#"+this.get("id")+")":"");},_animateAndSetCarouselOffset:function(r,q,n,p){var o=this.get("animation"),m=null;if(this.get("isVertical")){m=new YAHOO.util.Motion(this._carouselEl,{points:{by:[0,r]}},o.speed,o.effect);}else{m=new YAHOO.util.Motion(this._carouselEl,{points:{by:[r,0]}},o.speed,o.effect);}this._isAnimationInProgress=true;m.onComplete.subscribe(this._animationCompleteHandler,{scope:this,first:q,last:n,dontSelect:p});m.animate();},_animationCompleteHandler:function(m,n,q){q.scope._isAnimationInProgress=false;D.call(q.scope,q.first,q.last,q.dontSelect);},_createCarousel:function(n){var m=this.CLASSES,o=b.get(n);if(!o){o=R("DIV",{className:m.CAROUSEL,id:n});}if(!this._carouselEl){this._carouselEl=R(this.get("carouselEl"),{className:m.CAROUSEL_EL});}return o;},_createCarouselClip:function(){var m=R("DIV",{className:this.CLASSES.CONTENT});this._setClipContainerSize(m);return m;},_createCarouselItem:function(m){return R(this.get("carouselItemEl"),{className:m.className,content:m.content,id:m.id});},_getSelectedItem:function(p){var m=this.get("isCircular"),o=this.get("numItems"),n=o-1;if(p<0){if(m){p=o+p;}else{p=this.get("selectedItem");}}else{if(p>n){if(m){p=p-o;}else{p=this.get("selectedItem");}}}return p;},_itemClickHandler:function(p){var m=this.get("element"),n,o,q=YAHOO.util.Event.getTarget(p);while(q&&q!=m&&q.id!=this._carouselEl){n=q.nodeName;if(n.toUpperCase()==this.get("carouselItemEl")){break;}q=q.parentNode;}if((o=this.getItemPositionById(q.id))>=0){this.set("selectedItem",this._getSelectedItem(o));}},_keyboardEventHandler:function(p){var o=Z.getCharCode(p),n=false,m=0,q;if(this._isAnimationInProgress){return;}switch(o){case 37:case 38:q=this.get("selectedItem");if(q==this._firstItem){m=q-this.get("numVisible");this.scrollTo(m);this.set("selectedItem",this._getSelectedItem(q-1));}else{m=this.get("selectedItem")-this.get("scrollIncrement");this.set("selectedItem",this._getSelectedItem(m));}n=true;break;case 39:case 40:m=this.get("selectedItem")+this.get("scrollIncrement");this.set("selectedItem",this._getSelectedItem(m));n=true;break;case 33:this.scrollPageBackward();n=true;break;case 34:this.scrollPageForward();n=true;break;}if(n){Z.preventDefault(p);}},_pagerClickHandler:function(m){var p,n,o;n=Z.getTarget(m);o=n.href||n.value;if(k.isString(o)&&o){p=o.lastIndexOf("#");if(p!=-1){o=this.getItemPositionById(o.substring(p+1));this.scrollTo(o);Z.preventDefault(m);}}},_parseCarousel:function(o){var r,m,n,q,p;m=this.CLASSES;n=this.get("carouselEl");q=false;for(r=o.firstChild;r;r=r.nextSibling){if(r.nodeType==1){p=r.nodeName;if(p.toUpperCase()==n){this._carouselEl=r;b.addClass(this._carouselEl,this.CLASSES.CAROUSEL_EL);q=true;}}}return q;},_parseCarouselItems:function(){var q,m,n,p,o=this._carouselEl;m=this.get("carouselItemEl");for(q=o.firstChild;q;q=q.nextSibling){if(q.nodeType==1){p=q.nodeName;if(p.toUpperCase()==m){if(q.id){n=q.id;}else{n=b.generateId();q.setAttribute("id",n);}this.addItem(q);}}}},_parseCarouselNavigation:function(r){var n,m=this.CLASSES,q,p,o,s,t=false;s=b.getElementsByClassName(m.PREV_PAGE,"*",r);if(s.length>0){for(p in s){if(s.hasOwnProperty(p)){q=s[p];if(q.nodeName=="INPUT"||q.nodeName=="BUTTON"){this._navBtns.prev.push(q);}else{o=q.getElementsByTagName("INPUT");if(k.isArray(o)&&o.length>0){this._navBtns.prev.push(o[0]);}else{o=q.getElementsByTagName("BUTTON");if(k.isArray(o)&&o.length>0){this._navBtns.prev.push(o[0]);}}}}}n={prev:s};}s=b.getElementsByClassName(m.NEXT_PAGE,"*",r);if(s.length>0){for(p in s){if(s.hasOwnProperty(p)){q=s[p];if(q.nodeName=="INPUT"||q.nodeName=="BUTTON"){this._navBtns.next.push(q);}else{o=q.getElementsByTagName("INPUT");if(k.isArray(o)&&o.length>0){this._navBtns.next.push(o[0]);}else{o=q.getElementsByTagName("BUTTON");if(k.isArray(o)&&o.length>0){this._navBtns.next.push(o[0]);}}}}}if(n){n.next=s;}else{n={next:s};}}if(n){this.set("navigation",n);t=true;}return t;},_setCarouselOffset:function(n){var m;m=this.get("isVertical")?"top":"left";
n+=n!==0?a(this._carouselEl,m):0;b.setStyle(this._carouselEl,m,n+"px");},_setupCarouselNavigation:function(){var p,n,m,t,q,s,r,o;m=this.CLASSES;q=b.getElementsByClassName(m.NAVIGATION,"DIV",this.get("element"));if(q.length===0){q=R("DIV",{className:m.NAVIGATION});this.insertBefore(q,b.getFirstChild(this.get("element")));}else{q=q[0];}this._pages.el=R("UL");q.appendChild(this._pages.el);t=this.get("navigation");if(k.isString(t.prev)||k.isArray(t.prev)){if(k.isString(t.prev)){t.prev=[t.prev];}for(p in t.prev){if(t.prev.hasOwnProperty(p)){this._navBtns.prev.push(b.get(t.prev[p]));}}}else{o=R("SPAN",{className:m.BUTTON+m.FIRST_NAV});b.setStyle(o,"visibility","visible");p=b.generateId();o.innerHTML='<input type="button" '+'id="'+p+'" '+'value="'+this.STRINGS.PREVIOUS_BUTTON_TEXT+'" '+'name="'+this.STRINGS.PREVIOUS_BUTTON_TEXT+'">';q.appendChild(o);p=b.get(p);this._navBtns.prev=[p];n={prev:[o]};}if(k.isString(t.next)||k.isArray(t.next)){if(k.isString(t.next)){t.next=[t.next];}for(p in t.next){if(t.next.hasOwnProperty(p)){this._navBtns.next.push(b.get(t.next[p]));}}}else{s=R("SPAN",{className:m.BUTTON});b.setStyle(s,"visibility","visible");p=b.generateId();s.innerHTML='<input type="button" '+'id="'+p+'" '+'value="'+this.STRINGS.NEXT_BUTTON_TEXT+'" '+'name="'+this.STRINGS.NEXT_BUTTON_TEXT+'">';q.appendChild(s);p=b.get(p);this._navBtns.next=[p];if(n){n.next=[s];}else{n={next:[s]};}}if(n){this.set("navigation",n);}return q;},_setClipContainerSize:function(n,p){var q,m,r,s,t,u,o;r=this.get("isVertical");t=this.get("revealAmount");o=r?"height":"width";q=r?"top":"left";n=n||this._clipEl;if(!n){return;}p=p||this.get("numVisible");s=K.call(this,o);u=s*p;this._recomputeSize=(u===0);if(this._recomputeSize){return;}if(t>0){t=s*(t/100)*2;u+=t;m=parseFloat(b.getStyle(this._carouselEl,q));m=k.isNumber(m)?m:0;b.setStyle(this._carouselEl,q,m+(t/2)+"px");}if(r){u+=a(this._carouselEl,"marginTop")+a(this._carouselEl,"marginBottom")+a(this._carouselEl,"paddingTop")+a(this._carouselEl,"paddingBottom")+a(this._carouselEl,"borderTopWidth")+a(this._carouselEl,"borderBottomWidth");b.setStyle(n,o,(u-(p-1))+"px");}else{u+=a(this._carouselEl,"marginLeft")+a(this._carouselEl,"marginRight")+a(this._carouselEl,"paddingLeft")+a(this._carouselEl,"paddingRight")+a(this._carouselEl,"borderLeftWidth")+a(this._carouselEl,"borderRightWidth");b.setStyle(n,o,u+"px");}this._setContainerSize(n);},_setContainerSize:function(o,m){var p,n;p=this.get("isVertical");o=o||this._clipEl;m=m||(p?"height":"width");n=parseFloat(b.getStyle(o,m),10);n=k.isNumber(n)?n:0;n+=a(o,"marginLeft")+a(o,"marginRight")+a(o,"paddingLeft")+a(o,"paddingRight")+a(o,"borderLeftWidth")+a(o,"borderRightWidth");if(p){n+=a(this._navEl,"height");}this.setStyle(m,n+"px");},_setFirstVisible:function(m){if(m>=0&&m<this.get("numItems")){this.scrollTo(m);}else{m=this.get("firstVisible");}return m;},_setNavigation:function(m){if(m.prev){Z.on(m.prev,"click",d,this);}if(m.next){Z.on(m.next,"click",g,this);}},_setNumVisible:function(m){this._setClipContainerSize(this._clipEl,m);},_setNumItems:function(n){var m=this._itemsTable.numItems;if(k.isArray(this._itemsTable.items)){if(this._itemsTable.items.length!=m){m=this._itemsTable.items.length;this._itemsTable.numItems=m;}}if(n<m){while(m>n){this.removeItem(m-1);m--;}}return n;},_setOrientation:function(n){var m=this.CLASSES;if(n){this.replaceClass(m.HORIZONTAL,m.VERTICAL);}else{this.replaceClass(m.VERTICAL,m.HORIZONTAL);}this._itemsTable.size=0;return n;},_setRevealAmount:function(m){if(m>=0&&m<=100){m=parseInt(m,10);m=k.isNumber(m)?m:0;this._setClipContainerSize();}else{m=this.get("revealAmount");}return m;},_setSelectedItem:function(m){this._selectedItem=m;},_syncUiForItemAdd:function(s){var o=this._carouselEl,q,r,m=this._itemsTable,n,t,p;t=k.isUndefined(s.pos)?m.numItems-1:s.pos;if(!k.isUndefined(m.items[t])){r=m.items[t];if(r&&!k.isUndefined(r.id)){n=b.get(r.id);}}if(!n){q=this._createCarouselItem({className:r.className,content:r.item,id:r.id});if(k.isUndefined(s.pos)){if(!k.isUndefined(m.loading[t])){n=m.loading[t];}if(n){o.replaceChild(q,n);delete m.loading[t];}else{o.appendChild(q);}}else{if(!k.isUndefined(m.items[s.pos+1])){p=b.get(m.items[s.pos+1].id);}if(p){o.insertBefore(q,p);}else{}}}else{if(k.isUndefined(s.pos)){if(!b.isAncestor(this._carouselEl,n)){o.appendChild(n);}}else{if(!b.isAncestor(o,n)){if(!k.isUndefined(m.items[s.pos+1])){o.insertBefore(n,b.get(m.items[s.pos+1].id));}}}}if(this._recomputeSize){this._setClipContainerSize();}if(this.get("selectedItem")<0){this.set("selectedItem",this.get("firstVisible"));}},_syncUiForItemRemove:function(q){var m=this._carouselEl,o,p,n,r;n=this.get("numItems");p=q.item;r=q.pos;if(p&&(o=b.get(p.id))){if(o&&b.isAncestor(m,o)){Z.purgeElement(o,true);m.removeChild(o);}if(this.get("selectedItem")==r){r=r>=n?n-1:r;this.set("selectedItem",r);}}else{}},_syncUiForLazyLoading:function(r){var n=this._carouselEl,q,o,m=this._itemsTable,p;for(o=r.first;o<=r.last;o++){q=this._createCarouselItem({content:this.CONFIG.ITEM_LOADING,id:b.generateId()});if(q){if(!k.isUndefined(m.items[r.last+1])){p=b.get(m.items[r.last+1].id);if(p){n.insertBefore(q,p);}else{}}else{n.appendChild(q);}}m.loading[o]=q;}},_syncPagerUi:function(t){var n,m=this.CLASSES,q,p="",r,o,s;r=this.get("element").id;if(k.isUndefined(N[r])||!N[r].rendered){return;}s=this.get("numVisible");if(!k.isNumber(t)){t=Math.ceil(this.get("selectedItem")/s);}o=Math.ceil(this.get("numItems")/s);this._pages.num=o;this._pages.cur=t;if(o>this.CONFIG.MAX_PAGER_BUTTONS){p="<form><select>";}else{p="";}for(q=0;q<o;q++){if(k.isUndefined(this._itemsTable.items[q*s])){break;}n=this._itemsTable.items[q*s].id;if(o>this.CONFIG.MAX_PAGER_BUTTONS){p+='<option value="#'+n+'" '+(q==t?" selected":"")+">"+this.STRINGS.PAGER_PREFIX_TEXT+" "+(q+1)+"</option>";}else{p+='<li class="'+(q===0?m.FIRST_PAGE:"")+(q==t?" "+m.SELECTED_NAV:"")+'"><a href="#'+n+'" tabindex="0"><em>'+this.STRINGS.PAGER_PREFIX_TEXT+" "+(q+1)+"</em></a></li>";}}if(o>this.CONFIG.MAX_PAGER_BUTTONS){p+="</select></form>";
}if(this._pages.el){this._pages.el.innerHTML=p;}p=null;},_updateNavButtons:function(q,n){var o,m=this.CLASSES,r,p=q.parentNode;if(!p){return;}r=p.parentNode;if(q.nodeName.toUpperCase()=="INPUT"&&b.hasClass(p,m.BUTTON)){if(n){if(r){o=b.getChildren(r);if(o){b.removeClass(o,m.FOCUSSED_BUTTON);}}b.addClass(p,m.FOCUSSED_BUTTON);}else{b.removeClass(p,m.FOCUSSED_BUTTON);}}},_updateTabIndex:function(m){if(m){if(this._focusableItemEl){this._focusableItemEl.tabIndex=-1;}this._focusableItemEl=m;m.tabIndex=0;}},_validateAnimation:function(m){var n=true;if(k.isObject(m)){if(m.speed){n=n&&k.isNumber(m.speed);}if(m.effect){n=n&&k.isFunction(m.effect);}else{if(!k.isUndefined(YAHOO.util.Easing)){m.effect=YAHOO.util.Easing.easeOut;}}}else{n=false;}return n;},_validateFirstVisible:function(n){var m=this.get("numItems"),o=false;if(k.isNumber(n)){if(m===0&&n==m){return true;}else{return(n>=0&&n<this.get("numItems"));}}return false;},_validateNavigation:function(m){var n;if(!k.isObject(m)){return false;}if(m.prev){if(!k.isArray(m.prev)){return false;}for(n in m.prev){if(m.prev.hasOwnProperty(n)){if(!k.isString(m.prev[n].nodeName)){return false;}}}}if(m.next){if(!k.isArray(m.next)){return false;}for(n in m.next){if(m.next.hasOwnProperty(n)){if(!k.isString(m.next[n].nodeName)){return false;}}}}return true;},_validateNumItems:function(m){return k.isNumber(m)&&(m>=0);},_validateNumVisible:function(m){var n=false;if(k.isNumber(m)){n=m>0&&m<=this.get("numItems");}return n;},_validateRevealAmount:function(m){var n=false;if(k.isNumber(m)){n=m>=0&&m<100;}return n;},_validateScrollIncrement:function(m){var n=false;if(k.isNumber(m)){n=(m>0&&m<this.get("numItems"));}return n;}});})();YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});