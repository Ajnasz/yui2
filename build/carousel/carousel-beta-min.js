(function(){var L;YAHOO.widget.Carousel=function(o,n){this._navBtns={prev:[],next:[]};this._pages={el:null,num:0,cur:0};YAHOO.widget.Carousel.superclass.constructor.call(this,o,n);};var Q=YAHOO.widget.Carousel,c=YAHOO.util.Dom,a=YAHOO.util.Event,l=YAHOO.lang;L="Carousel";var O={},E="afterScroll",Y="beforeHide",H="beforePageChange",f="beforeScroll",U="beforeShow",B="blur",T="focus",X="hide",N="itemAdded",k="itemRemoved",C="itemSelected",J="loadItems",G="navigationStateChange",P="noItems",d="pageChange",F="render",R="show",V="startAutoPlay",m="stopAutoPlay",I="uiUpdate";function W(){var o=this,p=o._firstItem,n;if(p>=o.get("numItems")-1){if(o.get("isCircular")){n=0;}else{o.stopAutoPlay();}}else{n=p+o.get("numVisible");}o._selectedItem=o._getSelectedItem(n);o.scrollTo.call(o,n);}function S(o,n){var p=document.createElement(o);n=n||{};if(n.className){c.addClass(p,n.className);}if(n.parent){n.parent.appendChild(p);}if(n.id){p.setAttribute("id",n.id);}if(n.content){if(n.content.nodeName){p.appendChild(n.content);}else{p.innerHTML=n.content;}}return p;}function b(p,o,n){var r;if(!p){return 0;}function q(u,t){var v;v=parseInt(c.getStyle(u,t),10);return l.isNumber(v)?v:0;}function s(u,t){var v;v=parseFloat(c.getStyle(u,t));return l.isNumber(v)?v:0;}if(typeof n=="undefined"){n="int";}switch(o){case"height":r=p.offsetHeight;if(r>0){r+=q(p,"marginTop")+q(p,"marginBottom");}else{r=s(p,"height")+q(p,"marginTop")+q(p,"marginBottom")+q(p,"borderTopWidth")+q(p,"borderBottomWidth")+q(p,"paddingTop")+q(p,"paddingBottom");}break;case"width":r=p.offsetWidth;if(r>0){r+=q(p,"marginLeft")+q(p,"marginRight");}else{r=s(p,"width")+q(p,"marginLeft")+q(p,"marginRight")+q(p,"borderLeftWidth")+q(p,"borderRightWidth")+q(p,"paddingLeft")+q(p,"paddingRight");}break;default:if(n=="int"){r=q(p,o);if(o=="marginRight"&&YAHOO.env.ua.webkit){r=q(p,"marginLeft");}}else{if(n=="float"){r=s(p,o);}else{r=c.getStyle(p,o);}}break;}return r;}function K(q){var p=this,r,o=0,n=false;if(p._itemsTable.numItems===0){return 0;}if(typeof q=="undefined"){if(p._itemsTable.size>0){return p._itemsTable.size;}}if(l.isUndefined(p._itemsTable.items[0])){return 0;}r=c.get(p._itemsTable.items[0].id);if(typeof q=="undefined"){n=p.get("isVertical");}else{n=q=="height";}if(n){o=b(r,"height");}else{o=b(r,"width");}if(typeof q=="undefined"){p._itemsTable.size=o;}return o;}function g(p){var o=0,n=0;o=K.call(this);n=o*p;if(this.get("isVertical")){n-=p;}return n;}function Z(){var r=this,s=r.get("firstVisible"),o=0,n=r.get("numItems"),p=r.get("numVisible"),q=r.get("revealAmount");o=s+p-1+(q?1:0);o=o>n-1?n-1:o;if(!r.getItem(s)||!r.getItem(o)){r.fireEvent(J,{ev:J,first:s,last:o,num:o-s});}}function e(n,o){o.scrollPageBackward();a.preventDefault(n);}function h(n,o){o.scrollPageForward();a.preventDefault(n);}function j(s,n){var v,x=this,y=x.CLASSES,o,u=x._firstItem,p=x.get("isCircular"),t=x.get("numItems"),w=x.get("numVisible"),r=n,q=u+w-1;v=w>1&&!p&&r>s;if(r>=0&&r<t){if(!l.isUndefined(x._itemsTable.items[r])){o=c.get(x._itemsTable.items[r].id);if(o){c.removeClass(o,y.SELECTED_ITEM);}}}if(l.isNumber(s)){s=parseInt(s,10);s=l.isNumber(s)?s:0;}else{s=u;}if(l.isUndefined(x._itemsTable.items[s])){x.scrollTo(s);}if(!l.isUndefined(x._itemsTable.items[s])){o=c.get(x._itemsTable.items[s].id);if(o){c.addClass(o,y.SELECTED_ITEM);}}if(s<u||s>q){if(v){x.scrollTo(u-w,true);}else{x.scrollTo(s);}}}function i(){var p=false,t=this,o=t.CLASSES,r,s,n,q;s=t.get("element").id;if(l.isUndefined(O[s])||!O[s].rendered){return;}n=t.get("navigation");q=t._firstItem+t.get("numVisible");if(n.prev){if(t.get("numItems")===0||t._firstItem===0){if(t.get("numItems")===0||!t.get("isCircular")){a.removeListener(n.prev,"click",e);c.addClass(n.prev,o.FIRST_NAV_DISABLED);for(r=0;r<t._navBtns.prev.length;r++){t._navBtns.prev[r].setAttribute("disabled","true");}t._prevEnabled=false;}else{p=!t._prevEnabled;}}else{p=!t._prevEnabled;}if(p){a.on(n.prev,"click",e,t);c.removeClass(n.prev,o.FIRST_NAV_DISABLED);for(r=0;r<t._navBtns.prev.length;r++){t._navBtns.prev[r].removeAttribute("disabled");}t._prevEnabled=true;}}p=false;if(n.next){if(q>=t.get("numItems")){if(!t.get("isCircular")){a.removeListener(n.next,"click",h);c.addClass(n.next,o.DISABLED);for(r=0;r<t._navBtns.next.length;r++){t._navBtns.next[r].setAttribute("disabled","true");}t._nextEnabled=false;}else{p=!t._nextEnabled;}}else{p=!t._nextEnabled;}if(p){a.on(n.next,"click",h,t);c.removeClass(n.next,o.DISABLED);for(r=0;r<t._navBtns.next.length;r++){t._navBtns.next[r].removeAttribute("disabled");}t._nextEnabled=true;}}t.fireEvent(G,{next:t._nextEnabled,prev:t._prevEnabled});}function M(q){var r=this,o,n,p;o=r.get("element").id;if(l.isUndefined(O[o])||!O[o].rendered){return;}p=r.get("numVisible");if(!l.isNumber(q)){q=Math.ceil(r.get("selectedItem")/p);}n=Math.ceil(r.get("numItems")/p);r._pages.num=n;r._pages.cur=q;if(n>r.CONFIG.MAX_PAGER_BUTTONS){r._updatePagerMenu();}else{r._updatePagerButtons();}}function A(p){var n=this;if(!l.isObject(p)){return;}switch(p.ev){case N:n._syncUiForItemAdd(p);break;case k:n._syncUiForItemRemove(p);break;case J:n._syncUiForLazyLoading(p);break;}n.fireEvent(I);}function D(q,o){var s=this,r=s.get("currentPage"),p,n=s.get("numVisible");p=parseInt(s._firstItem/n,10);if(p!=r){s.setAttributeConfig("currentPage",{value:p});s.fireEvent(d,p);}if(s.get("selectOnScroll")){if(s.get("selectedItem")!=s._selectedItem){s.set("selectedItem",s._selectedItem);}}clearTimeout(s._autoPlayTimer);delete s._autoPlayTimer;if(s.isAutoPlayOn()){s.startAutoPlay();}s.fireEvent(E,{first:s._firstItem,last:o},s);}Q.getById=function(n){return O[n]?O[n].object:false;};YAHOO.extend(Q,YAHOO.util.Element,{_animObj:null,_carouselEl:null,_clipEl:null,_firstItem:0,_isAnimationInProgress:false,_isAutoPlayInProgress:false,_itemsTable:null,_navBtns:null,_navEl:null,_nextEnabled:true,_pages:null,_prevEnabled:true,_recomputeSize:true,CLASSES:{BUTTON:"yui-carousel-button",CAROUSEL:"yui-carousel",CAROUSEL_EL:"yui-carousel-element",CONTAINER:"yui-carousel-container",CONTENT:"yui-carousel-content",DISABLED:"yui-carousel-button-disabled",FIRST_NAV:" yui-carousel-first-button",FIRST_NAV_DISABLED:"yui-carousel-first-button-disabled",FIRST_PAGE:"yui-carousel-nav-first-page",FOCUSSED_BUTTON:"yui-carousel-button-focus",HORIZONTAL:"yui-carousel-horizontal",NAVIGATION:"yui-carousel-nav",NEXT_NAV:" yui-carousel-next-button",NEXT_PAGE:"yui-carousel-next",NAV_CONTAINER:"yui-carousel-buttons",PREV_PAGE:"yui-carousel-prev",SELECTED_ITEM:"yui-carousel-item-selected",SELECTED_NAV:"yui-carousel-nav-page-selected",VERTICAL:"yui-carousel-vertical",VERTICAL_CONTAINER:"yui-carousel-vertical-container",VISIBLE:"yui-carousel-visible"},CONFIG:{FIRST_VISIBLE:0,ITEM_LOADING:"<img "+'src="../../build/carousel/assets/ajax-loader.gif" '+'alt="Loading" '+'style="margin-top:-32px;position:relative;top:50%;">',MAX_PAGER_BUTTONS:5,MIN_WIDTH:99,NUM_VISIBLE:3},STRINGS:{NEXT_BUTTON_TEXT:"Next Page",PAGER_PREFIX_TEXT:"Go to page ",PREVIOUS_BUTTON_TEXT:"Previous Page"},addItem:function(s,o){var t=this,q,r,n,p=t.get("numItems");
if(!s){return false;}if(l.isString(s)||s.nodeName){r=s.nodeName?s.innerHTML:s;}else{if(l.isObject(s)){r=s.content;}else{return false;}}q=s.className||"";n=s.id?s.id:c.generateId();if(l.isUndefined(o)){t._itemsTable.items.push({item:r,className:q,id:n});}else{if(o<0||o>=p){return false;}t._itemsTable.items.splice(o,0,{item:r,className:q,id:n});}t._itemsTable.numItems++;if(p<t._itemsTable.items.length){t.set("numItems",t._itemsTable.items.length);}t.fireEvent(N,{pos:o,ev:N});return true;},addItems:function(o){var p,r,q=true;if(!l.isArray(o)){return false;}for(p=0,r=o.length;p<r;p++){if(this.addItem(o[p][0],o[p][1])===false){q=false;}}return q;},blur:function(){this._carouselEl.blur();this.fireEvent(B);},clearItems:function(){var o=this,p=o.get("numItems");while(p>0){if(!o.removeItem(0)){}if(o._itemsTable.numItems===0){o.set("numItems",0);break;}p--;}o.fireEvent(P);},focus:function(){var x=this,r,s,t,q,w,v,y,o,p,n;v=x.get("element").id;if(l.isUndefined(O[v])||!O[v].rendered){return;}if(x.isAnimating()){return;}n=x.get("selectedItem");y=x.get("numVisible");o=x.get("selectOnScroll");p=(n>=0)?x.getItem(n):null;r=x.get("firstVisible");w=r+y-1;t=(n<r||n>w);s=(p&&p.id)?c.get(p.id):null;q=x._itemsTable;if(!o&&t){s=(q&&q.items&&q.items[r])?c.get(q.items[r].id):null;}if(s){try{s.focus();}catch(u){}}x.fireEvent(T);},hide:function(){var n=this;if(n.fireEvent(Y)!==false){n.removeClass(n.CLASSES.VISIBLE);n.fireEvent(X);}},init:function(p,o){var q=this,n=p,r=false;if(!p){return;}q._itemsTable={loading:{},numItems:0,items:[],size:0};if(l.isString(p)){p=c.get(p);}else{if(!p.nodeName){return;}}Q.superclass.init.call(q,p,o);if(p){if(!p.id){p.setAttribute("id",c.generateId());}r=q._parseCarousel(p);if(!r){q._createCarousel(n);}}else{p=q._createCarousel(n);}n=p.id;q.initEvents();if(r){q._parseCarouselItems();}if(!o||typeof o.isVertical=="undefined"){q.set("isVertical",false);}q._parseCarouselNavigation(p);q._navEl=q._setupCarouselNavigation();O[n]={object:q,rendered:false};Z.call(q);},initAttributes:function(n){var o=this;n=n||{};Q.superclass.initAttributes.call(o,n);o.setAttributeConfig("carouselEl",{validator:l.isString,value:n.carouselEl||"OL"});o.setAttributeConfig("carouselItemEl",{validator:l.isString,value:n.carouselItemEl||"LI"});o.setAttributeConfig("currentPage",{readOnly:true,value:0});o.setAttributeConfig("firstVisible",{method:o._setFirstVisible,validator:o._validateFirstVisible,value:n.firstVisible||o.CONFIG.FIRST_VISIBLE});o.setAttributeConfig("selectOnScroll",{validator:l.isBoolean,value:n.selectOnScroll||true});o.setAttributeConfig("numVisible",{method:o._setNumVisible,validator:o._validateNumVisible,value:n.numVisible||o.CONFIG.NUM_VISIBLE});o.setAttributeConfig("numItems",{method:o._setNumItems,validator:o._validateNumItems,value:o._itemsTable.numItems});o.setAttributeConfig("scrollIncrement",{validator:o._validateScrollIncrement,value:n.scrollIncrement||1});o.setAttributeConfig("selectedItem",{method:o._setSelectedItem,validator:l.isNumber,value:-1});o.setAttributeConfig("revealAmount",{method:o._setRevealAmount,validator:o._validateRevealAmount,value:n.revealAmount||0});o.setAttributeConfig("isCircular",{validator:l.isBoolean,value:n.isCircular||false});o.setAttributeConfig("isVertical",{method:o._setOrientation,validator:l.isBoolean,value:n.isVertical||false});o.setAttributeConfig("navigation",{method:o._setNavigation,validator:o._validateNavigation,value:n.navigation||{prev:null,next:null,page:null}});o.setAttributeConfig("animation",{validator:o._validateAnimation,value:n.animation||{speed:0,effect:null}});o.setAttributeConfig("autoPlay",{validator:l.isNumber,value:n.autoPlay||0});o.setAttributeConfig("autoPlayInterval",{validator:l.isNumber,value:n.autoPlayInterval||0});},initEvents:function(){var n=this;n.on("keydown",n._keyboardEventHandler);n.on(E,i);n.on(N,A);n.on(k,A);n.on(C,n.focus);n.on(J,A);n.on(P,function(o){n.scrollTo(0);i.call(n);M.call(n);});n.on(d,M,n);n.on(F,function(o){n.set("selectedItem",n.get("firstVisible"));i.call(n,o);M.call(n,o);n._setClipContainerSize();});n.on("selectedItemChange",function(o){j.call(n,o.newValue,o.prevValue);if(o.newValue>=0){n._updateTabIndex(n.getElementForItem(o.newValue));}n.fireEvent(C,o.newValue);});n.on(I,function(o){i.call(n,o);M.call(n,o);});n.on("firstVisibleChange",function(o){if(!n.get("selectOnScroll")){if(o.newValue>=0){n._updateTabIndex(n.getElementForItem(o.newValue));}}});n.on("click",function(o){if(n.isAutoPlayOn()){n.stopAutoPlay();}n._itemClickHandler(o);n._pagerClickHandler(o);});a.onFocus(n.get("element"),function(o,p){p._updateNavButtons(a.getTarget(o),true);},n);a.onBlur(n.get("element"),function(o,p){p._updateNavButtons(a.getTarget(o),false);},n);},isAnimating:function(){return this._isAnimationInProgress;},isAutoPlayOn:function(){return this._isAutoPlayInProgress;},getElementForItem:function(n){var o=this;if(n<0||n>=o.get("numItems")){return null;}if(o._itemsTable.numItems>n){if(!l.isUndefined(o._itemsTable.items[n])){return c.get(o._itemsTable.items[n].id);}}return null;},getElementForItems:function(){var p=this,o=[],n;for(n=0;n<p._itemsTable.numItems;n++){o.push(p.getElementForItem(n));}return o;},getItem:function(n){var o=this;if(n<0||n>=o.get("numItems")){return null;}if(o._itemsTable.numItems>n){if(!l.isUndefined(o._itemsTable.items[n])){return o._itemsTable.items[n];}}return null;},getItems:function(n){return this._itemsTable.items;},getItemPositionById:function(r){var p=this,o=0,q=p._itemsTable.numItems;while(o<q){if(!l.isUndefined(p._itemsTable.items[o])){if(p._itemsTable.items[o].id==r){return o;}}o++;}return -1;},getVisibleItems:function(){var q=this,o=q.get("firstVisible"),s=o+q.get("numVisible"),p=[];while(o<s){p.push(q.getElementForItem(o));o++;}return p;},removeItem:function(o){var q=this,p,n=q.get("numItems");if(o<0||o>=n){return false;}p=q._itemsTable.items.splice(o,1);if(p&&p.length==1){q._itemsTable.numItems--;q.set("numItems",n-1);q.fireEvent(k,{item:p[0],pos:o,ev:k});return true;}return false;},render:function(o){var p=this,n=p.CLASSES;
p.addClass(n.CAROUSEL);if(!p._clipEl){p._clipEl=p._createCarouselClip();p._clipEl.appendChild(p._carouselEl);}if(o){p.appendChild(p._clipEl);p.appendTo(o);}else{if(!c.inDocument(p.get("element"))){return false;}p.appendChild(p._clipEl);}if(p.get("isVertical")){p.addClass(n.VERTICAL);}else{p.addClass(n.HORIZONTAL);}if(p.get("numItems")<1){return false;}p._reRender();return true;},scrollBackward:function(){var n=this;n.scrollTo(n._firstItem-n.get("scrollIncrement"));},scrollForward:function(){var n=this;n.scrollTo(n._firstItem+n.get("scrollIncrement"));},scrollPageBackward:function(){var o=this,n=o._firstItem-o.get("numVisible");o._selectedItem=o._getSelectedItem(n);o.scrollTo(n);},scrollPageForward:function(){var o=this,n=o._firstItem+o.get("numVisible");o._selectedItem=o._getSelectedItem(n);o.scrollTo(n);},scrollTo:function(AC,o){var AB=this,n,s=AB.get("animation"),q=AB.get("isCircular"),AA,y,x=AB._firstItem,v=AB.get("numItems"),w=AB.get("numVisible"),r,u=AB.get("currentPage"),p,t;function z(){if(AB.isAutoPlayOn()){AB.stopAutoPlay();}}if(AC==x){return;}if(AB.isAnimating()){return;}if(AC<0){if(q){AC=v+AC;}else{z.call(AB);return;}}else{if(v>0&&AC>v-1){if(AB.get("isCircular")){AC=v-AC;}else{z.call(AB);return;}}}y=(AB._firstItem>AC)?"backward":"forward";t=x+w;t=(t>v-1)?v-1:t;p=AB.fireEvent(f,{dir:y,first:x,last:t});if(p===false){return;}AB.fireEvent(H,{page:u});AA=x-AC;AB._firstItem=AC;AB.set("firstVisible",AC);Z.call(AB);t=AC+w;t=(t>v-1)?v-1:t;r=g.call(AB,AA);n=s.speed>0;if(n){AB._animateAndSetCarouselOffset(r,AC,t,o);}else{AB._setCarouselOffset(r);D.call(AB,AC,t);}},selectPreviousItem:function(){var p=this,o=0,n=p.get("selectedItem");if(n==this._firstItem){o=n-p.get("numVisible");p._selectedItem=p._getSelectedItem(n-1);p.scrollTo(o);}else{o=p.get("selectedItem")-p.get("scrollIncrement");p.set("selectedItem",p._getSelectedItem(o));}},selectNextItem:function(){var o=this,n=0;n=o.get("selectedItem")+o.get("scrollIncrement");o.set("selectedItem",o._getSelectedItem(n));},show:function(){var o=this,n=o.CLASSES;if(o.fireEvent(U)!==false){o.addClass(n.VISIBLE);o.fireEvent(R);}},startAutoPlay:function(){var n=this,o=n.get("autoPlayInterval");if(o>0){if(!l.isUndefined(n._autoPlayTimer)){return;}n._isAutoPlayInProgress=true;n.fireEvent(V);n._autoPlayTimer=setTimeout(function(){W.call(n);},o);}},stopAutoPlay:function(){var n=this;if(!l.isUndefined(n._autoPlayTimer)){clearTimeout(n._autoPlayTimer);delete n._autoPlayTimer;n.set("autoPlayInterval",0);n._isAutoPlayInProgress=false;n.fireEvent(m);}},toString:function(){return L+(this.get?" (#"+this.get("id")+")":"");},_animateAndSetCarouselOffset:function(s,q,o){var r=this,p=r.get("animation"),n=null;if(r.get("isVertical")){n=new YAHOO.util.Motion(r._carouselEl,{points:{by:[0,s]}},p.speed,p.effect);}else{n=new YAHOO.util.Motion(r._carouselEl,{points:{by:[s,0]}},p.speed,p.effect);}r._isAnimationInProgress=true;n.onComplete.subscribe(r._animationCompleteHandler,{scope:r,item:q,last:o});n.animate();},_animationCompleteHandler:function(n,q,r){r.scope._isAnimationInProgress=false;D.call(r.scope,r.item,r.last);},_createCarousel:function(o){var q=this,n=q.CLASSES,p=c.get(o);if(!p){p=S("DIV",{className:n.CAROUSEL,id:o});}if(!q._carouselEl){q._carouselEl=S(q.get("carouselEl"),{className:n.CAROUSEL_EL});}return p;},_createCarouselClip:function(){return S("DIV",{className:this.CLASSES.CONTENT});},_createCarouselItem:function(n){return S(this.get("carouselItemEl"),{className:n.className,content:n.content,id:n.id});},_getSelectedItem:function(r){var q=this,n=q.get("isCircular"),p=q.get("numItems"),o=p-1;if(r<0){if(n){r=p+r;}else{r=q.get("selectedItem");}}else{if(r>o){if(n){r=r-p;}else{r=q.get("selectedItem");}}}return r;},_itemClickHandler:function(q){var s=this,n=s.get("element"),o,p,r=YAHOO.util.Event.getTarget(q);while(r&&r!=n&&r.id!=s._carouselEl){o=r.nodeName;if(o.toUpperCase()==s.get("carouselItemEl")){break;}r=r.parentNode;}if((p=s.getItemPositionById(r.id))>=0){s.set("selectedItem",s._getSelectedItem(p));}},_keyboardEventHandler:function(p){var q=this,o=a.getCharCode(p),n=false;if(q.isAnimating()){return;}switch(o){case 37:case 38:q.selectPreviousItem();n=true;break;case 39:case 40:q.selectNextItem();n=true;break;case 33:q.scrollPageBackward();n=true;break;case 34:q.scrollPageForward();n=true;break;}if(n){if(q.isAutoPlayOn()){q.stopAutoPlay();}a.preventDefault(p);}},_pagerClickHandler:function(n){var p=this,r,o,q;o=a.getTarget(n);q=o.href||o.value;if(l.isString(q)&&q){r=q.lastIndexOf("#");if(r!=-1){q=p.getItemPositionById(q.substring(r+1));p._selectedItem=q;p.scrollTo(q);a.preventDefault(n);}}},_parseCarousel:function(p){var s=this,t,n,o,r,q;n=s.CLASSES;o=s.get("carouselEl");r=false;for(t=p.firstChild;t;t=t.nextSibling){if(t.nodeType==1){q=t.nodeName;if(q.toUpperCase()==o){s._carouselEl=t;c.addClass(s._carouselEl,s.CLASSES.CAROUSEL_EL);r=true;}}}return r;},_parseCarouselItems:function(){var r=this,s,n,o,q,p=r._carouselEl;n=r.get("carouselItemEl");for(s=p.firstChild;s;s=s.nextSibling){if(s.nodeType==1){q=s.nodeName;if(q.toUpperCase()==n){if(s.id){o=s.id;}else{o=c.generateId();s.setAttribute("id",o);}r.addItem(s);}}}},_parseCarouselNavigation:function(t){var u=this,s,v=u.CLASSES,o,r,q,n,p=false;n=c.getElementsByClassName(v.PREV_PAGE,"*",t);if(n.length>0){for(r in n){if(n.hasOwnProperty(r)){o=n[r];if(o.nodeName=="INPUT"||o.nodeName=="BUTTON"){u._navBtns.prev.push(o);}else{q=o.getElementsByTagName("INPUT");if(l.isArray(q)&&q.length>0){u._navBtns.prev.push(q[0]);}else{q=o.getElementsByTagName("BUTTON");if(l.isArray(q)&&q.length>0){u._navBtns.prev.push(q[0]);}}}}}s={prev:n};}n=c.getElementsByClassName(v.NEXT_PAGE,"*",t);if(n.length>0){for(r in n){if(n.hasOwnProperty(r)){o=n[r];if(o.nodeName=="INPUT"||o.nodeName=="BUTTON"){u._navBtns.next.push(o);}else{q=o.getElementsByTagName("INPUT");if(l.isArray(q)&&q.length>0){u._navBtns.next.push(q[0]);}else{q=o.getElementsByTagName("BUTTON");if(l.isArray(q)&&q.length>0){u._navBtns.next.push(q[0]);}}}}}if(s){s.next=n;}else{s={next:n};
}}if(s){u.set("navigation",s);p=true;}return p;},_reRender:function(){O[this.get("element").id].rendered=true;this.fireEvent(F);},_setCarouselOffset:function(p){var n=this,o;o=n.get("isVertical")?"top":"left";p+=p!==0?b(n._carouselEl,o):0;c.setStyle(n._carouselEl,o,p+"px");},_setupCarouselNavigation:function(){var s=this,q,o,n,u,r,t,p;n=s.CLASSES;r=c.getElementsByClassName(n.NAVIGATION,"DIV",s.get("element"));if(r.length===0){r=S("DIV",{className:n.NAVIGATION});s.insertBefore(r,c.getFirstChild(s.get("element")));}else{r=r[0];}s._pages.el=S("UL");r.appendChild(s._pages.el);u=s.get("navigation");if(l.isString(u.prev)||l.isArray(u.prev)){if(l.isString(u.prev)){u.prev=[u.prev];}for(q in u.prev){if(u.prev.hasOwnProperty(q)){s._navBtns.prev.push(c.get(u.prev[q]));}}}else{p=S("SPAN",{className:n.BUTTON+n.FIRST_NAV});c.setStyle(p,"visibility","visible");q=c.generateId();p.innerHTML='<button type="button" '+'id="'+q+'" name="'+s.STRINGS.PREVIOUS_BUTTON_TEXT+'">'+s.STRINGS.PREVIOUS_BUTTON_TEXT+"</button>";r.appendChild(p);q=c.get(q);s._navBtns.prev=[q];o={prev:[p]};}if(l.isString(u.next)||l.isArray(u.next)){if(l.isString(u.next)){u.next=[u.next];}for(q in u.next){if(u.next.hasOwnProperty(q)){s._navBtns.next.push(c.get(u.next[q]));}}}else{t=S("SPAN",{className:n.BUTTON+n.NEXT_NAV});c.setStyle(t,"visibility","visible");q=c.generateId();t.innerHTML='<button type="button" '+'id="'+q+'" name="'+s.STRINGS.NEXT_BUTTON_TEXT+'">'+s.STRINGS.NEXT_BUTTON_TEXT+"</button>";r.appendChild(t);q=c.get(q);s._navBtns.next=[q];if(o){o.next=[t];}else{o={next:[t]};}}if(o){s.set("navigation",o);}return r;},_setClipContainerSize:function(o,q){var v=this,r,n,s,t,u,w,p;s=v.get("isVertical");u=v.get("revealAmount");p=s?"height":"width";r=s?"top":"left";o=o||v._clipEl;if(!o){return;}q=q||v.get("numVisible");t=K.call(v,p);w=t*q;v._recomputeSize=(w===0);if(v._recomputeSize){return;}if(u>0){u=t*(u/100)*2;w+=u;n=parseFloat(c.getStyle(v._carouselEl,r));n=l.isNumber(n)?n:0;c.setStyle(v._carouselEl,r,n+(u/2)+"px");}if(s){w+=b(v._carouselEl,"marginTop")+b(v._carouselEl,"marginBottom")+b(v._carouselEl,"paddingTop")+b(v._carouselEl,"paddingBottom")+b(v._carouselEl,"borderTopWidth")+b(v._carouselEl,"borderBottomWidth");c.setStyle(o,p,(w-(q-1))+"px");}else{w+=b(v._carouselEl,"marginLeft")+b(v._carouselEl,"marginRight")+b(v._carouselEl,"paddingLeft")+b(v._carouselEl,"paddingRight")+b(v._carouselEl,"borderLeftWidth")+b(v._carouselEl,"borderRightWidth");c.setStyle(o,p,w+"px");}v._setContainerSize(o);},_setContainerSize:function(q,n){var r=this,o=r.CONFIG,s,p;s=r.get("isVertical");q=q||r._clipEl;n=n||(s?"height":"width");p=parseFloat(c.getStyle(q,n),10);p=l.isNumber(p)?p:0;if(s){p+=b(r._carouselEl,"marginTop")+b(r._carouselEl,"marginBottom")+b(r._carouselEl,"paddingTop")+b(r._carouselEl,"paddingBottom")+b(r._carouselEl,"borderTopWidth")+b(r._carouselEl,"borderBottomWidth")+b(r._navEl,"height");}else{p+=b(q,"marginLeft")+b(q,"marginRight")+b(q,"paddingLeft")+b(q,"paddingRight")+b(q,"borderLeftWidth")+b(q,"borderRightWidth");}r.setStyle(n,p+"px");if(s){p=K.call(r,"width");p=p<o.MIN_WIDTH?o.MIN_WIDTH:p;r.setStyle("width",p+"px");}},_setFirstVisible:function(o){var n=this;if(o>=0&&o<n.get("numItems")){n.scrollTo(o);}else{o=n.get("firstVisible");}return o;},_setNavigation:function(n){var o=this;if(n.prev){a.on(n.prev,"click",e,o);}if(n.next){a.on(n.next,"click",h,o);}},_setNumVisible:function(o){var n=this;n._setClipContainerSize(n._clipEl,o);},_setNumItems:function(p){var o=this,n=o._itemsTable.numItems;if(l.isArray(o._itemsTable.items)){if(o._itemsTable.items.length!=n){n=o._itemsTable.items.length;o._itemsTable.numItems=n;}}if(p<n){while(n>p){o.removeItem(n-1);n--;}}return p;},_setOrientation:function(p){var o=this,n=o.CLASSES;if(p){o.replaceClass(n.HORIZONTAL,n.VERTICAL);}else{o.replaceClass(n.VERTICAL,n.HORIZONTAL);}o._itemsTable.size=0;return p;},_setRevealAmount:function(o){var n=this;if(o>=0&&o<=100){o=parseInt(o,10);o=l.isNumber(o)?o:0;n._setClipContainerSize();}else{o=n.get("revealAmount");}return o;},_setSelectedItem:function(n){this._selectedItem=n;},_syncUiForItemAdd:function(q){var v=this,t=v._carouselEl,n,w,p=v._itemsTable,r=v.get("element").id,o,s,u;s=l.isUndefined(q.pos)?p.numItems-1:q.pos;if(!l.isUndefined(p.items[s])){w=p.items[s];if(w&&!l.isUndefined(w.id)){o=c.get(w.id);}}if(!o){n=v._createCarouselItem({className:w.className,content:w.item,id:w.id});if(l.isUndefined(q.pos)){if(!l.isUndefined(p.loading[s])){o=p.loading[s];}if(o){t.replaceChild(n,o);delete p.loading[s];}else{t.appendChild(n);}}else{if(!l.isUndefined(p.items[q.pos+1])){u=c.get(p.items[q.pos+1].id);}if(u){t.insertBefore(n,u);}else{}}}else{if(l.isUndefined(q.pos)){if(!c.isAncestor(v._carouselEl,o)){t.appendChild(o);}}else{if(!c.isAncestor(t,o)){if(!l.isUndefined(p.items[q.pos+1])){t.insertBefore(o,c.get(p.items[q.pos+1].id));}}}}if(l.isUndefined(O[r])||!O[r].rendered){v._reRender();}if(v.get("selectedItem")<0){v.set("selectedItem",v.get("firstVisible"));}},_syncUiForItemRemove:function(s){var r=this,n=r._carouselEl,p,q,o,t;o=r.get("numItems");q=s.item;t=s.pos;if(q&&(p=c.get(q.id))){if(p&&c.isAncestor(n,p)){a.purgeElement(p,true);n.removeChild(p);}if(r.get("selectedItem")==t){t=t>=o?o-1:t;r.set("selectedItem",t);}}else{}},_syncUiForLazyLoading:function(t){var s=this,o=s._carouselEl,r,p,n=s._itemsTable,q;for(p=t.first;p<=t.last;p++){r=s._createCarouselItem({content:s.CONFIG.ITEM_LOADING,id:c.generateId()});if(r){if(!l.isUndefined(n.items[t.last+1])){q=c.get(n.items[t.last+1].id);if(q){o.insertBefore(r,q);}else{}}else{o.appendChild(r);}}n.loading[p]=r;}},_updateNavButtons:function(r,o){var p,n=this.CLASSES,s,q=r.parentNode;if(!q){return;}s=q.parentNode;if(r.nodeName.toUpperCase()=="INPUT"&&c.hasClass(q,n.BUTTON)){if(o){if(s){p=c.getChildren(s);if(p){c.removeClass(p,n.FOCUSSED_BUTTON);}}c.addClass(q,n.FOCUSSED_BUTTON);}else{c.removeClass(q,n.FOCUSSED_BUTTON);}}},_updatePagerButtons:function(){var w=this,u=w.CLASSES,v=w._pages.cur,o,t,r,x,p=w.get("numVisible"),s=w._pages.num,q=w._pages.el;
if(s===0){return;}c.setStyle(q,"visibility","hidden");while(q.firstChild){q.removeChild(q.firstChild);}for(r=0;r<s;r++){if(l.isUndefined(w._itemsTable.items[r*p])){c.setStyle(q,"visibility","visible");break;}x=w._itemsTable.items[r*p].id;o=document.createElement("LI");if(!o){c.setStyle(q,"visibility","visible");break;}if(r===0){c.addClass(o,u.FIRST_PAGE);}if(r==v){c.addClass(o,u.SELECTED_NAV);}t='<a href="#'+x+'" tabindex="0"><em>'+w.STRINGS.PAGER_PREFIX_TEXT+" "+(r+1)+"</em></a>";o.innerHTML=t;q.appendChild(o);}c.setStyle(q,"visibility","visible");},_updatePagerMenu:function(){var v=this,u=v._pages.cur,p,s,w,q=v.get("numVisible"),t=v._pages.num,r=v._pages.el,o;if(t===0){return;}o=document.createElement("SELECT");if(!o){return;}c.setStyle(r,"visibility","hidden");while(r.firstChild){r.removeChild(r.firstChild);}for(s=0;s<t;s++){if(l.isUndefined(v._itemsTable.items[s*q])){c.setStyle(r,"visibility","visible");break;}w=v._itemsTable.items[s*q].id;p=document.createElement("OPTION");if(!p){c.setStyle(r,"visibility","visible");break;}p.value="#"+w;p.innerHTML=v.STRINGS.PAGER_PREFIX_TEXT+" "+(s+1);if(s==u){p.setAttribute("selected","selected");}o.appendChild(p);}p=document.createElement("FORM");if(!p){}else{p.appendChild(o);r.appendChild(p);}c.setStyle(r,"visibility","visible");},_updateTabIndex:function(n){var o=this;if(n){if(o._focusableItemEl){o._focusableItemEl.tabIndex=-1;}o._focusableItemEl=n;n.tabIndex=0;}},_validateAnimation:function(n){var o=true;if(l.isObject(n)){if(n.speed){o=o&&l.isNumber(n.speed);}if(n.effect){o=o&&l.isFunction(n.effect);}else{if(!l.isUndefined(YAHOO.util.Easing)){n.effect=YAHOO.util.Easing.easeOut;}}}else{o=false;}return o;},_validateFirstVisible:function(p){var o=this,n=o.get("numItems");if(l.isNumber(p)){if(n===0&&p==n){return true;}else{return(p>=0&&p<o.get("numItems"));}}return false;},_validateNavigation:function(n){var o;if(!l.isObject(n)){return false;}if(n.prev){if(!l.isArray(n.prev)){return false;}for(o in n.prev){if(n.prev.hasOwnProperty(o)){if(!l.isString(n.prev[o].nodeName)){return false;}}}}if(n.next){if(!l.isArray(n.next)){return false;}for(o in n.next){if(n.next.hasOwnProperty(o)){if(!l.isString(n.next[o].nodeName)){return false;}}}}return true;},_validateNumItems:function(n){return l.isNumber(n)&&(n>=0);},_validateNumVisible:function(n){var o=false;if(l.isNumber(n)){o=n>0&&n<=this.get("numItems");}return o;},_validateRevealAmount:function(n){var o=false;if(l.isNumber(n)){o=n>=0&&n<100;}return o;},_validateScrollIncrement:function(n){var o=false;if(l.isNumber(n)){o=(n>0&&n<this.get("numItems"));}return o;}});})();YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});