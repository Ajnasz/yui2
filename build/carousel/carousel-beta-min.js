(function(){var L;YAHOO.widget.Carousel=function(m,l){YAHOO.widget.Carousel.superclass.constructor.call(this,m,l);};var P=YAHOO.widget.Carousel,Z=YAHOO.util.Dom,X=YAHOO.util.Event,j=YAHOO.lang;L="Carousel";var O={},E="afterScroll",a="allItemsRemoved",W="beforeHide",H="beforePageChange",d="beforeScroll",T="beforeShow",B="blur",S="focus",V="hide",N="itemAdded",i="itemRemoved",C="itemSelected",J="loadItems",G="navigationStateChange",b="pageChange",F="render",Q="show",U="startAutoPlay",k="stopAutoPlay",I="uiUpdate";function R(m,l){var n=document.createElement(m);l=l||{};if(l.className){Z.addClass(n,l.className);}if(l.parent){l.parent.appendChild(n);}if(l.id){n.setAttribute("id",l.id);}if(l.content){if(l.content.nodeName){n.appendChild(l.content);}else{n.innerHTML=l.content;}}return n;}function Y(n,m,l){var p;if(!n){return 0;}function o(s,r){var t;t=parseInt(Z.getStyle(s,r),10);return j.isNumber(t)?t:0;}function q(s,r){var t;t=parseFloat(Z.getStyle(s,r));return j.isNumber(t)?t:0;}if(typeof l=="undefined"){l="int";}switch(m){case"height":p=n.offsetHeight;if(p>0){p+=o(n,"marginTop")+o(n,"marginBottom");}else{p=q(n,"height")+o(n,"marginTop")+o(n,"marginBottom")+o(n,"borderTopWidth")+o(n,"borderBottomWidth")+o(n,"paddingTop")+o(n,"paddingBottom");}break;case"width":p=n.offsetWidth;if(p>0){p+=o(n,"marginLeft")+o(n,"marginRight");}else{p=q(n,"width")+o(n,"marginLeft")+o(n,"marginRight")+o(n,"borderLeftWidth")+o(n,"borderRightWidth")+o(n,"paddingLeft")+o(n,"paddingRight");}break;default:if(l=="int"){p=o(n,m);if(m=="marginRight"&&YAHOO.env.ua.webkit){p=o(n,"marginLeft");}}else{if(l=="float"){p=q(n,m);}else{p=Z.getStyle(n,m);}}break;}return p;}function K(o){var n=this,p,m=0,l=false;if(n._itemsTable.numItems===0){return 0;}if(typeof o=="undefined"){if(n._itemsTable.size>0){return n._itemsTable.size;}}if(j.isUndefined(n._itemsTable.items[0])){return 0;}p=Z.get(n._itemsTable.items[0].id);if(typeof o=="undefined"){l=n.get("isVertical");}else{l=o=="height";}if(l){m=Y(p,"height");}else{m=Y(p,"width");}if(typeof o=="undefined"){n._itemsTable.size=m;}return m;}function e(n){var m=0,l=0;m=K.call(this);l=m*n;if(this.get("isVertical")){l-=n;}return l;}function c(l,m){m.scrollPageBackward();X.preventDefault(l);}function f(l,m){m.scrollPageForward();X.preventDefault(l);}function h(q,l){var t,v=this,w=v.CLASSES,m,s=v._firstItem,n=v.get("isCircular"),r=v.get("numItems"),u=v.get("numVisible"),p=l,o=s+u-1;t=u>1&&!n&&p>q;if(p>=0&&p<r){if(!j.isUndefined(v._itemsTable.items[p])){m=Z.get(v._itemsTable.items[p].id);if(m){Z.removeClass(m,w.SELECTED_ITEM);}}}if(j.isNumber(q)){q=parseInt(q,10);q=j.isNumber(q)?q:0;}else{q=s;}if(j.isUndefined(v._itemsTable.items[q])){v.scrollTo(q);}if(!j.isUndefined(v._itemsTable.items[q])){m=Z.get(v._itemsTable.items[q].id);if(m){Z.addClass(m,w.SELECTED_ITEM);}}if(q<s||q>o){if(t){q=s-u;q=q>=0?q:0;v.scrollTo(q);}else{v.scrollTo(q);}}}function g(){var n=false,r=this,m=r.CLASSES,p,q,l,o;q=r.get("element").id;if(j.isUndefined(O[q])||!O[q].rendered){return;}l=r.get("navigation");o=r._firstItem+r.get("numVisible");if(l.prev){if(r.get("numItems")===0||r._firstItem===0){if(r.get("numItems")===0||!r.get("isCircular")){X.removeListener(l.prev,"click",c);Z.addClass(l.prev,m.FIRST_NAV_DISABLED);for(p=0;p<r._navBtns.prev.length;p++){r._navBtns.prev[p].setAttribute("disabled","true");}r._prevEnabled=false;}else{n=!r._prevEnabled;}}else{n=!r._prevEnabled;}if(n){X.on(l.prev,"click",c,r);Z.removeClass(l.prev,m.FIRST_NAV_DISABLED);for(p=0;p<r._navBtns.prev.length;p++){r._navBtns.prev[p].removeAttribute("disabled");}r._prevEnabled=true;}}n=false;if(l.next){if(o>=r.get("numItems")){if(!r.get("isCircular")){X.removeListener(l.next,"click",f);Z.addClass(l.next,m.DISABLED);for(p=0;p<r._navBtns.next.length;p++){r._navBtns.next[p].setAttribute("disabled","true");}r._nextEnabled=false;}else{n=!r._nextEnabled;}}else{n=!r._nextEnabled;}if(n){X.on(l.next,"click",f,r);Z.removeClass(l.next,m.DISABLED);for(p=0;p<r._navBtns.next.length;p++){r._navBtns.next[p].removeAttribute("disabled");}r._nextEnabled=true;}}r.fireEvent(G,{next:r._nextEnabled,prev:r._prevEnabled});}function M(o){var p=this,m,l,n;m=p.get("element").id;if(j.isUndefined(O[m])||!O[m].rendered){return;}n=p.get("numVisible");if(!j.isNumber(o)){o=Math.ceil(p.get("selectedItem")/n);}l=Math.ceil(p.get("numItems")/n);p._pages.num=l;p._pages.cur=o;if(l>p.CONFIG.MAX_PAGER_BUTTONS){p._updatePagerMenu();}else{p._updatePagerButtons();}}function A(m){var l=this;if(!j.isObject(m)){return;}switch(m.ev){case N:l._syncUiForItemAdd(m);break;case i:l._syncUiForItemRemove(m);break;case J:l._syncUiForLazyLoading(m);break;}l.fireEvent(I);}function D(o,m){var q=this,p=q.get("currentPage"),n,l=q.get("numVisible");n=parseInt(q._firstItem/l,10);if(n!=p){q.setAttributeConfig("currentPage",{value:n});q.fireEvent(b,n);}if(q.get("selectOnScroll")){if(q.get("selectedItem")!=q._selectedItem){q.set("selectedItem",q._selectedItem);}}clearTimeout(q._autoPlayTimer);delete q._autoPlayTimer;if(q.isAutoPlayOn()){q.startAutoPlay();}q.fireEvent(E,{first:q._firstItem,last:m},q);}P.getById=function(l){return O[l]?O[l].object:false;};YAHOO.extend(P,YAHOO.util.Element,{_animObj:null,_carouselEl:null,_clipEl:null,_firstItem:0,_hasFocus:false,_isAnimationInProgress:false,_isAutoPlayInProgress:false,_itemsTable:null,_navBtns:null,_navEl:null,_nextEnabled:true,_pages:null,_prevEnabled:true,_recomputeSize:true,CLASSES:{BUTTON:"yui-carousel-button",CAROUSEL:"yui-carousel",CAROUSEL_EL:"yui-carousel-element",CONTAINER:"yui-carousel-container",CONTENT:"yui-carousel-content",DISABLED:"yui-carousel-button-disabled",FIRST_NAV:" yui-carousel-first-button",FIRST_NAV_DISABLED:"yui-carousel-first-button-disabled",FIRST_PAGE:"yui-carousel-nav-first-page",FOCUSSED_BUTTON:"yui-carousel-button-focus",HORIZONTAL:"yui-carousel-horizontal",NAVIGATION:"yui-carousel-nav",NEXT_NAV:" yui-carousel-next-button",NEXT_PAGE:"yui-carousel-next",NAV_CONTAINER:"yui-carousel-buttons",PREV_PAGE:"yui-carousel-prev",SELECTED_ITEM:"yui-carousel-item-selected",SELECTED_NAV:"yui-carousel-nav-page-selected",VERTICAL:"yui-carousel-vertical",VERTICAL_CONTAINER:"yui-carousel-vertical-container",VISIBLE:"yui-carousel-visible"},CONFIG:{FIRST_VISIBLE:0,ITEM_LOADING:"<img "+'src="../../build/carousel/assets/ajax-loader.gif" '+'alt="Loading" '+'style="margin-top:-32px;position:relative;top:50%;">',MAX_PAGER_BUTTONS:5,MIN_WIDTH:99,NUM_VISIBLE:3},STRINGS:{NEXT_BUTTON_TEXT:"Next Page",PAGER_PREFIX_TEXT:"Go to page ",PREVIOUS_BUTTON_TEXT:"Previous Page"},addItem:function(q,m){var r=this,o,p,l,n=r.get("numItems");
if(!q){return false;}if(j.isString(q)||q.nodeName){p=q.nodeName?q.innerHTML:q;}else{if(j.isObject(q)){p=q.content;}else{return false;}}o=q.className||"";l=q.id?q.id:Z.generateId();if(j.isUndefined(m)){r._itemsTable.items.push({item:p,className:o,id:l});}else{if(m<0||m>=n){return false;}r._itemsTable.items.splice(m,0,{item:p,className:o,id:l});}r._itemsTable.numItems++;if(n<r._itemsTable.items.length){r.set("numItems",r._itemsTable.items.length);}r.fireEvent(N,{pos:m,ev:N});return true;},addItems:function(l){var m,p,o=true;if(!j.isArray(l)){return false;}for(m=0,p=l.length;m<p;m++){if(this.addItem(l[m][0],l[m][1])===false){o=false;}}return o;},blur:function(){this._carouselEl.blur();this.fireEvent(B);},clearItems:function(){var l=this,m=l.get("numItems");while(m>0){if(!l.removeItem(0)){}if(l._itemsTable.numItems===0){l.set("numItems",0);break;}m--;}l.fireEvent(a);},focus:function(){var v=this,p,q,r,o,u,t,w,m,n,l;t=v.get("element").id;if(j.isUndefined(O[t])||!O[t].rendered){return;}if(v.isAnimating()){return;}l=v.get("selectedItem");w=v.get("numVisible");m=v.get("selectOnScroll");n=(l>=0)?v.getItem(l):null;p=v.get("firstVisible");u=p+w-1;r=(l<p||l>u);q=(n&&n.id)?Z.get(n.id):null;o=v._itemsTable;if(!m&&r){q=(o&&o.items&&o.items[p])?Z.get(o.items[p].id):null;}if(q){try{q.focus();}catch(s){}}v.fireEvent(S);},hide:function(){var l=this;if(l.fireEvent(W)!==false){l.removeClass(l.CLASSES.VISIBLE);l.fireEvent(V);}},init:function(n,m){var o=this,l=n,p=false;if(!n){return;}o._navBtns={prev:[],next:[]};o._pages={el:null,num:0,cur:0};o._itemsTable={loading:{},numItems:0,items:[],size:0};if(j.isString(n)){n=Z.get(n);}else{if(!n.nodeName){return;}}P.superclass.init.call(o,n,m);if(n){if(!n.id){n.setAttribute("id",Z.generateId());}p=o._parseCarousel(n);if(!p){o._createCarousel(l);}}else{n=o._createCarousel(l);}l=n.id;o.initEvents();if(p){o._parseCarouselItems();}if(!m||typeof m.isVertical=="undefined"){o.set("isVertical",false);}o._parseCarouselNavigation(n);o._navEl=o._setupCarouselNavigation();O[l]={object:o,rendered:false};o._loadItems();},initAttributes:function(l){var m=this;l=l||{};P.superclass.initAttributes.call(m,l);m.setAttributeConfig("carouselEl",{validator:j.isString,value:l.carouselEl||"OL"});m.setAttributeConfig("carouselItemEl",{validator:j.isString,value:l.carouselItemEl||"LI"});m.setAttributeConfig("currentPage",{readOnly:true,value:0});m.setAttributeConfig("firstVisible",{method:m._setFirstVisible,validator:m._validateFirstVisible,value:l.firstVisible||m.CONFIG.FIRST_VISIBLE});m.setAttributeConfig("selectOnScroll",{validator:j.isBoolean,value:l.selectOnScroll||true});m.setAttributeConfig("numVisible",{method:m._setNumVisible,validator:m._validateNumVisible,value:l.numVisible||m.CONFIG.NUM_VISIBLE});m.setAttributeConfig("numItems",{method:m._setNumItems,validator:m._validateNumItems,value:m._itemsTable.numItems});m.setAttributeConfig("scrollIncrement",{validator:m._validateScrollIncrement,value:l.scrollIncrement||1});m.setAttributeConfig("selectedItem",{method:m._setSelectedItem,validator:j.isNumber,value:-1});m.setAttributeConfig("revealAmount",{method:m._setRevealAmount,validator:m._validateRevealAmount,value:l.revealAmount||0});m.setAttributeConfig("isCircular",{validator:j.isBoolean,value:l.isCircular||false});m.setAttributeConfig("isVertical",{method:m._setOrientation,validator:j.isBoolean,value:l.isVertical||false});m.setAttributeConfig("navigation",{method:m._setNavigation,validator:m._validateNavigation,value:l.navigation||{prev:null,next:null,page:null}});m.setAttributeConfig("animation",{validator:m._validateAnimation,value:l.animation||{speed:0,effect:null}});m.setAttributeConfig("autoPlay",{validator:j.isNumber,value:l.autoPlay||0});m.setAttributeConfig("autoPlayInterval",{validator:j.isNumber,value:l.autoPlayInterval||0});},initEvents:function(){var l=this;l.on("keydown",l._keyboardEventHandler);l.on(E,g);l.on(N,A);l.on(i,A);l.on(C,function(){if(l._hasFocus){l.focus();}});l.on(J,A);l.on(a,function(m){l.scrollTo(0);g.call(l);M.call(l);});l.on(b,M,l);l.on(F,function(m){l.set("selectedItem",l.get("firstVisible"));g.call(l,m);M.call(l,m);l._setClipContainerSize();});l.on("selectedItemChange",function(m){h.call(l,m.newValue,m.prevValue);if(m.newValue>=0){l._updateTabIndex(l.getElementForItem(m.newValue));}l.fireEvent(C,m.newValue);});l.on(I,function(m){g.call(l,m);M.call(l,m);});l.on("firstVisibleChange",function(m){if(!l.get("selectOnScroll")){if(m.newValue>=0){l._updateTabIndex(l.getElementForItem(m.newValue));}}});l.on("click",function(m){if(l.isAutoPlayOn()){l.stopAutoPlay();}l._itemClickHandler(m);l._pagerClickHandler(m);});X.onFocus(l.get("element"),function(m,n){n._hasFocus=true;n._updateNavButtons(X.getTarget(m),true);},l);X.onBlur(l.get("element"),function(m,n){n._hasFocus=false;n._updateNavButtons(X.getTarget(m),false);},l);},isAnimating:function(){return this._isAnimationInProgress;},isAutoPlayOn:function(){return this._isAutoPlayInProgress;},getElementForItem:function(l){var m=this;if(l<0||l>=m.get("numItems")){return null;}if(m._itemsTable.numItems>l){if(!j.isUndefined(m._itemsTable.items[l])){return Z.get(m._itemsTable.items[l].id);}}return null;},getElementForItems:function(){var n=this,m=[],l;for(l=0;l<n._itemsTable.numItems;l++){m.push(n.getElementForItem(l));}return m;},getItem:function(l){var m=this;if(l<0||l>=m.get("numItems")){return null;}if(m._itemsTable.numItems>l){if(!j.isUndefined(m._itemsTable.items[l])){return m._itemsTable.items[l];}}return null;},getItems:function(l){return this._itemsTable.items;},getItemPositionById:function(p){var m=this,l=0,o=m._itemsTable.numItems;while(l<o){if(!j.isUndefined(m._itemsTable.items[l])){if(m._itemsTable.items[l].id==p){return l;}}l++;}return -1;},getVisibleItems:function(){var o=this,l=o.get("firstVisible"),p=l+o.get("numVisible"),m=[];while(l<p){m.push(o.getElementForItem(l));l++;}return m;},removeItem:function(m){var o=this,n,l=o.get("numItems");if(m<0||m>=l){return false;}n=o._itemsTable.items.splice(m,1);if(n&&n.length==1){o._itemsTable.numItems--;
o.set("numItems",l-1);o.fireEvent(i,{item:n[0],pos:m,ev:i});return true;}return false;},render:function(m){var n=this,l=n.CLASSES;n.addClass(l.CAROUSEL);if(!n._clipEl){n._clipEl=n._createCarouselClip();n._clipEl.appendChild(n._carouselEl);}if(m){n.appendChild(n._clipEl);n.appendTo(m);}else{if(!Z.inDocument(n.get("element"))){return false;}n.appendChild(n._clipEl);}if(n.get("isVertical")){n.addClass(l.VERTICAL);}else{n.addClass(l.HORIZONTAL);}if(n.get("numItems")<1){return false;}n._reRender();return true;},scrollBackward:function(){var l=this;l.scrollTo(l._firstItem-l.get("scrollIncrement"));},scrollForward:function(){var l=this;l.scrollTo(l._firstItem+l.get("scrollIncrement"));},scrollPageBackward:function(){var m=this,l=m._firstItem-m.get("numVisible");l=l>=0?l:0;if(m.get("selectOnScroll")){m._selectedItem=m._getSelectedItem(l);}m.scrollTo(l);},scrollPageForward:function(){var m=this,l=m._firstItem+m.get("numVisible");if(m.get("selectOnScroll")){m._selectedItem=m._getSelectedItem(l);}m.scrollTo(l);},scrollTo:function(AA,m){var z=this,l,q=z.get("animation"),o=z.get("isCircular"),y,w,v=z._firstItem,t=z.get("numItems"),u=z.get("numVisible"),p,s=z.get("currentPage"),n,r;function x(){if(z.isAutoPlayOn()){z.stopAutoPlay();}}if(AA==v){return;}if(z.isAnimating()){return;}if(AA<0){if(o){AA=t+AA;}else{x.call(z);return;}}else{if(t>0&&AA>t-1){if(z.get("isCircular")){AA=t-AA;}else{x.call(z);return;}}}w=(z._firstItem>AA)?"backward":"forward";r=v+u;r=(r>t-1)?t-1:r;n=z.fireEvent(d,{dir:w,first:v,last:r});if(n===false){return;}z.fireEvent(H,{page:s});y=v-AA;z._firstItem=AA;z.set("firstVisible",AA);z._loadItems();r=AA+u;r=(r>t-1)?t-1:r;p=e.call(z,y);l=q.speed>0;if(l){z._animateAndSetCarouselOffset(p,AA,r,m);}else{z._setCarouselOffset(p);D.call(z,AA,r);}},selectPreviousItem:function(){var n=this,m=0,l=n.get("selectedItem");if(l==this._firstItem){m=l-n.get("numVisible");n._selectedItem=n._getSelectedItem(l-1);n.scrollTo(m);}else{m=n.get("selectedItem")-n.get("scrollIncrement");n.set("selectedItem",n._getSelectedItem(m));}},selectNextItem:function(){var m=this,l=0;l=m.get("selectedItem")+m.get("scrollIncrement");m.set("selectedItem",m._getSelectedItem(l));},show:function(){var m=this,l=m.CLASSES;if(m.fireEvent(T)!==false){m.addClass(l.VISIBLE);m.fireEvent(Q);}},startAutoPlay:function(){var l=this,m=l.get("autoPlayInterval");if(m>0){if(!j.isUndefined(l._autoPlayTimer)){return;}l._isAutoPlayInProgress=true;l.fireEvent(U);l._autoPlayTimer=setTimeout(function(){l._autoScroll();},m);}},stopAutoPlay:function(){var l=this;if(!j.isUndefined(l._autoPlayTimer)){clearTimeout(l._autoPlayTimer);delete l._autoPlayTimer;l.set("autoPlayInterval",0);l._isAutoPlayInProgress=false;l.fireEvent(k);}},toString:function(){return L+(this.get?" (#"+this.get("id")+")":"");},_animateAndSetCarouselOffset:function(q,o,m){var p=this,n=p.get("animation"),l=null;if(p.get("isVertical")){l=new YAHOO.util.Motion(p._carouselEl,{points:{by:[0,q]}},n.speed,n.effect);}else{l=new YAHOO.util.Motion(p._carouselEl,{points:{by:[q,0]}},n.speed,n.effect);}p._isAnimationInProgress=true;l.onComplete.subscribe(p._animationCompleteHandler,{scope:p,item:o,last:m});l.animate();},_animationCompleteHandler:function(l,m,n){n.scope._isAnimationInProgress=false;D.call(n.scope,n.item,n.last);},_autoScroll:function(){var m=this,n=m._firstItem,l;if(n>=m.get("numItems")-1){if(m.get("isCircular")){l=0;}else{m.stopAutoPlay();}}else{l=n+m.get("numVisible");}m._selectedItem=m._getSelectedItem(l);m.scrollTo.call(m,l);},_createCarousel:function(m){var o=this,l=o.CLASSES,n=Z.get(m);if(!n){n=R("DIV",{className:l.CAROUSEL,id:m});}if(!o._carouselEl){o._carouselEl=R(o.get("carouselEl"),{className:l.CAROUSEL_EL});}return n;},_createCarouselClip:function(){return R("DIV",{className:this.CLASSES.CONTENT});},_createCarouselItem:function(l){return R(this.get("carouselItemEl"),{className:l.className,content:l.content,id:l.id});},_getSelectedItem:function(p){var o=this,l=o.get("isCircular"),n=o.get("numItems"),m=n-1;if(p<0){if(l){p=n+p;}else{p=o.get("selectedItem");}}else{if(p>m){if(l){p=p-n;}else{p=o.get("selectedItem");}}}return p;},_itemClickHandler:function(o){var q=this,l=q.get("element"),m,n,p=YAHOO.util.Event.getTarget(o);while(p&&p!=l&&p.id!=q._carouselEl){m=p.nodeName;if(m.toUpperCase()==q.get("carouselItemEl")){break;}p=p.parentNode;}if((n=q.getItemPositionById(p.id))>=0){q.set("selectedItem",q._getSelectedItem(n));carouselfocus();}},_keyboardEventHandler:function(n){var o=this,m=X.getCharCode(n),l=false;if(o.isAnimating()){return;}switch(m){case 37:case 38:o.selectPreviousItem();l=true;break;case 39:case 40:o.selectNextItem();l=true;break;case 33:o.scrollPageBackward();l=true;break;case 34:o.scrollPageForward();l=true;break;}if(l){if(o.isAutoPlayOn()){o.stopAutoPlay();}X.preventDefault(n);}},_loadItems:function(){var p=this,q=p.get("firstVisible"),m=0,l=p.get("numItems"),n=p.get("numVisible"),o=p.get("revealAmount");m=q+n-1+(o?1:0);m=m>l-1?l-1:m;if(!p.getItem(q)||!p.getItem(m)){p.fireEvent(J,{ev:J,first:q,last:m,num:m-q});}},_pagerClickHandler:function(l){var n=this,p,m,o;m=X.getTarget(l);o=m.href||m.value;if(j.isString(o)&&o){p=o.lastIndexOf("#");if(p!=-1){o=n.getItemPositionById(o.substring(p+1));n._selectedItem=o;n.scrollTo(o);X.preventDefault(l);}}},_parseCarousel:function(n){var q=this,r,l,m,p,o;l=q.CLASSES;m=q.get("carouselEl");p=false;for(r=n.firstChild;r;r=r.nextSibling){if(r.nodeType==1){o=r.nodeName;if(o.toUpperCase()==m){q._carouselEl=r;Z.addClass(q._carouselEl,q.CLASSES.CAROUSEL_EL);p=true;}}}return p;},_parseCarouselItems:function(){var p=this,q,l,m,o,n=p._carouselEl;l=p.get("carouselItemEl");for(q=n.firstChild;q;q=q.nextSibling){if(q.nodeType==1){o=q.nodeName;if(o.toUpperCase()==l){if(q.id){m=q.id;}else{m=Z.generateId();q.setAttribute("id",m);}p.addItem(q);}}}},_parseCarouselNavigation:function(r){var s=this,q,t=s.CLASSES,m,p,o,l,n=false;l=Z.getElementsByClassName(t.PREV_PAGE,"*",r);if(l.length>0){for(p in l){if(l.hasOwnProperty(p)){m=l[p];if(m.nodeName=="INPUT"||m.nodeName=="BUTTON"){s._navBtns.prev.push(m);
}else{o=m.getElementsByTagName("INPUT");if(j.isArray(o)&&o.length>0){s._navBtns.prev.push(o[0]);}else{o=m.getElementsByTagName("BUTTON");if(j.isArray(o)&&o.length>0){s._navBtns.prev.push(o[0]);}}}}}q={prev:l};}l=Z.getElementsByClassName(t.NEXT_PAGE,"*",r);if(l.length>0){for(p in l){if(l.hasOwnProperty(p)){m=l[p];if(m.nodeName=="INPUT"||m.nodeName=="BUTTON"){s._navBtns.next.push(m);}else{o=m.getElementsByTagName("INPUT");if(j.isArray(o)&&o.length>0){s._navBtns.next.push(o[0]);}else{o=m.getElementsByTagName("BUTTON");if(j.isArray(o)&&o.length>0){s._navBtns.next.push(o[0]);}}}}}if(q){q.next=l;}else{q={next:l};}}if(q){s.set("navigation",q);n=true;}return n;},_reRender:function(){O[this.get("element").id].rendered=true;this.fireEvent(F);},_setCarouselOffset:function(n){var l=this,m;m=l.get("isVertical")?"top":"left";n+=n!==0?Y(l._carouselEl,m):0;Z.setStyle(l._carouselEl,m,n+"px");},_setupCarouselNavigation:function(){var q=this,o,m,l,s,p,r,n;l=q.CLASSES;p=Z.getElementsByClassName(l.NAVIGATION,"DIV",q.get("element"));if(p.length===0){p=R("DIV",{className:l.NAVIGATION});q.insertBefore(p,Z.getFirstChild(q.get("element")));}else{p=p[0];}q._pages.el=R("UL");p.appendChild(q._pages.el);s=q.get("navigation");if(j.isString(s.prev)||j.isArray(s.prev)){if(j.isString(s.prev)){s.prev=[s.prev];}for(o in s.prev){if(s.prev.hasOwnProperty(o)){q._navBtns.prev.push(Z.get(s.prev[o]));}}}else{n=R("SPAN",{className:l.BUTTON+l.FIRST_NAV});Z.setStyle(n,"visibility","visible");o=Z.generateId();n.innerHTML='<button type="button" '+'id="'+o+'" name="'+q.STRINGS.PREVIOUS_BUTTON_TEXT+'">'+q.STRINGS.PREVIOUS_BUTTON_TEXT+"</button>";p.appendChild(n);o=Z.get(o);q._navBtns.prev=[o];m={prev:[n]};}if(j.isString(s.next)||j.isArray(s.next)){if(j.isString(s.next)){s.next=[s.next];}for(o in s.next){if(s.next.hasOwnProperty(o)){q._navBtns.next.push(Z.get(s.next[o]));}}}else{r=R("SPAN",{className:l.BUTTON+l.NEXT_NAV});Z.setStyle(r,"visibility","visible");o=Z.generateId();r.innerHTML='<button type="button" '+'id="'+o+'" name="'+q.STRINGS.NEXT_BUTTON_TEXT+'">'+q.STRINGS.NEXT_BUTTON_TEXT+"</button>";p.appendChild(r);o=Z.get(o);q._navBtns.next=[o];if(m){m.next=[r];}else{m={next:[r]};}}if(m){q.set("navigation",m);}return p;},_setClipContainerSize:function(m,o){var t=this,p,l,q,r,s,u,n;q=t.get("isVertical");s=t.get("revealAmount");n=q?"height":"width";p=q?"top":"left";m=m||t._clipEl;if(!m){return;}o=o||t.get("numVisible");r=K.call(t,n);u=r*o;t._recomputeSize=(u===0);if(t._recomputeSize){return;}if(s>0){s=r*(s/100)*2;u+=s;l=parseFloat(Z.getStyle(t._carouselEl,p));l=j.isNumber(l)?l:0;Z.setStyle(t._carouselEl,p,l+(s/2)+"px");}if(q){u+=Y(t._carouselEl,"marginTop")+Y(t._carouselEl,"marginBottom")+Y(t._carouselEl,"paddingTop")+Y(t._carouselEl,"paddingBottom")+Y(t._carouselEl,"borderTopWidth")+Y(t._carouselEl,"borderBottomWidth");Z.setStyle(m,n,(u-(o-1))+"px");}else{u+=Y(t._carouselEl,"marginLeft")+Y(t._carouselEl,"marginRight")+Y(t._carouselEl,"paddingLeft")+Y(t._carouselEl,"paddingRight")+Y(t._carouselEl,"borderLeftWidth")+Y(t._carouselEl,"borderRightWidth");Z.setStyle(m,n,u+"px");}t._setContainerSize(m);},_setContainerSize:function(o,l){var p=this,m=p.CONFIG,q,n;q=p.get("isVertical");o=o||p._clipEl;l=l||(q?"height":"width");n=parseFloat(Z.getStyle(o,l),10);n=j.isNumber(n)?n:0;if(q){n+=Y(p._carouselEl,"marginTop")+Y(p._carouselEl,"marginBottom")+Y(p._carouselEl,"paddingTop")+Y(p._carouselEl,"paddingBottom")+Y(p._carouselEl,"borderTopWidth")+Y(p._carouselEl,"borderBottomWidth")+Y(p._navEl,"height");}else{n+=Y(o,"marginLeft")+Y(o,"marginRight")+Y(o,"paddingLeft")+Y(o,"paddingRight")+Y(o,"borderLeftWidth")+Y(o,"borderRightWidth");}p.setStyle(l,n+"px");if(q){n=K.call(p,"width");n=n<m.MIN_WIDTH?m.MIN_WIDTH:n;p.setStyle("width",n+"px");}},_setFirstVisible:function(m){var l=this;if(m>=0&&m<l.get("numItems")){l.scrollTo(m);}else{m=l.get("firstVisible");}return m;},_setNavigation:function(l){var m=this;if(l.prev){X.on(l.prev,"click",c,m);}if(l.next){X.on(l.next,"click",f,m);}},_setNumVisible:function(m){var l=this;l._setClipContainerSize(l._clipEl,m);},_setNumItems:function(n){var m=this,l=m._itemsTable.numItems;if(j.isArray(m._itemsTable.items)){if(m._itemsTable.items.length!=l){l=m._itemsTable.items.length;m._itemsTable.numItems=l;}}if(n<l){while(l>n){m.removeItem(l-1);l--;}}return n;},_setOrientation:function(n){var m=this,l=m.CLASSES;if(n){m.replaceClass(l.HORIZONTAL,l.VERTICAL);}else{m.replaceClass(l.VERTICAL,l.HORIZONTAL);}m._itemsTable.size=0;return n;},_setRevealAmount:function(m){var l=this;if(m>=0&&m<=100){m=parseInt(m,10);m=j.isNumber(m)?m:0;l._setClipContainerSize();}else{m=l.get("revealAmount");}return m;},_setSelectedItem:function(l){this._selectedItem=l;},_syncUiForItemAdd:function(o){var t=this,r=t._carouselEl,l,u,n=t._itemsTable,p=t.get("element").id,m,q,s;q=j.isUndefined(o.pos)?n.numItems-1:o.pos;if(!j.isUndefined(n.items[q])){u=n.items[q];if(u&&!j.isUndefined(u.id)){m=Z.get(u.id);}}if(!m){l=t._createCarouselItem({className:u.className,content:u.item,id:u.id});if(j.isUndefined(o.pos)){if(!j.isUndefined(n.loading[q])){m=n.loading[q];}if(m){r.replaceChild(l,m);delete n.loading[q];}else{r.appendChild(l);}}else{if(!j.isUndefined(n.items[o.pos+1])){s=Z.get(n.items[o.pos+1].id);}if(s){r.insertBefore(l,s);}else{}}}else{if(j.isUndefined(o.pos)){if(!Z.isAncestor(t._carouselEl,m)){r.appendChild(m);}}else{if(!Z.isAncestor(r,m)){if(!j.isUndefined(n.items[o.pos+1])){r.insertBefore(m,Z.get(n.items[o.pos+1].id));}}}}if(j.isUndefined(O[p])||!O[p].rendered){t._reRender();}if(t.get("selectedItem")<0){t.set("selectedItem",t.get("firstVisible"));}},_syncUiForItemRemove:function(q){var p=this,l=p._carouselEl,n,o,m,r;m=p.get("numItems");o=q.item;r=q.pos;if(o&&(n=Z.get(o.id))){if(n&&Z.isAncestor(l,n)){X.purgeElement(n,true);l.removeChild(n);}if(p.get("selectedItem")==r){r=r>=m?m-1:r;p.set("selectedItem",r);}}else{}},_syncUiForLazyLoading:function(r){var q=this,m=q._carouselEl,p,n,l=q._itemsTable,o;for(n=r.first;n<=r.last;n++){p=q._createCarouselItem({content:q.CONFIG.ITEM_LOADING,id:Z.generateId()});
if(p){if(!j.isUndefined(l.items[r.last+1])){o=Z.get(l.items[r.last+1].id);if(o){m.insertBefore(p,o);}else{}}else{m.appendChild(p);}}l.loading[n]=p;}},_updateNavButtons:function(p,m){var n,l=this.CLASSES,q,o=p.parentNode;if(!o){return;}q=o.parentNode;if(p.nodeName.toUpperCase()=="INPUT"&&Z.hasClass(o,l.BUTTON)){if(m){if(q){n=Z.getChildren(q);if(n){Z.removeClass(n,l.FOCUSSED_BUTTON);}}Z.addClass(o,l.FOCUSSED_BUTTON);}else{Z.removeClass(o,l.FOCUSSED_BUTTON);}}},_updatePagerButtons:function(){var u=this,s=u.CLASSES,t=u._pages.cur,l,r,p,v,m=u.get("numVisible"),q=u._pages.num,o=u._pages.el;if(q===0){return;}Z.setStyle(o,"visibility","hidden");while(o.firstChild){o.removeChild(o.firstChild);}for(p=0;p<q;p++){if(j.isUndefined(u._itemsTable.items[p*m])){Z.setStyle(o,"visibility","visible");break;}v=u._itemsTable.items[p*m].id;l=document.createElement("LI");if(!l){Z.setStyle(o,"visibility","visible");break;}if(p===0){Z.addClass(l,s.FIRST_PAGE);}if(p==t){Z.addClass(l,s.SELECTED_NAV);}r='<a href="#'+v+'" tabindex="0"><em>'+u.STRINGS.PAGER_PREFIX_TEXT+" "+(p+1)+"</em></a>";l.innerHTML=r;o.appendChild(l);}Z.setStyle(o,"visibility","visible");},_updatePagerMenu:function(){var t=this,s=t._pages.cur,m,q,u,o=t.get("numVisible"),r=t._pages.num,p=t._pages.el,l;if(r===0){return;}l=document.createElement("SELECT");if(!l){return;}Z.setStyle(p,"visibility","hidden");while(p.firstChild){p.removeChild(p.firstChild);}for(q=0;q<r;q++){if(j.isUndefined(t._itemsTable.items[q*o])){Z.setStyle(p,"visibility","visible");break;}u=t._itemsTable.items[q*o].id;m=document.createElement("OPTION");if(!m){Z.setStyle(p,"visibility","visible");break;}m.value="#"+u;m.innerHTML=t.STRINGS.PAGER_PREFIX_TEXT+" "+(q+1);if(q==s){m.setAttribute("selected","selected");}l.appendChild(m);}m=document.createElement("FORM");if(!m){}else{m.appendChild(l);p.appendChild(m);}Z.setStyle(p,"visibility","visible");},_updateTabIndex:function(l){var m=this;if(l){if(m._focusableItemEl){m._focusableItemEl.tabIndex=-1;}m._focusableItemEl=l;l.tabIndex=0;}},_validateAnimation:function(l){var m=true;if(j.isObject(l)){if(l.speed){m=m&&j.isNumber(l.speed);}if(l.effect){m=m&&j.isFunction(l.effect);}else{if(!j.isUndefined(YAHOO.util.Easing)){l.effect=YAHOO.util.Easing.easeOut;}}}else{m=false;}return m;},_validateFirstVisible:function(n){var m=this,l=m.get("numItems");if(j.isNumber(n)){if(l===0&&n==l){return true;}else{return(n>=0&&n<m.get("numItems"));}}return false;},_validateNavigation:function(l){var m;if(!j.isObject(l)){return false;}if(l.prev){if(!j.isArray(l.prev)){return false;}for(m in l.prev){if(l.prev.hasOwnProperty(m)){if(!j.isString(l.prev[m].nodeName)){return false;}}}}if(l.next){if(!j.isArray(l.next)){return false;}for(m in l.next){if(l.next.hasOwnProperty(m)){if(!j.isString(l.next[m].nodeName)){return false;}}}}return true;},_validateNumItems:function(l){return j.isNumber(l)&&(l>=0);},_validateNumVisible:function(l){var m=false;if(j.isNumber(l)){m=l>0&&l<=this.get("numItems");}return m;},_validateRevealAmount:function(l){var m=false;if(j.isNumber(l)){m=l>=0&&l<100;}return m;},_validateScrollIncrement:function(l){var m=false;if(j.isNumber(l)){m=(l>0&&l<this.get("numItems"));}return m;}});})();YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});