(function(){var P;YAHOO.widget.Carousel=function(t,s){YAHOO.widget.Carousel.superclass.constructor.call(this,t,s);};var U=YAHOO.widget.Carousel,e=YAHOO.util.Dom,c=YAHOO.util.Event,q=YAHOO.lang;var f={};P="Carousel";var T={},F="afterScroll",h="allItemsRemoved",b="beforeHide",J="beforePageChange",j="beforeScroll",Y="beforeShow",B="blur",X="focus",a="hide",S="itemAdded",p="itemRemoved",Q="itemReplaced",C="itemSelected",L="loadItems",I="navigationStateChange",i="pageChange",H="render",V="show",Z="startAutoPlay",r="stopAutoPlay",K="uiUpdate";function G(s,t){var u;for(u in t){if(t.hasOwnProperty(u)){e.setStyle(s,u,t[u]);}}}function W(t,s){var u=document.createElement(t);s=s||{};if(s.className){e.addClass(u,s.className);}if(s.styles){G(u,s.styles);}if(s.parent){s.parent.appendChild(u);}if(s.id){u.setAttribute("id",s.id);}if(s.content){if(s.content.nodeName){u.appendChild(s.content);}else{u.innerHTML=s.content;}}return u;}function d(u,t,s){var w;if(!u){return 0;}function v(z,y){var AA;if(y=="marginRight"&&YAHOO.env.ua.webkit){AA=parseInt(e.getStyle(z,"marginLeft"),10);}else{AA=parseInt(e.getStyle(z,y),10);}return q.isNumber(AA)?AA:0;}function x(z,y){var AA;if(y=="marginRight"&&YAHOO.env.ua.webkit){AA=parseFloat(e.getStyle(z,"marginLeft"));}else{AA=parseFloat(e.getStyle(z,y));}return q.isNumber(AA)?AA:0;}if(typeof s=="undefined"){s="int";}switch(t){case"height":w=u.offsetHeight;if(w>0){w+=v(u,"marginTop")+v(u,"marginBottom");}else{w=x(u,"height")+v(u,"marginTop")+v(u,"marginBottom")+v(u,"borderTopWidth")+v(u,"borderBottomWidth")+v(u,"paddingTop")+v(u,"paddingBottom");}break;case"width":w=u.offsetWidth;if(w>0){w+=v(u,"marginLeft")+v(u,"marginRight");}else{w=x(u,"width")+v(u,"marginLeft")+v(u,"marginRight")+v(u,"borderLeftWidth")+v(u,"borderRightWidth")+v(u,"paddingLeft")+v(u,"paddingRight");}break;default:if(s=="int"){w=v(u,t);}else{if(s=="float"){w=x(u,t);}else{w=e.getStyle(u,t);}}break;}return w;}function O(x){var v=this,y,u,t=0,w=v.get("firstVisible"),s=false;if(v._itemsTable.numItems===0){return 0;}u=v._itemsTable.items[w]||v._itemsTable.loading[w];if(q.isUndefined(u)){return 0;}y=e.get(u.id);if(typeof x=="undefined"){s=v.get("isVertical");}else{s=x=="height";}if(f[x]){return f[x];}if(s){t=d(y,"height");}else{t=d(y,"width");}f[x]=t;return t;}function N(){var t=this,u,s;u=t.get("isVertical");s=O.call(t,u?"height":"width");return(s*t.get("revealAmount")/100);}function n(x){var v=this,w,t={},u,s;w=v.get("isVertical");u=O.call(v,w?"height":"width");s=N.call(v);if(w){t.left=0;t.top=((x*u)+s)+"px";}else{t.top=0;t.left=((x*u)+s)+"px";}return t;}function D(t){var s=this.get("numVisible");return Math.floor(t/s)*s;}function k(u){var t=0,s=0;t=O.call(this);s=t*u;if(this.get("isVertical")&&!this._rows){s-=u;}return s;}function g(s,t){t.scrollPageBackward();c.preventDefault(s);}function l(s,t){t.scrollPageForward();c.preventDefault(s);}function o(x,t){var AB=this,AC=AB.CLASSES,s,z=AB._firstItem,u=AB.get("isCircular"),y=AB.get("numItems"),AA=AB.get("numVisible"),w=t,v=z+AA-1;if(w>=0&&w<y){if(!q.isUndefined(AB._itemsTable.items[w])){s=e.get(AB._itemsTable.items[w].id);if(s){e.removeClass(s,AC.SELECTED_ITEM);}}}if(q.isNumber(x)){x=parseInt(x,10);x=q.isNumber(x)?x:0;}else{x=z;}if(q.isUndefined(AB._itemsTable.items[x])){x=D.call(AB,x);AB.scrollTo(x);}if(!q.isUndefined(AB._itemsTable.items[x])){s=e.get(AB._itemsTable.items[x].id);if(s){e.addClass(s,AC.SELECTED_ITEM);}}if(x<z||x>v){x=D.call(AB,x);AB.scrollTo(x);}}function m(){var u=false,x=this,t=x.CLASSES,w,s,v;if(!x._hasRendered){return;}s=x.get("navigation");v=x._firstItem+x.get("numVisible");if(s.prev){if(x.get("numItems")===0||x._firstItem===0){if(x.get("numItems")===0||!x.get("isCircular")){c.removeListener(s.prev,"click",g);e.addClass(s.prev,t.FIRST_NAV_DISABLED);for(w=0;w<x._navBtns.prev.length;w++){x._navBtns.prev[w].setAttribute("disabled","true");}x._prevEnabled=false;}else{u=!x._prevEnabled;}}else{u=!x._prevEnabled;}if(u){c.on(s.prev,"click",g,x);e.removeClass(s.prev,t.FIRST_NAV_DISABLED);for(w=0;w<x._navBtns.prev.length;w++){x._navBtns.prev[w].removeAttribute("disabled");}x._prevEnabled=true;}}u=false;if(s.next){if(v>=x.get("numItems")){if(!x.get("isCircular")){c.removeListener(s.next,"click",l);e.addClass(s.next,t.DISABLED);for(w=0;w<x._navBtns.next.length;w++){x._navBtns.next[w].setAttribute("disabled","true");}x._nextEnabled=false;}else{u=!x._nextEnabled;}}else{u=!x._nextEnabled;}if(u){c.on(s.next,"click",l,x);e.removeClass(s.next,t.DISABLED);for(w=0;w<x._navBtns.next.length;w++){x._navBtns.next[w].removeAttribute("disabled");}x._nextEnabled=true;}}x.fireEvent(I,{next:x._nextEnabled,prev:x._prevEnabled});}function R(u){var v=this,s,t;if(!v._hasRendered){return;}t=v.get("numVisible");if(!q.isNumber(u)){u=Math.ceil(v.get("selectedItem")/t);}s=Math.ceil(v.get("numItems")/t);v._pages.num=s;v._pages.cur=u;if(s>v.CONFIG.MAX_PAGER_BUTTONS){v._updatePagerMenu();}else{v._updatePagerButtons();}}function M(s,t){switch(t){case"height":return d(s,"marginTop")+d(s,"marginBottom")+d(s,"paddingTop")+d(s,"paddingBottom")+d(s,"borderTopWidth")+d(s,"borderBottomWidth");case"width":return d(s,"marginLeft")+d(s,"marginRight")+d(s,"paddingLeft")+d(s,"paddingRight")+d(s,"borderLeftWidth")+d(s,"borderRightWidth");default:break;}return d(s,t);}function A(u){var t=this,s=t._rows;if(!q.isObject(u)){return;}if(s){t._indexRows();}switch(u.ev){case S:t._syncUiForItemAdd(u);break;case p:t._syncUiForItemRemove(u);break;case Q:t._syncUiForItemReplace(u);break;case L:t._syncUiForLazyLoading(u);break;}t.fireEvent(K);}function E(v,t){var x=this,w=x.get("currentPage"),u,s=x.get("numVisible");u=parseInt(x._firstItem/s,10);if(u!=w){x.setAttributeConfig("currentPage",{value:u});x.fireEvent(i,u);}if(x.get("selectOnScroll")){if(x.get("selectedItem")!=x._selectedItem){x.set("selectedItem",x._selectedItem);}}clearTimeout(x._autoPlayTimer);delete x._autoPlayTimer;if(x.isAutoPlayOn()){x.startAutoPlay();}x.fireEvent(F,{first:x._firstItem,last:t},x);}U.getById=function(s){return T[s]?T[s].object:false;
};YAHOO.extend(U,YAHOO.util.Element,{_rows:null,_cols:null,_animObj:null,_carouselEl:null,_clipEl:null,_firstItem:0,_hasFocus:false,_hasRendered:false,_isAnimationInProgress:false,_isAutoPlayInProgress:false,_itemsTable:null,_navBtns:null,_navEl:null,_nextEnabled:true,_pages:null,_pagination:{},_prevEnabled:true,_recomputeSize:true,CLASSES:{BUTTON:"yui-carousel-button",CAROUSEL:"yui-carousel",CAROUSEL_EL:"yui-carousel-element",CONTAINER:"yui-carousel-container",CONTENT:"yui-carousel-content",DISABLED:"yui-carousel-button-disabled",FIRST_NAV:" yui-carousel-first-button",FIRST_NAV_DISABLED:"yui-carousel-first-button-disabled",FIRST_PAGE:"yui-carousel-nav-first-page",FOCUSSED_BUTTON:"yui-carousel-button-focus",HORIZONTAL:"yui-carousel-horizontal",ITEM_LOADING:"yui-carousel-item-loading",MIN_WIDTH:"yui-carousel-min-width",NAVIGATION:"yui-carousel-nav",NEXT_NAV:" yui-carousel-next-button",NEXT_PAGE:"yui-carousel-next",NAV_CONTAINER:"yui-carousel-buttons",PAGINATION:"yui-carousel-pagination",PAGE_FOCUS:"yui-carousel-nav-page-focus",PREV_PAGE:"yui-carousel-prev",SELECTED_ITEM:"yui-carousel-item-selected",SELECTED_NAV:"yui-carousel-nav-page-selected",VERTICAL:"yui-carousel-vertical",MULTI_ROW:"yui-carousel-multi-row",ROW:"yui-carousel-row",VERTICAL_CONTAINER:"yui-carousel-vertical-container",VISIBLE:"yui-carousel-visible"},CONFIG:{FIRST_VISIBLE:0,HORZ_MIN_WIDTH:180,MAX_PAGER_BUTTONS:5,VERT_MIN_WIDTH:115,NUM_VISIBLE:3},STRINGS:{ITEM_LOADING_CONTENT:"Loading",NEXT_BUTTON_TEXT:"Next Page",PAGER_PREFIX_TEXT:"Go to page ",PREVIOUS_BUTTON_TEXT:"Previous Page"},addItem:function(z,t){var y=this,AB=y._rows,v,u,s,AA=0,x,w=y.get("numItems");if(!z){return false;}if(q.isString(z)||z.nodeName){u=z.nodeName?z.innerHTML:z;}else{if(q.isObject(z)){u=z.content;}else{return false;}}v=z.className||"";s=z.id?z.id:e.generateId();if(q.isUndefined(t)){y._itemsTable.items.push({item:u,className:v,id:s});x=y._itemsTable.items.length-1;}else{if(t<0||t>w){return false;}if(!y._itemsTable.items[t]){y._itemsTable.items[t]=undefined;AA=1;}y._itemsTable.items.splice(t,AA,{item:u,className:v,id:s});}y._itemsTable.numItems++;if(w<y._itemsTable.items.length){y.set("numItems",y._itemsTable.items.length);}y.fireEvent(S,{pos:t,ev:S,newPos:x});return true;},addItems:function(s){var t,v,u=true;if(!q.isArray(s)){return false;}for(t=0,v=s.length;t<v;t++){if(this.addItem(s[t][0],s[t][1])===false){u=false;}}return u;},blur:function(){this._carouselEl.blur();this.fireEvent(B);},clearItems:function(){var s=this,t=s.get("numItems");while(t>0){if(!s.removeItem(0)){}if(s._itemsTable.numItems===0){s.set("numItems",0);break;}t--;}s.fireEvent(h);},focus:function(){var AB=this,w,x,y,v,AA,AC,t,u,s;if(!AB._hasRendered){return;}if(AB.isAnimating()){return;}s=AB.get("selectedItem");AC=AB.get("numVisible");t=AB.get("selectOnScroll");u=(s>=0)?AB.getItem(s):null;w=AB.get("firstVisible");AA=w+AC-1;y=(s<w||s>AA);x=(u&&u.id)?e.get(u.id):null;v=AB._itemsTable;if(!t&&y){x=(v&&v.items&&v.items[w])?e.get(v.items[w].id):null;}if(x){try{x.focus();}catch(z){}}AB.fireEvent(X);},hide:function(){var s=this;if(s.fireEvent(b)!==false){s.removeClass(s.CLASSES.VISIBLE);s.fireEvent(a);}},init:function(v,t){var w=this,s=v,x=false,u;if(!v){return;}w._hasRendered=false;w._navBtns={prev:[],next:[]};w._pages={el:null,num:0,cur:0};w._pagination={};w._itemsTable={loading:{},numItems:0,items:[],size:0};if(q.isString(v)){v=e.get(v);}else{if(!v.nodeName){return;}}U.superclass.init.call(w,v,t);u=w.get("selectedItem");if(u>0){w.set("firstVisible",D.call(w,u));}if(v){if(!v.id){v.setAttribute("id",e.generateId());}x=w._parseCarousel(v);if(!x){w._createCarousel(s);}}else{v=w._createCarousel(s);}s=v.id;w.initEvents();if(x){w._parseCarouselItems();}if(u>0){o.call(w,u,0);}if(!t||typeof t.isVertical=="undefined"){w.set("isVertical",false);}w._parseCarouselNavigation(v);w._navEl=w._setupCarouselNavigation();T[s]={object:w};w._loadItems(Math.min(w.get("firstVisible")+w.get("numVisible"),w.get("numItems"))-1);},initAttributes:function(s){var t=this;s=s||{};U.superclass.initAttributes.call(t,s);t.setAttributeConfig("carouselEl",{validator:q.isString,value:s.carouselEl||"OL"});t.setAttributeConfig("carouselItemEl",{validator:q.isString,value:s.carouselItemEl||"LI"});t.setAttributeConfig("currentPage",{readOnly:true,value:0});t.setAttributeConfig("firstVisible",{method:t._setFirstVisible,validator:t._validateFirstVisible,value:s.firstVisible||t.CONFIG.FIRST_VISIBLE});t.setAttributeConfig("selectOnScroll",{validator:q.isBoolean,value:s.selectOnScroll||true});t.setAttributeConfig("numVisible",{setter:t._numVisibleSetter,method:t._setNumVisible,validator:t._validateNumVisible,value:s.numVisible||t.CONFIG.NUM_VISIBLE});t.setAttributeConfig("numItems",{method:t._setNumItems,validator:t._validateNumItems,value:t._itemsTable.numItems});t.setAttributeConfig("scrollIncrement",{validator:t._validateScrollIncrement,value:s.scrollIncrement||1});t.setAttributeConfig("selectedItem",{setter:t._selectedItemSetter,method:t._setSelectedItem,validator:q.isNumber,value:-1});t.setAttributeConfig("revealAmount",{method:t._setRevealAmount,validator:t._validateRevealAmount,value:s.revealAmount||0});t.setAttributeConfig("isCircular",{validator:q.isBoolean,value:s.isCircular||false});t.setAttributeConfig("isVertical",{method:t._setOrientation,validator:q.isBoolean,value:s.isVertical||false});t.setAttributeConfig("navigation",{method:t._setNavigation,validator:t._validateNavigation,value:s.navigation||{prev:null,next:null,page:null}});t.setAttributeConfig("animation",{validator:t._validateAnimation,value:s.animation||{speed:0,effect:null}});t.setAttributeConfig("autoPlay",{validator:q.isNumber,value:s.autoPlay||0});t.setAttributeConfig("autoPlayInterval",{validator:q.isNumber,value:s.autoPlayInterval||0});t.setAttributeConfig("numPages",{readOnly:true,getter:t._getNumPages});t.setAttributeConfig("lastVisible",{readOnly:true,getter:t._getLastVisible});},initEvents:function(){var u=this,t=u.CLASSES,s;u.on("keydown",u._keyboardEventHandler);
u.on(F,m);u.on(S,A);u.on(p,A);u.on(Q,A);u.on(C,function(){if(u._hasFocus){u.focus();}});u.on(L,A);u.on(h,function(v){u.scrollTo(0);m.call(u);R.call(u);});u.on(i,R,u);u.on(H,function(v){if(u.get("selectedItem")===null||u.get("selectedItem")<0){u.set("selectedItem",u.get("firstVisible"));}m.call(u,v);R.call(u,v);u._setClipContainerSize();u.show();});u.on("selectedItemChange",function(v){o.call(u,v.newValue,v.prevValue);if(v.newValue>=0){u._updateTabIndex(u.getElementForItem(v.newValue));}u.fireEvent(C,v.newValue);});u.on(K,function(v){m.call(u,v);R.call(u,v);});u.on("firstVisibleChange",function(v){if(!u.get("selectOnScroll")){if(v.newValue>=0){u._updateTabIndex(u.getElementForItem(v.newValue));}}});u.on("click",function(v){if(u.isAutoPlayOn()){u.stopAutoPlay();}u._itemClickHandler(v);u._pagerClickHandler(v);});c.onFocus(u.get("element"),function(v,x){var w=c.getTarget(v);if(w&&w.nodeName.toUpperCase()=="A"&&e.getAncestorByClassName(w,t.NAVIGATION)){if(s){e.removeClass(s,t.PAGE_FOCUS);}s=w.parentNode;e.addClass(s,t.PAGE_FOCUS);}else{if(s){e.removeClass(s,t.PAGE_FOCUS);}}x._hasFocus=true;x._updateNavButtons(c.getTarget(v),true);},u);c.onBlur(u.get("element"),function(v,w){w._hasFocus=false;w._updateNavButtons(c.getTarget(v),false);},u);},isAnimating:function(){return this._isAnimationInProgress;},isAutoPlayOn:function(){return this._isAutoPlayInProgress;},getElementForItem:function(s){var t=this;if(s<0||s>=t.get("numItems")){return null;}if(t._itemsTable.items[s]){return e.get(t._itemsTable.items[s].id);}return null;},getElementForItems:function(){var u=this,t=[],s;for(s=0;s<u._itemsTable.numItems;s++){t.push(u.getElementForItem(s));}return t;},getItem:function(s){var t=this;if(s<0||s>=t.get("numItems")){return null;}if(t._itemsTable.numItems>s){if(!q.isUndefined(t._itemsTable.items[s])){return t._itemsTable.items[s];}}return null;},getItems:function(s){return this._itemsTable.items;},getRows:function(){return this._rows;},getCols:function(){return this._cols;},getItemPositionById:function(w){var u=this,v=u.get("numItems"),s=0,t;while(s<v){t=u._itemsTable.items[s]||{};if(t.id==w){return s;}s++;}return -1;},getVisibleItems:function(){var u=this,s=u.get("firstVisible"),v=s+u.get("numVisible"),t=[];while(s<v){t.push(u.getElementForItem(s));s++;}return t;},removeItem:function(t){var w=this,v=w._rows,u,s=w.get("numItems");if(t<0||t>=s){return false;}u=w._itemsTable.items.splice(t,1);if(u&&u.length==1){w._itemsTable.numItems--;w.set("numItems",s-1);w.fireEvent(p,{item:u[0],pos:t,ev:p});return true;}return false;},replaceItem:function(AA,v){var z=this,AB=z._rows,x,w,u,y=z.get("numItems"),t,s=AA;if(!AA){return false;}if(q.isString(AA)||AA.nodeName){w=AA.nodeName?AA.innerHTML:AA;}else{if(q.isObject(AA)){w=AA.content;}else{return false;}}if(q.isUndefined(v)){return false;}else{if(v<0||v>=y){return false;}t=z._itemsTable.items[v];if(!t){t=z._itemsTable.loading[v];z._itemsTable.items[v]=undefined;}z._itemsTable.items.splice(v,1,{item:w,className:AA.className||"",id:e.generateId()});s=z._itemsTable.items[v];}z.fireEvent(Q,{newItem:s,oldItem:t,pos:v,ev:Q});return true;},replaceItems:function(s){var t,v,u=true;if(!q.isArray(s)){return false;}for(t=0,v=s.length;t<v;t++){if(this.replaceItem(s[t][0],s[t][1])===false){u=false;}}return u;},render:function(t){var v=this,s=v.CLASSES,u=v._rows;v.addClass(s.CAROUSEL);if(!v._clipEl){v._clipEl=v._createCarouselClip();v._clipEl.appendChild(v._carouselEl);}if(t){v.appendChild(v._clipEl);v.appendTo(t);}else{if(!e.inDocument(v.get("element"))){return false;}v.appendChild(v._clipEl);}if(u){e.addClass(v._clipEl,s.MULTI_ROW);}if(v.get("isVertical")){v.addClass(s.VERTICAL);}else{v.addClass(s.HORIZONTAL);}if(v.get("numItems")<1){return false;}v._refreshUi();if(u){v._indexRows();}return true;},scrollBackward:function(){var s=this;s.scrollTo(s._firstItem-s.get("scrollIncrement"));},scrollForward:function(){var s=this;s.scrollTo(s._firstItem+s.get("scrollIncrement"));},scrollPageBackward:function(){var t=this,s=t._firstItem-t.get("numVisible");if(t.get("selectOnScroll")){t._selectedItem=t._getSelectedItem(s);}else{s=t._getValidIndex(s);}t.scrollTo(s);},scrollPageForward:function(){var t=this,s=t._firstItem+t.get("numVisible");if(t.get("selectOnScroll")){t._selectedItem=t._getSelectedItem(s);}else{s=t._getValidIndex(s);}t.scrollTo(s);},scrollTo:function(AJ,AH){var AG=this,u,AI,z,AB,AC,AK,AL,AM,AD,v,AA,AF,s,w,t,x,AE,y,AN;if(q.isUndefined(AJ)||AJ==AG._firstItem||AG.isAnimating()){return;}AI=AG.get("animation");z=AG.get("isCircular");AB=AG.get("isVertical");v=AG._cols;AA=AG._rows;AM=AG._firstItem;AF=AG.get("numItems");s=AG.get("numVisible");t=AG.get("currentPage");AN=function(){if(AG.isAutoPlayOn()){AG.stopAutoPlay();}};if(AJ<0){if(z){AJ=AF+AJ;}else{AN.call(AG);return;}}else{if(AF>0&&AJ>AF-1){if(AG.get("isCircular")){AJ=AF-AJ;}else{AN.call(AG);return;}}}AL=(AG._firstItem>AJ)?"backward":"forward";AE=AM+s;AE=(AE>AF-1)?AF-1:AE;x=AG.fireEvent(j,{dir:AL,first:AM,last:AE});if(x===false){return;}AG.fireEvent(J,{page:t});AD=AJ+s-1;AG._loadItems(AD>AF-1?AF-1:AD);AK=0-AJ;if(AA){if(AB){AK=parseInt(AK/v,10);}else{AK=parseInt(AK/AA,10);}}y=0;while(AK<0&&y<AJ+s-1&&y<AF){if(q.isUndefined(AG._itemsTable.items[y])&&q.isUndefined(AG._itemsTable.loading[y])){AK++;}y+=AA?AA:1;}AG._firstItem=AJ;AG.set("firstVisible",AJ);AE=AJ+s;AE=(AE>AF-1)?AF-1:AE;w=k.call(AG,AK);u=AI.speed>0;if(u){AG._animateAndSetCarouselOffset(w,AJ,AE,AH);}else{AG._setCarouselOffset(w);E.call(AG,AJ,AE);}},getPageForItem:function(s){return Math.ceil((s+1)/parseInt(this.get("numVisible"),10));},selectPreviousItem:function(){var u=this,t=0,s=u.get("selectedItem");if(s==this._firstItem){t=s-u.get("numVisible");u._selectedItem=u._getSelectedItem(s-1);u.scrollTo(t);}else{t=u.get("selectedItem")-u.get("scrollIncrement");u.set("selectedItem",u._getSelectedItem(t));}},selectNextItem:function(){var t=this,s=0;s=t.get("selectedItem")+t.get("scrollIncrement");t.set("selectedItem",t._getSelectedItem(s));},show:function(){var t=this,s=t.CLASSES;if(t.fireEvent(Y)!==false){t.addClass(s.VISIBLE);
t.fireEvent(V);}},startAutoPlay:function(){var s=this,t;if(q.isUndefined(s._autoPlayTimer)){t=s.get("autoPlayInterval");if(t<=0){return;}s._isAutoPlayInProgress=true;s.fireEvent(Z);s._autoPlayTimer=setTimeout(function(){s._autoScroll();},t);}},stopAutoPlay:function(){var s=this;if(!q.isUndefined(s._autoPlayTimer)){clearTimeout(s._autoPlayTimer);delete s._autoPlayTimer;s._isAutoPlayInProgress=false;s.fireEvent(r);}},updatePagination:function(){var AA=this,y=AA._pagination;if(!y.el){return false;}var x=AA.get("numItems"),AB=AA.get("numVisible"),v=AA.get("firstVisible")+1,w=AA.get("currentPage")+1,s=AA.get("numPages"),u={"numVisible":AB,"numPages":s,"numItems":x,"selectedItem":AA.get("selectedItem")+1,"currentPage":w,"firstVisible":v,"lastVisible":AA.get("lastVisible")},t=y.callback||{},z=t.scope&&t.obj?t.obj:AA;y.el.innerHTML=q.isFunction(t.fn)?t.fn.apply(z,[y.template,u]):YAHOO.lang.substitute(y.template,u);},registerPagination:function(t,v,s){var u=this;u._pagination.template=t;u._pagination.callback=s||{};if(!u._pagination.el){u._pagination.el=W("DIV",{className:u.CLASSES.PAGINATION});if(v=="before"){u._navEl.insertBefore(u._pagination.el,u._navEl.firstChild);}else{u._navEl.appendChild(u._pagination.el);}u.on("itemSelected",u.updatePagination);u.on("pageChange",u.updatePagination);}u.updatePagination();},toString:function(){return P+(this.get?" (#"+this.get("id")+")":"");},_animateAndSetCarouselOffset:function(x,v,t){var w=this,u=w.get("animation"),s=null;if(w.get("isVertical")){s=new YAHOO.util.Motion(w._carouselEl,{top:{to:x}},u.speed,u.effect);}else{s=new YAHOO.util.Motion(w._carouselEl,{left:{to:x}},u.speed,u.effect);}w._isAnimationInProgress=true;s.onComplete.subscribe(w._animationCompleteHandler,{scope:w,item:v,last:t});s.animate();},_animationCompleteHandler:function(s,t,u){u.scope._isAnimationInProgress=false;E.call(u.scope,u.item,u.last);},_autoScroll:function(){var t=this,u=t._firstItem,s;if(u>=t.get("numItems")-1){if(t.get("isCircular")){s=0;}else{t.stopAutoPlay();}}else{s=u+t.get("numVisible");}t._selectedItem=t._getSelectedItem(s);t.scrollTo.call(t,s);},_createCarousel:function(t){var v=this,s=v.CLASSES,u=e.get(t);if(!u){u=W("DIV",{className:s.CAROUSEL,id:t});}if(!v._carouselEl){v._carouselEl=W(v.get("carouselEl"),{className:s.CAROUSEL_EL});}return u;},_createCarouselClip:function(){return W("DIV",{className:this.CLASSES.CONTENT});},_createCarouselItem:function(v){var s,u=this,t=n.call(u,v.pos);v.styles=v.styles||{};for(s in t){if(t.hasOwnProperty(s)){v.styles[s]=t[s];}}return W(u.get("carouselItemEl"),{className:v.className,styles:v.styles,content:v.content,id:v.id});},_getValidIndex:function(u){var x=this,s=x.get("isCircular"),v=x.get("numItems"),w=x.get("numVisible"),t=v-1;if(u<0){u=s?Math.ceil(v/w)*w+u:0;}else{if(u>t){u=s?0:t;}}return u;},_getSelectedItem:function(w){var v=this,s=v.get("isCircular"),u=v.get("numItems"),t=u-1;if(w<0){if(s){w=u+w;}else{w=v.get("selectedItem");}}else{if(w>t){if(s){w=w-u;}else{w=v.get("selectedItem");}}}return w;},_itemClickHandler:function(v){var y=this,w=y.get("carouselItemEl"),s=y.get("element"),t,u,x=c.getTarget(v);while(x&&x!=s&&x.id!=y._carouselEl){t=x.nodeName;if(t.toUpperCase()==w){break;}x=x.parentNode;}if((u=y.getItemPositionById(x.id))>=0){y.set("selectedItem",y._getSelectedItem(u));y.focus();}},_keyboardEventHandler:function(u){var v=this,t=c.getCharCode(u),s=false;if(v.isAnimating()){return;}switch(t){case 37:case 38:v.selectPreviousItem();s=true;break;case 39:case 40:v.selectNextItem();s=true;break;case 33:v.scrollPageBackward();s=true;break;case 34:v.scrollPageForward();s=true;break;}if(s){if(v.isAutoPlayOn()){v.stopAutoPlay();}c.preventDefault(u);}},_loadItems:function(u){var x=this,t=x.get("numItems"),v=x.get("numVisible"),w=x.get("revealAmount"),y=x._itemsTable.items.length,s=x.get("lastVisible");if(y>u&&u+1>=v){y=u%v||u==s?u-u%v:u-v+1;}if(w&&u<t-1){u++;}if(u>=y&&(!x.getItem(y)||!x.getItem(u))){x.fireEvent(L,{ev:L,first:y,last:u,num:u-y+1});}},_pagerClickHandler:function(t){var w=this,u,y,v=c.getTarget(t),x;function s(AB){var AA=w.get("carouselItemEl"),z=AB.nodeName.toUpperCase();if(z==AA.toUpperCase()){AB=e.getChildrenBy(AB,function(AC){return AC.href||AC.value;});if(AB&&AB[0]){AB=AB[0];}}else{if(z=="EM"){AB=AB.parentNode;}}return AB.href||AB.value?AB:null;}if(v){v=s(v);if(!v){return;}x=v.href||v.value;if(q.isString(x)&&x){y=x.lastIndexOf("#");u=parseInt(x.substring(y+1),10);if(u!=-1){x=(u-1)*w.get("numVisible");w._selectedItem=x;w.scrollTo(x);if(!v.value){w.focus();}c.preventDefault(t);}}}},_parseCarousel:function(u){var x=this,y,s,t,w,v;s=x.CLASSES;t=x.get("carouselEl");w=false;for(y=u.firstChild;y;y=y.nextSibling){if(y.nodeType==1){v=y.nodeName;if(v.toUpperCase()==t){x._carouselEl=y;e.addClass(x._carouselEl,x.CLASSES.CAROUSEL_EL);w=true;}}}return w;},_parseCarouselItems:function(){var z=this,AB=z.CLASSES,w=0,AA,s,u,v,t,x=z.get("firstVisible"),y=z._carouselEl;AA=z._rows;u=z.get("carouselItemEl");for(s=y.firstChild;s;s=s.nextSibling){if(s.nodeType==1){t=s.nodeName;if(t.toUpperCase()==u){if(s.id){v=s.id;}else{v=e.generateId();s.setAttribute("id",v);}z.addItem(s,x);x++;}}}},_indexRows:function(){var AE=this,AB=AE.get("isVertical"),AF=AE.get("numVisible"),AG=AE._itemsTable,v=AG.loading,z=AG.items,x=z.length,AI=AE._rows,AA=AE._cols,AD,AC,s,AH,t,u,y;if(AI&&AA){AH=0;t=0;u=O.call(AE,"height");y=O.call(AE,"width");for(var w=0;w<x;w++){AD=z[w]?e.get(z[w].id):v[w];if(AD){if(AB){t++;if(w%AA===0){AC=Math.floor(w/AF);t=0;if(w!==0){AH++;}}}else{t++;if(w%AA===0){AC=Math.floor(w/AF);t=AC*AA;AH++;}if(w%AF===0){AH=0;}}z[w].styles={left:(t*y)+"px",top:(AH*u)+"px"};}}}},_parseCarouselNavigation:function(y){var z=this,x,AA=z.CLASSES,t,w,v,s,u=false;s=e.getElementsByClassName(AA.PREV_PAGE,"*",y);if(s.length>0){for(w in s){if(s.hasOwnProperty(w)){t=s[w];if(t.nodeName=="INPUT"||t.nodeName=="BUTTON"||t.nodeName=="A"){z._navBtns.prev.push(t);}else{v=t.getElementsByTagName("INPUT");if(q.isArray(v)&&v.length>0){z._navBtns.prev.push(v[0]);}else{v=t.getElementsByTagName("BUTTON");
if(q.isArray(v)&&v.length>0){z._navBtns.prev.push(v[0]);}}}}}x={prev:s};}s=e.getElementsByClassName(AA.NEXT_PAGE,"*",y);if(s.length>0){for(w in s){if(s.hasOwnProperty(w)){t=s[w];if(t.nodeName=="INPUT"||t.nodeName=="BUTTON"||t.nodeName=="A"){z._navBtns.next.push(t);}else{v=t.getElementsByTagName("INPUT");if(q.isArray(v)&&v.length>0){z._navBtns.next.push(v[0]);}else{v=t.getElementsByTagName("BUTTON");if(q.isArray(v)&&v.length>0){z._navBtns.next.push(v[0]);}}}}}if(x){x.next=s;}else{x={next:s};}}if(x){z.set("navigation",x);u=true;}return u;},_refreshUi:function(){var w=this,t,x,u,y,s,v;if(w._itemsTable.numItems<1){return;}v=O.call(w,x?"height":"width");u=w._itemsTable.items[0].id;v=x?d(u,"width"):d(u,"height");e.setStyle(w._carouselEl,x?"width":"height",v+"px");w._hasRendered=true;w.fireEvent(H);},_setCarouselOffset:function(u){var s=this,t;t=s.get("isVertical")?"top":"left";e.setStyle(s._carouselEl,t,u+"px");},_setupCarouselNavigation:function(){var x=this,v,t,s,z,w,y,u;s=x.CLASSES;w=e.getElementsByClassName(s.NAVIGATION,"DIV",x.get("element"));if(w.length===0){w=W("DIV",{className:s.NAVIGATION});x.insertBefore(w,e.getFirstChild(x.get("element")));}else{w=w[0];}x._pages.el=W("UL");w.appendChild(x._pages.el);z=x.get("navigation");if(q.isString(z.prev)||q.isArray(z.prev)){if(q.isString(z.prev)){z.prev=[z.prev];}for(v in z.prev){if(z.prev.hasOwnProperty(v)){x._navBtns.prev.push(e.get(z.prev[v]));}}}else{u=W("SPAN",{className:s.BUTTON+s.FIRST_NAV});e.setStyle(u,"visibility","visible");v=e.generateId();u.innerHTML='<button type="button" '+'id="'+v+'" name="'+x.STRINGS.PREVIOUS_BUTTON_TEXT+'">'+x.STRINGS.PREVIOUS_BUTTON_TEXT+"</button>";w.appendChild(u);v=e.get(v);x._navBtns.prev=[v];t={prev:[u]};}if(q.isString(z.next)||q.isArray(z.next)){if(q.isString(z.next)){z.next=[z.next];}for(v in z.next){if(z.next.hasOwnProperty(v)){x._navBtns.next.push(e.get(z.next[v]));}}}else{y=W("SPAN",{className:s.BUTTON+s.NEXT_NAV});e.setStyle(y,"visibility","visible");v=e.generateId();y.innerHTML='<button type="button" '+'id="'+v+'" name="'+x.STRINGS.NEXT_BUTTON_TEXT+'">'+x.STRINGS.NEXT_BUTTON_TEXT+"</button>";w.appendChild(y);v=e.get(v);x._navBtns.next=[v];if(t){t.next=[y];}else{t={next:[y]};}}if(t){x.set("navigation",t);}return w;},_setClipContainerSize:function(s,u){var AA=this,y=AA.get("isVertical"),AC=AA._rows,w=AA._cols,z=AA.get("revealAmount"),t=O.call(AA,"height"),v=O.call(AA,"width"),AB,x;s=s||AA._clipEl;if(AC){AB=t*AC;x=v*w;}else{u=u||AA.get("numVisible");if(y){AB=t*u;}else{x=v*u;}}AA._recomputeSize=(AB===0);if(AA._recomputeSize){AA._hasRendered=false;return;}z=N.call(AA);if(y){AB+=(z*2);}else{x+=(z*2);}if(y){AB+=M(AA._carouselEl,"height");e.setStyle(s,"height",AB+"px");if(w){x+=M(AA._carouselEl,"width");e.setStyle(s,"width",x+(0)+"px");}}else{x+=M(AA._carouselEl,"width");e.setStyle(s,"width",x+"px");if(AC){AB+=M(AA._carouselEl,"height");e.setStyle(s,"height",AB+"px");}}AA._setContainerSize(s);},_setContainerSize:function(t,u){var x=this,s=x.CONFIG,AA=x.CLASSES,w,z,v,y;w=x.get("isVertical");z=x._rows;v=x._cols;t=t||x._clipEl;u=u||(w?"height":"width");y=parseFloat(e.getStyle(t,u),10);y=q.isNumber(y)?y:0;if(w){y+=M(x._carouselEl,"height")+d(x._navEl,"height");}else{y+=M(x._carouselEl,"width");}if(!w){if(y<s.HORZ_MIN_WIDTH){y=s.HORZ_MIN_WIDTH;x.addClass(AA.MIN_WIDTH);}}x.setStyle(u,y+"px");if(w){y=O.call(x,"width");if(v){y=y*v;}e.setStyle(x._carouselEl,"width",y+"px");if(y<s.VERT_MIN_WIDTH){y=s.VERT_MIN_WIDTH;x.addClass(AA.MIN_WIDTH);}x.setStyle("width",y+"px");}else{if(z){y=O.call(x,"height");y=y*z;e.setStyle(x._carouselEl,"height",y+"px");}}},_setFirstVisible:function(t){var s=this;if(t>=0&&t<s.get("numItems")){s.scrollTo(t);}else{t=s.get("firstVisible");}return t;},_setNavigation:function(s){var t=this;if(s.prev){c.on(s.prev,"click",g,t);}if(s.next){c.on(s.next,"click",l,t);}},_setNumVisible:function(t){var s=this;s._setClipContainerSize(s._clipEl,t);},_numVisibleSetter:function(u){var t=this,s=u;if(q.isArray(u)){t._cols=u[0];t._rows=u[1];s=u[0]*u[1];}return s;},_selectedItemSetter:function(t){var s=this;return(t<s.get("numItems"))?t:0;},_setNumItems:function(u){var t=this,s=t._itemsTable.numItems;if(q.isArray(t._itemsTable.items)){if(t._itemsTable.items.length!=s){s=t._itemsTable.items.length;t._itemsTable.numItems=s;}}if(u<s){while(s>u){t.removeItem(s-1);s--;}}return u;},_setOrientation:function(u){var t=this,s=t.CLASSES;if(u){t.replaceClass(s.HORIZONTAL,s.VERTICAL);}else{t.replaceClass(s.VERTICAL,s.HORIZONTAL);}f={};return u;},_setRevealAmount:function(t){var s=this;if(t>=0&&t<=100){t=parseInt(t,10);t=q.isNumber(t)?t:0;s._setClipContainerSize();}else{t=s.get("revealAmount");}return t;},_setSelectedItem:function(s){this._selectedItem=s;},_getNumPages:function(){return Math.ceil(parseInt(this.get("numItems"),10)/parseInt(this.get("numVisible"),10));},_getLastVisible:function(){var s=this;return s.get("currentPage")+1==s.get("numPages")?s.get("numItems")-1:s.get("firstVisible")+s.get("numVisible");},_syncUiForItemAdd:function(v){var w,AB=this,y=AB._carouselEl,s,AC,u=AB._itemsTable,t,x,z,AA;x=q.isUndefined(v.pos)?v.newPos||u.numItems-1:v.pos;if(!q.isUndefined(u.items[x])){AC=u.items[x];AA=n.call(AB,x);AC.styles=AC.styles||{};for(w in AA){if(AA.hasOwnProperty(w)){AC.styles[w]=AA[w];}}if(AC){if(AC.id){t=e.get(AC.id);if(AC.styles){G(t,AC.styles);}}}}if(!t){s=AB._createCarouselItem({className:AC.className,styles:AC.styles,content:AC.item,id:AC.id,pos:x});if(q.isUndefined(v.pos)){if(!q.isUndefined(u.loading[x])){t=u.loading[x];}if(t){y.replaceChild(s,t);delete u.loading[x];}else{y.appendChild(s);}}else{if(!q.isUndefined(u.items[v.pos+1])){z=e.get(u.items[v.pos+1].id);}if(z){y.insertBefore(s,z);}else{}}}else{if(q.isUndefined(v.pos)){if(!e.isAncestor(AB._carouselEl,t)){y.appendChild(t);}}else{if(!e.isAncestor(y,t)){if(!q.isUndefined(u.items[v.pos+1])){y.insertBefore(t,e.get(u.items[v.pos+1].id));}}}}if(!AB._hasRendered){AB._refreshUi();}if(AB.get("selectedItem")<0){AB.set("selectedItem",AB.get("firstVisible"));}},_syncUiForItemReplace:function(y){var x=this,u=x._carouselEl,s=x._itemsTable,z=y.pos,w=y.newItem,t=y.oldItem,v;
v=x._createCarouselItem({className:w.className,styles:w.styles,content:w.item,id:w.id,pos:z});if(v&&t){c.purgeElement(t,true);u.replaceChild(v,t);if(!q.isUndefined(s.loading[z])){s.numItems++;delete s.loading[z];}}if(!x._hasRendered){x._refreshUi();}},_syncUiForItemRemove:function(x){var w=this,s=w._carouselEl,u,v,t,y;t=w.get("numItems");v=x.item;y=x.pos;if(v&&(u=e.get(v.id))){if(u&&e.isAncestor(s,u)){c.purgeElement(u,true);s.removeChild(u);}if(w.get("selectedItem")==y){y=y>=t?t-1:y;}}else{}},_syncUiForLazyLoading:function(w){var AA=this,y=AA._carouselEl,u=AA._itemsTable,x=u.items.length,z=u.items[w.last+1],s,t;if(!z&&w.last<x){t=w.first;do{z=u.items[t];t++;}while(t<x&&!z);}for(var v=w.first;v<=w.last;v++){if(q.isUndefined(u.loading[v])&&q.isUndefined(u.items[v])){s=AA._createCarouselItem({className:AA.CLASSES.ITEM_LOADING,content:AA.STRINGS.ITEM_LOADING_CONTENT,id:e.generateId(),pos:v});if(s){if(z){z=e.get(z.id);if(z){y.insertBefore(s,z);}else{}}else{y.appendChild(s);}}u.loading[v]=s;}}},_updateNavButtons:function(w,t){var u,s=this.CLASSES,x,v=w.parentNode;if(!v){return;}x=v.parentNode;if(w.nodeName.toUpperCase()=="BUTTON"&&e.hasClass(v,s.BUTTON)){if(t){if(x){u=e.getChildren(x);if(u){e.removeClass(u,s.FOCUSSED_BUTTON);}}e.addClass(v,s.FOCUSSED_BUTTON);}else{e.removeClass(v,s.FOCUSSED_BUTTON);}}},_updatePagerButtons:function(){var AA=this,y=AA.CLASSES,z=AA._pages.cur,s,x,v,AB,t=AA.get("numVisible"),w=AA._pages.num,u=AA._pages.el;if(w===0||!u){return;}e.setStyle(u,"visibility","hidden");while(u.firstChild){u.removeChild(u.firstChild);}for(v=0;v<w;v++){s=document.createElement("LI");if(v===0){e.addClass(s,y.FIRST_PAGE);}if(v==z){e.addClass(s,y.SELECTED_NAV);}x='<a href="#'+(v+1)+'" tabindex="0"><em>'+AA.STRINGS.PAGER_PREFIX_TEXT+" "+(v+1)+"</em></a>";s.innerHTML=x;u.appendChild(s);}e.setStyle(u,"visibility","visible");},_updatePagerMenu:function(){var z=this,y=z._pages.cur,t,w,AA,u=z.get("numVisible"),x=z._pages.num,v=z._pages.el,s;if(x===0){return;}s=document.createElement("SELECT");if(!s){return;}e.setStyle(v,"visibility","hidden");while(v.firstChild){v.removeChild(v.firstChild);}for(w=0;w<x;w++){t=document.createElement("OPTION");t.value="#"+w;t.innerHTML=z.STRINGS.PAGER_PREFIX_TEXT+" "+(w+1);if(w==y){t.setAttribute("selected","selected");}s.appendChild(t);}t=document.createElement("FORM");if(!t){}else{t.appendChild(s);v.appendChild(t);}e.setStyle(v,"visibility","visible");},_updateTabIndex:function(s){var t=this;if(s){if(t._focusableItemEl){t._focusableItemEl.tabIndex=-1;}t._focusableItemEl=s;s.tabIndex=0;}},_validateAnimation:function(s){var t=true;if(q.isObject(s)){if(s.speed){t=t&&q.isNumber(s.speed);}if(s.effect){t=t&&q.isFunction(s.effect);}else{if(!q.isUndefined(YAHOO.util.Easing)){s.effect=YAHOO.util.Easing.easeOut;}}}else{t=false;}return t;},_validateFirstVisible:function(u){var t=this,s=t.get("numItems");if(q.isNumber(u)){if(s===0&&u==s){return true;}else{return(u>=0&&u<s);}}return false;},_validateNavigation:function(s){var t;if(!q.isObject(s)){return false;}if(s.prev){if(!q.isArray(s.prev)){return false;}for(t in s.prev){if(s.prev.hasOwnProperty(t)){if(!q.isString(s.prev[t].nodeName)){return false;}}}}if(s.next){if(!q.isArray(s.next)){return false;}for(t in s.next){if(s.next.hasOwnProperty(t)){if(!q.isString(s.next[t].nodeName)){return false;}}}}return true;},_validateNumItems:function(s){return q.isNumber(s)&&(s>=0);},_validateNumVisible:function(s){var t=false;if(q.isNumber(s)){t=s>0&&s<=this.get("numItems");}else{if(q.isArray(s)){if(q.isNumber(s[0])&&q.isNumber(s[1])){t=s[0]*s[1]>0&&s.length==2;}}}return t;},_validateRevealAmount:function(s){var t=false;if(q.isNumber(s)){t=s>=0&&s<100;}return t;},_validateScrollIncrement:function(s){var t=false;if(q.isNumber(s)){t=(s>0&&s<this.get("numItems"));}return t;}});})();YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});