
YAHOO.widget.DataTable=function(elContainer,oColumnSet,oDataSource,oConfigs){var i,ok,elTable,elThead,elTbody;this._nIndex=YAHOO.widget.DataTable._nCount;this._sName="instance"+this._nIndex;this.id="yui-dt"+this._nIndex;this._oRecordSet=new YAHOO.widget.RecordSet();if(oConfigs&&(oConfigs.constructor!=Object)){oConfigs=null;}
if(oDataSource){if(oDataSource instanceof YAHOO.util.DataSource){this._oDataSource=oDataSource;}
else{return;}}
if(oColumnSet&&(oColumnSet instanceof YAHOO.widget.ColumnSet)){this._oColumnSet=oColumnSet;}
else{return;}
elContainer=YAHOO.util.Dom.get(elContainer);if(elContainer&&elContainer.tagName&&(elContainer.tagName.toLowerCase()=="div")){this._elContainer=elContainer;}
else{return;}
this._initTableEl();elTable=this._elTable;elThead=this._elThead;elTbody=this._elTbody;YAHOO.widget.DataTable.superclass.constructor.call(this,elContainer,oConfigs);oDataSource.sendRequest(this.get("initialRequest"),this.onDataReturnInitializeTable,this);YAHOO.util.Event.addListener(document,"click",this._onDocumentClick,this);YAHOO.util.Event.addListener(document,"keydown",this._onDocumentKeydown,this);YAHOO.util.Event.addListener(elTable,"mouseover",this._onTableMouseover,this);YAHOO.util.Event.addListener(elTable,"mouseout",this._onTableMouseout,this);YAHOO.util.Event.addListener(elTable,"mousedown",this._onTableMousedown,this);YAHOO.util.Event.addListener(elTable,"dblclick",this._onTableDblclick,this);YAHOO.util.Event.addListener(elThead,"click",this._onTheadClick,this);YAHOO.util.Event.addListener(elTbody,"click",this._onTbodyClick,this);YAHOO.util.Event.addListener(elThead,"keydown",this._onTheadKeydown,this);YAHOO.util.Event.addListener(elTbody,"keydown",this._onTbodyKeydown,this);YAHOO.util.Event.addListener(elTbody,"keyup",this._onTbodyKeyup,this);YAHOO.util.Event.addListener(elTbody,"keypress",this._onTbodyKeypress,this);YAHOO.util.Event.addListener(elContainer,"scroll",this._onScroll,this);YAHOO.util.Event.addListener(elTbody,"scroll",this._onScroll,this);this.on("headerLabelClickEvent",this.onEventSortColumn);var elEditor=document.createElement("div");elEditor.id="yui-dt-editor"+YAHOO.widget.DataTable._nCount;elEditor.style.display="none";YAHOO.util.Dom.addClass(elEditor,YAHOO.widget.DataTable.CLASS_EDITOR);elEditor=document.body.appendChild(elEditor);var oEditor={};oEditor.container=elEditor;this._oEditor=oEditor;this.on("columnEditorKeydownEvent",this.onColumnEditorKeydown);YAHOO.widget.DataTable._nCount++;this.fireEvent("initEvent");};if(YAHOO.util.Element){YAHOO.lang.extend(YAHOO.widget.DataTable,YAHOO.util.Element);}
else{}
if(YAHOO.util.EventProvider){}
else{}
YAHOO.widget.DataTable.prototype.initAttributes=function(oConfigs){oConfigs=oConfigs||{};YAHOO.widget.DataTable.superclass.initAttributes.call(this,oConfigs);this.setAttributeConfig("caption",{value:null,validator:YAHOO.lang.isString,method:function(sCaption){if(!this._elCaption){if(!this._elTable.firstChild){this._elCaption=this._elTable.appendChild(document.createElement("caption"));}
else{this._elCaption=this._elTable.insertBefore(document.createElement("caption"),this._elTable.firstChild);}}
this._elCaption.innerHTML=sCaption;}});this.setAttributeConfig("summary",{value:null,validator:YAHOO.lang.isString,method:function(sSummary){this._elTable.summary=sSummary;}});this.setAttributeConfig("selectionMode",{value:"standard",validator:YAHOO.lang.isString});this.setAttributeConfig("initialRequest",{value:"",validator:YAHOO.lang.isString});this.setAttributeConfig("sortedBy",{value:null,validator:function(oNewSortedBy){return(oNewSortedBy&&(oNewSortedBy.constructor==Object)&&oNewSortedBy.key);},method:function(oNewSortedBy){var oOldSortedBy=this.get("sortedBy");if(oOldSortedBy&&(oOldSortedBy.constructor==Object)&&oOldSortedBy.key){var oldColumn=this._oColumnSet.getColumn(oOldSortedBy.key);var oldThEl=this.getThEl(oldColumn);YAHOO.util.Dom.removeClass(oldThEl,YAHOO.widget.DataTable.CLASS_ASC);YAHOO.util.Dom.removeClass(oldThEl,YAHOO.widget.DataTable.CLASS_DESC);}
var column=(oNewSortedBy.column)?oNewSortedBy.column:this._oColumnSet.getColumn(oNewSortedBy.key);if(column){var newClass=(oNewSortedBy.dir&&(oNewSortedBy.dir!="asc"))?YAHOO.widget.DataTable.CLASS_DESC:YAHOO.widget.DataTable.CLASS_ASC;YAHOO.util.Dom.addClass(this.id+"-col"+column.getId(),newClass);}}});this.setAttributeConfig("paginator",{value:{containers:[],rowsPerPage:500,currentPage:1,pageLinks:0,pageLinksStart:1,dropdownOptions:[25,50,100,500],links:[],dropdowns:[]},validator:function(oNewPaginator){if(oNewPaginator&&(oNewPaginator.constructor==Object)){if((oNewPaginator.containers===undefined)||(oNewPaginator.containers===undefined)||(oNewPaginator.links===undefined)||(oNewPaginator.dropdowns===undefined)||(oNewPaginator.dropdownOptions===undefined)||(oNewPaginator.pageLinks===undefined)||(oNewPaginator.pageLinksStart===undefined)||(oNewPaginator.rowsPerPage===undefined)||(oNewPaginator.currentPage===undefined)){var oValidPaginator=this.get("paginator");for(var key in oNewPaginator){if(oValidPaginator.hasOwnProperty(key)){oValidPaginator[key]=oNewPaginator[key];}}
this._configs.paginator.value=oValidPaginator;this.refreshView();return false;}
else{return true;}}
else{return false;}}});this.setAttributeConfig("paginated",{value:false,readOnly:false,validator:YAHOO.lang.isBoolean,method:function(oParam){var oPaginator=this.get("paginator");var aContainerEls=oPaginator.containers;if(oParam){if(aContainerEls.length===0){var pag0=document.createElement("span");pag0.id="yui-dt-pagcontainer0";pag0.className=YAHOO.widget.DataTable.CLASS_PAGINATOR;pag0=this._elContainer.insertBefore(pag0,this._elTable);aContainerEls.push(pag0);var pag1=document.createElement("span");pag1.id="yui-dt-pagcontainer1";pag1.className=YAHOO.widget.DataTable.CLASS_PAGINATOR;pag1=this._elContainer.insertBefore(pag1,this._elTable.nextSibling);aContainerEls.push(pag1);this._configs.paginator.value.containers=[pag0,pag1];}
else{for(var i=0;i<aContainerEls.length;i++){aContainerEls[i].style.display="";}}
if(oPaginator.pageLinks>-1){var aLinkEls=oPaginator.links;if(aLinkEls.length===0){for(i=0;i<aContainerEls.length;i++){var linkEl=document.createElement("span");linkEl.id="yui-dt-pagselect"+i;linkEl=aContainerEls[i].appendChild(linkEl);YAHOO.util.Event.addListener(linkEl,"click",this._onPaginatorLinkClick,this);this._configs.paginator.value.links.push(linkEl);}}}
if(oPaginator.dropdownOptions){var dropdownOptions=oPaginator.dropdownOptions;for(i=0;i<aContainerEls.length;i++){var selectEl=document.createElement("select");selectEl.className=YAHOO.widget.DataTable.CLASS_DROPDOWN;selectEl=aContainerEls[i].appendChild(selectEl);selectEl.id="yui-dt-pagselect"+i;for(var j=0;j<dropdownOptions.length;j++){var optionEl=document.createElement("option");optionEl.value=dropdownOptions[j].value||dropdownOptions[j];optionEl.innerHTML=dropdownOptions[j].text||dropdownOptions[j];optionEl=selectEl.appendChild(optionEl);}
YAHOO.util.Event.addListener(selectEl,"change",this._onPaginatorDropdownChange,this);this._configs.paginator.value.dropdowns.push(selectEl);}}}
else{if(aContainerEls.length>0){for(i=0;i<aContainerEls.length;i++){aContainerEls[i].style.display="none";}}}}});this.setAttributeConfig("scrollable",{value:false,validator:function(oParam){return YAHOO.lang.isBoolean(oParam);},method:function(oParam){if(oParam){YAHOO.util.Dom.addClass(this._elContainer,YAHOO.widget.DataTable.CLASS_SCROLLABLE);YAHOO.util.Dom.addClass(this._elTbody,YAHOO.widget.DataTable.CLASS_SCROLLBODY);}
else{YAHOO.util.Dom.removeClass(this._elContainer,YAHOO.widget.DataTable.CLASS_SCROLLABLE);YAHOO.util.Dom.removeClass(this._elTbody,YAHOO.widget.DataTable.CLASS_SCROLLBODY);}}});};YAHOO.widget.DataTable.CLASS_TABLE="yui-dt-table";YAHOO.widget.DataTable.CLASS_HEADER="yui-dt-header";YAHOO.widget.DataTable.CLASS_BODY="yui-dt-body";YAHOO.widget.DataTable.CLASS_SCROLLBODY="yui-dt-scrollbody";YAHOO.widget.DataTable.CLASS_LABEL="yui-dt-label";YAHOO.widget.DataTable.CLASS_RESIZER="yui-dt-resizer";YAHOO.widget.DataTable.CLASS_PAGINATOR="yui-dt-paginator";YAHOO.widget.DataTable.CLASS_EDITOR="yui-dt-editor";YAHOO.widget.DataTable.CLASS_FIRST="yui-dt-first";YAHOO.widget.DataTable.CLASS_LAST="yui-dt-last";YAHOO.widget.DataTable.CLASS_EVEN="yui-dt-even";YAHOO.widget.DataTable.CLASS_ODD="yui-dt-odd";YAHOO.widget.DataTable.CLASS_PREVIOUS="yui-dt-previous";YAHOO.widget.DataTable.CLASS_NEXT="yui-dt-next";YAHOO.widget.DataTable.CLASS_SELECTED="yui-dt-selected";YAHOO.widget.DataTable.CLASS_HIGHLIGHTED="yui-dt-highlighted";YAHOO.widget.DataTable.CLASS_DISABLED="yui-dt-disabled";YAHOO.widget.DataTable.CLASS_EMPTY="yui-dt-empty";YAHOO.widget.DataTable.CLASS_LOADING="yui-dt-loading";YAHOO.widget.DataTable.CLASS_ERROR="yui-dt-error";YAHOO.widget.DataTable.CLASS_EDITABLE="yui-dt-editable";YAHOO.widget.DataTable.CLASS_SCROLLABLE="yui-dt-scrollable";YAHOO.widget.DataTable.CLASS_SORTABLE="yui-dt-sortable";YAHOO.widget.DataTable.CLASS_ASC="yui-dt-asc";YAHOO.widget.DataTable.CLASS_DESC="yui-dt-desc";YAHOO.widget.DataTable.CLASS_BUTTON="yui-dt-button";YAHOO.widget.DataTable.CLASS_DROPDOWN="yui-dt-dropdown";YAHOO.widget.DataTable.CLASS_CHECKBOX="yui-dt-checkbox";YAHOO.widget.DataTable.CLASS_STRING="yui-dt-string";YAHOO.widget.DataTable.CLASS_NUMBER="yui-dt-number";YAHOO.widget.DataTable.CLASS_CURRENCY="yui-dt-currency";YAHOO.widget.DataTable.CLASS_DATE="yui-dt-date";YAHOO.widget.DataTable.CLASS_EMAIL="yui-dt-email";YAHOO.widget.DataTable.CLASS_LINK="yui-dt-link";YAHOO.widget.DataTable.MSG_EMPTY="No records found.";YAHOO.widget.DataTable.MSG_LOADING="Loading data...";YAHOO.widget.DataTable.MSG_ERROR="Data error.";YAHOO.widget.DataTable._nCount=0;YAHOO.widget.DataTable.prototype._nIndex=null;YAHOO.widget.DataTable.prototype._sName=null;YAHOO.widget.DataTable.prototype._elContainer=null;YAHOO.widget.DataTable.prototype._elCaption=null;YAHOO.widget.DataTable.prototype._elTable=null;YAHOO.widget.DataTable.prototype._elThead=null;YAHOO.widget.DataTable.prototype._elTbody=null;YAHOO.widget.DataTable.prototype._elMsgTbody=null;YAHOO.widget.DataTable.prototype._elMsgTbodyRow=null;YAHOO.widget.DataTable.prototype._elMsgTbodyCell=null;YAHOO.widget.DataTable.prototype._oDataSource=null;YAHOO.widget.DataTable.prototype._oColumnSet=null;YAHOO.widget.DataTable.prototype._oRecordSet=null;YAHOO.widget.DataTable.prototype._sFirstTrId=null;YAHOO.widget.DataTable.prototype._sLastTrId=null;YAHOO.widget.DataTable.prototype._bFocused=false;YAHOO.widget.DataTable.prototype._focusEl=function(el){el=el||this._elTable;setTimeout(function(){el.focus();},0);};YAHOO.widget.DataTable.prototype._initTableEl=function(){YAHOO.util.Event.purgeElement(this._elContainer,true);this._elContainer.innerHTML="";this._elTable=this._elContainer.appendChild(document.createElement("table"));var elTable=this._elTable;elTable.tabIndex=-1;elTable.id="yui-dt-table"+this._nIndex;elTable.className=YAHOO.widget.DataTable.CLASS_TABLE;this._initTheadEl(elTable,this._oColumnSet);var elMsgTbody=document.createElement("tbody");elMsgTbody.tabIndex=-1;this._elMsgRow=elMsgTbody.appendChild(document.createElement("tr"));var elMsgRow=this._elMsgRow;var elMsgCell=elMsgRow.appendChild(document.createElement("td"));elMsgCell.colSpan=this._oColumnSet.keys.length;this._elMsgCell=elMsgCell;this._elMsgTbody=elTable.appendChild(elMsgTbody);this.showTableMessage(YAHOO.widget.DataTable.MSG_LOADING,YAHOO.widget.DataTable.CLASS_LOADING);this._elTbody=elTable.appendChild(document.createElement("tbody"));this._elTbody.tabIndex=0;YAHOO.util.Dom.addClass(this._elTbody,YAHOO.widget.DataTable.CLASS_BODY);};YAHOO.widget.DataTable.prototype._initTheadEl=function(){var i,oColumn,colId;var elThead=document.createElement("thead");elThead.tabIndex=0;var colTree=this._oColumnSet.tree;for(i=0;i<colTree.length;i++){var elTheadRow=elThead.appendChild(document.createElement("tr"));elTheadRow.id=this.id+"-hdrow"+i;var elTheadCell;for(var j=0;j<colTree[i].length;j++){oColumn=colTree[i][j];colId=oColumn.getId();elTheadCell=elTheadRow.appendChild(document.createElement("th"));elTheadCell.id=this.id+"-col"+colId;this._initThEl(elTheadCell,oColumn,i,j);}
if(i===0){YAHOO.util.Dom.addClass(elTheadRow,YAHOO.widget.DataTable.CLASS_FIRST);}
if(i===(colTree.length-1)){YAHOO.util.Dom.addClass(elTheadRow,YAHOO.widget.DataTable.CLASS_LAST);}}
this._elThead=this._elTable.appendChild(elThead);var aFirstHeaders=this._oColumnSet.headers[0].split(" ");var aLastHeaders=this._oColumnSet.headers[this._oColumnSet.headers.length-1].split(" ");for(i=0;i<aFirstHeaders.length;i++){YAHOO.util.Dom.addClass(YAHOO.util.Dom.get(aFirstHeaders[i]),YAHOO.widget.DataTable.CLASS_FIRST);}
for(i=0;i<aLastHeaders.length;i++){YAHOO.util.Dom.addClass(YAHOO.util.Dom.get(aLastHeaders[i]),YAHOO.widget.DataTable.CLASS_LAST);}
var foundDD=(YAHOO.util.DD)?true:false;var needDD=false;for(i=0;i<this._oColumnSet.keys.length;i++){oColumn=this._oColumnSet.keys[i];colId=oColumn.getId();var elTheadCellId=YAHOO.util.Dom.get(this.id+"-col"+colId);if(oColumn.resizeable){if(foundDD){if(!this.fixedWidth||(this.fixedWidth&&(oColumn.getIndex()!=this._oColumnSet.keys.length-1))){var elThContainer=YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_HEADER,"div",elTheadCellId)[0];var elThResizer=elThContainer.appendChild(document.createElement("span"));elThResizer.id=this.id+"-resizer"+colId;YAHOO.util.Dom.addClass(elThResizer,YAHOO.widget.DataTable.CLASS_RESIZER);oColumn.ddResizer=new YAHOO.util.ColumnResizer(this,oColumn,elTheadCellId,elThResizer.id,elThResizer.id);var cancelClick=function(e){YAHOO.util.Event.stopPropagation(e);};YAHOO.util.Event.addListener(elThResizer,"click",cancelClick);}
if(this.fixedWidth){var elThLabel=(YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_LABEL,"span",elTheadCellId))[0];elThLabel.style.overflow="hidden";}}
else{needDD=true;}}}
if(needDD){}};YAHOO.widget.DataTable.prototype._initThEl=function(elTheadCell,oColumn,row,col){var index=this._nIndex;var colId=oColumn.getId();elTheadCell.yuiColumnId=colId;if(oColumn.abbr){elTheadCell.abbr=oColumn.abbr;}
if(oColumn.width){elTheadCell.style.width=oColumn.width;}
if(oColumn.className){YAHOO.util.Dom.addClass(elTheadCell,oColumn.className);}
YAHOO.util.Dom.addClass(elTheadCell,"yui-dt-"+oColumn.key);elTheadCell.innerHTML="";elTheadCell.rowSpan=oColumn.getRowspan();elTheadCell.colSpan=oColumn.getColspan();var elTheadContainer=elTheadCell.appendChild(document.createElement("div"));elTheadContainer.id=this.id+"-container"+colId;YAHOO.util.Dom.addClass(elTheadContainer,YAHOO.widget.DataTable.CLASS_HEADER);var elTheadLabel=elTheadContainer.appendChild(document.createElement("span"));elTheadLabel.id=this.id+"-label"+colId;YAHOO.util.Dom.addClass(elTheadLabel,YAHOO.widget.DataTable.CLASS_LABEL);var sLabel=oColumn.label||oColumn.key||"";if(oColumn.sortable){YAHOO.util.Dom.addClass(elTheadLabel,YAHOO.widget.DataTable.CLASS_SORTABLE);var sortLink="?key="+oColumn.key;elTheadLabel.innerHTML="<a href=\""+sortLink+"\" title=\"Click to sort\" class=\""+YAHOO.widget.DataTable.CLASS_SORTABLE+"\">"+sLabel+"</a>";}
else{elTheadLabel.innerHTML=sLabel;}};YAHOO.widget.DataTable.prototype._initPaginator=function(){var i,j;};YAHOO.widget.DataTable.prototype._addTrEl=function(oRecord,index){this.hideTableMessage();var append=(!YAHOO.lang.isNumber(index)||(index<0)||index>(this._elTbody.rows.length-2))?true:false;var oColumnSet=this._oColumnSet;var oRecordSet=this._oRecordSet;var elRow=(append)?this._elTbody.appendChild(document.createElement("tr")):this._elTbody.insertBefore(document.createElement("tr"),this._elTbody.rows[index]);elRow.id=this.id+"-bdrow"+(this._elTbody.rows.length-1);elRow.yuiRecordId=oRecord.getId();for(var j=0;j<oColumnSet.keys.length;j++){var oColumn=oColumnSet.keys[j];var elCell=elRow.appendChild(document.createElement("td"));elCell.id=elRow.id+"-cell"+j;elCell.yuiColumnId=oColumn.getId();elCell.headers=oColumnSet.headers[j];this.formatCell(elCell,oRecord,oColumn);if(j===0){YAHOO.util.Dom.addClass(elCell,YAHOO.widget.DataTable.CLASS_FIRST);}
else if(j===this._oColumnSet.keys.length-1){YAHOO.util.Dom.addClass(elCell,YAHOO.widget.DataTable.CLASS_LAST);}
if(this.fixedWidth){elCell.style.overflow="hidden";}}
return elRow.id||null;};YAHOO.widget.DataTable.prototype._updateTrEl=function(elRow,oRecord){this.hideTableMessage();for(var j=0;j<elRow.cells.length;j++){var oColumn=this._oColumnSet.keys[j];this.formatCell(elRow.cells[j],oRecord,oColumn);}
elRow.yuiRecordId=oRecord.getId();return elRow.id||null;};YAHOO.widget.DataTable.prototype._deleteTrEl=function(row){var rowIndex;if(!YAHOO.lang.isNumber(row)){rowIndex=YAHOO.util.Dom.get(row).sectionRowIndex;}
else{rowIndex=row;}
if(YAHOO.lang.isNumber(rowIndex)&&(rowIndex>-2)&&(rowIndex<this._elTbody.rows.length)){this._elTbody.deleteRow(rowIndex);return true;}
else{return false;}};YAHOO.widget.DataTable.prototype._setFirstRow=function(){var rowEl=this.getFirstTrEl();if(rowEl){if(this._sFirstTrId){YAHOO.util.Dom.removeClass(this._sFirstTrId,YAHOO.widget.DataTable.CLASS_FIRST);}
YAHOO.util.Dom.addClass(rowEl,YAHOO.widget.DataTable.CLASS_FIRST);this._sFirstTrId=rowEl.id;}
else{this._sFirstTrId=null;}};YAHOO.widget.DataTable.prototype._setLastRow=function(){var rowEl=this.getLastTrEl();if(rowEl){if(this._sLastTrId){YAHOO.util.Dom.removeClass(this._sLastTrId,YAHOO.widget.DataTable.CLASS_LAST);}
YAHOO.util.Dom.addClass(rowEl,YAHOO.widget.DataTable.CLASS_LAST);this._sLastTrId=rowEl.id;}
else{this._sLastTrId=null;}};YAHOO.widget.DataTable.prototype._setRowStripes=function(row,range){var allRows=this._elTbody.rows;var nStartIndex=0;var nEndIndex=allRows.length;if((row!==null)&&(row!==undefined)){var elStartRow=this.getTrEl(row);if(elStartRow){nStartIndex=elStartRow.sectionRowIndex;if(YAHOO.lang.isNumber(range)&&(range>1)){nEndIndex=nStartIndex+range;}}}
for(var i=nStartIndex;i<nEndIndex;i++){if(i%2){YAHOO.util.Dom.removeClass(allRows[i],YAHOO.widget.DataTable.CLASS_EVEN);YAHOO.util.Dom.addClass(allRows[i],YAHOO.widget.DataTable.CLASS_ODD);}
else{YAHOO.util.Dom.removeClass(allRows[i],YAHOO.widget.DataTable.CLASS_ODD);YAHOO.util.Dom.addClass(allRows[i],YAHOO.widget.DataTable.CLASS_EVEN);}}};YAHOO.widget.DataTable.prototype._onScroll=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();if(oSelf.activeColumnEditor){oSelf.cancelCellEditor();}
oSelf.fireEvent("tableScrollEvent",{event:e,target:elTarget});};YAHOO.widget.DataTable.prototype._onDocumentClick=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();if(!YAHOO.util.Dom.isAncestor(oSelf._elTable,elTarget)){oSelf._bFocused=false;oSelf.fireEvent("tableBlurEvent");if(oSelf.activeColumnEditor){if(!YAHOO.util.Dom.isAncestor(oSelf.activeColumnEditor.container,elTarget)){oSelf.fireEvent("columnEditorBlurEvent",{columnEditor:oSelf.activeColumnEditor});}
else{}}}};YAHOO.widget.DataTable.prototype._onDocumentKeydown=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();if(oSelf.activeColumnEditor&&YAHOO.util.Dom.isAncestor(oSelf.activeColumnEditor.container,elTarget)){oSelf.fireEvent("columnEditorKeydownEvent",{event:e,columnEditor:oSelf.activeColumnEditor});}};YAHOO.widget.DataTable.prototype._onTableMouseover=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();while(elTag!="table"){switch(elTag){case"body":break;case"a":break;case"td":oSelf.fireEvent("cellMouseoverEvent",{target:elTarget,event:e});break;case"span":if(YAHOO.util.Dom.hasClass(elTarget,YAHOO.widget.DataTable.CLASS_LABEL)){oSelf.fireEvent("headerLabelMouseoverEvent",{target:elTarget,event:e});}
break;case"th":oSelf.fireEvent("headerCellMouseoverEvent",{target:elTarget,event:e});break;case"tr":if(elTarget.parentNode.tagName.toLowerCase()=="thead"){oSelf.fireEvent("headerRowMouseoverEvent",{target:elTarget,event:e});}
else{oSelf.fireEvent("rowMouseoverEvent",{target:elTarget,event:e});}
break;default:break;}
elTarget=elTarget.parentNode;elTag=elTarget.tagName.toLowerCase();}
oSelf.fireEvent("tableMouseoverEvent",{target:elTarget,event:e});};YAHOO.widget.DataTable.prototype._onTableMouseout=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();while(elTag!="table"){switch(elTag){case"body":break;case"a":break;case"td":oSelf.fireEvent("cellMouseoutEvent",{target:elTarget,event:e});break;case"span":if(YAHOO.util.Dom.hasClass(elTarget,YAHOO.widget.DataTable.CLASS_LABEL)){oSelf.fireEvent("headerLabelMouseoutEvent",{target:elTarget,event:e});}
break;case"th":oSelf.fireEvent("headerCellMouseoutEvent",{target:elTarget,event:e});break;case"tr":if(elTarget.parentNode.tagName.toLowerCase()=="thead"){oSelf.fireEvent("headerRowMouseoutEvent",{target:elTarget,event:e});}
else{oSelf.fireEvent("rowMouseoutEvent",{target:elTarget,event:e});}
break;default:break;}
elTarget=elTarget.parentNode;elTag=elTarget.tagName.toLowerCase();}
oSelf.fireEvent("tableMouseoutEvent",{target:elTarget,event:e});};YAHOO.widget.DataTable.prototype._onTableMousedown=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();while(elTag!="table"){switch(elTag){case"body":break;case"a":break;case"td":oSelf.fireEvent("cellMousedownEvent",{target:elTarget,event:e});break;case"span":if(YAHOO.util.Dom.hasClass(elTarget,YAHOO.widget.DataTable.CLASS_LABEL)){oSelf.fireEvent("headerLabelMousedownEvent",{target:elTarget,event:e});}
break;case"th":oSelf.fireEvent("headerCellMousedownEvent",{target:elTarget,event:e});break;case"tr":if(elTarget.parentNode.tagName.toLowerCase()=="thead"){oSelf.fireEvent("headerRowMousedownEvent",{target:elTarget,event:e});}
else{oSelf.fireEvent("rowMousedownEvent",{target:elTarget,event:e});}
break;default:break;}
elTarget=elTarget.parentNode;elTag=elTarget.tagName.toLowerCase();}
oSelf.fireEvent("tableMousedownEvent",{target:elTarget,event:e});};YAHOO.widget.DataTable.prototype._onTableDblclick=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();while(elTag!="table"){switch(elTag){case"body":break;case"td":oSelf.fireEvent("cellDblclickEvent",{target:elTarget,event:e});break;case"span":if(YAHOO.util.Dom.hasClass(elTarget,YAHOO.widget.DataTable.CLASS_LABEL)){oSelf.fireEvent("headerLabelDblclickEvent",{target:elTarget,event:e});}
break;case"th":oSelf.fireEvent("headerCellDblclickEvent",{target:elTarget,event:e});break;case"tr":if(elTarget.parentNode.tagName.toLowerCase()=="thead"){oSelf.fireEvent("headerRowDblclickEvent",{target:elTarget,event:e});}
else{oSelf.fireEvent("rowDblclickEvent",{target:elTarget,event:e});}
break;default:break;}
elTarget=elTarget.parentNode;elTag=elTarget.tagName.toLowerCase();}
oSelf.fireEvent("tableDblclickEvent",{target:elTarget,event:e});};YAHOO.widget.DataTable.prototype._onTheadClick=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();if(oSelf.activeColumnEditor){oSelf.fireEvent("columnEditorBlurEvent",{columnEditor:oSelf.activeColumnEditor});}
while(elTag!="thead"){switch(elTag){case"body":break;case"span":if(YAHOO.util.Dom.hasClass(elTarget,YAHOO.widget.DataTable.CLASS_LABEL)){oSelf.fireEvent("headerLabelClickEvent",{target:elTarget,event:e});}
break;case"th":oSelf.fireEvent("headerCellClickEvent",{target:elTarget,event:e});break;case"tr":oSelf.fireEvent("headerRowClickEvent",{target:elTarget,event:e});break;default:break;}
elTarget=elTarget.parentNode;elTag=elTarget.tagName.toLowerCase();}
oSelf.fireEvent("tableClickEvent",{target:elTarget,event:e});};YAHOO.widget.DataTable.prototype._onTheadKeydown=function(e,oSelf){var nKey=YAHOO.util.Event.getCharCode(e);if((nKey>36)&&(nKey<41)){YAHOO.util.Event.stopEvent(e);}};YAHOO.widget.DataTable.prototype._onTbodyClick=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();if(oSelf.activeColumnEditor){oSelf.fireEvent("columnEditorBlurEvent",{columnEditor:oSelf.activeColumnEditor});}
while(elTag!="table"){switch(elTag){case"body":break;case"input":if(elTarget.type.toLowerCase()=="checkbox"){oSelf.fireEvent("checkboxClickEvent",{target:elTarget,event:e});}
else if(elTarget.type.toLowerCase()=="radio"){oSelf.fireEvent("radioClickEvent",{target:elTarget,event:e});}
break;case"a":oSelf.fireEvent("linkClickEvent",{target:elTarget,event:e});break;case"td":oSelf.fireEvent("cellClickEvent",{target:elTarget,event:e});break;case"tr":oSelf.fireEvent("rowClickEvent",{target:elTarget,event:e});break;default:break;}
elTarget=elTarget.parentNode;elTag=elTarget.tagName.toLowerCase();}
oSelf.fireEvent("tableClickEvent",{target:elTarget,event:e});};YAHOO.widget.DataTable.prototype._onTbodyKeydown=function(e,oSelf){var lastSelectedId=oSelf._sLastSelectedId;var lastSelectedEl=YAHOO.util.Dom.get(lastSelectedId);if(lastSelectedEl&&oSelf.isSelected(lastSelectedEl)){var nKey=YAHOO.util.Event.getCharCode(e);if((nKey>36)&&(nKey<41)){YAHOO.util.Event.stopEvent(e);}
else{return;}
var sMode=oSelf.get("selectionMode");var bSHIFT=e.shiftKey;var allRows=oSelf._elTbody.rows;var anchorId=oSelf._sSelectionAnchorId;var anchorEl=YAHOO.util.Dom.get(anchorId);var newSelectedEl,trIndex,tdIndex,startIndex,endIndex,i,anchorPos;if(bSHIFT&&(sMode=="cellblock")){trIndex=lastSelectedEl.parentNode.sectionRowIndex;tdIndex=lastSelectedEl.cellIndex;if(nKey==40){if(anchorEl.parentNode.sectionRowIndex>trIndex){anchorPos=1;}
else if(anchorEl.parentNode.sectionRowIndex<trIndex){anchorPos=-1;}
else{anchorPos=0;}
startIndex=Math.min(anchorEl.cellIndex,tdIndex);endIndex=Math.max(anchorEl.cellIndex,tdIndex);if(anchorPos<=0){if(trIndex<allRows.length-1){for(i=startIndex;i<=endIndex;i++){newSelectedEl=allRows[trIndex+1].cells[i];oSelf.selectCell(newSelectedEl);}
oSelf._sLastSelectedId=allRows[trIndex+1].cells[tdIndex].id;}}
else{for(i=startIndex;i<=endIndex;i++){oSelf.unselectCell(allRows[trIndex].cells[i]);}
oSelf._sLastSelectedId=allRows[trIndex+1].cells[tdIndex].id;}}
else if(nKey==38){if(anchorEl.parentNode.sectionRowIndex>trIndex){anchorPos=1;}
else if(anchorEl.parentNode.sectionRowIndex<trIndex){anchorPos=-1;}
else{anchorPos=0;}
startIndex=Math.min(anchorEl.cellIndex,tdIndex);endIndex=Math.max(anchorEl.cellIndex,tdIndex);if(anchorPos>=0){if(trIndex>0){for(i=startIndex;i<=endIndex;i++){newSelectedEl=allRows[trIndex-1].cells[i];oSelf.selectCell(newSelectedEl);}
oSelf._sLastSelectedId=allRows[trIndex-1].cells[tdIndex].id;}}
else{for(i=startIndex;i<=endIndex;i++){oSelf.unselectCell(allRows[trIndex].cells[i]);}
oSelf._sLastSelectedId=allRows[trIndex-1].cells[tdIndex].id;}}
else if(nKey==39){if(anchorEl.cellIndex>tdIndex){anchorPos=1;}
else if(anchorEl.cellIndex<tdIndex){anchorPos=-1;}
else{anchorPos=0;}
if(anchorPos<=0){if(tdIndex<allRows[trIndex].cells.length-1){startIndex=Math.min(anchorEl.parentNode.sectionRowIndex,trIndex);endIndex=Math.max(anchorEl.parentNode.sectionRowIndex,trIndex);for(i=startIndex;i<=endIndex;i++){newSelectedEl=allRows[i].cells[tdIndex+1];oSelf.selectCell(newSelectedEl);}
oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex+1].id;}}
else{startIndex=Math.min(anchorEl.parentNode.sectionRowIndex,trIndex);endIndex=Math.max(anchorEl.parentNode.sectionRowIndex,trIndex);for(i=startIndex;i<=endIndex;i++){oSelf.unselectCell(allRows[i].cells[tdIndex]);}
oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex+1].id;}}
else if(nKey==37){if(anchorEl.cellIndex>tdIndex){anchorPos=1;}
else if(anchorEl.cellIndex<tdIndex){anchorPos=-1;}
else{anchorPos=0;}
if(anchorPos>=0){if(tdIndex>0){startIndex=Math.min(anchorEl.parentNode.sectionRowIndex,trIndex);endIndex=Math.max(anchorEl.parentNode.sectionRowIndex,trIndex);for(i=startIndex;i<=endIndex;i++){newSelectedEl=allRows[i].cells[tdIndex-1];oSelf.selectCell(newSelectedEl);}
oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex-1].id;}}
else{startIndex=Math.min(anchorEl.parentNode.sectionRowIndex,trIndex);endIndex=Math.max(anchorEl.parentNode.sectionRowIndex,trIndex);for(i=startIndex;i<=endIndex;i++){oSelf.unselectCell(allRows[i].cells[tdIndex]);}
oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex-1].id;}}}
else if(bSHIFT&&(sMode=="cellrange")){trIndex=lastSelectedEl.parentNode.sectionRowIndex;tdIndex=lastSelectedEl.cellIndex;if(anchorEl.parentNode.sectionRowIndex>trIndex){anchorPos=1;}
else if(anchorEl.parentNode.sectionRowIndex<trIndex){anchorPos=-1;}
else{anchorPos=0;}
if(nKey==40){if(anchorPos<=0){for(i=tdIndex+1;i<allRows[trIndex].cells.length;i++){newSelectedEl=allRows[trIndex].cells[i];oSelf.selectCell(newSelectedEl);}
if(trIndex<allRows.length-1){for(i=0;i<=tdIndex;i++){newSelectedEl=allRows[trIndex+1].cells[i];oSelf.selectCell(newSelectedEl);}}}
else{for(i=tdIndex;i<allRows[trIndex].cells.length;i++){oSelf.unselectCell(allRows[trIndex].cells[i]);}
for(i=0;i<tdIndex;i++){oSelf.unselectCell(allRows[trIndex+1].cells[i]);}
oSelf._sLastSelectedId=allRows[trIndex+1].cells[tdIndex].id;}}
else if(nKey==38){if(anchorPos>=0){for(i=tdIndex-1;i>-1;i--){newSelectedEl=allRows[trIndex].cells[i];oSelf.selectCell(newSelectedEl);}
if(trIndex>0){for(i=allRows[trIndex].cells.length-1;i>=tdIndex;i--){newSelectedEl=allRows[trIndex-1].cells[i];oSelf.selectCell(newSelectedEl);}}}
else{for(i=tdIndex;i>-1;i--){oSelf.unselectCell(allRows[trIndex].cells[i]);}
for(i=allRows[trIndex].cells.length-1;i>tdIndex;i--){oSelf.unselectCell(allRows[trIndex-1].cells[i]);}
oSelf._sLastSelectedId=allRows[trIndex-1].cells[tdIndex].id;}}
else if(nKey==39){if(anchorPos<0){if(tdIndex<allRows[trIndex].cells.length-1){newSelectedEl=allRows[trIndex].cells[tdIndex+1];oSelf.selectCell(newSelectedEl);}
else if(trIndex<allRows.length-1){newSelectedEl=allRows[trIndex+1].cells[0];oSelf.selectCell(newSelectedEl);}}
else if(anchorPos>0){oSelf.unselectCell(allRows[trIndex].cells[tdIndex]);if(tdIndex<allRows[trIndex].cells.length-1){oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex+1].id;}
else{oSelf._sLastSelectedId=allRows[trIndex+1].cells[0].id;}}
else{if(anchorEl.cellIndex<=tdIndex){if(tdIndex<allRows[trIndex].cells.length-1){newSelectedEl=allRows[trIndex].cells[tdIndex+1];oSelf.selectCell(newSelectedEl);}
else if(trIndex<allRows.length-1){newSelectedEl=allRows[trIndex+1].cells[0];oSelf.selectCell(newSelectedEl);}}
else{oSelf.unselectCell(allRows[trIndex].cells[tdIndex]);oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex+1].id;}}}
else if(nKey==37){if(anchorPos<0){oSelf.unselectCell(allRows[trIndex].cells[tdIndex]);if(tdIndex>0){oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex-1].id;}
else{oSelf._sLastSelectedId=allRows[trIndex-1].cells[allRows[trIndex-1].cells.length-1].id;}}
else if(anchorPos>0){if(tdIndex>0){newSelectedEl=allRows[trIndex].cells[tdIndex-1];oSelf.selectCell(newSelectedEl);}
else if(trIndex>0){newSelectedEl=allRows[trIndex-1].cells[allRows[trIndex-1].cells.length-1];oSelf.selectCell(newSelectedEl);}}
else{if(anchorEl.cellIndex>=tdIndex){if(tdIndex>0){newSelectedEl=allRows[trIndex].cells[tdIndex-1];oSelf.selectCell(newSelectedEl);}
else if(trIndex>0){newSelectedEl=allRows[trIndex-1].cells[allRows[trIndex-1].cells.length-1];oSelf.selectCell(newSelectedEl);}}
else{oSelf.unselectCell(allRows[trIndex].cells[tdIndex]);if(tdIndex>0){oSelf._sLastSelectedId=allRows[trIndex].cells[tdIndex-1].id;}
else{oSelf._sLastSelectedId=allRows[trIndex-1].cells[allRows[trIndex-1].cells.length-1].id;}}}}}
else if((sMode=="cellblock")||(sMode=="cellrange")||(sMode=="singlecell")){trIndex=lastSelectedEl.parentNode.sectionRowIndex;tdIndex=lastSelectedEl.cellIndex;if(nKey==40){oSelf.unselectAllCells();if(trIndex<allRows.length-1){newSelectedEl=allRows[trIndex+1].cells[tdIndex];oSelf.selectCell(newSelectedEl);}
else{newSelectedEl=lastSelectedEl;oSelf.selectCell(newSelectedEl);}
oSelf._sSelectionAnchorId=newSelectedEl.id;}
else if(nKey==38){oSelf.unselectAllCells();if(trIndex>0){newSelectedEl=allRows[trIndex-1].cells[tdIndex];oSelf.selectCell(newSelectedEl);}
else{newSelectedEl=lastSelectedEl;oSelf.selectCell(newSelectedEl);}
oSelf._sSelectionAnchorId=newSelectedEl.id;}
else if(nKey==39){oSelf.unselectAllCells();if(tdIndex<lastSelectedEl.parentNode.cells.length-1){newSelectedEl=lastSelectedEl.parentNode.cells[tdIndex+1];oSelf.selectCell(newSelectedEl);}
else{newSelectedEl=lastSelectedEl;oSelf.selectCell(newSelectedEl);}
oSelf._sSelectionAnchorId=newSelectedEl.id;}
else if(nKey==37){oSelf.unselectAllCells();if(tdIndex>0){newSelectedEl=lastSelectedEl.parentNode.cells[tdIndex-1];oSelf.selectCell(newSelectedEl);}
else{newSelectedEl=lastSelectedEl;oSelf.selectCell(newSelectedEl);}
oSelf._sSelectionAnchorId=newSelectedEl.id;}}
else if(bSHIFT&&(sMode!="single")){trIndex=lastSelectedEl.sectionRowIndex;if(anchorEl.sectionRowIndex>trIndex){anchorPos=1;}
else if(anchorEl.sectionRowIndex<trIndex){anchorPos=-1;}
else{anchorPos=0;}
if(nKey==40){if(anchorPos<=0){if(trIndex<allRows.length-1){oSelf.selectRow(trIndex+1);}}
else{oSelf.unselectRow(lastSelectedEl);oSelf._sLastSelectedId=allRows[trIndex+1].id;}}
else if(nKey==38){if(anchorPos>=0){if(trIndex>0){oSelf.selectRow(trIndex-1);}}
else{oSelf.unselectRow(lastSelectedEl);oSelf._sLastSelectedId=allRows[trIndex-1].id;}}
else if(nKey==39){}
else if(nKey==37){}}
else{trIndex=lastSelectedEl.sectionRowIndex;if(nKey==40){oSelf.unselectAllRows();if(trIndex<allRows.length-1){newSelectedEl=allRows[trIndex+1];oSelf.selectRow(newSelectedEl);}
else{newSelectedEl=lastSelectedEl;oSelf.selectRow(lastSelectedEl);}
oSelf._sSelectionAnchorId=newSelectedEl.id;}
else if(nKey==38){oSelf.unselectAllRows();if(trIndex>0){newSelectedEl=allRows[trIndex-1];oSelf.selectRow(newSelectedEl);}
else{newSelectedEl=lastSelectedEl;oSelf.selectRow(newSelectedEl);}
oSelf._sSelectionAnchorId=newSelectedEl.id;}
else if(nKey==39){}
else if(nKey==37){}}}};YAHOO.widget.DataTable.prototype._onTbodyKeyup=function(e,oSelf){var nKey=YAHOO.util.Event.getCharCode(e);if(nKey==46){}};YAHOO.widget.DataTable.prototype._onTbodyKeypress=function(e,oSelf){var isMac=(navigator.userAgent.toLowerCase().indexOf("mac")!=-1);if(isMac){var nKey=YAHOO.util.Event.getCharCode(e);if(nKey==40){YAHOO.util.Event.stopEvent(e);}
else if(nKey==38){YAHOO.util.Event.stopEvent(e);}}};YAHOO.widget.DataTable.prototype._onPaginatorLinkClick=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var elTag=elTarget.tagName.toLowerCase();if(oSelf.activeColumnEditor){oSelf.fireEvent("columnEditorBlurEvent",{columnEditor:oSelf.activeColumnEditor});}
while(elTag!="table"){switch(elTag){case"body":return;case"a":YAHOO.util.Event.stopEvent(e);switch(elTarget.className){case YAHOO.widget.DataTable.CLASS_NUMBER:oSelf.showPage(parseInt(elTarget.innerHTML,10));return;case YAHOO.widget.DataTable.CLASS_FIRST:oSelf.showPage(1);return;case YAHOO.widget.DataTable.CLASS_LAST:oSelf.showPage(oSelf.get("paginator").totalPages);return;case YAHOO.widget.DataTable.CLASS_PREVIOUS:oSelf.showPage(oSelf.get("paginator").currentPage-1);return;case YAHOO.widget.DataTable.CLASS_NEXT:oSelf.showPage(oSelf.get("paginator").currentPage+1);return;}
break;default:return;}
elTarget=elTarget.parentNode;elTag=elTarget.tagName.toLowerCase();}};YAHOO.widget.DataTable.prototype._onPaginatorDropdownChange=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);var newValue=elTarget[elTarget.selectedIndex].value;var newRowsPerPage=parseInt(newValue,10)||null;var newStartRecordIndex=(oSelf.get("paginator").currentPage-1)*newRowsPerPage;oSelf.set("paginator",{rowsPerPage:newRowsPerPage,startRecordIndex:newStartRecordIndex});};YAHOO.widget.DataTable.prototype._onDropdownChange=function(e,oSelf){var elTarget=YAHOO.util.Event.getTarget(e);oSelf.fireEvent("dropdownChangeEvent",{event:e,target:elTarget});};YAHOO.widget.DataTable.prototype.toString=function(){return"DataTable "+this._sName;};YAHOO.widget.DataTable.prototype.getDataSource=function(){return this._oDataSource;};YAHOO.widget.DataTable.prototype.getColumnSet=function(){return this._oColumnSet;};YAHOO.widget.DataTable.prototype.getRecordSet=function(){return this._oRecordSet;};YAHOO.widget.DataTable.prototype.getTableEl=function(){return this._elTable;};YAHOO.widget.DataTable.prototype.getTheadEl=function(){return this._elThead;};YAHOO.widget.DataTable.prototype.getTbodyEl=function(){return this._elTbody;};YAHOO.widget.DataTable.prototype.getMsgTbodyEl=function(){return this._elMsgTbody;};YAHOO.widget.DataTable.prototype.getMsgTdEl=function(){return this._elMsgCell;};YAHOO.widget.DataTable.prototype.getTrEl=function(row){var allRows=this._elTbody.rows;if(row instanceof YAHOO.widget.Record){var nTrIndex=this.getTrIndex(row);return allRows[nTrIndex];}
else if(YAHOO.lang.isNumber(row)&&(row>-1)&&(row<allRows.length)){return allRows[row];}
else{var elRow;var el=YAHOO.util.Dom.get(row);if(el&&(el.ownerDocument==document)){if(el.tagName.toLowerCase()!="tr"){elRow=YAHOO.util.Dom.getAncestorByTagName(el,"tr");}
else{elRow=el;}
if(elRow&&(elRow.parentNode==this._elTbody)){return elRow;}}}
return null;};YAHOO.widget.DataTable.prototype.getFirstTrEl=function(){return this._elTbody.rows[0];};YAHOO.widget.DataTable.prototype.getLastTrEl=function(){var allRows=this._elTbody.rows;if(allRows.length>0){return allRows[allRows.length-1];}};YAHOO.widget.DataTable.prototype.getTdEl=function(cell){var elCell;var el=YAHOO.util.Dom.get(cell);if(el&&(el.ownerDocument==document)){if(el.tagName.toLowerCase()!="td"){elCell=YAHOO.util.Dom.getAncestorByTagName(el,"td");}
else{elCell=el;}
if(elCell&&(elCell.parentNode.parentNode==this._elTbody)){return elCell;}}
return null;};YAHOO.widget.DataTable.prototype.getThEl=function(header){var elHeader;if(header instanceof YAHOO.widget.Column){var oColumn=header;elHeader=YAHOO.util.Dom.get(this.id+"-col"+oColumn.getId());if(elHeader){return elHeader;}}
else{var el=YAHOO.util.Dom.get(header);if(el&&(el.ownerDocument==document)){if(el.tagName.toLowerCase()!="th"){elHeader=YAHOO.util.Dom.getAncestorByTagName(el,"th");}
else{elHeader=el;}
if(elHeader&&(elHeader.parentNode.parentNode==this._elThead)){return elHeader;}}}
return null;};YAHOO.widget.DataTable.prototype.getTrIndex=function(row){var nRecordIndex;if(row instanceof YAHOO.widget.Record){nRecordIndex=this._oRecordSet.getRecordIndex(row);}
else if(YAHOO.lang.isNumber(row)){nRecordIndex=row;}
if(YAHOO.lang.isNumber(nRecordIndex)){if(this.get("paginated")){var startRecordIndex=this.get("paginator").startRecordIndex;var endRecordIndex=startRecordIndex+this.get("paginator").rowsPerPage-1;if((nRecordIndex>=startRecordIndex)&&(nRecordIndex<=endRecordIndex)){return nRecordIndex-startRecordIndex;}
else{return null;}}
else{return nRecordIndex;}}
else{elRow=this.getTrEl(row);if(elRow&&(elRow.ownerDocument==document)&&(elRow.parentNode==this._elTbody)){return elRow.sectionRowIndex;}}
return null;};YAHOO.widget.DataTable.prototype.initializeTable=function(oData){this._oRecordSet.reset();var records=this._oRecordSet.addRecords(oData);this._unselectAllTrEls();this._unselectAllTdEls();this._aSelections=null;this._sLastSelectedId=null;this._sSelectionAnchorId=null;this.refreshView();};YAHOO.widget.DataTable.prototype.refreshView=function(){var i,j,aRecords;var oPaginator=this.get("paginator");if(this.get("paginated")){var rowsPerPage=oPaginator.rowsPerPage;var startRecordIndex=(oPaginator.currentPage-1)*rowsPerPage;aRecords=this._oRecordSet.getRecords(startRecordIndex,rowsPerPage);this.formatPaginators();}
else{aRecords=this._oRecordSet.getRecords();}
var elTbody=this._elTbody;var elRows=elTbody.rows;if(YAHOO.lang.isArray(aRecords)&&(aRecords.length>0)){this.hideTableMessage();while(elTbody.hasChildNodes()&&(elRows.length>aRecords.length)){elTbody.deleteRow(-1);}
var aSelectedRows=this.getSelectedRows();var aSelectedCells=this.getSelectedCells();if(aSelectedRows.length>0){this._unselectAllTrEls();}
if(aSelectedCells.length>0){this._unselectAllTdEls();}
for(i=0;i<elRows.length;i++){this._updateTrEl(elRows[i],aRecords[i]);}
for(i=elRows.length;i<aRecords.length;i++){this._addTrEl(aRecords[i]);}
var allSelections=aSelectedRows.concat(aSelectedCells);var allRows=elTbody.rows;for(i=0;i<allSelections.length;i++){for(j=0;j<allRows.length;j++){var thisRow=allRows[j];if(allSelections[i]===thisRow.yuiRecordId){YAHOO.util.Dom.addClass(thisRow,YAHOO.widget.DataTable.CLASS_SELECTED);}
else if(allSelections[i].recordId===thisRow.yuiRecordId){for(var k=0;k<thisRow.cells.length;k++){if(thisRow.cells[k].yuiColumnId===allSelections[i].columnId){YAHOO.util.Dom.addClass(thisRow.cells[k],YAHOO.widget.DataTable.CLASS_SELECTED);}}}}}
this._setFirstRow();this._setLastRow();this._setRowStripes();this.fireEvent("refreshEvent");}
else{while(elTbody.hasChildNodes()){elTbody.deleteRow(-1);}
this.showTableMessage(YAHOO.widget.DataTable.MSG_EMPTY,YAHOO.widget.DataTable.CLASS_EMPTY);}};YAHOO.widget.DataTable.prototype.destroy=function(){var instanceName=this.toString();var elContainer=this._elContainer;this._oRecordSet.unsubscribeAll();this.unsubscribeAll();YAHOO.util.Event.purgeElement(elContainer,true);elContainer.innerHTML="";for(var key in this){if(this.hasOwnProperty(key)){this[key]=null;}}};YAHOO.widget.DataTable.prototype.showTableMessage=function(sHTML,sClassName){var elCell=this._elMsgCell;if(YAHOO.lang.isString(sHTML)){elCell.innerHTML=sHTML;}
if(YAHOO.lang.isString(sClassName)){elCell.className=sClassName;}
this._elMsgTbody.style.display="";this.fireEvent("tableMsgShowEvent",{html:sHTML,className:sClassName});};YAHOO.widget.DataTable.prototype.hideTableMessage=function(){this._elMsgTbody.style.display="none";this.fireEvent("tableMsgHideEvent");};YAHOO.widget.DataTable.prototype.getRecordIndex=function(row){var nTrIndex;if(!YAHOO.lang.isNumber(row)){if(row instanceof YAHOO.widget.Record){return this._oRecordSet.getRecordIndex(row);}
else{var el=this.getTrEl(row);if(el){nTrIndex=el.sectionRowIndex;}}}
else{nTrIndex=row;}
if(YAHOO.lang.isNumber(nTrIndex)){if(this.get("paginated")){return this.get("paginator").startRecordIndex+nTrIndex;}
else{return nTrIndex;}}
return null;};YAHOO.widget.DataTable.prototype.getRecord=function(row){var nRecordIndex=row;if(!YAHOO.lang.isNumber(nRecordIndex)){var elRow=this.getTrEl(row);if(elRow){nRecordIndex=this.getRecordIndex(row);}}
if(YAHOO.lang.isNumber(nRecordIndex)){return this._oRecordSet.getRecord(nRecordIndex);}
return null;};YAHOO.widget.DataTable.prototype.getColumn=function(column){var nColumnIndex=column;if(!YAHOO.lang.isNumber(nColumnIndex)){var elCell=this.getTdEl(column);if(elCell){nColumnIndex=elCell.yuiColumnId;}
else{elCell=this.getThEl(column);if(elCell){nColumnIndex=elCell.yuiColumnId;}}}
if(YAHOO.lang.isNumber(nColumnIndex)){return this._oColumnSet.getColumn(nColumnIndex);}
return null;};YAHOO.widget.DataTable.prototype.sortColumn=function(oColumn){if(!oColumn){return;}
if(!oColumn instanceof YAHOO.widget.Column){return;}
if(oColumn.sortable){var sortDir=(oColumn.sortOptions&&oColumn.sortOptions.defaultOrder)?oColumn.sortOptions.defaultOrder:"asc";var oSortedBy=this.get("sortedBy");if(oSortedBy&&(oSortedBy.key===oColumn.key)){if(oSortedBy.dir){sortDir=(oSortedBy.dir=="asc")?"desc":"asc";}
else{sortDir=(sortDir=="asc")?"desc":"asc";}}
var sortFnc=null;if((sortDir=="desc")&&oColumn.sortOptions&&oColumn.sortOptions.descFunction){sortFnc=oColumn.sortOptions.descFunction;}
else if((sortDir=="asc")&&oColumn.sortOptions&&oColumn.sortOptions.ascFunction){sortFnc=oColumn.sortOptions.ascFunction;}
if(!sortFnc&&oColumn.key){var sorted;sortFnc=function(a,b){if(sortDir=="desc"){sorted=YAHOO.util.Sort.compareDesc(a.getData(oColumn.key),b.getData(oColumn.key));if(sorted===0){return YAHOO.util.Sort.compareDesc(a.getId(),b.getId());}
else{return sorted;}}
else{sorted=YAHOO.util.Sort.compareAsc(a.getData(oColumn.key),b.getData(oColumn.key));if(sorted===0){return YAHOO.util.Sort.compareAsc(a.getId(),b.getId());}
else{return sorted;}}};}
if(sortFnc){this._oRecordSet.sortRecords(sortFnc);this.set("sortedBy",{key:oColumn.key,dir:sortDir,column:oColumn});this.refreshView();this.fireEvent("columnSortEvent",{column:oColumn,dir:sortDir});}}
else{}};YAHOO.widget.DataTable.prototype.addRow=function(oData,index){if(oData&&(oData.constructor==Object)){var oRecord=this._oRecordSet.addRecord(oData,index);if(oRecord){var nTrIndex=this.getTrIndex(oRecord);if(YAHOO.lang.isNumber(nTrIndex)){if(this.get("paginated")){this.refreshView();}
else{var newTrId=this._addTrEl(oRecord,nTrIndex);if(newTrId){var append=(YAHOO.lang.isNumber(nTrIndex)&&(nTrIndex>-1)&&(nTrIndex<this._elTbody.rows.length))?false:true;if(append){if((this._elTbody.rows.length-1)%2){YAHOO.util.Dom.addClass(newTrId,YAHOO.widget.DataTable.CLASS_ODD);}
else{YAHOO.util.Dom.addClass(newTrId,YAHOO.widget.DataTable.CLASS_EVEN);}}
else{this._setRowStripes(nTrIndex);}
if(append){this._setLastRow();}
else if(YAHOO.lang.isNumber(index)&&(nTrIndex===0)){this._setFirstRow();}}}}
else{this.updatePaginator();}
this.fireEvent("rowAddEvent",{newData:oData,trElId:newTrId});if(nTrIndex===null){nTrIndex="n/a";}
return;}}};YAHOO.widget.DataTable.prototype.updateRow=function(row,oData){var oldRecord,updatedRecord,elRow;if((row instanceof YAHOO.widget.Record)||(YAHOO.lang.isNumber(row))){oldRecord=this._oRecordSet.getRecord(row);elRow=this.getTrEl(oldRecord);}
else{elRow=this.getTrEl(row);if(elRow){oldRecord=this._oRecordSet.getRecord(this.getRecordIndex(elRow));}}
if(oldRecord){var oRecordData=oldRecord.getData();var oldData={};for(var key in oRecordData){oldData[key]=oRecordData[key];}
updatedRecord=this._oRecordSet.updateRecord(oldRecord,oData);}
else{return;}
if(elRow){this._updateTrEl(elRow,updatedRecord);}
this.fireEvent("rowUpdateEvent",{newData:oData,oldData:oldData,trElId:elRow.id});};YAHOO.widget.DataTable.prototype.deleteRow=function(row){var nRecordIndex=null;if(YAHOO.lang.isNumber(row)){nRecordIndex=row;}
else{var elRow=YAHOO.util.Dom.get(row);elRow=this.getTrEl(elRow);if(elRow){nRecordIndex=this.getRecordIndex(elRow);}}
if(nRecordIndex!==null){var oRecord=this._oRecordSet.getRecord(nRecordIndex);if(oRecord){var nRecordId=oRecord.getId();var tracker=this._aSelections||[];for(var j=0;j<tracker.length;j++){if((YAHOO.lang.isNumber(tracker[j])&&(tracker[j]===nRecordId))||((tracker[j].constructor==Object)&&(tracker[j].recordId===nRecordId))){tracker.splice(j,1);}}
var oRecordData=oRecord.getData();var oData={};for(var key in oRecordData){oData[key]=oRecordData[key];}
this._oRecordSet.deleteRecord(nRecordIndex);var nTrIndex=this.getTrIndex(nRecordIndex);if(YAHOO.lang.isNumber(nTrIndex)){var isLast=(nTrIndex==this.getLastTrEl().sectionRowIndex)?true:false;this._deleteTrEl(nTrIndex);if(this._elTbody.rows.length===0){this.showTableMessage(YAHOO.widget.DataTable.MSG_EMPTY,YAHOO.widget.DataTable.CLASS_EMPTY);}
else{if(nTrIndex===0){this._setFirstRow();}
if(isLast){this._setLastRow();}
if(nTrIndex!=this._elTbody.rows.length){this._setRowStripes(nTrIndex);}}}
this.fireEvent("rowDeleteEvent",{recordIndex:nRecordIndex,oldData:oData,trElIndex:nTrIndex});}}
else{}};YAHOO.widget.DataTable.prototype.formatCell=function(elCell,oRecord,oColumn){if(!(oRecord instanceof YAHOO.widget.Record)){oRecord=this.getRecord(elCell);}
if(!(oColumn instanceof YAHOO.widget.Column)){oColumn=this._oColumnSet.getColumn(elCell.yuiColumnId);}
if(oRecord&&oColumn){var oData=(oColumn.key)?oRecord.getData(oColumn.key):null;if(YAHOO.lang.isFunction(oColumn.formatter)){oColumn.formatter(elCell,oRecord,oColumn,oData);}
else{var type=oColumn.type;var markup="";switch(type){case"checkbox":YAHOO.widget.DataTable.formatCheckbox(elCell,oRecord,oColumn,oData);break;case"currency":YAHOO.widget.DataTable.formatCurrency(elCell,oRecord,oColumn,oData);break;case"date":YAHOO.widget.DataTable.formatDate(elCell,oRecord,oColumn,oData);break;case"email":YAHOO.widget.DataTable.formatEmail(elCell,oRecord,oColumn,oData);break;case"link":YAHOO.widget.DataTable.formatLink(elCell,oRecord,oColumn,oData);break;case"number":YAHOO.widget.DataTable.formatNumber(elCell,oRecord,oColumn,oData);break;case"dropdown":YAHOO.widget.DataTable.formatDropdown(elCell,oRecord,oColumn,oData);break;case"textarea":YAHOO.widget.DataTable.formatTextarea(elCell,oRecord,oColumn,oData);break;case"textbox":YAHOO.widget.DataTable.formatTextbox(elCell,oRecord,oColumn,oData);break;default:type="html";elCell.innerHTML=((oData!==undefined)&&(oData!==null))?oData.toString():"";break;}}
YAHOO.util.Dom.addClass(elCell,"yui-dt-"+oColumn.key);if(oColumn.editor){YAHOO.util.Dom.addClass(elCell,YAHOO.widget.DataTable.CLASS_EDITABLE);}}
else{}};YAHOO.widget.DataTable.formatCheckbox=function(elCell,oRecord,oColumn,oData){var bChecked=oData;bChecked=(bChecked)?" checked":"";elCell.innerHTML="<input type=\"checkbox\""+bChecked+" class=\""+YAHOO.widget.DataTable.CLASS_CHECKBOX+"\">";};YAHOO.widget.DataTable.formatCurrency=function(elCell,oRecord,oColumn,oData){if(YAHOO.lang.isNumber(oData)){var nAmount=oData;var markup;nAmount=Math.round(nAmount*100)/100;markup="$"+nAmount;var dotIndex=markup.indexOf(".");if(dotIndex<0){markup+=".00";}
else{while(dotIndex>markup.length-3){markup+="0";}}
elCell.innerHTML=markup;}
else{elCell.innerHTML="";}};YAHOO.widget.DataTable.formatDate=function(elCell,oRecord,oColumn,oData){var oDate=oData;if(oDate instanceof Date){elCell.innerHTML=(oDate.getMonth()+1)+"/"+oDate.getDate()+"/"+oDate.getFullYear();}
else{elCell.innerHTML="";}};YAHOO.widget.DataTable.formatDropdown=function(el,oRecord,oColumn,oDataTable){var selectedValue=oData||oRecord.getData(oColumn.key)||"";var options=oColumn.dropdownOptions||null;var selectEl;var collection=el.getElementsByTagName("select");if(collection.length===0){selectEl=document.createElement("select");selectEl.className=YAHOO.widget.DataTable.CLASS_DROPDOWN;selectEl=el.appendChild(selectEl);YAHOO.util.Event.addListener(selectEl,"change",oDataTable._onDropdownChange,oDataTable);}
selectEl=collection[0];if(selectEl){selectEl.innerHTML="";if(YAHOO.lang.isArray(options)){for(var i=0;i<options.length;i++){var optionEl=document.createElement("option");optionEl.value=options[i].value||options[i];optionEl.innerHTML=options[i].text||options[i];optionEl=selectEl.appendChild(optionEl);}}
else{selectEl.innerHTML="<option value=\""+selectedValue+"\">"+selectedValue+"</option>";}}};YAHOO.widget.DataTable.formatEmail=function(elCell,oRecord,oColumn,oData){var sEmail=oData;if(sEmail){elCell.innerHTML="<a href=\"mailto:"+sEmail+"\">"+sEmail+"</a>";}
else{elCell.innerHTML="";}};YAHOO.widget.DataTable.formatLink=function(elCell,oRecord,oColumn,oData){var sLink=oData;if(sLink){elCell.innerHTML="<a href=\""+sLink+"\">"+sLink+"</a>";}
else{elCell.innerHTML="";}};YAHOO.widget.DataTable.formatNumber=function(elCell,oRecord,oColumn,oData){var nNumber=oData;if((nNumber!==undefined)&&(nNumber!==null)){elCell.innerHTML=nNumber.toString();}
else{elCell.innerHTML="";}};YAHOO.widget.DataTable.formatTextarea=function(elContainer,oRecord,oColumn,oData){var value=oRecord.getData(oColumn.key)||"";var markup="<textarea>"+value+"</textarea>";elContainer.innerHTML=markup;};YAHOO.widget.DataTable.formatTextbox=function(elContainer,oRecord,oColumn,oData){var value=oRecord.getData(oColumn.key)||"";var markup="<input type=\"text\" value=\""+value+"\">";elContainer.innerHTML=markup;};YAHOO.widget.DataTable.prototype.showPage=function(nPage){if(!YAHOO.lang.isNumber(nPage)||(nPage<1)||(nPage>this.get("paginator").totalPages)){nPage=1;}
this.set("paginator",{currentPage:nPage});};YAHOO.widget.DataTable.prototype.formatPaginators=function(){var pag=this.get("paginator");var totalRecords=this._oRecordSet.getLength();var maxRows=Math.min(pag.rowsPerPage,totalRecords);var totalPages=Math.ceil(totalRecords/maxRows);var dropdownEnabled=false;if(pag.pageLinks>-1){for(var i=0;i<pag.links.length;i++){this.formatPaginatorLinks(pag.links[i],pag.currentPage,pag.pageLinksStart,pag.pageLinks,totalPages);}}
if(pag.dropdownOptions){dropdownEnabled=true;for(i=0;i<pag.dropdowns.length;i++){this.formatPaginatorDropdown(pag.dropdowns[i]);}}
if(dropdownEnabled&&navigator.userAgent.toLowerCase().indexOf("opera")!=-1){document.body.style+='';}};YAHOO.widget.DataTable.prototype.formatPaginatorDropdown=function(elDropdown){if(elDropdown&&(elDropdown.ownerDocument==document)&&elDropdown.options){var options=elDropdown.options;if(options.length){for(var i=options.length-1;i>-1;i--){if((this.get("paginator").rowsPerPage+"")===options[i].value){options[i].selected=true;}}
return;}}};YAHOO.widget.DataTable.prototype.formatPaginatorLinks=function(elContainer,nCurrentPage,nPageLinksStart,nPageLinksLength,nTotalPages){if(elContainer&&(elContainer.ownerDocument==document)&&YAHOO.lang.isNumber(nCurrentPage)&&YAHOO.lang.isNumber(nPageLinksStart)&&YAHOO.lang.isNumber(nTotalPages)){var isFirstPage=(nCurrentPage==1)?true:false;var isLastPage=(nCurrentPage==nTotalPages)?true:false;var firstPageLink=(isFirstPage)?" <span class=\""+YAHOO.widget.DataTable.CLASS_DISABLED+"\">&lt;&lt;</span> ":" <a href=\"#\" class=\""+YAHOO.widget.DataTable.CLASS_FIRST+"\">&lt;&lt;</a> ";var prevPageLink=(isFirstPage)?" <span class=\""+YAHOO.widget.DataTable.CLASS_DISABLED+"\">&lt;</span> ":" <a href=\"#\" class=\""+YAHOO.widget.DataTable.CLASS_PREVIOUS+"\">&lt;</a> ";var nextPageLink=(isLastPage)?" <span class=\""+YAHOO.widget.DataTable.CLASS_DISABLED+"\">&gt;</span> ":" <a href=\"#\" class=\""+YAHOO.widget.DataTable.CLASS_NEXT+"\">&gt;</a> ";var lastPageLink=(isLastPage)?" <span class=\""+YAHOO.widget.DataTable.CLASS_DISABLED+"\">&gt;&gt;</span> ":" <a href=\"#\" class=\""+YAHOO.widget.DataTable.CLASS_LAST+"\">&gt;&gt;</a> ";var markup=firstPageLink+prevPageLink;var maxLinks=(nPageLinksStart+nPageLinksLength<nTotalPages)?nPageLinksStart+nPageLinksLength-1:nTotalPages;if(nPageLinksLength===0){maxLinks=nTotalPages;}
for(var i=nPageLinksStart;i<=maxLinks;i++){if(i!=nCurrentPage){markup+=" <a href=\"#\" class=\""+YAHOO.widget.DataTable.CLASS_NUMBER+"\">"+i+"</a> ";}
else{markup+=" <span class=\""+YAHOO.widget.DataTable.CLASS_SELECTED+"\">"+i+"</span>";}}
markup+=nextPageLink+lastPageLink;elContainer.innerHTML=markup;return;}};YAHOO.widget.DataTable.prototype.updatePaginator=function(){};YAHOO.widget.DataTable.prototype._aSelections=null;YAHOO.widget.DataTable.prototype._sLastSelectedId=null;YAHOO.widget.DataTable.prototype._sSelectionAnchorId=null;YAHOO.widget.DataTable.prototype._unselectAllTrEls=function(){var selectedRows=YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_SELECTED,"tr",this._elTbody);YAHOO.util.Dom.removeClass(selectedRows,YAHOO.widget.DataTable.CLASS_SELECTED);};YAHOO.widget.DataTable.prototype.getSelectedTrEls=function(){return YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_SELECTED,"tr",this._elTbody);};YAHOO.widget.DataTable.prototype.selectRow=function(row){var elRow=this.getTrEl(row);if(elRow){var oRecord=this.getRecord(elRow);if(oRecord){var tracker=this._aSelections||[];var id=oRecord.getId();if(tracker.indexOf&&(tracker.indexOf(id)>-1)){tracker.splice(tracker.indexOf(id),1);}
else{for(var j=0;j<tracker.length;j++){if(tracker[j]===id){tracker.splice(j,1);}}}
tracker.push(id);this._sLastSelectedId=elRow.id;if(!this._sSelectionAnchorId){this._sSelectionAnchorId=elRow.id;}
this._aSelections=tracker;YAHOO.util.Dom.addClass(elRow,YAHOO.widget.DataTable.CLASS_SELECTED);this._focusEl(this._elTbody);this.fireEvent("rowSelectEvent",{record:oRecord,el:elRow});return;}}};YAHOO.widget.DataTable.prototype.unselectRow=function(row){var elRow=this.getTrEl(row);if(elRow){var oRecord=this.getRecord(elRow);if(oRecord){var tracker=this._aSelections||[];var id=oRecord.getId();var bFound=false;if(tracker.indexOf&&(tracker.indexOf(id)>-1)){tracker.splice(tracker.indexOf(id),1);bFound=true;}
else{for(var j=0;j<tracker.length;j++){if(tracker[j]===id){tracker.splice(j,1);bFound=true;}}}
if(bFound){this._aSelections=tracker;YAHOO.util.Dom.removeClass(elRow,YAHOO.widget.DataTable.CLASS_SELECTED);this.fireEvent("rowUnselectEvent",{record:oRecord,el:elRow});return;}}}};YAHOO.widget.DataTable.prototype.unselectAllRows=function(){var tracker=this._aSelections||[];for(var j=0;j<tracker.length;j++){if(YAHOO.lang.isNumber(tracker[j])){tracker.splice(j,1);}}
this._aSelections=tracker;this._unselectAllTrEls();this.fireEvent("unselectAllRowsEvent");};YAHOO.widget.DataTable.prototype._unselectAllTdEls=function(){var selectedCells=YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_SELECTED,"td",this._elTbody);YAHOO.util.Dom.removeClass(selectedCells,YAHOO.widget.DataTable.CLASS_SELECTED);};YAHOO.widget.DataTable.prototype.getSelectedTdEls=function(){return YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_SELECTED,"td",this._elTbody);};YAHOO.widget.DataTable.prototype.selectCell=function(cell){var elCell=this.getTdEl(cell);if(elCell){var oRecord=this.getRecord(elCell);var nColumnId=elCell.yuiColumnId;if(oRecord&&YAHOO.lang.isNumber(nColumnId)){var tracker=this._aSelections||[];var id=oRecord.getId();for(var j=0;j<tracker.length;j++){if((tracker[j].recordId===id)&&(tracker[j].columnId===nColumnId)){tracker.splice(j,1);}}
tracker.push({recordId:id,columnId:nColumnId});this._aSelections=tracker;this._sLastSelectedId=elCell.id;if(!this._sSelectionAnchorId){this._sSelectionAnchorId=elRow.id;}
YAHOO.util.Dom.addClass(elCell,YAHOO.widget.DataTable.CLASS_SELECTED);this.fireEvent("cellSelectEvent",{record:oRecord,key:this._oColumnSet.getColumn(nColumnId).key,el:elCell});return;}}};YAHOO.widget.DataTable.prototype.unselectCell=function(cell){var elCell=this.getTdEl(cell);if(elCell){var oRecord=this.getRecord(elCell);var nColumnId=elCell.yuiColumnId;if(oRecord&&YAHOO.lang.isNumber(nColumnId)){var tracker=this._aSelections||[];var id=oRecord.getId();for(var j=0;j<tracker.length;j++){if((tracker[j].recordId===id)&&(tracker[j].columnId===nColumnId)){tracker.splice(j,1);this._aSelections=tracker;YAHOO.util.Dom.removeClass(elCell,YAHOO.widget.DataTable.CLASS_SELECTED);this.fireEvent("cellUnselectEvent",{record:oRecord,key:this._oColumnSet.getColumn(nColumnId).key,el:elCell});return;}}}}};YAHOO.widget.DataTable.prototype.unselectAllCells=function(){var tracker=this._aSelections||[];for(var j=0;j<tracker.length;j++){if(tracker[j].constructor==Object){tracker.splice(j,1);}}
this._aSelections=tracker;this._unselectAllTdEls();this.fireEvent("unselectAllCellsEvent");};YAHOO.widget.DataTable.prototype.isSelected=function(el){return YAHOO.util.Dom.hasClass(el,YAHOO.widget.DataTable.CLASS_SELECTED);};YAHOO.widget.DataTable.prototype.getSelectedRows=function(){var aSelectedRows=[];var tracker=this._aSelections||[];for(var j=0;j<tracker.length;j++){if(YAHOO.lang.isNumber(tracker[j])){aSelectedRows.push(tracker[j]);}}
return aSelectedRows;};YAHOO.widget.DataTable.prototype.getSelectedCells=function(){var aSelectedCells=[];var tracker=this._aSelections||[];for(var j=0;j<tracker.length;j++){if(tracker[j]&&(tracker[j].constructor==Object)){aSelectedCells.push({recordId:tracker[j].recordId,columnId:tracker[j].columnId});}}
return aSelectedCells;};YAHOO.widget.DataTable.prototype.highlight=function(els){if(els){if(!YAHOO.lang.isArray(els)){els=[els];}
YAHOO.util.Dom.addClass(els,YAHOO.widget.DataTable.CLASS_HIGHLIGHTED);this.fireEvent("rowHighlightEvent",{el:null,record:null});this.fireEvent("cellHighlightEvent",{el:null,record:null,key:null});}};YAHOO.widget.DataTable.prototype.unhighlight=function(els){if(els){if(!YAHOO.lang.isArray(els)){els=[els];}
YAHOO.util.Dom.removeClass(els,YAHOO.widget.DataTable.CLASS_HIGHLIGHTED);this.fireEvent("rowUnhighlightEvent",{el:null,record:null});this.fireEvent("cellUnhighlightEvent",{el:null,record:null,key:null});}};YAHOO.widget.DataTable.prototype.showCellEditor=function(elCell,oRecord,oColumn){elCell=YAHOO.util.Dom.get(elCell);if(elCell&&(elCell.ownerDocument===document)){if(!oRecord||!(oRecord instanceof YAHOO.widget.Record)){oRecord=this.getRecord(elCell);}
if(!oColumn||!(oColumn instanceof YAHOO.widget.Column)){oColumn=this.getColumn(elCell);}
if(oRecord&&oColumn){this._oEditor.cell=elCell;this._oEditor.record=oRecord;this._oEditor.column=oColumn;this._oEditor.validator=(oColumn.editorOptions&&YAHOO.lang.isFunction(oColumn.editorOptions.validator))?oColumn.editorOptions.validator:null;this._oEditor.value=oRecord.getData(oColumn.key);var elContainer=this._oEditor.container;elContainer.style.display="none";this.activeColumnEditor=null;YAHOO.util.Event.purgeElement(elContainer,true);elContainer.innerHTML="";var x,y,offsetEl,scrollEl;x=elCell.offsetLeft;y=elCell.offsetTop;offsetEl=elCell;while(offsetEl.offsetParent){x+=offsetEl.offsetParent.offsetLeft;y+=offsetEl.offsetParent.offsetTop;offsetEl=offsetEl.offsetParent;}
scrollEl=elCell;while(scrollEl.tagName.toLowerCase()!=="body"){x-=scrollEl.scrollLeft;y-=scrollEl.scrollTop;scrollEl=scrollEl.parentNode;}
elContainer.style.left=x+"px";elContainer.style.top=y+"px";elContainer.style.display="";var fnEditor;if(YAHOO.lang.isString(oColumn.editor)){switch(oColumn.editor){case"checkbox":fnEditor=YAHOO.widget.DataTable.editCheckbox;break;case"date":fnEditor=YAHOO.widget.DataTable.editDate;break;case"dropdown":fnEditor=YAHOO.widget.DataTable.editDropdown;break;case"radio":fnEditor=YAHOO.widget.DataTable.editRadio;break;case"textarea":fnEditor=YAHOO.widget.DataTable.editTextarea;break;case"textbox":fnEditor=YAHOO.widget.DataTable.editTextbox;break;default:fnEditor=null;}}
else if(YAHOO.lang.isFunction(oColumn.editor)){fnEditor=oColumn.editor;}
if(fnEditor){fnEditor(this._oEditor,this);if(!oColumn.editorOptions||!oColumn.editorOptions.disableBtns){this.showCellEditorBtns(elContainer);}
this.doBeforeShowCellEditor(this._oEditor);this.activeColumnEditor=this._oEditor;return;}}}};YAHOO.widget.DataTable.prototype.doBeforeShowCellEditor=function(oEditor){};YAHOO.widget.DataTable.prototype.showCellEditorBtns=function(elContainer){var elBtnsDiv=elContainer.appendChild(document.createElement("div"));YAHOO.util.Dom.addClass(elBtnsDiv,YAHOO.widget.DataTable.CLASS_BUTTON);var elSaveBtn=elBtnsDiv.appendChild(document.createElement("button"));elSaveBtn.innerHTML="Save";YAHOO.util.Event.addListener(elSaveBtn,"click",this.saveCellEditor,this,true);var elCancelBtn=elBtnsDiv.appendChild(document.createElement("button"));elCancelBtn.innerHTML="Cancel";YAHOO.util.Event.addListener(elCancelBtn,"click",this.cancelCellEditor,this,true);};YAHOO.widget.DataTable.prototype.saveCellEditor=function(){if(this._oEditor.validator){var newData=this._oEditor.value;var oldData=this._oEditor.record.getData(this._oEditor.column.key);this._oEditor.value=this._oEditor.validator(newData,oldData);if(this._oEditor.value===null){this._oEditor.container.style.display="none";this._oEditor.value=null;this.activeColumnEditor=null;this.fireEvent("editorRevertEvent",{editor:this._oEditor,oldData:oldData,newData:newData});return;}}
this._oRecordSet.updateKey(this._oEditor.record,this._oEditor.column.key,this._oEditor.value);this.formatCell(this._oEditor.cell);this.activeEditor=null;this._oEditor.container.style.display="none";this._oEditor.value=null;this.activeColumnEditor=null;this.fireEvent("editorSaveEvent",{editor:this._oEditor,oldData:oldData,newData:newData});};YAHOO.widget.DataTable.prototype.cancelCellEditor=function(){this._oEditor.container.style.display="none";this._oEditor.value=null;this.fireEvent("editorCancelEvent",{editor:this._oEditor});};YAHOO.widget.DataTable.editCheckbox=function(oEditor,oSelf){var elCell=oEditor.cell;var oRecord=oEditor.record;var oColumn=oEditor.column;var elContainer=oEditor.container;var aCheckedValues=oRecord.getData(oColumn.key);if(!YAHOO.lang.isArray(aCheckedValues)){aCheckedValues=[aCheckedValues];}
var checkboxOptions=(oColumn.editorOptions&&YAHOO.lang.isArray(oColumn.editorOptions.checkboxOptions))?oColumn.editorOptions.checkboxOptions:[];var aCheckboxes=[];var aLabels=[];for(var j=0;j<checkboxOptions.length;j++){aCheckboxes[j]=elContainer.appendChild(document.createElement("input"));aCheckboxes[j].type="checkbox";aCheckboxes[j].id="yui-dt-"+oSelf._nIndex+"-col"+oColumn.getIndex()+"-chkbox"+j;aCheckboxes[j].value=checkboxOptions[j].value||checkboxOptions[j];for(var k=0;k<aCheckedValues.length;k++){if(aCheckboxes[j].value===aCheckedValues[k]){aCheckboxes[j].checked=true;}}
aLabels[j]=elContainer.appendChild(document.createElement("label"));aLabels[j].htmlFor=aCheckboxes[j].id;aLabels[j].innerHTML+=checkboxOptions[j].label||checkboxOptions[j];YAHOO.util.Event.addListener(aCheckboxes[j],"click",function(){aCheckedValues=[];for(var m=0;m<aCheckboxes.length;m++){if(aCheckboxes[m].checked){aCheckedValues.push(aCheckboxes[m].value);}}
oSelf._oEditor.value=aCheckedValues;});}
oSelf._focusEl(aCheckboxes[0]);};YAHOO.widget.DataTable.editDate=function(oEditor,oSelf){var elCell=oEditor.cell;var oRecord=oEditor.record;var oColumn=oEditor.column;var elContainer=oEditor.container;var value=oRecord.getData(oColumn.key);if(YAHOO.widget.Calendar){var selectedValue=(value.getMonth()+1)+"/"+value.getDate()+"/"+value.getFullYear();var calContainer=elContainer.appendChild(document.createElement("div"));calContainer.id="yui-dt-"+oSelf._nIndex+"-col"+oColumn.getIndex()+"-dateContainer";var calendar=new YAHOO.widget.Calendar("yui-dt-"+oSelf._nIndex+"-col"+oColumn.getIndex()+"-date",calContainer.id,{selected:selectedValue,pagedate:value});calendar.render();calContainer.style.cssFloat="none";var myDateHandler=function(type,args,obj){oSelf._oEditor.value=new Date(args[0][0][0],args[0][0][1]-1,args[0][0][2]);};calendar.selectEvent.subscribe(myDateHandler);}
else{}};YAHOO.widget.DataTable.editDropdown=function(oEditor,oSelf){var elCell=oEditor.cell;var oRecord=oEditor.record;var oColumn=oEditor.column;var elContainer=oEditor.container;var value=oRecord.getData(oColumn.key);var elDropdown=elContainer.appendChild(document.createElement("select"));var dropdownOptions=(oColumn.editorOptions&&YAHOO.lang.isArray(oColumn.editorOptions.dropdownOptions))?oColumn.editorOptions.dropdownOptions:[];for(var j=0;j<dropdownOptions.length;j++){var elOption=document.createElement("option");elOption.value=dropdownOptions[j].value||dropdownOptions[j];elOption.innerHTML=dropdownOptions[j].text||dropdownOptions[j];elOption=elDropdown.appendChild(elOption);if(value===elDropdown.options[j].value){elDropdown.options[j].selected=true;}}
YAHOO.util.Event.addListener(elDropdown,"change",function(){oSelf._oEditor.value=elDropdown[elDropdown.selectedIndex].value;});oSelf._focusEl(elDropdown);};YAHOO.widget.DataTable.editRadio=function(oEditor,oSelf){var elCell=oEditor.cell;var oRecord=oEditor.record;var oColumn=oEditor.column;var elContainer=oEditor.container;var value=oRecord.getData(oColumn.key);if(oColumn.editorOptions&&YAHOO.lang.isArray(oColumn.editorOptions.radioOptions)){var radioOptions=oColumn.editorOptions.radioOptions;var elForm=elContainer.appendChild(document.createElement("form"));elForm.name="yui-dt-"+oSelf._nIndex+"-col"+oColumn.getIndex()+"-form";var aLabels=[];var aRadios=[];for(var j=0;j<radioOptions.length;j++){aRadios[j]=elForm.appendChild(document.createElement("input"));aRadios[j].type="radio";aRadios[j].id="yui-dt-"+oSelf._nIndex+"-col"+oColumn.getIndex()+"-radiobtn"+j;aRadios[j].name=oSelf._nIndex+oColumn.key;aRadios[j].value=radioOptions[j].value||radioOptions[j];if(value===aRadios[j].value){aRadios[j].checked=true;oSelf._focusEl(aRadios[j]);}
aLabels[j]=elForm.appendChild(document.createElement("label"));aLabels[j].htmlFor=aRadios[j].id;aLabels[j].innerHTML+=radioOptions[j].label||radioOptions[j];YAHOO.util.Event.addListener(aRadios[j],"click",function(){oSelf._oEditor.value=this.value;});}}};YAHOO.widget.DataTable.editTextarea=function(oEditor,oSelf){var elCell=oEditor.cell;var oRecord=oEditor.record;var oColumn=oEditor.column;var elContainer=oEditor.container;var value=oRecord.getData(oColumn.key);var elTextarea=elContainer.appendChild(document.createElement("textarea"));elTextarea.style.width=elCell.offsetWidth+"px";elTextarea.style.height=(4*elCell.offsetHeight)+"px";elTextarea.value=value;YAHOO.util.Event.addListener(elTextarea,"keyup",function(){oSelf._oEditor.value=elTextarea.value;});elTextarea.select();};YAHOO.widget.DataTable.editTextbox=function(oEditor,oSelf){var elCell=oEditor.cell;var oRecord=oEditor.record;var oColumn=oEditor.column;var elContainer=oEditor.container;var value=oRecord.getData(oColumn.key);var elTextbox=elContainer.appendChild(document.createElement("input"));elTextbox.type="text";elTextbox.style.width=elCell.offsetWidth+"px";elTextbox.style.height=elCell.offsetHeight+"px";elTextbox.value=value;YAHOO.util.Event.addListener(elTextbox,"keyup",function(){oSelf._oEditor.value=elTextbox.value;});elTextbox.select();};YAHOO.widget.DataTable.validateNumber=function(oData){var number=oData*1;if(YAHOO.lang.isNumber(number)){return number;}
else{return null;}};YAHOO.widget.DataTable.prototype.hideColumnEditor=function(){if(this.activeColumnEditor){var oColumnEditor=this.activeColumnEditor;oColumnEditor.hide();this.activeColumnEditor=null;this.fireEvent("columnEditorHideEvent",{columnEditor:oColumnEditor});return;}};YAHOO.widget.DataTable.prototype.saveColumnEditor=function(){if(this.activeColumnEditor){var elCell=this.activeColumnEditor.cell;var oColumn=this.activeColumnEditor.column;var oRecord=this.activeColumnEditor.record;var oldValue=oRecord.getData(oColumn.key);var newValue=this.activeColumnEditor.getInputValue();if(YAHOO.util.Lang.isString(oColumn.key)){this._oRecordSet.updateKey(oRecord,oColumn.key,newValue);this.formatCell(elCell,oRecord,oColumn);this.hideColumnEditor();this.fireEvent("columnEditorSaveEvent",{columnEditor:this.activeColumnEditor,oldData:oldValue,newData:newValue});}}};YAHOO.widget.DataTable.prototype.doBeforeLoadData=function(sRequest,oResponse){return true;};YAHOO.widget.DataTable.prototype.onColumnEditorKeydown=function(oArgs){var e=oArgs.event;var oColumnEditor=oArgs.columnEditor;var elTarget=YAHOO.util.Event.getTarget(e);if((e.keyCode==27)){this.hideColumnEditor();}};YAHOO.widget.DataTable.prototype.onEventSortColumn=function(oArgs){var evt=oArgs.event;var target=oArgs.target;YAHOO.util.Event.stopEvent(evt);var el=this.getThEl(target)||this.getTdEl(target);if(el&&YAHOO.lang.isNumber(el.yuiColumnId)){this.sortColumn(this._oColumnSet.getColumn(el.yuiColumnId));}
else{}};YAHOO.widget.DataTable.prototype.onEventSelectRow=function(oArgs){var sMode=this.get("selectionMode");if((sMode=="singlecell")||(sMode=="cellblock")||(sMode=="cellrange")){return;}
var evt=oArgs.event;var elTarget=oArgs.target;var bSHIFT=evt.shiftKey;var bCTRL=evt.ctrlKey;var i,nAnchorTrIndex;var elTargetRow=this.getTrEl(elTarget);if(elTargetRow){var allRows=this._elTbody.rows;var nTargetTrIndex=elTargetRow.sectionRowIndex;var elAnchorRow=YAHOO.util.Dom.get(this._sSelectionAnchorId);if((sMode!="single")&&bSHIFT&&bCTRL){if(elAnchorRow&&YAHOO.lang.isNumber(elAnchorRow.sectionRowIndex)){nAnchorTrIndex=elAnchorRow.sectionRowIndex;if(this.isSelected(elAnchorRow)){if(nAnchorTrIndex<nTargetTrIndex){for(i=nAnchorTrIndex+1;i<=nTargetTrIndex;i++){if(!this.isSelected(allRows[i])){this.selectRow(allRows[i]);}}}
else{for(i=nAnchorTrIndex-1;i>=nTargetTrIndex;i--){if(!this.isSelected(allRows[i])){this.selectRow(allRows[i]);}}}}
else{if(nAnchorTrIndex<nTargetTrIndex){for(i=nAnchorTrIndex+1;i<=nTargetTrIndex-1;i++){if(this.isSelected(allRows[i])){this.unselectRow(allRows[i]);}}}
else{for(i=nTargetTrIndex+1;i<=nAnchorTrIndex-1;i++){if(this.isSelected(allRows[i])){this.unselectRow(allRows[i]);}}}
this.selectRow(elTargetRow);}}
else{this._sSelectionAnchorId=elTargetRow.id;if(this.isSelected(elTargetRow)){this.unselectRow(elTargetRow);}
else{this.selectRow(elTargetRow);}}}
else if((sMode!="single")&&bSHIFT){this.unselectAllRows();if(elAnchorRow&&YAHOO.lang.isNumber(elAnchorRow.sectionRowIndex)){nAnchorTrIndex=elAnchorRow.sectionRowIndex;if(nAnchorTrIndex<nTargetTrIndex){for(i=nAnchorTrIndex;i<=nTargetTrIndex;i++){this.selectRow(allRows[i]);}}
else{for(i=nAnchorTrIndex;i>=nTargetTrIndex;i--){this.selectRow(allRows[i]);}}}
else{this._sSelectionAnchorId=elTargetRow.id;this.selectRow(elTargetRow);}}
else if((sMode!="single")&&bCTRL){this._sSelectionAnchorId=elTargetRow.id;if(this.isSelected(elTargetRow)){this.unselectRow(elTargetRow);}
else{this.selectRow(elTargetRow);}}
else if(sMode=="single"){this.unselectAllRows();this.selectRow(elTargetRow);}
else{this._sSelectionAnchorId=elTargetRow.id;this.unselectAllRows();this.selectRow(elTargetRow);}
YAHOO.util.Event.stopEvent(evt);var sel;if(window.getSelection){sel=window.getSelection();}
else if(document.getSelection){sel=document.getSelection();}
else if(document.selection){sel=document.selection;}
if(sel){if(sel.empty){sel.empty();}
else if(sel.removeAllRanges){sel.removeAllRanges();}
else if(sel.collapse){sel.collapse();}}}
else{}};YAHOO.widget.DataTable.prototype.onEventSelectCell=function(oArgs){var sMode=this.get("selectionMode");if((sMode=="standard")||(sMode=="single")){return;}
var evt=oArgs.event;var elTarget=oArgs.target;var bSHIFT=evt.shiftKey;var bCTRL=evt.ctrlKey;var i,j,nAnchorTrIndex,nAnchorTdIndex,currentRow,startIndex,endIndex;var elTargetCell=this.getTdEl(elTarget);if(elTargetCell){var elTargetRow=this.getTrEl(elTargetCell);var allRows=this._elTbody.rows;var nTargetTrIndex=elTargetRow.sectionRowIndex;var nTargetTdIndex=elTarget.cellIndex;var elAnchorCell=YAHOO.util.Dom.get(this._sSelectionAnchorId);if((sMode!="singlecell")&&bSHIFT&&bCTRL){if(elAnchorCell&&YAHOO.lang.isNumber(elAnchorCell.cellIndex)){nAnchorTrIndex=elAnchorCell.parentNode.sectionRowIndex;nAnchorTdIndex=elAnchorCell.cellIndex;if(this.isSelected(elAnchorCell)){if(nAnchorTrIndex==nTargetTrIndex){if(nAnchorTdIndex<nTargetTdIndex){for(i=nAnchorTdIndex+1;i<=nTargetTdIndex;i++){this.selectCell(allRows[nTargetTrIndex].cells[i]);}}
else if(nTargetTdIndex<nAnchorTdIndex){for(i=nTargetTdIndex;i<nAnchorTdIndex;i++){this.selectCell(allRows[nTargetTrIndex].cells[i]);}}}
else if(nAnchorTrIndex<nTargetTrIndex){if(sMode=="cellrange"){for(i=nAnchorTdIndex+1;i<allRows[nAnchorTrIndex].cells.length;i++){this.selectCell(allRows[nAnchorTrIndex].cells[i]);}
for(i=nAnchorTrIndex+1;i<nTargetTrIndex;i++){for(j=0;j<allRows[i].cells.length;j++){this.selectCell(allRows[i].cells[j]);}}
for(i=0;i<=nTargetTdIndex;i++){this.selectCell(allRows[nTargetTrIndex].cells[i]);}}
else if(sMode=="cellblock"){startIndex=Math.min(nAnchorTdIndex,nTargetTdIndex);endIndex=Math.max(nAnchorTdIndex,nTargetTdIndex);for(i=nAnchorTrIndex;i<=nTargetTrIndex;i++){for(j=startIndex;j<=endIndex;j++){this.selectCell(allRows[i].cells[j]);}}}}
else{if(sMode=="cellrange"){for(i=nTargetTdIndex;i<allRows[nTargetTrIndex].cells.length;i++){this.selectCell(allRows[nTargetTrIndex].cells[i]);}
for(i=nTargetTrIndex+1;i<nAnchorTrIndex;i++){for(j=0;j<allRows[i].cells.length;j++){this.selectCell(allRows[i].cells[j]);}}
for(i=0;i<nAnchorTdIndex;i++){this.selectCell(allRows[nAnchorTrIndex].cells[i]);}}
else if(sMode=="cellblock"){startIndex=Math.min(nAnchorTdIndex,nTargetTdIndex);endIndex=Math.max(nAnchorTdIndex,nTargetTdIndex);for(i=nAnchorTrIndex;i>=nTargetTrIndex;i--){for(j=endIndex;j>=startIndex;j--){this.selectCell(allRows[i].cells[j]);}}}}}
else{if(nAnchorTrIndex==nTargetTrIndex){if(nAnchorTdIndex<nTargetTdIndex){for(i=nAnchorTdIndex+1;i<nTargetTdIndex;i++){this.unselectCell(allRows[nTargetTrIndex].cells[i]);}}
else if(nTargetTdIndex<nAnchorTdIndex){for(i=nTargetTdIndex+1;i<nAnchorTdIndex;i++){this.unselectCell(allRows[nTargetTrIndex].cells[i]);}}}
if(nAnchorTrIndex<nTargetTrIndex){for(i=nAnchorTrIndex;i<=nTargetTrIndex;i++){currentRow=allRows[i];for(j=0;j<currentRow.cells.length;j++){if(currentRow.sectionRowIndex==nAnchorTrIndex){if(j>nAnchorTdIndex){this.unselectCell(currentRow.cells[j]);}}
else if(currentRow.sectionRowIndex==nTargetTrIndex){if(j<nTargetTdIndex){this.unselectCell(currentRow.cells[j]);}}
else{this.unselectCell(currentRow.cells[j]);}}}}
else{for(i=nTargetTrIndex;i<=nAnchorTrIndex;i++){currentRow=allRows[i];for(j=0;j<currentRow.cells.length;j++){if(currentRow.sectionRowIndex==nTargetTrIndex){if(j>nTargetTdIndex){this.unselectCell(currentRow.cells[j]);}}
else if(currentRow.sectionRowIndex==nAnchorTrIndex){if(j<nAnchorTdIndex){this.unselectCell(currentRow.cells[j]);}}
else{this.unselectCell(currentRow.cells[j]);}}}}
this.selectCell(elTargetCell);}}
else{this._sSelectionAnchorId=elTargetCell.id;if(this.isSelected(elTargetCell)){this.unselectCell(elTargetCell);}
else{this.selectCell(elTargetCell);}}}
else if((sMode!="singlecell")&&bSHIFT){this.unselectAllCells();if(elAnchorCell&&YAHOO.lang.isNumber(elAnchorCell.cellIndex)){nAnchorTrIndex=elAnchorCell.parentNode.sectionRowIndex;nAnchorTdIndex=elAnchorCell.cellIndex;if(nAnchorTrIndex==nTargetTrIndex){if(nAnchorTdIndex<nTargetTdIndex){for(i=nAnchorTdIndex;i<=nTargetTdIndex;i++){this.selectCell(allRows[nTargetTrIndex].cells[i]);}}
else if(nTargetTdIndex<nAnchorTdIndex){for(i=nTargetTdIndex;i<=nAnchorTdIndex;i++){this.selectCell(allRows[nTargetTrIndex].cells[i]);}}}
else if(nAnchorTrIndex<nTargetTrIndex){if(sMode=="cellrange"){for(i=nAnchorTrIndex;i<=nTargetTrIndex;i++){currentRow=allRows[i];for(j=0;j<currentRow.cells.length;j++){if(currentRow.sectionRowIndex==nAnchorTrIndex){if(j>=nAnchorTdIndex){this.selectCell(currentRow.cells[j]);}}
else if(currentRow.sectionRowIndex==nTargetTrIndex){if(j<=nTargetTdIndex){this.selectCell(currentRow.cells[j]);}}
else{this.selectCell(currentRow.cells[j]);}}}}
else if(sMode=="cellblock"){startIndex=Math.min(nAnchorTdIndex,nTargetTdIndex);endIndex=Math.max(nAnchorTdIndex,nTargetTdIndex);for(i=nAnchorTrIndex;i<=nTargetTrIndex;i++){for(j=startIndex;j<=endIndex;j++){this.selectCell(allRows[i].cells[j]);}}
this._sLastSelectedId=allRows[nTargetTrIndex].cells[nTargetTdIndex].id;}}
else{if(sMode=="cellrange"){for(i=nTargetTrIndex;i<=nAnchorTrIndex;i++){currentRow=allRows[i];for(j=0;j<currentRow.cells.length;j++){if(currentRow.sectionRowIndex==nTargetTrIndex){if(j>=nTargetTdIndex){this.selectCell(currentRow.cells[j]);}}
else if(currentRow.sectionRowIndex==nAnchorTrIndex){if(j<=nAnchorTdIndex){this.selectCell(currentRow.cells[j]);}}
else{this.selectCell(currentRow.cells[j]);}}}}
else if(sMode=="cellblock"){startIndex=Math.min(nAnchorTdIndex,nTargetTdIndex);endIndex=Math.max(nAnchorTdIndex,nTargetTdIndex);for(i=nTargetTrIndex;i<=nAnchorTrIndex;i++){for(j=startIndex;j<=endIndex;j++){this.selectCell(allRows[i].cells[j]);}}
this._sLastSelectedId=allRows[nTargetTrIndex].cells[nTargetTdIndex].id;}}}
else{this._sSelectionAnchorId=elTargetCell.id;this.selectCell(elTargetCell);}}
else if((sMode!="singlecell")&&bCTRL){this._sSelectionAnchorId=elTargetCell.id;if(this.isSelected(elTargetCell)){this.unselectCell(elTargetCell);}
else{this.selectCell(elTargetCell);}}
else{this._sSelectionAnchorId=elTargetCell.id;this.unselectAllCells();this.selectCell(elTargetCell);}
YAHOO.util.Event.stopEvent(evt);var sel;if(window.getSelection){sel=window.getSelection();}
else if(document.getSelection){sel=document.getSelection();}
else if(document.selection){sel=document.selection;}
if(sel){if(sel.empty){sel.empty();}
else if(sel.removeAllRanges){sel.removeAllRanges();}
else if(sel.collapse){sel.collapse();}}}
else{}};YAHOO.widget.DataTable.prototype.onEventFormatCell=function(oArgs){var evt=oArgs.event;var target=oArgs.target;var elTag=target.tagName.toLowerCase();var elCell=this.getTdEl(target);if(elCell&&YAHOO.lang.isNumber(elCell.yuiColumnId)){var oColumn=this._oColumnSet.getColumn(elCell.yuiColumnId);this.formatCell(elCell,this.getRecord(elCell),oColumn);}
else{}};YAHOO.widget.DataTable.prototype.onEventHighlightCell=function(oArgs){var evt=oArgs.event;var target=oArgs.target;var elTag=target.tagName.toLowerCase();var elCell=this.getTdEl(target);if(elCell){this.highlight(elCell);}
else{}};YAHOO.widget.DataTable.prototype.onEventUnhighlightCell=function(oArgs){var evt=oArgs.event;var target=oArgs.target;var elTag=target.tagName.toLowerCase();var elCell=this.getTdEl(target);if(elCell){this.unhighlight(elCell);}
else{}};YAHOO.widget.DataTable.prototype.onEventShowCellEditor=function(oArgs){var evt=oArgs.event;var target=oArgs.target;var elTag=target.tagName.toLowerCase();var elCell=this.getTdEl(target);if(elCell){this.showCellEditor(elCell);}
else{}};YAHOO.widget.DataTable.prototype.onDataReturnInitializeTable=function(sRequest,oResponse){this.fireEvent("dataReturnEvent",{request:sRequest,response:oResponse});var ok=this.doBeforeLoadData(sRequest,oResponse);if(ok&&oResponse&&!oResponse.error&&YAHOO.lang.isArray(oResponse.results)){this.initializeTable(oResponse.results);}
else if(ok&&oResponse.error){this.showTableMessage(YAHOO.widget.DataTable.MSG_ERROR,YAHOO.widget.DataTable.CLASS_ERROR);}
else if(ok){this.showTableMessage(YAHOO.widget.DataTable.MSG_EMPTY,YAHOO.widget.DataTable.CLASS_EMPTY);}};YAHOO.widget.DataTable.prototype.onDataReturnAppendRows=function(sRequest,oResponse){this.fireEvent("dataReturnEvent",{request:sRequest,response:oResponse});var ok=this.doBeforeLoadData(sRequest,oResponse);if(ok&&oResponse&&!oResponse.error&&YAHOO.lang.isArray(oResponse.results)){this.addRows(oResponse.results);}
else if(ok&&oResponse.error){this.showTableMessage(YAHOO.widget.DataTable.MSG_ERROR,YAHOO.widget.DataTable.CLASS_ERROR);}};YAHOO.widget.DataTable.prototype.onDataReturnInsertRows=function(sRequest,oResponse){this.fireEvent("dataReturnEvent",{request:sRequest,response:oResponse});var ok=this.doBeforeLoadData(sRequest,oResponse,bError);if(ok&&oResponse&&!oResponse.error&&YAHOO.lang.isArray(oResponse.results)){this.addRows(oResponse.results,0);}
else if(ok&&oResponse.error){this.showTableMessage(YAHOO.widget.DataTable.MSG_ERROR,YAHOO.widget.DataTable.CLASS_ERROR);}};YAHOO.widget.ColumnSet=function(aHeaders){this._sName="instance"+YAHOO.widget.ColumnSet._nCount;var tree=[];var flat=[];var keys=[];var headers=[];var nodeDepth=-1;var parseColumns=function(nodeList,parent){nodeDepth++;if(!tree[nodeDepth]){tree[nodeDepth]=[];}
for(var j=0;j<nodeList.length;j++){var currentNode=nodeList[j];var oColumn=new YAHOO.widget.Column(currentNode);flat.push(oColumn);if(parent){oColumn.parent=parent;}
if(YAHOO.lang.isArray(currentNode.children)){oColumn.children=currentNode.children;var terminalChildNodes=0;var countTerminalChildNodes=function(ancestor){var descendants=ancestor.children;for(var k=0;k<descendants.length;k++){if(YAHOO.lang.isArray(descendants[k].children)){countTerminalChildNodes(descendants[k]);}
else{terminalChildNodes++;}}};countTerminalChildNodes(currentNode);oColumn._colspan=terminalChildNodes;var currentChildren=currentNode.children;for(k=0;k<currentChildren.length;k++){var child=currentChildren[k];if(oColumn.className&&(child.className===undefined)){child.className=oColumn.className;}
if(oColumn.editor&&(child.editor===undefined)){child.editor=oColumn.editor;}
if(oColumn.editorOptions&&(child.editorOptions===undefined)){child.editorOptions=oColumn.editorOptions;}
if(oColumn.formatter&&(child.formatter===undefined)){child.formatter=oColumn.formatter;}
if(oColumn.resizeable&&(child.resizeable===undefined)){child.resizeable=oColumn.resizeable;}
if(oColumn.type&&(child.type===undefined)){child.type=oColumn.type;}
if(oColumn.width&&(child.width===undefined)){child.width=oColumn.width;}}
if(!tree[nodeDepth+1]){tree[nodeDepth+1]=[];}
parseColumns(currentChildren,oColumn);}
else{oColumn._index=keys.length;keys.push(oColumn);oColumn._colspan=1;}
tree[nodeDepth].push(oColumn);}
nodeDepth--;};if(YAHOO.lang.isArray(aHeaders)){parseColumns(aHeaders);}
var parseTreeForRowspan=function(tree){var maxRowDepth=1;var currentRow;var currentColumn;var countMaxRowDepth=function(row,tmpRowDepth){tmpRowDepth=tmpRowDepth||1;for(var n=0;n<row.length;n++){var col=row[n];if(YAHOO.lang.isArray(col.children)){tmpRowDepth++;countMaxRowDepth(col.children,tmpRowDepth);tmpRowDepth--;}
else{if(tmpRowDepth>maxRowDepth){maxRowDepth=tmpRowDepth;}}}};for(var m=0;m<tree.length;m++){currentRow=tree[m];countMaxRowDepth(currentRow);for(var p=0;p<currentRow.length;p++){currentColumn=currentRow[p];if(!YAHOO.lang.isArray(currentColumn.children)){currentColumn._rowspan=maxRowDepth;}
else{currentColumn._rowspan=1;}}
maxRowDepth=1;}};parseTreeForRowspan(tree);var recurseAncestorsForHeaders=function(i,oColumn){headers[i].push(oColumn._nId);if(oColumn.parent){recurseAncestorsForHeaders(i,oColumn.parent);}};for(var i=0;i<keys.length;i++){headers[i]=[];recurseAncestorsForHeaders(i,keys[i]);headers[i]=headers[i].reverse();headers[i]=headers[i].join(" ");}
this.tree=tree;this.flat=flat;this.keys=keys;this.headers=headers;YAHOO.widget.ColumnSet._nCount++;};YAHOO.widget.ColumnSet._nCount=0;YAHOO.widget.ColumnSet.prototype._sName=null;YAHOO.widget.ColumnSet.prototype.tree=null;YAHOO.widget.ColumnSet.prototype.flat=null;YAHOO.widget.ColumnSet.prototype.keys=null;YAHOO.widget.ColumnSet.prototype.headers=null;YAHOO.widget.ColumnSet.prototype.toString=function(){return"ColumnSet "+this._sName;};YAHOO.widget.ColumnSet.prototype.getColumn=function(column){var allColumns=this.flat;if(YAHOO.lang.isNumber(column)){for(var i=0;i<allColumns.length;i++){if(allColumns[i]._nId===column){return allColumns[i];}}}
else if(YAHOO.lang.isString(column)){for(i=0;i<allColumns.length;i++){if(allColumns[i].key===column){return allColumns[i];}}}
return null;};YAHOO.widget.Column=function(oConfigs){this._nId=YAHOO.widget.Column._nCount;this._sName="Column instance"+this._nId;if(oConfigs&&(oConfigs.constructor==Object)){for(var sConfig in oConfigs){if(sConfig){this[sConfig]=oConfigs[sConfig];}}}
YAHOO.widget.Column._nCount++;};YAHOO.widget.Column._nCount=0;YAHOO.widget.Column.prototype._sName=null;YAHOO.widget.Column.prototype._nId=null;YAHOO.widget.Column.prototype._index=null;YAHOO.widget.Column.prototype._colspan=1;YAHOO.widget.Column.prototype._rowspan=1;YAHOO.widget.Column.prototype._parent=null;YAHOO.widget.Column.prototype._width=null;YAHOO.widget.Column.prototype._minWidth=null;YAHOO.widget.Column.prototype.key=null;YAHOO.widget.Column.prototype.label=null;YAHOO.widget.Column.prototype.type="string";YAHOO.widget.Column.prototype.abbr=null;YAHOO.widget.Column.prototype.children=null;YAHOO.widget.Column.prototype.width=null;YAHOO.widget.Column.prototype.className=null;YAHOO.widget.Column.prototype.formatter=null;YAHOO.widget.Column.prototype.editor=null;YAHOO.widget.Column.prototype.editorOptions=null;YAHOO.widget.Column.prototype.resizeable=false;YAHOO.widget.Column.prototype.sortable=false;YAHOO.widget.Column.prototype.descFunction=null;YAHOO.widget.Column.prototype.ascFunction=null;YAHOO.widget.Column.prototype.toString=function(){return this._sName;};YAHOO.widget.Column.prototype.getId=function(){return this._nId;};YAHOO.widget.Column.prototype.getIndex=function(){return this._index;};YAHOO.widget.Column.prototype.getParent=function(){return this._parent;};YAHOO.widget.Column.prototype.getColspan=function(){return this._colspan;};YAHOO.widget.Column.prototype.getRowspan=function(){return this._rowspan;};YAHOO.widget.Column.prototype.getColumnEditor=function(elCell,oRecord){var oEditor=this.editor;if(YAHOO.lang.isString(oEditor)){oEditor=new YAHOO.widget.ColumnEditor(this);oEditor.show(elCell,oRecord);this.editor=oEditor;}
else if(oEditor instanceof YAHOO.widget.ColumnEditor){oEditor.show(elCell,oRecord,this);}
return oEditor;};YAHOO.widget.ColumnEditor=function(oColumn){this._sName="instance"+YAHOO.widget.ColumnEditor._nCount;if((oColumn instanceof YAHOO.widget.Column)&&YAHOO.lang.isString(oColumn.type)){this.column=oColumn;this.type=oColumn.editor;}
else{}
var elContainer=document.body.appendChild(document.createElement("div"));elContainer.id="yui-dt-editor"+YAHOO.widget.ColumnEditor._nCount;YAHOO.util.Dom.addClass(elContainer,YAHOO.widget.DataTable.CLASS_EDITOR);YAHOO.util.Dom.addClass(elContainer,"yui-dt-"+this.type);YAHOO.util.Dom.addClass(elContainer,oColumn.className);this.container=elContainer;YAHOO.widget.ColumnEditor._nCount++;};YAHOO.widget.ColumnEditor._nCount=0;YAHOO.widget.ColumnEditor.prototype._sName=null;YAHOO.widget.ColumnEditor.prototype.container=null;YAHOO.widget.ColumnEditor.prototype.column=null;YAHOO.widget.ColumnEditor.prototype.type=null;YAHOO.widget.ColumnEditor.prototype.input=null;YAHOO.widget.ColumnEditor.prototype.toString=function(){return"ColumnEditor "+this._sName;};YAHOO.widget.ColumnEditor.prototype.show=function(elCell,oRecord){this.cell=elCell;this.record=oRecord;this.move(elCell);var elInput;switch(this.type){case"dropdown":YAHOO.widget.DataTable.formatDropdown(this.container,oRecord,this.column);elInput=this.container.getElementsByTagName("select")[0];elInput.focus();break;case"textbox":YAHOO.widget.DataTable.formatTextbox(this.container,oRecord,this.column);elInput=this.container.getElementsByTagName("input")[0];elInput.focus();elInput.select();break;case"textarea":YAHOO.widget.DataTable.formatTextarea(this.container,oRecord,this.column);velInput=this.container.getElementsByTagName("textarea")[0];elInput.focus();elInput.select();break;default:break;}
this.container.style.display="block";};YAHOO.widget.ColumnEditor.prototype.updateDropdownEditor=function(elCell,oRecord){var elInput=this.container.getElementsByTagName("select")[0];elInput.focus();};YAHOO.widget.ColumnEditor.prototype.updateTextboxEditor=function(elCell,oRecord){var elInput=this.container.getElementsByTagName("input")[0];elInput.focus();elInput.select();};YAHOO.widget.ColumnEditor.prototype.updateTextareaEditor=function(elCell,oRecord){var elInput=this.container.getElementsByTagName("textarea")[0];elInput.focus();elInput.select();};YAHOO.widget.ColumnEditor.prototype.move=function(el){el=el||this.cell;var x,y,offsetEl,scrollEl;x=el.offsetLeft;y=el.offsetTop;offsetEl=el;while(offsetEl.offsetParent){x+=offsetEl.offsetParent.offsetLeft;y+=offsetEl.offsetParent.offsetTop;offsetEl=offsetEl.offsetParent;}
scrollEl=el;while(scrollEl.tagName.toLowerCase()!=="body"){x-=scrollEl.scrollLeft;y-=scrollEl.scrollTop;scrollEl=scrollEl.parentNode;}
this.container.style.left=x+"px";this.container.style.top=y+"px";};YAHOO.widget.ColumnEditor.prototype.getInputValue=function(){var value;switch(this.type){case"textbox":value=this.getTextboxEditorValue();break;case"textarea":value=this.getTextareaEditorValue();break;default:break;}
return value;};YAHOO.widget.ColumnEditor.prototype.getTextboxEditorValue=function(){var elInput=this.container.getElementsByTagName("input")[0];return elInput.value;};YAHOO.widget.ColumnEditor.prototype.getTextareaEditorValue=function(){return this.input.value;};YAHOO.widget.ColumnEditor.prototype.hide=function(){this.container.style.display="none";};YAHOO.util.Sort={compareAsc:function(a,b){if((a===null)||(typeof a=="undefined")){if((b===null)||(typeof b=="undefined")){return 0;}
else{return 1;}}
else if((b===null)||(typeof b=="undefined")){return-1;}
if(a.constructor==String){a=a.toLowerCase();}
if(b.constructor==String){b=b.toLowerCase();}
if(a<b){return-1;}
else if(a>b){return 1;}
else{return 0;}},compareDesc:function(a,b){if((a===null)||(typeof a=="undefined")){if((b===null)||(typeof b=="undefined")){return 0;}
else{return-1;}}
else if((b===null)||(typeof b=="undefined")){return 1;}
if(a.constructor==String){a=a.toLowerCase();}
if(b.constructor==String){b=b.toLowerCase();}
if(a<b){return 1;}
else if(a>b){return-1;}
else{return 0;}}};YAHOO.util.ColumnResizer=function(oDataTable,oColumn,elThead,sHandleId,sGroup,oConfig){if(oDataTable&&oColumn&&elThead&&sHandleId){this.datatable=oDataTable;this.column=oColumn;this.cell=elThead;this.init(sHandleId,sGroup,oConfig);this.setYConstraint(0,0);}
else{}};if(YAHOO.util.DD){YAHOO.extend(YAHOO.util.ColumnResizer,YAHOO.util.DD);}
YAHOO.util.ColumnResizer.prototype.onMouseDown=function(e){this.startWidth=this.cell.offsetWidth;this.startPos=YAHOO.util.Dom.getX(this.getDragEl());if(this.datatable.fixedWidth){var cellLabel=YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_LABEL,"span",this.cell)[0];this.minWidth=cellLabel.offsetWidth+6;var sib=this.cell.nextSibling;var sibCellLabel=YAHOO.util.Dom.getElementsByClassName(YAHOO.widget.DataTable.CLASS_LABEL,"span",sib)[0];this.sibMinWidth=sibCellLabel.offsetWidth+6;var left=((this.startWidth-this.minWidth)<0)?0:(this.startWidth-this.minWidth);var right=((sib.offsetWidth-this.sibMinWidth)<0)?0:(sib.offsetWidth-this.sibMinWidth);this.setXConstraint(left,right);}};YAHOO.util.ColumnResizer.prototype.onMouseUp=function(e){var resizeStyle=YAHOO.util.Dom.get(this.handleElId).style;resizeStyle.left="auto";resizeStyle.right=0;resizeStyle.marginRight="-6px";resizeStyle.width="6px";this.datatable.fireEvent("columnResizeEvent",{column:this.column,target:this.cell});};YAHOO.util.ColumnResizer.prototype.onDrag=function(e){var newPos=YAHOO.util.Dom.getX(this.getDragEl());var offsetX=newPos-this.startPos;var newWidth=this.startWidth+offsetX;if(newWidth<this.minWidth){newWidth=this.minWidth;}
var oDataTable=this.datatable;var elCell=this.cell;if(oDataTable.fixedWidth){var sib=elCell.nextSibling;var sibnewwidth=sib.offsetWidth-offsetX;if(sibnewwidth<this.sibMinWidth){sibnewwidth=this.sibMinWidth;}
for(var i=0;i<oDataTable._oColumnSet.length;i++){if((i!=elCell.index)&&(i!=sibIndex)){YAHOO.util.Dom.get(oDataTable._oColumnSet.keys[i].id).style.width=oDataTable._oColumnSet.keys[i].width+"px";}}
sib.style.width=sibnewwidth;elCell.style.width=newWidth+"px";}
else{elCell.style.width=newWidth+"px";}};YAHOO.widget.RecordSet=function(data){this._sName="RecordSet instance"+YAHOO.widget.RecordSet._nCount;YAHOO.widget.RecordSet._nCount++;this._records=[];if(data){if(YAHOO.lang.isArray(data)){this.addRecords(data);}
else if(data.constructor==Object){this.addRecord(data);}}
this.createEvent("recordAddEvent");this.createEvent("recordsAddEvent");this.createEvent("recordUpdateEvent");this.createEvent("recordDeleteEvent");this.createEvent("recordsDeleteEvent");this.createEvent("resetEvent");this.createEvent("keyUpdateEvent");};if(YAHOO.util.EventProvider){YAHOO.augment(YAHOO.widget.RecordSet,YAHOO.util.EventProvider);}
else{}
YAHOO.widget.RecordSet._nCount=0;YAHOO.widget.RecordSet.prototype._sName=null;YAHOO.widget.RecordSet.prototype._nRecordCount=0;YAHOO.widget.RecordSet.prototype._length=null;YAHOO.widget.RecordSet.prototype._addRecord=function(oData,index){var oRecord=new YAHOO.widget.Record(oData);oRecord._nId=this._nRecordCount;this._nRecordCount++;if(YAHOO.lang.isNumber(index)&&(index>-1)){this._records.splice(index,0,oRecord);}
else{index=this.getLength();this._records.push(oRecord);}
this._length++;return oRecord;};YAHOO.widget.RecordSet.prototype._deleteRecord=function(index,range){if(!YAHOO.lang.isNumber(range)||(range<0)){range=1;}
this._records.splice(index,range);this._length=this._length-range;};YAHOO.widget.RecordSet.prototype.toString=function(){return this._sName;};YAHOO.widget.RecordSet.prototype.getLength=function(){return this._length;};YAHOO.widget.RecordSet.prototype.getRecord=function(index){if(YAHOO.lang.isNumber(index)){return this._records[index];}
return null;};YAHOO.widget.RecordSet.prototype.getRecords=function(index,range){if(!YAHOO.lang.isNumber(index)){return this._records;}
if(!YAHOO.lang.isNumber(range)){return this._records.slice(index);}
return this._records.slice(index,index+range);};YAHOO.widget.RecordSet.prototype.getRecordIndex=function(oRecord){for(var i=this._records.length-1;i>-1;i--){if(oRecord.getId()===this._records[i].getId()){return i;}}
return null;};YAHOO.widget.RecordSet.prototype.addRecord=function(oData,index){if(oData&&(oData.constructor==Object)){var oRecord=this._addRecord(oData,index);this.fireEvent("recordAddEvent",{record:oRecord,data:oData});return oRecord;}
else{return null;}};YAHOO.widget.RecordSet.prototype.addRecords=function(aData,index){if(YAHOO.lang.isArray(aData)){var newRecords=[];for(var i=0;i<aData.length;i++){if(aData[i]&&(aData[i].constructor==Object)){var record=this._addRecord(aData[i],index);newRecords.push(record);}}
this.fireEvent("recordsAddEvent",{records:newRecords,data:aData});return newRecords;}
else if(aData&&(aData.constructor==Object)){var oRecord=this._addRecord(aData);this.fireEvent("recordsAddEvent",{records:[oRecord],data:aData});return oRecord;}
else{}};YAHOO.widget.RecordSet.prototype.updateRecord=function(record,oData){var oRecord=null;if(YAHOO.lang.isNumber(record)){oRecord=this._records[record];}
else if(record instanceof YAHOO.widget.Record){oRecord=record;}
if(oRecord&&oData&&(oData.constructor==Object)){var oldData={};for(var key in oRecord._oData){oldData[key]=oRecord._oData[key];}
oRecord._oData=oData;this.fireEvent("recordUpdateEvent",{record:oRecord,newData:oData,oldData:oldData});return oRecord;}
else{return null;}};YAHOO.widget.RecordSet.prototype.updateKey=function(record,sKey,oData){var oRecord;if(YAHOO.lang.isNumber(record)){oRecord=this._records[record];}
if(record instanceof YAHOO.widget.Record){oRecord=record;var oldData=null;var keyValue=oRecord._oData[sKey];if(keyValue&&keyValue.constructor==Object){oldData={};for(var key in keyValue){oldData[key]=keyValue[key];}}
else{oldData=keyValue;}
oRecord._oData[sKey]=oData;this.fireEvent("keyUpdateEvent",{record:oRecord,key:sKey,newData:oData,oldData:oldData});}
else{}};YAHOO.widget.RecordSet.prototype.replaceRecords=function(data){this.reset();return this.addRecords(data);};YAHOO.widget.RecordSet.prototype.sortRecords=function(fnSort){return this._records.sort(fnSort);};YAHOO.widget.RecordSet.prototype.deleteRecord=function(index){if(YAHOO.lang.isNumber(index)&&(index>-1)&&(index<this.getLength())){var oRecordData=this.getRecord(index).getData();var oData={};for(var key in oRecordData){oData[key]=oRecordData[key];}
this._deleteRecord(index);this.fireEvent("recordDeleteEvent",{data:oData,index:index});return oData;}
else{return null;}};YAHOO.widget.RecordSet.prototype.deleteRecords=function(index,range){if(!YAHOO.lang.isNumber(range)){range=1;}
if(YAHOO.lang.isNumber(index)&&(index>-1)&&(index<this.getLength())){var recordsToDelete=this.getRecords(index,range);var deletedData=[];for(var i=0;i<recordsToDelete.length;i++){var oData={};for(var key in recordsToDelete[i]){oData[key]=recordsToDelete[i][key];}
deletedData.push(oData);}
this._deleteRecord(index,range);this.fireEvent("recordsDeleteEvent",{data:deletedData,index:index});}
else{}};YAHOO.widget.RecordSet.prototype.reset=function(){this._records=[];this._length=0;this.fireEvent("resetEvent");};YAHOO.widget.Record=function(oLiteral){this._oData={};if(oLiteral&&(oLiteral.constructor==Object)){for(var sKey in oLiteral){this._oData[sKey]=oLiteral[sKey];}}};YAHOO.widget.Record.prototype._nId=null;YAHOO.widget.Record.prototype._oData=null;YAHOO.widget.Record.prototype.getId=function(){return this._nId;};YAHOO.widget.Record.prototype.getData=function(sKey){if(YAHOO.lang.isString(sKey)){return this._oData[sKey];}
else{return this._oData;}};YAHOO.register("datatable",YAHOO.widget.DataTable,{version:"@VERSION@",build:"@BUILD@"});