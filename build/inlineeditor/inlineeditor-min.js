(function(){YAHOO.widget.InlineEditor=function(n,Y){Y=YAHOO.lang.isObject(Y)?Y:{};this.init(n,Y);};var F=YAHOO,E=F.util,I=F.lang,d=E.Event,e=E.Dom,j=YAHOO.widget.InlineEditor,D="InlineEditor",a={CANCEL_BUTTON:"yui-inline-editor-cancel",SAVE_BUTTON:"yui-inline-editor-save",EDIT_BUTTON:"yui-inline-editor-edit",LOCKED_BUTTON:"yui-inline-editor-lock-marker",CONTROLS_CONTAINER:"yui-inline-editor-controls",ELEM_EDITABLE:"yui-inline-editor-editable",LOCKED:"yui-inline-editor-locked",EDITING_ACTIVE:"yui-inline-editor-editing",RADIO_GROUP_CONTAINER:"yui-inline-editor-radio-group",RADIO_ITEM_CONTAINER:"yui-inline-editor-radio-item",EMPTY:"yui-inline-editor-empty"},A={EDIT_BUTTON_TEXT:"edit",LOCK_BUTTON_TEXT:"locked",SAVE_BUTTON_TEXT:"save",CANCEL_BUTTON_TEXT:"cancel",EMPTY_TEXT:"field is emtpy, please edit it"},b="cancelEvent",f="saveEvent",g="beforeSaveEvent",i="editStartedEvent",C="cancelClickEvent",k="saveClickEvent",S="editClickEvent",R="lockedClickEvent",l="emptyValueEvent",H="elementReplacedEvent",L="beforeElementReplacedEvent",K="elementRestoredEvent",Q="beforeElementRestoredEvent",W="valueNotValidEvent",M=["text","textarea","select","radio","checkbox"],V=function(o,Y,p){if(!I.isString(o)||!I.isString(Y)||(!I.isString(p)&&!I.isNumber(p))){return false;}var n=document.createElement(o);e.setAttribute(n,"name",Y);n.value=p;return n;},m=function(Y,p,o){var n=document.createElement("option");n.value=p;n.text=Y;n.innerHTML=Y;n.selected=o;return n;},h=function(Y,n){var o=V("input",Y,n);e.setAttribute(o,"type","text");return o;},X=function(p,o,r,q){var Y=document.createElement("span"),n=e.generateId();if(q){Y.innerHTML='<label for="'+n+'">'+o+'</label><input type="radio" name="'+p+'" value="'+r+'" checked="checked">';}else{Y.innerHTML='<label for="'+n+'">'+o+'</label><input type="radio" name="'+p+'" value="'+r+'">';}return Y;},O=function(Y,n){return h(Y,n,"text");},G=function(n,o){var Y=document.createElement("label");if(o===true){Y.innerHTML='<input type="checkbox" name="'+n+'" value="1" id="'+e.generateId()+'" checked="checked">';}else{Y.innerHTML='<input type="checkbox" name="'+n+'" value="1" id="'+e.generateId()+'">';}return Y;},Z=function(Y,n){var o=V("textarea",Y,n);e.setAttribute(o,"rows",10);e.setAttribute(o,"cols",40);return o;},T=function(Y,w,s){var u=V("select",Y,""),v,r,q,p,t,n,o;if(I.isArray(s)){for(q=0,p=s.length;q<p;q++){t=s[q];n=t.label;o=t.value;r=m(n,o,(n==w||o==w));u.appendChild(r);}}else{for(v in s){if(s.hasOwnProperty(v)){r=m(v,s[v],(v==w||s[v]==w));u.appendChild(r);}}}return u;},P=function(p,q,o){var r=document.createElement("span"),n,Y;e.addClass(r,a.RADIO_GROUP_CONTAINER);for(Y in o){if(o.hasOwnProperty(Y)){n=X(p,Y,o[Y],(Y==q||o[Y]==q));r.appendChild(n);}}return r;},c=function(o){var Y,u={},r,p,q,n,t,s;if(o&&o.nodeName=="FORM"){Y=o.elements;p=Y.length;for(r=0;r<p;r++){q=Y[r];n=q.name;t=q.value;if(n){if(q.nodeName=="INPUT"){s=e.getAttribute(q,"type");if(s=="checkbox"){u[n]=q.checked?true:false;}else{if(s!="radio"||q.checked){u[n]=t;}}}else{u[n]=t;}}}}return u;},J={TYPE:"text",ALLOW_EMPTY:false,FIELD_NAME:"field",FIELD_GENERATOR:function(n,q,o,Y){var p;switch(n){case"text":p=O(q,o);break;case"textarea":p=Z(q,o);break;case"select":p=T(q,o,Y);break;case"radio":p=P(q,o,Y);break;case"checkbox":p=G(q,o,Y);break;}return p;},PROCESS_BEFORE_SAVE_METHOD:function(Y){return Y;},PROCESS_BEFORE_READ_METHOD:function(Y){return Y;},VALIDATION_METHOD:function(Y){return true;},SELECTABLE_VALUES:null,ANIM_TO_COLOR:"#D7EEFF",ANIM_FROM_COLOR:"#FFFFFF",ANIM_ON_MOUSEOVER:false,LOCKED:false},N=function(n){var p=false,o=M.length,Y;if(I.isString(n)){for(Y=0;Y<o;Y++){if(M[Y]===n){p=true;break;}}}if(!p){F.log("field type is invalid:  "+p,"error",D);throw new Error("field type is invalid");}return p;},B=function(n){var Y=document.createElement("form");e.setAttribute(Y,"id","yui-inline-editor-"+n);e.addClass(Y,"yui-inline-editor-form");return Y;},U=function(r,p,s,Y){var o=false,n=E.KeyListener,q;if(r){q=new n(r,s,{fn:p.save,scope:p,correctScope:true});q.enable();q=new n(r,Y,{fn:p.cancel,scope:p,correctScope:true});q.enable();o=true;}return o;};I.extend(j,YAHOO.util.AttributeProvider,{save:function(){this.fireEvent(g);var Y=c(this._editor),q=I.trim(Y[this.get("fieldName")]),p=this.get("processBeforeSave"),o=this.get("validator"),n=false;q=p.call(this,q);if(q===""&&!this.get("allowEmpty")){F.log("the field value is empty and it's not allowed","warn",D);this.fireEvent(l);}else{if(o.call(this,q)){this.set("value",q);this._stopEdit();this.fireEvent(f,{value:q,values:Y});n=true;}else{this.fireEvent(W);}}return n;},cancel:function(){this._stopEdit();this.fireEvent(b);return true;},edit:function(){if(this._editStarted||this.get("locked")){return false;}var Y=this.get("element");e.addClass(Y,a.EDITING_ACTIVE);this._replaceElement();this._editStarted=true;this.fireEvent(i);return true;},_stopEdit:function(){if(!this._editStarted){return false;}var Y=this.get("element");e.removeClass(Y,a.EDITING_ACTIVE);this._restoreElement();this._editStarted=false;return true;},_setEditable:function(){var Y=this.get("element");e.addClass(Y,a.ELEM_EDITABLE);if(this.get("locked")){e.addClass(Y,a.LOCKED);}d.on(Y,"click",function(o){var n=d.getTarget(o);if(n==Y&&!this._editStarted){this.edit();}},this,true);if(this.get("animOnMouseover")&&I.isFunction(E.ColorAnim)){d.on(Y,"mouseover",function(){if(!this._editStarted){var n=this.get("animFromColor"),p=this.get("animToColor"),o=new E.ColorAnim(Y,{backgroundColor:{to:p,from:n}},0.3);o.onComplete.subscribe(function(){var q=new E.ColorAnim(Y,{backgroundColor:{to:n}},0.3);q.animate();});o.animate();}},this,true);}},_createEditor:function(){var Y=B(this.get("id")),q=this.get("type"),s=this.get("value"),n=this.get("processBeforeRead"),u=this.get("fieldName"),o=this.get("selectableValues"),p=this.get("fieldGenerator"),t=false,r;if(I.isFunction(n)){s=n.call(this,s);}r=p.call(this,q,u,s,o);U(r,this,this.get("saveKeys"),this.get("cancelKeys"));if(r.nodeType===1){this._createControls();Y.appendChild(r);
Y.appendChild(this.controls.container);d.on(Y,"submit",d.stopEvent);t=Y;}return t;},_replaceElement:function(){var Y=this.get("element"),o=this.get("fieldName"),n=this._createEditor();if(!n){F.log("editor is not an element","error",D);return false;}this.fireEvent(L);Y.innerHTML="";Y.appendChild(n);setTimeout(function(){try{n[o].focus();}catch(p){}},100);this._editor=n;this.fireEvent(H);},_restoreElement:function(){var p=this.get("element"),q=this.get("value"),n=this.get("selectableValues"),o,Y;this.fireEvent(Q);if(I.isObject(n)){for(Y in n){if(n[Y]==q){o=Y;break;}}}else{o=q;}if(!o){o=this._yui_inline_editor_strings.EMPTY_TEXT;}p.innerHTML=o;this.fireEvent(K);this._addEditControl();delete this._editor;},_destroyControls:function(){var p=this.controls,r,o,q,s,n,Y;if(p){n=p.container;if(n&&n.parentNode){Y=n.parentNode;Y.removeChild(n);}else{if(p.cancel){r=p.cancel;o=r.parentNode;if(o){o.removeChild(r);F.log("cancel button removed","info",D);}delete p.cancel;}if(p.save){q=p.save;s=q.parentNode;if(s){s.removeChild(q);F.log("save button removed","info",D);}delete p.save;}}delete this.controls;}},_createControls:function(q){var p=document.createElement("button"),o=document.createElement("span"),Y=this._yui_inline_editor_strings,t,s,r,n;e.setAttribute(p,"type","button");e.addClass(p,"yui-inline-editor-button");e.addClass(o,a.CONTROLS_CONTAINER);this._destroyControls();if(q==="edit"){r=p.cloneNode(false);n=p.cloneNode(false);e.addClass(r,a.EDIT_BUTTON);e.addClass(n,a.LOCKED_BUTTON);r.innerHTML=Y.EDIT_BUTTON_TEXT;n.innerHTML=Y.LOCK_BUTTON_TEXT;d.on(r,"click",function(u){this.edit(u);this.fireEvent(S,u);},this,true);d.on(n,"click",function(u){this.fireEvent(R,u);},this,true);o.appendChild(r);o.appendChild(n);this.controls={edit:r,locked:n,container:o};}else{t=p.cloneNode(false);s=p.cloneNode(false);e.addClass(t,a.CANCEL_BUTTON);e.addClass(s,a.SAVE_BUTTON);t.innerHTML=Y.CANCEL_BUTTON_TEXT;s.innerHTML=Y.SAVE_BUTTON_TEXT;d.on(t,"click",function(u){this.cancel(u);this.fireEvent(C,u);},this,true);d.on(s,"click",function(u){this.save(u);this.fireEvent(k,u);},this,true);o.appendChild(t);o.appendChild(s);this.controls={cancel:t,save:s,container:o};}},_addEditControl:function(){this._createControls("edit");var n=this.get("element"),Y=this.controls;n.appendChild(Y.container);},_getValue:function(){var Y=this.get("htmlValue"),n=this.get("selectableValues"),p,o;if(I.isObject(n)){for(p in n){if(p==Y){o=n[p];break;}}}else{o=Y;}return o;},_setValue:function(o){var Y=this.get("selectableValues"),n;if(I.isObject(Y)){for(n in Y){if(Y[n]==o){this.set("htmlValue",n);break;}}}else{this.set("htmlValue",o);}},_getSaveKeys:function(Y,n){if(!I.isObject(n)){if(this.get("type")==="textarea"){n={ctrl:true,keys:[13]};}else{n={keys:[13]};}}return n;},_getCancelKeys:function(Y,n){if(!I.isObject(n)){n={keys:[27]};}return n;},init:function(q,n){var Y=I.merge(A,I.isObject(n.strings)?n.strings:{}),p=e.get(q),o;this._yui_inline_editor_strings=Y;if(!p){F.log("Inline Editor element not found","error",D);return false;}o=p.innerHTML;if(o===Y.EMPTY_TEXT){o="";}n=n||{};this.setAttributeConfig("id",{value:e.generateId(),readOnly:true});this.setAttributeConfig("element",{value:p,readOnly:true});this.setAttributeConfig("type",{validator:N,value:n.type||J.TYPE});this.setAttributeConfig("fieldName",{validator:I.isString,value:n.fieldName||J.FIELD_NAME});this.setAttributeConfig("fieldGenerator",{validator:I.isFunction,value:n.fieldGenerator||J.FIELD_GENERATOR});this.setAttributeConfig("htmlValue",{value:o});this.setAttributeConfig("value",{getter:this._getValue,method:this._setValue});this.setAttributeConfig("selectableValues",{validator:I.isObject,value:I.isObject(n.selectableValues)?n.selectableValues:J.SELECTABLE_VALUES});this.setAttributeConfig("allowEmpty",{value:I.isBoolean(n.allowEmpty)?n.allowEmpty:J.ALLOW_EMPTY});this.setAttributeConfig("processBeforeRead",{validator:I.isFunction,value:I.isFunction(n.processBeforeRead)?n.processBeforeRead:J.PROCESS_BEFORE_READ_METHOD});this.setAttributeConfig("processBeforeSave",{validator:I.isFunction,value:I.isFunction(n.processBeforeSave)?n.processBeforeSave:J.PROCESS_BEFORE_SAVE_METHOD});this.setAttributeConfig("validator",{validator:I.isFunction,value:I.isFunction(n.validator)?n.validator:J.VALIDATION_METHOD});this.setAttributeConfig("saveKeys",{validator:I.isObject,getter:this._getSaveKeys,value:I.isObject(n.saveKeys)?n.saveKeys:null});this.setAttributeConfig("cancelKeys",{validator:I.isObject,getter:this._getCancelKeys,value:I.isObject(n.cancelKeys)?n.cancelKeys:null});this.setAttributeConfig("animOnMouseover",{validator:I.isBoolean,value:I.isBoolean(n.animOnMouseover)?n.animOnMouseover:J.ANIM_ON_MOUSEOVER});this.setAttributeConfig("animToColor",{validator:I.isString,value:I.isString(n.animToColor)?n.animToColor:J.ANIM_TO_COLOR});this.setAttributeConfig("animFromColor",{validator:I.isString,value:I.isString(n.animFromColor)?n.animFromColor:J.ANIM_FROM_COLOR});this.setAttributeConfig("locked",{validator:I.isBoolean,value:I.isBoolean(n.locked)?n.locked:e.hasClass(this.get("element"),a.LOCKED)?true:J.LOCKED,method:function(r){if(r){this._stopEdit();e.addClass(this.get("element"),a.LOCKED);}else{e.removeClass(this.get("element"),a.LOCKED);}}});if(this.get("value")===""||e.hasClass(this.get("element"),a.EMPTY)){this.get("element").innerHTML=this._yui_inline_editor_strings.EMPTY_TEXT;}this._addEditControl();this._setEditable();}});YAHOO.widget.InlineEditor.STRINGS=A;})();(function(){YAHOO.widget.AutocompleteEditor=function(J,I){I=YAHOO.lang.merge(YAHOO.lang.isObject(I)?I:{},{type:"autocomplete"});YAHOO.widget.AutocompleteEditor.superclass.constructor.call(this,J,I);this._autocompleteInit(J,I);};var H=YAHOO,B=H.util,A=H.lang,D=B.Dom,G="acItemSelectEvent",C=function(){var L=document,I=L.createElement("div"),K=L.createElement("input"),J=L.createElement("div");D.setAttribute(K,"type","text");D.setAttribute(K,"name",this.get("fieldName"));D.setAttribute(K,"id",this.get("id")+"-field");D.setAttribute(J,"id",this.get("id")+"-results");
I.appendChild(K);I.appendChild(J);return I;},F=function(J,I,K){return new H.widget.AutoComplete(J,I,K);},E=function(I){this.setAttributeConfig("lastSelected",{readOnly:true,value:I});};YAHOO.extend(YAHOO.widget.AutocompleteEditor,YAHOO.widget.InlineEditor,{_autocompleteInit:function(J,I){this.set("fieldGenerator",C);this.setAttributeConfig("dataSource",{value:I.dataSource});this.setAttributeConfig("lastSelected",{readOnly:true,value:null});this.setAttributeConfig("saveOnSelect",{validator:A.isBoolean,value:A.isBoolean(I.saveOnSelect)?I.saveOnSelect:true});this.subscribe("elementReplacedEvent",function(){var M=this.get("id"),K=F(M+"-field",M+"-results",this.get("dataSource")),L=this;K.itemSelectEvent.subscribe(function(N,O){L.fireEvent(G,O);E.call(L,O);if(L.get("saveOnSelect")){L.save();}});this.autocomplete=K;});}});})();(function(){YAHOO.widget.CalendarEditor=function(K,J){J=YAHOO.lang.merge(YAHOO.lang.isObject(J)?J:{},{type:"calendar"});YAHOO.widget.CalendarEditor.superclass.constructor.call(this,K,J);this._calendarInit(K,J);};var B=YAHOO,C=B.util,G=B.lang,D=C.Dom,E="calendarEditor",H={close:false},A=function(J){var L=Date.parse(J),M,K;if(isNaN(L)&&(M=/(\d{4})-?(\d{2})-?(\d{2})(?:[T ](\d{2}):?(\d{2}):?(\d{2})(?:\.(\d{3}))?(?:(Z)|([\-+])(\d{2})(?::?(\d{2}))?))?/.exec(J))){K=0;if(M[8]!=="Z"){K=+M[10]*60+M[11];if(M[9]==="+"){K=0-K;}}L=Date.UTC(+M[1],+M[2]-1,+M[3],+M[4]||0,(+M[5]+K)||0,+M[6]||0,+M[7]||0);}return L;},I=function(){var M=document,J=M.createElement("div"),L=M.createElement("input"),K=M.createElement("div");D.setAttribute(L,"type","hidden");D.setAttribute(L,"name",this.get("fieldName"));D.setAttribute(L,"id",this.get("id")+"-field");D.setAttribute(K,"id",this.get("id")+"-calendar");J.appendChild(L);J.appendChild(K);return J;},F=function(K,J,N){var M=new YAHOO.widget.Calendar(null,K,J),L=this;M.render();M.selectEvent.subscribe(function(R,P,S){var Q=P[0][0],O;if(String(Q[1]).length==1){Q[1]="0"+Q[1];}if(String(Q[2]).length==1){Q[2]="0"+Q[2];}O=Q.join("-");N.value=YAHOO.util.Date.format(new Date(A(O)),{format:L.get("dateFormat")});});return M;};YAHOO.extend(YAHOO.widget.CalendarEditor,YAHOO.widget.InlineEditor,{_calendarInit:function(K,J){this.set("fieldGenerator",I);this.setAttributeConfig("calendarConfig",{});this.setAttributeConfig("dateFormat",{value:J.dateFormat||"%Y-%m-%d"});this.setAttributeConfig("saveOnSelect",{validator:G.isBoolean,value:G.isBoolean(J.saveOnSelect)?J.saveOnSelect:true});this.set("calendarConfig",G.isObject(J.calendarConfig)?G.merge(H,J.calendarConfig):H);this.on("saveEvent",function(){var L=this.calendar;L.hide();G.later(100,L,L.destroy);this.calendar=null;});this.on("cancelEvent",function(){this.calendar.hide();this.calendar=null;});this.subscribe("elementReplacedEvent",function(){var O=this.get("id"),N,M=this,L;this.calendar=F.call(this,O+"-calendar",this.get("calendarConfig"),D.get(this.get("id")+"-field"));this.calendar.select(new Date(A(this.get("value"))));N=this.calendar.getSelectedDates();if(N.length){L=N[0];this.calendar.cfg.setProperty("pagedate",(L.getMonth()+1)+"/"+L.getFullYear());this.calendar.render();}this.calendar.selectEvent.subscribe(function(Q,P,R){if(M.get("saveOnSelect")){M.save();}});});if(!/DIV|H\d/.test(this.get("element").nodeName.toUpperCase())){B.log("the calendar editor won't work in Internet Explorer, because the container element can not contain TABLE element","warn",E);}}});YAHOO.util.Date.parse=A;})();(function(){YAHOO.widget.RatingEditor=function(J,I){I=YAHOO.lang.merge(I,{type:"rating"});YAHOO.widget.RatingEditor.superclass.constructor.call(this,J,I);this._ratingInit.apply(this,arguments);};var H=YAHOO,D=H.util,C=H.lang,B=D.Event,F=D.Dom,A=D.Selector,E=function(M,O,N){var J="",I=this.get("maxRate"),L=1,K;while(L<=I){if(N==L){J+='<label class="yui-rate-'+L+'"><input type="radio" name="'+O+'" value="'+L+'" checked="checked"></label>';}else{J+='<label class="yui-rate-'+L+'"><input type="radio" name="'+O+'" value="'+L+'" /></label>';}L++;}K=document.createElement("p");F.addClass(K,"yui-rating yui-selected-rate"+N);K.innerHTML=J;return K;},G=function(I){return'<span class="yui-selected-rate'+I+' yui-rate"><span class="yui-rate-indicator"></span></span>';};YAHOO.extend(YAHOO.widget.RatingEditor,YAHOO.widget.InlineEditor,{_ratingInit:function(I){this.set("fieldGenerator",E);this.setAttributeConfig("maxRate",{validator:C.isNumber,value:C.isNumber(I.maxRate)?I.maxRate:5});this.setAttributeConfig("value",{getter:function(K,L){var J;if(C.isNumber(L)){J=L;}else{J=+this.get("htmlValue").replace(/\n/g,"").replace(/.*yui-selected-rate(\d+).*/,"$1");}return J;}});this.subscribe("elementReplacedEvent",function(){var J=this._editor,K=A.query('input[type="radio"]',J);B.on(K,"click",function(N){var M=J.firstChild,L;M.className="";L=B.getTarget(N);F.addClass(M,"yui-rating yui-selected-rate"+L.value);});});this.subscribe("elementRestoredEvent",function(){var J=G(this.get("value"));this.set("htmlValue",J);this.get("element").innerHTML=J;});}});})();YAHOO.register("inlineeditor",YAHOO.widget.InlineEditor,{version:"@VERSION@",build:"@BUILD@"});