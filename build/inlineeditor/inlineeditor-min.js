(function(){YAHOO.widget.InlineEditor=function(p,Y){Y=YAHOO.lang.isObject(Y)?Y:{};this.init(p,Y);};var G=YAHOO,F=G.util,J=G.lang,e=F.Event,f=F.Dom,l=YAHOO.widget.InlineEditor,E="InlineEditor",b={BUTTON:"yui-inline-editor-button",CANCEL_BUTTON:"yui-inline-editor-cancel",SAVE_BUTTON:"yui-inline-editor-save",EDIT_BUTTON:"yui-inline-editor-edit",LOCKED_BUTTON:"yui-inline-editor-lock-marker",CONTROLS_CONTAINER:"yui-inline-editor-controls",ELEM_EDITABLE:"yui-inline-editor-editable",LOCKED:"yui-inline-editor-locked",EDITING_ACTIVE:"yui-inline-editor-editing",RADIO_GROUP_CONTAINER:"yui-inline-editor-radio-group",RADIO_ITEM_CONTAINER:"yui-inline-editor-radio-item",EMPTY:"yui-inline-editor-empty"},A={EDIT_BUTTON_TEXT:"edit",LOCK_BUTTON_TEXT:"locked",SAVE_BUTTON_TEXT:"save",CANCEL_BUTTON_TEXT:"cancel",EMPTY_TEXT:"field is emtpy, please edit it"},c="cancelEvent",g="saveEvent",i="beforeSaveEvent",k="editStartedEvent",C="cancelClickEvent",m="saveClickEvent",T="editClickEvent",S="lockedClickEvent",n="emptyValueEvent",I="elementReplacedEvent",M="beforeElementReplacedEvent",L="elementRestoredEvent",R="beforeElementRestoredEvent",X="valueNotValidEvent",h="beforeEditEvent",N=["text","textarea","select","radio","checkbox"],W=function(q,Y,r){if(!J.isString(q)||!J.isString(Y)||(!J.isString(r)&&!J.isNumber(r))){return false;}var p=document.createElement(q);f.setAttribute(p,"name",Y);p.value=r;return p;},o=function(Y,r,q){var p=document.createElement("option");p.value=r;p.text=Y;p.innerHTML=Y;p.selected=q;return p;},j=function(Y,p){var q=W("input",Y,p);f.setAttribute(q,"type","text");return q;},Z=function(r,q,t,s){var Y=document.createElement("span"),p=f.generateId();if(s){Y.innerHTML='<label for="'+p+'">'+q+'</label><input type="radio" name="'+r+'" value="'+t+'" checked="checked">';}else{Y.innerHTML='<label for="'+p+'">'+q+'</label><input type="radio" name="'+r+'" value="'+t+'">';}return Y;},P=function(Y,p){return j(Y,p,"text");},H=function(p,q){var Y=document.createElement("label");if(q===true){Y.innerHTML='<input type="checkbox" name="'+p+'" value="1" id="'+f.generateId()+'" checked="checked">';}else{Y.innerHTML='<input type="checkbox" name="'+p+'" value="1" id="'+f.generateId()+'">';}return Y;},a=function(Y,p){var q=W("textarea",Y,p);f.setAttribute(q,"rows",10);f.setAttribute(q,"cols",40);return q;},U=function(Y,y,u){var w=W("select",Y,""),x,t,s,r,v,p,q;if(J.isArray(u)){for(s=0,r=u.length;s<r;s++){v=u[s];p=v.label;q=v.value;t=o(p,q,(p==y||q==y));w.appendChild(t);}}else{for(x in u){if(u.hasOwnProperty(x)){t=o(x,u[x],(x==y||u[x]==y));w.appendChild(t);}}}return w;},Q=function(Y,y,u){var w=document.createElement("span"),p,x,t,s,v,q,r;f.addClass(w,b.RADIO_GROUP_CONTAINER);if(J.isArray(u)){for(t=0,s=u.length;t<s;t++){v=u[t];q=v.label;r=v.value;p=Z(Y,x,r,(q==y||r==y));w.appendChild(p);}}else{for(x in u){if(u.hasOwnProperty(x)){p=Z(Y,x,u[x],(x==y||u[x]==y));w.appendChild(p);}}}return w;},d=function(q){var Y,w={},t,r,s,p,v,u;if(q&&q.nodeName=="FORM"){Y=q.elements;r=Y.length;for(t=0;t<r;t++){s=Y[t];p=s.name;v=s.value;if(p){if(s.nodeName=="INPUT"){u=f.getAttribute(s,"type");if(u=="checkbox"){w[p]=s.checked?true:false;}else{if(u!="radio"||s.checked){w[p]=v;}}}else{w[p]=v;}}}}return w;},K={TYPE:"text",ALLOW_EMPTY:false,FIELD_NAME:"field",FIELD_GENERATOR:function(p,s,q,Y){var r;switch(p){case"text":r=P(s,q);break;case"textarea":r=a(s,q);break;case"select":r=U(s,q,Y);break;case"radio":r=Q(s,q,Y);break;case"checkbox":r=H(s,q,Y);break;}return r;},PROCESS_BEFORE_SAVE_METHOD:function(Y){return Y;},PROCESS_BEFORE_READ_METHOD:function(Y){return Y;},VALIDATION_METHOD:function(Y){return true;},SELECTABLE_VALUES:null,ANIM_TO_COLOR:"#D7EEFF",ANIM_FROM_COLOR:"#FFFFFF",ANIM_ON_MOUSEOVER:false,LOCKED:false,SET_FIELD_SIZE:true},O=function(p){var r=false,q=N.length,Y;if(J.isString(p)){for(Y=0;Y<q;Y++){if(N[Y]===p){r=true;break;}}}if(!r){G.log("field type is invalid:  "+r,"error",E);throw new Error("field type is invalid");}return r;},B=function(p){var Y=document.createElement("form");f.setAttribute(Y,"id","yui-inline-editor-"+p);f.addClass(Y,"yui-inline-editor-form");return Y;},V=function(t,r,u,Y){var q=false,p=F.KeyListener,s;if(t){s=new p(t,u,{fn:r.save,scope:r,correctScope:true});s.enable();s=new p(t,Y,{fn:r.cancel,scope:r,correctScope:true});s.enable();q=true;}return q;},D=function(p){var Y=this.get("processBeforeRead");if(J.isFunction(Y)){p=Y.call(this,p);}return p;};J.extend(l,YAHOO.util.AttributeProvider,{save:function(){this.fireEvent(i);var s=this.get("fieldName"),Y=d(this._editor),r=J.trim(Y[s]),q=this.get("validator"),p=false;if(r===""&&!this.get("allowEmpty")){G.log("the field value is empty and it's not allowed","warn",E);this.fireEvent(n);}else{if(q.call(this,r)){this.set("value",r);this._stopEdit();this.fireEvent(g,{value:r,values:Y});p=true;}else{this.fireEvent(X);}}return p;},cancel:function(){this._stopEdit();this.fireEvent(c);return true;},edit:function(){if(this._editStarted||this.get("locked")||this.fireEvent(h)===false){return false;}var Y=this.get("element");f.addClass(Y,b.EDITING_ACTIVE);this._replaceElement();this._editStarted=true;this.fireEvent(k);return true;},_stopEdit:function(){if(!this._editStarted){return false;}var Y=this.get("element");f.removeClass(Y,b.EDITING_ACTIVE);this._restoreElement();this._editStarted=false;return true;},_setEditable:function(){var p=this.get("element"),q,Y;f.addClass(p,b.ELEM_EDITABLE);if(this.get("locked")){f.addClass(p,b.LOCKED);}e.on(p,"click",function(s){var r=e.getTarget(s);if(r==p&&!this._editStarted){this.edit();}},this,true);if(this.get("animOnMouseover")&&J.isFunction(F.ColorAnim)){Y=function(){f.setStyle(p,"background-color","");};e.on(p,"mouseover",function(){if(!this._editStarted&&!this.get("locked")){var r=this.get("animFromColor"),s=this.get("animToColor");q=new F.ColorAnim(p,{backgroundColor:{to:s,from:r}},0.3);q.onComplete.subscribe(function(){var t=new F.ColorAnim(p,{backgroundColor:{to:r}},0.3);t.onComplete.subscribe(Y);t.animate();});q.animate();}},this,true);
this.subscribe(k,function(){if(q.isAnimated()){q.stop();}Y();});}},_createEditor:function(){var r=B(this.get("id")),q=this.get("type"),s=this.get("value"),v=this.get("fieldName"),Y=this.get("selectableValues"),u=this.get("fieldGenerator"),p=false,t;t=u.call(this,q,v,s,Y);V(t,this,this.get("saveKeys"),this.get("cancelKeys"));if(t.nodeType===1){this._createControls();r.appendChild(t);r.appendChild(this.controls.container);e.on(r,"submit",e.stopEvent,e,true);p=r;}return p;},_replaceElement:function(){var p=this.get("element"),s=this.get("fieldName"),q=this._createEditor(),r,Y;if(!q){G.log("editor is not an element","error",E);return false;}this.fireEvent(M);p.innerHTML="";p.appendChild(q);r=q[s];setTimeout(function(){try{r.focus();}catch(t){}},100);if(this.get("setFieldSize")){Y=+f.getStyle(q,"width").replace("px","");if(isNaN(Y)){Y=q.offsetWidth;}f.setStyle(r,"width",+Y-10+"px");}this._editor=q;this.fireEvent(I);},_restoreElement:function(){var s=this.get("element"),y=this.get("value"),Y=this.get("htmlValue"),v=this.get("selectableValues"),u,x,t,r,w,p,q;this.fireEvent(R);if(J.isArray(v)){for(t=0,r=v.length;t<r;t++){w=v[t];p=w.label;q=w.value;if(q==y){u=p;break;}}}else{if(J.isObject(v)){for(x in v){if(v[x]==y){u=x;break;}}}else{u=Y;}}if(!u){u=this._yui_inline_editor_strings.EMPTY_TEXT;}s.innerHTML=u;this.fireEvent(L);this._addEditControl();delete this._editor;},_destroyControls:function(){var r=this.controls,t,q,s,u,p,Y;if(r){p=r.container;if(p&&p.parentNode){Y=p.parentNode;Y.removeChild(p);}else{if(r.cancel){t=r.cancel;q=t.parentNode;if(q){q.removeChild(t);G.log("cancel button removed","info",E);}delete r.cancel;}if(r.save){s=r.save;u=s.parentNode;if(u){u.removeChild(s);G.log("save button removed","info",E);}delete r.save;}}delete this.controls;}},_createControls:function(s){this._destroyControls();var r=document.createElement("button"),q=document.createElement("span"),Y=this._yui_inline_editor_strings,v,u,t,p;r.setAttribute("type","button");f.addClass(r,b.BUTTON);f.addClass(q,b.CONTROLS_CONTAINER);if(s==="edit"){t=r.cloneNode(false);p=r.cloneNode(false);f.addClass(t,b.EDIT_BUTTON);f.addClass(p,b.LOCKED_BUTTON);t.innerHTML=Y.EDIT_BUTTON_TEXT;p.innerHTML=Y.LOCK_BUTTON_TEXT;e.on(t,"click",function(w){this.edit(w);this.fireEvent(T,w);},this,true);e.on(p,"click",function(w){this.fireEvent(S,w);},this,true);q.appendChild(t);q.appendChild(p);this.controls={edit:t,locked:p,container:q};}else{v=r.cloneNode(false);u=r.cloneNode(false);f.addClass(v,b.CANCEL_BUTTON);f.addClass(u,b.SAVE_BUTTON);v.innerHTML=Y.CANCEL_BUTTON_TEXT;u.innerHTML=Y.SAVE_BUTTON_TEXT;e.on(v,"click",function(w){this.cancel(w);this.fireEvent(C,w);},this,true);e.on(u,"click",function(w){this.save(w);this.fireEvent(m,w);},this,true);q.appendChild(v);q.appendChild(u);this.controls={cancel:v,save:u,container:q};}},_addEditControl:function(){this._createControls("edit");var p=this.get("element"),Y=this.controls;p.appendChild(Y.container);},_getValue:function(){var Y=this.get("htmlValue"),t=this.get("selectableValues"),w,v,s,r,u,p,q;if(J.isArray(t)){for(s=0,r=t.length;s<r;s++){u=t[s];p=u.label;q=u.value;if(p==Y){v=q;break;}}}else{if(J.isObject(t)){for(w in t){if(w==Y){v=t[w];break;}}}else{v=Y;}}return D.call(this,v);},_setValue:function(u){var q=this.get("selectableValues"),s,r,Y,p,t,v;if(J.isArray(q)){for(r=0,Y=q.length;r<Y;r++){p=q[r];t=p.label;v=p.value;if(v==u){this.set("htmlValue",t);break;}}}else{if(J.isObject(q)){for(s in q){if(q[s]==u){this.set("htmlValue",s);break;}}}else{this.set("htmlValue",u);}}},_getSaveKeys:function(Y,p){if(!J.isObject(p)){if(this.get("type")==="textarea"){p={ctrl:true,keys:[13]};}else{p={keys:[13]};}}return p;},_getCancelKeys:function(Y,p){if(!J.isObject(p)){p={keys:[27]};}return p;},init:function(s,p){var Y,r=f.get(s),q;if(!r){G.log("Inline Editor element not found","error",E);return false;}Y=J.merge(A,J.isObject(p.strings)?p.strings:{});this._yui_inline_editor_strings=Y;q=r.innerHTML;if(q===Y.EMPTY_TEXT){q="";}p=p||{};this.setAttributeConfig("id",{value:f.generateId(),readOnly:true});this.setAttributeConfig("element",{value:r,readOnly:true});this.setAttributeConfig("type",{validator:O,value:p.type||K.TYPE});this.setAttributeConfig("fieldName",{validator:J.isString,value:p.fieldName||K.FIELD_NAME});this.setAttributeConfig("fieldGenerator",{validator:J.isFunction,value:p.fieldGenerator||K.FIELD_GENERATOR});this.setAttributeConfig("htmlValue",{value:q});this.setAttributeConfig("value",{getter:this._getValue,method:this._setValue,setter:function(u){var t=this.get("processBeforeSave");if(J.isFunction(t)){u=t.call(this,u);}return u;}});this.setAttributeConfig("selectableValues",{validator:J.isObject,value:J.isObject(p.selectableValues)?p.selectableValues:K.SELECTABLE_VALUES});this.setAttributeConfig("allowEmpty",{value:J.isBoolean(p.allowEmpty)?p.allowEmpty:K.ALLOW_EMPTY});this.setAttributeConfig("processBeforeRead",{validator:J.isFunction,value:J.isFunction(p.processBeforeRead)?p.processBeforeRead:K.PROCESS_BEFORE_READ_METHOD});this.setAttributeConfig("processBeforeSave",{validator:J.isFunction,value:J.isFunction(p.processBeforeSave)?p.processBeforeSave:K.PROCESS_BEFORE_SAVE_METHOD});this.setAttributeConfig("validator",{validator:J.isFunction,value:J.isFunction(p.validator)?p.validator:K.VALIDATION_METHOD});this.setAttributeConfig("saveKeys",{validator:J.isObject,getter:this._getSaveKeys,value:J.isObject(p.saveKeys)?p.saveKeys:null});this.setAttributeConfig("cancelKeys",{validator:J.isObject,getter:this._getCancelKeys,value:J.isObject(p.cancelKeys)?p.cancelKeys:null});this.setAttributeConfig("animOnMouseover",{validator:J.isBoolean,value:J.isBoolean(p.animOnMouseover)?p.animOnMouseover:K.ANIM_ON_MOUSEOVER});this.setAttributeConfig("animToColor",{validator:J.isString,value:J.isString(p.animToColor)?p.animToColor:K.ANIM_TO_COLOR});this.setAttributeConfig("animFromColor",{validator:J.isString,value:J.isString(p.animFromColor)?p.animFromColor:K.ANIM_FROM_COLOR});this.setAttributeConfig("locked",{validator:J.isBoolean,value:J.isBoolean(p.locked)?p.locked:f.hasClass(this.get("element"),b.LOCKED)?true:K.LOCKED,method:function(t){if(t){this._stopEdit();
f.addClass(this.get("element"),b.LOCKED);}else{f.removeClass(this.get("element"),b.LOCKED);}}});this.setAttributeConfig("setFieldSize",{validator:J.isBoolean,value:J.isBoolean(p.setFieldSize)?p.setFieldSize:K.SET_FIELD_SIZE});if(this.get("value")===""||f.hasClass(r,b.EMPTY)){r.innerHTML=this._yui_inline_editor_strings.EMPTY_TEXT;this.set("value","");}this._addEditControl();this._setEditable();}});l.STRINGS=A;l.DEFAULT_CONFIG=K;})();(function(){YAHOO.widget.AutocompleteEditor=function(J,I){I=YAHOO.lang.merge(YAHOO.lang.isObject(I)?I:{},{type:"autocomplete"});YAHOO.widget.AutocompleteEditor.superclass.constructor.call(this,J,I);this._autocompleteInit(J,I);};var H=YAHOO,B=H.util,A=H.lang,D=B.Dom,G="acItemSelectEvent",C=function(){var L=document,I=L.createElement("div"),K=L.createElement("input"),J=L.createElement("div");D.setAttribute(K,"type","text");D.setAttribute(K,"name",this.get("fieldName"));D.setAttribute(K,"id",this.get("id")+"-field");D.setAttribute(J,"id",this.get("id")+"-results");I.appendChild(K);I.appendChild(J);return I;},F=function(J,I,K){return new H.widget.AutoComplete(J,I,K);},E=function(I){this.setAttributeConfig("lastSelected",{readOnly:true,value:I});};YAHOO.extend(YAHOO.widget.AutocompleteEditor,YAHOO.widget.InlineEditor,{_autocompleteInit:function(J,I){this.set("fieldGenerator",C);this.setAttributeConfig("dataSource",{value:I.dataSource});this.setAttributeConfig("lastSelected",{readOnly:true,value:null});this.setAttributeConfig("saveOnSelect",{validator:A.isBoolean,value:A.isBoolean(I.saveOnSelect)?I.saveOnSelect:true});this.subscribe("editStartedEvent",function(){E.call(this,null);this.set("value","");});this.subscribe("elementReplacedEvent",function(){var M=this.get("id"),K=F(M+"-field",M+"-results",this.get("dataSource")),L=this;K.itemSelectEvent.subscribe(function(N,O){L.fireEvent(G,O);E.call(L,O);if(L.get("saveOnSelect")){L.save();}});this.autocomplete=K;});}});})();(function(){YAHOO.widget.CalendarEditor=function(K,J){J=YAHOO.lang.merge(YAHOO.lang.isObject(J)?J:{},{type:"calendar"});YAHOO.widget.CalendarEditor.superclass.constructor.call(this,K,J);this._calendarInit(K,J);};var B=YAHOO,C=B.util,G=B.lang,D=C.Dom,E="calendarEditor",H={close:false},A=function(J){var L=Date.parse(J),M,K;if(isNaN(L)&&(M=/(\d{4})-?(\d{2})-?(\d{2})(?:[T ](\d{2}):?(\d{2}):?(\d{2})(?:\.(\d{3}))?(?:(Z)|([\-+])(\d{2})(?::?(\d{2}))?))?/.exec(J))){K=0;if(M[8]!=="Z"){K=+M[10]*60+M[11];if(M[9]==="+"){K=0-K;}}L=Date.UTC(+M[1],+M[2]-1,+M[3],+M[4]||0,(+M[5]+K)||0,+M[6]||0,+M[7]||0);}return L;},I=function(){var M=document,J=M.createElement("div"),L=M.createElement("input"),K=M.createElement("div");D.setAttribute(L,"type","hidden");D.setAttribute(L,"name",this.get("fieldName"));D.setAttribute(L,"id",this.get("id")+"-field");D.setAttribute(K,"id",this.get("id")+"-calendar");J.appendChild(L);J.appendChild(K);return J;},F=function(K,J,N){var M=new YAHOO.widget.Calendar(null,K,J),L=this;M.render();M.selectEvent.subscribe(function(R,P,S){var Q=P[0][0],O;if(String(Q[1]).length==1){Q[1]="0"+Q[1];}if(String(Q[2]).length==1){Q[2]="0"+Q[2];}O=Q.join("-");N.value=C.Date.format(new Date(A(O)),{format:L.get("dateFormat")});});return M;};YAHOO.extend(YAHOO.widget.CalendarEditor,YAHOO.widget.InlineEditor,{_calendarInit:function(K,J){this.set("fieldGenerator",I);this.setAttributeConfig("calendarConfig",{});this.setAttributeConfig("dateFormat",{value:J.dateFormat||"%Y-%m-%d"});this.setAttributeConfig("saveOnSelect",{validator:G.isBoolean,value:G.isBoolean(J.saveOnSelect)?J.saveOnSelect:true});this.set("calendarConfig",G.isObject(J.calendarConfig)?G.merge(H,J.calendarConfig):H);this.on("saveEvent",function(){var L=this.calendar;L.hide();G.later(100,L,L.destroy);this.calendar=null;});this.on("cancelEvent",function(){this.calendar.hide();this.calendar=null;});this.subscribe("elementReplacedEvent",function(){var O=this.get("id"),N,M=this,L;this.calendar=F.call(this,O+"-calendar",this.get("calendarConfig"),D.get(this.get("id")+"-field"));this.calendar.select(new Date(A(this.get("value"))));N=this.calendar.getSelectedDates();if(N.length){L=N[0];this.calendar.cfg.setProperty("pagedate",(L.getMonth()+1)+"/"+L.getFullYear());this.calendar.render();}this.calendar.selectEvent.subscribe(function(Q,P,R){if(M.get("saveOnSelect")){M.save();}});});if(!/DIV|H\d/.test(this.get("element").nodeName.toUpperCase())){B.log("the calendar editor won't work in Internet Explorer, because the container element can not contain TABLE element","warn",E);}}});YAHOO.util.Date.parse=A;})();(function(){YAHOO.widget.RatingEditor=function(J,I){I=I||{};I=YAHOO.lang.merge(I,{type:"rating"});YAHOO.widget.RatingEditor.superclass.constructor.call(this,J,I);this._ratingInit.apply(this,arguments);};var H=YAHOO,D=H.util,C=H.lang,B=D.Event,F=D.Dom,A=D.Selector,E=function(M,O,N){var J="",I=this.get("maxRate"),L=1,K;while(L<=I){if(N==L){J+='<label class="yui-rate-'+L+'"><input type="radio" name="'+O+'" value="'+L+'" checked="checked"></label>';}else{J+='<label class="yui-rate-'+L+'"><input type="radio" name="'+O+'" value="'+L+'" /></label>';}L++;}K=document.createElement("p");F.addClass(K,"yui-rating yui-selected-rate"+N);K.innerHTML=J;return K;},G=function(J){var I="";if(J!==""){I='<span class="yui-selected-rate'+J+' yui-rate"><span class="yui-rate-indicator"></span></span>';}return I;};YAHOO.extend(YAHOO.widget.RatingEditor,YAHOO.widget.InlineEditor,{_ratingInit:function(I){this.set("fieldGenerator",E);this.setAttributeConfig("maxRate",{validator:C.isNumber,value:C.isNumber(I.maxRate)?I.maxRate:5});this.setAttributeConfig("value",{getter:function(K,L){var J;if(C.isNumber(L)){J=L;}else{J=this.get("htmlValue").replace(/\n/g,"").replace(/.*yui-selected-rate(\d+).*/,"$1");}if(J===this._yui_inline_editor_strings.EMPTY_TEXT){J="";}if(J!==""){J=+J;}return J;}});this.subscribe("elementReplacedEvent",function(){var J=this._editor,K=A.query('input[type="radio"]',J);B.on(K,"click",function(N){var M=J.firstChild,L;M.className="";L=B.getTarget(N);F.addClass(M,"yui-rating yui-selected-rate"+L.value);
});});this.subscribe("elementRestoredEvent",function(){var J=G(this.get("value"));this.set("htmlValue",J);if(J!==""){this.get("element").innerHTML=J;}});}});})();YAHOO.register("inlineeditor",YAHOO.widget.InlineEditor,{version:"@VERSION@",build:"@BUILD@"});