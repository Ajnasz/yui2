(function(){YAHOO.widget.InlineEditor=function(l,Y){Y=YAHOO.lang.isObject(Y)?Y:{};this.init(l,Y);};var E=YAHOO,D=E.util,H=E.lang,b=D.Event,c=D.Dom,h=YAHOO.widget.InlineEditor,C="InlineEditor",X={CANCEL_BUTTON:"yui-inline-editor-cancel",SAVE_BUTTON:"yui-inline-editor-save",EDIT_BUTTON:"yui-inline-editor-edit",CONTROLS_CONTAINER:"yui-inline-editor-controls",ELEM_EDITABLE:"yui-inline-editor-editable",EDITING_ACTIVE:"yui-inline-editor-editing",RADIO_GROUP_CONTAINER:"yui-inline-editor-radio-group",RADIO_ITEM_CONTAINER:"yui-inline-editor-radio-item"},Z="cancelEvent",d="saveEvent",e="beforeSaveEvent",g="editStartedEvent",B="cancelClickEvent",i="saveClickEvent",Q="editClickEvent",j="emptyValueEvent",G="elementReplacedEvent",K="beforeElementReplacedEvent",J="elementRestoredEvent",P="beforeElementRestoredEvent",U="valueNotValidEvent",L=["text","textarea","select","radio","checkbox"],T=function(m,Y,n){if(!H.isString(m)||!H.isString(Y)||(!H.isString(n)&&!H.isNumber(n))){return false;}var l=document.createElement(m);c.setAttribute(l,"name",Y);l.value=n;return l;},k=function(Y,n,m){var l=document.createElement("option");l.value=n;l.text=Y;l.innerHTML=Y;l.selected=m;return l;},f=function(Y,l){var m=T("input",Y,l);c.setAttribute(m,"type","text");return m;},V=function(n,m,p,o){var Y=document.createElement("span"),l=c.generateId();if(o){Y.innerHTML='<label for="'+l+'">'+m+'</label><input type="radio" name="'+n+'" value="'+p+'" checked="checked">';}else{Y.innerHTML='<label for="'+l+'">'+m+'</label><input type="radio" name="'+n+'" value="'+p+'">';}return Y;},N=function(Y,l){return f(Y,l,"text");},F=function(l,m){var Y=document.createElement("label");if(m===true){Y.innerHTML='<input type="checkbox" name="'+l+'" value="1" id="'+c.generateId()+'" checked="checked">';}else{Y.innerHTML='<input type="checkbox" name="'+l+'" value="1" id="'+c.generateId()+'">';}return Y;},W=function(Y,l){var m=T("textarea",Y,l);c.setAttribute(m,"rows",10);c.setAttribute(m,"cols",40);return m;},R=function(m,o,l){var p=T("select",m,""),Y,n;for(Y in l){if(l.hasOwnProperty(Y)){n=k(Y,l[Y],(Y==o||l[Y]==o));p.appendChild(n);}}return p;},O=function(n,o,m){var p=document.createElement("span"),l,Y;c.addClass(p,X.RADIO_GROUP_CONTAINER);for(Y in m){if(m.hasOwnProperty(Y)){l=V(n,Y,m[Y],(Y==o||m[Y]==o));p.appendChild(l);}}return p;},a=function(m){var Y,s={},p,n,o,l,r,q;if(m&&m.nodeName=="FORM"){Y=m.elements;n=Y.length;for(p=0;p<n;p++){o=Y[p];l=o.name;r=o.value;if(l){if(o.nodeName=="INPUT"){q=c.getAttribute(o,"type");if(q=="checkbox"){s[l]=o.checked?true:false;}else{if(q!="radio"||o.checked){s[l]=r;}}}else{s[l]=r;}}}}return s;},I={TYPE:"text",ALLOW_EMPTY:false,FIELD_NAME:"field",FIELD_GENERATOR:function(l,o,m,Y){var n;switch(l){case"text":n=N(o,m);break;case"textarea":n=W(o,m);break;case"select":n=R(o,m,Y);break;case"radio":n=O(o,m,Y);break;case"checkbox":n=F(o,m,Y);break;}return n;},PROCESS_BEFORE_SAVE_METHOD:function(Y){return Y;},PROCESS_BEFORE_READ_METHOD:function(Y){return Y;},VALIDATION_METHOD:function(Y){return true;},SELECTABLE_VALUES:null,ANIM_TO_COLOR:"#D7EEFF",ANIM_FROM_COLOR:"#FFFFFF",ANIM_ON_MOUSEOVER:false},M=function(l){var n=false,m=L.length,Y;if(H.isString(l)){for(Y=0;Y<m;Y++){if(L[Y]===l){n=true;break;}}}if(!n){E.log("field type is invalid:  "+n,"error",C);throw new Error("field type is invalid");}return n;},A=function(l){var Y=document.createElement("form");c.setAttribute(Y,"id","yui-inline-editor-"+l);c.addClass(Y,"yui-inline-editor-form");return Y;},S=function(p,n,q,Y){var m=false,l=D.KeyListener,o;if(p){o=new l(p,q,{fn:n.save,scope:n,correctScope:true});o.enable();o=new l(p,Y,{fn:n.cancel,scope:n,correctScope:true});o.enable();m=true;}return m;};H.extend(h,YAHOO.util.AttributeProvider,{save:function(){this.fireEvent(e);var Y=a(this._editor),o=H.trim(Y[this.get("fieldName")]),n=this.get("processBeforeSave"),m=this.get("validator"),l=false;o=n.call(this,o);if(o===""&&!this.get("allowEmpty")){E.log("the field value is empty and it's not allowed","warn",C);this.fireEvent(j);}else{if(m.call(this,o)){this.set("value",o);this._stopEdit();this.fireEvent(d,{value:o,values:Y});l=true;}else{this.fireEvent(U);}}return l;},cancel:function(){this._stopEdit();this.fireEvent(Z);return true;},edit:function(){if(this._editStarted){return false;}var Y=this.get("element");c.addClass(Y,X.EDITING_ACTIVE);this._replaceElement();this._editStarted=true;this.fireEvent(g);return true;},_stopEdit:function(){if(!this._editStarted){return false;}var Y=this.get("element");c.removeClass(Y,X.EDITING_ACTIVE);this._restoreElement();this._editStarted=false;return true;},_setEditable:function(){var Y=this.get("element");c.addClass(Y,X.ELEM_EDITABLE);b.on(Y,"click",function(m){var l=b.getTarget(m);if(l==Y&&!this._editStarted){this.edit();}},this,true);if(this.get("animOnMouseover")&&H.isFunction(D.ColorAnim)){b.on(Y,"mouseover",function(){if(!this._editStarted){var l=this.get("animFromColor"),n=this.get("animToColor"),m=new D.ColorAnim(Y,{backgroundColor:{to:n,from:l}},0.3);m.onComplete.subscribe(function(){var o=new D.ColorAnim(Y,{backgroundColor:{to:l}},0.3);o.animate();});m.animate();}},this,true);}},_createEditor:function(){var Y=A(this.get("id")),o=this.get("type"),q=this.get("value"),l=this.get("processBeforeRead"),s=this.get("fieldName"),m=this.get("selectableValues"),n=this.get("fieldGenerator"),r=false,p;if(H.isFunction(l)){q=l.call(this,q);}p=n.call(this,o,s,q,m);S(p,this,this.get("saveKeys"),this.get("cancelKeys"));if(p.nodeType===1){this._createControls();Y.appendChild(p);Y.appendChild(this.controls.container);b.on(Y,"submit",b.stopEvent);r=Y;}return r;},_replaceElement:function(){var Y=this.get("element"),m=this.get("fieldName"),l=this._createEditor();if(!l){E.log("editor is not an element","error",C);return false;}this.fireEvent(K);Y.innerHTML="";Y.appendChild(l);setTimeout(function(){try{l[m].focus();}catch(n){}},100);this._editor=l;this.fireEvent(G);},_restoreElement:function(){var n=this.get("element"),o=this.get("value"),l=this.get("selectableValues"),m,Y;
this.fireEvent(P);if(H.isObject(l)){for(Y in l){if(l[Y]==o){m=Y;break;}}}else{m=o;}n.innerHTML=m;this.fireEvent(J);this._addEditControl();delete this._editor;},_destroyControls:function(){var n=this.controls,p,m,o,q,l,Y;if(n){l=n.container;if(l&&l.parentNode){Y=l.parentNode;Y.removeChild(l);}else{if(n.cancel){p=n.cancel;m=p.parentNode;if(m){m.removeChild(p);E.log("cancel button removed","info",C);}delete n.cancel;}if(n.save){o=n.save;q=o.parentNode;if(q){q.removeChild(o);E.log("save button removed","info",C);}delete n.save;}}delete this.controls;}},_createControls:function(m){var l=document.createElement("button"),Y=document.createElement("span"),p,o,n;c.setAttribute(l,"type","button");c.addClass(l,"yui-inline-editor-button");c.addClass(Y,X.CONTROLS_CONTAINER);this._destroyControls();if(m==="edit"){n=l.cloneNode(false);c.addClass(n,X.EDIT_BUTTON);n.innerHTML="edit";b.on(n,"click",function(q){this.edit(q);this.fireEvent(Q,q);},this,true);Y.appendChild(n);this.controls={edit:n,container:Y};}else{p=l.cloneNode(false);o=l.cloneNode(false);c.addClass(p,X.CANCEL_BUTTON);c.addClass(o,X.SAVE_BUTTON);p.innerHTML="cancel";o.innerHTML="save";b.on(p,"click",function(q){this.cancel(q);this.fireEvent(B,q);},this,true);b.on(o,"click",function(q){this.save(q);this.fireEvent(i,q);},this,true);Y.appendChild(p);Y.appendChild(o);this.controls={cancel:p,save:o,container:Y};}},_addEditControl:function(){this._createControls("edit");var l=this.get("element"),Y=this.controls;l.appendChild(Y.container);},_getValue:function(){var Y=this.get("htmlValue"),l=this.get("selectableValues"),n,m;if(H.isObject(l)){for(n in l){if(n==Y){m=l[n];break;}}}else{m=Y;}return m;},_setValue:function(m){var Y=this.get("selectableValues"),l;if(H.isObject(Y)){for(l in Y){if(Y[l]==m){this.set("htmlValue",l);break;}}}else{this.set("htmlValue",m);}},_getSaveKeys:function(Y,l){if(!H.isObject(l)){if(this.get("type")==="textarea"){l={ctrl:true,keys:[13]};}else{l={keys:[13]};}}return l;},_getCancelKeys:function(Y,l){if(!H.isObject(l)){l={keys:[27]};}return l;},init:function(m,Y){var l=c.get(m);if(!l){E.log("Inline Editor element not found","error",C);return false;}Y=Y||{};this.setAttributeConfig("id",{value:c.generateId(),readOnly:true});this.setAttributeConfig("element",{value:l,readOnly:true});this.setAttributeConfig("type",{validator:M,value:Y.type||I.TYPE});this.setAttributeConfig("fieldName",{validator:H.isString,value:Y.fieldName||I.FIELD_NAME});this.setAttributeConfig("fieldGenerator",{validator:H.isFunction,value:Y.fieldGenerator||I.FIELD_GENERATOR});this.setAttributeConfig("htmlValue",{value:l.innerHTML});this.setAttributeConfig("value",{getter:this._getValue,method:this._setValue});this.setAttributeConfig("selectableValues",{validator:H.isObject,value:H.isObject(Y.selectableValues)?Y.selectableValues:I.SELECTABLE_VALUES});this.setAttributeConfig("allowEmpty",{value:H.isBoolean(Y.allowEmpty)?Y.allowEmpty:I.ALLOW_EMPTY});this.setAttributeConfig("processBeforeRead",{validator:H.isFunction,value:H.isFunction(Y.processBeforeRead)?Y.processBeforeRead:I.PROCESS_BEFORE_READ_METHOD});this.setAttributeConfig("processBeforeSave",{validator:H.isFunction,value:H.isFunction(Y.processBeforeSave)?Y.processBeforeSave:I.PROCESS_BEFORE_SAVE_METHOD});this.setAttributeConfig("validator",{validator:H.isFunction,value:H.isFunction(Y.validator)?Y.validator:I.VALIDATION_METHOD});this.setAttributeConfig("saveKeys",{validator:H.isObject,getter:this._getSaveKeys,value:H.isObject(Y.saveKeys)?Y.saveKeys:null});this.setAttributeConfig("cancelKeys",{validator:H.isObject,getter:this._getCancelKeys,value:H.isObject(Y.cancelKeys)?Y.cancelKeys:null});this.setAttributeConfig("animOnMouseover",{validator:H.isBoolean,value:H.isBoolean(Y.animOnMouseover)?Y.animOnMouseover:I.ANIM_ON_MOUSEOVER});this.setAttributeConfig("animToColor",{validator:H.isString,value:H.isString(Y.animToColor)?Y.animToColor:I.ANIM_TO_COLOR});this.setAttributeConfig("animFromColor",{validator:H.isString,value:H.isString(Y.animFromColor)?Y.animFromColor:I.ANIM_FROM_COLOR});this._addEditControl();this._setEditable();}});})();(function(){YAHOO.widget.AutocompleteEditor=function(J,I){I=YAHOO.lang.merge(YAHOO.lang.isObject(I)?I:{},{type:"autocomplete"});YAHOO.widget.AutocompleteEditor.superclass.constructor.call(this,J,I);this._autocompleteInit(J,I);};var H=YAHOO,B=H.util,A=H.lang,D=B.Dom,G="acItemSelectEvent",C=function(){var L=document,I=L.createElement("div"),K=L.createElement("input"),J=L.createElement("div");D.setAttribute(K,"type","text");D.setAttribute(K,"name",this.get("fieldName"));D.setAttribute(K,"id",this.get("id")+"-field");D.setAttribute(J,"id",this.get("id")+"-results");I.appendChild(K);I.appendChild(J);return I;},F=function(J,I,K){return new H.widget.AutoComplete(J,I,K);},E=function(I){this.setAttributeConfig("lastSelected",{readOnly:true,value:I});};YAHOO.extend(YAHOO.widget.AutocompleteEditor,YAHOO.widget.InlineEditor,{_autocompleteInit:function(J,I){this.set("fieldGenerator",C);this.setAttributeConfig("dataSource",{value:I.dataSource});this.setAttributeConfig("lastSelected",{readOnly:true,value:null});this.setAttributeConfig("saveOnSelect",{validator:A.isBoolean,value:A.isBoolean(I.saveOnSelect)?I.saveOnSelect:true});this.subscribe("elementReplacedEvent",function(){var M=this.get("id"),K=F(M+"-field",M+"-results",this.get("dataSource")),L=this;K.itemSelectEvent.subscribe(function(N,O){L.fireEvent(G,O);E.call(L,O);if(L.get("saveOnSelect")){L.save();}});this.autocomplete=K;});}});})();(function(){YAHOO.widget.CalendarEditor=function(K,J){J=YAHOO.lang.merge(YAHOO.lang.isObject(J)?J:{},{type:"calendar"});YAHOO.widget.CalendarEditor.superclass.constructor.call(this,K,J);this._calendarInit(K,J);};var B=YAHOO,C=B.util,G=B.lang,D=C.Dom,E="calendarEditor",H={close:false},A=function(J){var L=Date.parse(J),M,K;if(isNaN(L)&&(M=/(\d{4})-?(\d{2})-?(\d{2})(?:[T ](\d{2}):?(\d{2}):?(\d{2})(?:\.(\d{3}))?(?:(Z)|([\-+])(\d{2})(?::?(\d{2}))?))?/.exec(J))){K=0;if(M[8]!=="Z"){K=+M[10]*60+M[11];if(M[9]==="+"){K=0-K;
}}L=Date.UTC(+M[1],+M[2]-1,+M[3],+M[4]||0,(+M[5]+K)||0,+M[6]||0,+M[7]||0);}return L;},I=function(){var M=document,J=M.createElement("div"),L=M.createElement("input"),K=M.createElement("div");D.setAttribute(L,"type","hidden");D.setAttribute(L,"name",this.get("fieldName"));D.setAttribute(L,"id",this.get("id")+"-field");D.setAttribute(K,"id",this.get("id")+"-calendar");J.appendChild(L);J.appendChild(K);return J;},F=function(K,J,N){var M=new YAHOO.widget.Calendar(null,K,J),L=this;M.render();M.selectEvent.subscribe(function(R,P,S){var Q=P[0][0],O;if(String(Q[1]).length==1){Q[1]="0"+Q[1];}if(String(Q[2]).length==1){Q[2]="0"+Q[2];}O=Q.join("-");N.value=YAHOO.util.Date.format(new Date(A(O)),{format:L.get("dateFormat")});});return M;};YAHOO.extend(YAHOO.widget.CalendarEditor,YAHOO.widget.InlineEditor,{_calendarInit:function(K,J){this.set("fieldGenerator",I);this.setAttributeConfig("calendarConfig",{});this.setAttributeConfig("dateFormat",{value:J.dateFormat||"%Y-%m-%d"});this.setAttributeConfig("saveOnSelect",{validator:G.isBoolean,value:G.isBoolean(J.saveOnSelect)?J.saveOnSelect:true});this.set("calendarConfig",G.isObject(J.calendarConfig)?G.merge(H,J.calendarConfig):H);this.on("saveEvent",function(){var L=this.calendar;L.hide();G.later(100,L,L.destroy);this.calendar=null;});this.on("cancelEvent",function(){this.calendar.hide();this.calendar=null;});this.subscribe("elementReplacedEvent",function(){var O=this.get("id"),N,M=this,L;this.calendar=F.call(this,O+"-calendar",this.get("calendarConfig"),D.get(this.get("id")+"-field"));this.calendar.select(new Date(A(this.get("value"))));N=this.calendar.getSelectedDates();if(N.length){L=N[0];this.calendar.cfg.setProperty("pagedate",(L.getMonth()+1)+"/"+L.getFullYear());this.calendar.render();}this.calendar.selectEvent.subscribe(function(Q,P,R){if(M.get("saveOnSelect")){M.save();}});});if(!/DIV|H\d/.test(this.get("element").nodeName.toUpperCase())){B.log("the calendar editor won't work in Internet Explorer, because the container element can not contain TABLE element","warn",E);}}});YAHOO.util.Date.parse=A;})();(function(){YAHOO.widget.RatingEditor=function(J,I){I=YAHOO.lang.merge(I,{type:"rating"});YAHOO.widget.RatingEditor.superclass.constructor.call(this,J,I);this._ratingInit.apply(this,arguments);};var H=YAHOO,D=H.util,C=H.lang,B=D.Event,F=D.Dom,A=D.Selector,E=function(M,O,N){var J="",I=this.get("maxRate"),L=1,K;while(L<=I){if(N==L){J+='<label class="yui-rate-'+L+'"><input type="radio" name="'+O+'" value="'+L+'" checked="checked"></label>';}else{J+='<label class="yui-rate-'+L+'"><input type="radio" name="'+O+'" value="'+L+'" /></label>';}L++;}K=document.createElement("p");F.addClass(K,"yui-rating yui-selected-rate"+N);K.innerHTML=J;return K;},G=function(I){return'<span class="yui-selected-rate'+I+' yui-rate"><span class="yui-rate-indicator"></span></span>';};YAHOO.extend(YAHOO.widget.RatingEditor,YAHOO.widget.InlineEditor,{_ratingInit:function(I){this.set("fieldGenerator",E);this.setAttributeConfig("maxRate",{validator:C.isNumber,value:C.isNumber(I.maxRate)?I.maxRate:5});this.setAttributeConfig("value",{getter:function(K,L){var J;if(C.isNumber(L)){J=L;}else{J=+this.get("htmlValue").replace(/\n/g,"").replace(/.*yui-selected-rate(\d+).*/,"$1");}return J;}});this.subscribe("elementReplacedEvent",function(){var J=this._editor,K=A.query('input[type="radio"]',J);B.on(K,"click",function(N){var M=J.firstChild,L;M.className="";L=B.getTarget(N);F.addClass(M,"yui-rating yui-selected-rate"+L.value);});});this.subscribe("elementRestoredEvent",function(){var J=G(this.get("value"));this.set("htmlValue",J);this.get("element").innerHTML=J;});}});})();YAHOO.register("inlineeditor",YAHOO.widget.InlineEditor,{version:"@VERSION@",build:"@BUILD@"});