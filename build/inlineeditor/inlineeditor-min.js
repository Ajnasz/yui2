(function(){YAHOO.widget.InlineEditor=function(h,Y){this.init.apply(this,arguments);};var D=YAHOO,O=D.util,W=D.lang,g=O.Event,C=O.Dom,P=YAHOO.widget.InlineEditor,G="InlineEditor",N={CANCEL_BUTTON:"yui-inline-editor-cancel",SAVE_BUTTON:"yui-inline-editor-save",EDIT_BUTTON:"yui-inline-editor-edit",CONTROLS_CONTAINER:"yui-inline-editor-controls",ELEM_EDITABLE:"yui-inline-editor-editable",EDITING_ACTIVE:"yui-inline-editor-editing",RADIO_GROUP_CONTAINER:"yui-inline-editor-radio-group",RADIO_ITEM_CONTAINER:"yui-inline-editor-radio-item"},c="cancelEvent",f="saveEvent",Z="editStartedEvent",L="cancelClickEvent",F="saveClickEvent",X="editClickEvent",A="emptyValueEvent",Q="elementReplacedEvent",I="valueNotValidEvent",T=["text","textarea","select","radio","checkbox"],e=function(i,Y,j){if(!W.isString(i)||!W.isString(Y)||(!W.isString(j)&&!W.isNumber(j))){return false;}var h=document.createElement(i);C.setAttribute(h,"name",Y);h.value=j;return h;},H=function(Y,i,h){return new Option(Y,i,h);},V=function(Y,h){var i=e("input",Y,h);C.setAttribute(i,"type","text");return i;},J=function(k,j,m,l){var Y=document.createElement("span"),i=document.createElement("label"),n=e("input",k,m),h=C.generateId();C.addClass(Y,N.RADIO_ITEM_CONTAINER);C.setAttribute(n,"id",h);C.setAttribute(i,"for",h);i.innerHTML=j;C.setAttribute(n,"type","radio");if(l){C.setAttribute(n,"checked","checked");}Y.appendChild(n);Y.appendChild(i);return Y;},b=function(Y,h){return V(Y,h,"text");},E=function(Y,h){var i=e("input",Y,"1");C.setAttribute(i,"type","checkbox");if(h===true){C.setAttribute(i,"checked","checked");}return i;},U=function(Y,h){var i=e("textarea",Y,h);C.setAttribute(i,"rows",10);C.setAttribute(i,"cols",40);return i;},B=function(i,j,h){var k=e("select",i,""),Y;for(Y in h){if(h.hasOwnProperty(Y)){k.appendChild(H(Y,h[Y],(Y==j||h[Y]==j)));}}return k;},S=function(j,k,i){var l=document.createElement("span"),h,Y;C.addClass(l,N.RADIO_GROUP_CONTAINER);for(Y in i){if(i.hasOwnProperty(Y)){h=J(j,Y,i[Y],(Y==k||i[Y]==k));l.appendChild(h);}}return l;},a=function(j){var Y,p={},m,k,l,h,o,n;if(j&&j.nodeName=="FORM"){Y=j.elements;k=Y.length;for(m=0;m<k;m++){l=Y[m];h=C.getAttribute(l,"name");o=l.value;if(h){if(l.nodeName=="INPUT"){n=C.getAttribute(l,"type");if(n=="checkbox"){p[h]=l.checked?true:false;}else{if(n!="radio"||l.checked){p[h]=o;}}}else{p[h]=o;}}}}return p;},R={TYPE:"text",ALLOW_EMPTY:false,FIELD_NAME:"field",FIELD_GENERATOR:function(h,k,i,Y){var j;switch(h){case"text":j=b(k,i);break;case"textarea":j=U(k,i);break;case"select":j=B(k,i,Y);break;case"radio":j=S(k,i,Y);break;case"checkbox":j=E(k,i,Y);break;}return j;},PROCESS_BEFORE_SAVE_METHOD:function(Y){return Y;},PROCESS_BEFORE_READ_METHOD:function(Y){return Y;},VALIDATION_METHOD:function(Y){return true;},SELECTABLE_VALUES:null,ANIM_TO_COLOR:"#D7EEFF",ANIM_FROM_COLOR:"#FFFFFF",ANIM_ON_MOUSEOVER:true},K=function(h){var k=false,j=T.length,Y;if(W.isString(h)){for(Y=0;Y<j;Y++){if(T[Y]===h){k=true;break;}}}if(!k){D.log("field type is invalid:  "+k,"error",G);throw new Error("field type is invalid");}return k;},M=function(h){var Y=document.createElement("form");C.setAttribute(Y,"id","yui-inline-editor-"+h);C.addClass(Y,"yui-inline-editor-form");return Y;},d=function(l,j,m,Y){var i=false,h=O.KeyListener,k;if(l){k=new h(l,m,{fn:j.save,scope:j,correctScope:true});k.enable();k=new h(l,Y,{fn:j.cancel,scope:j,correctScope:true});k.enable();i=true;}return i;};W.extend(P,YAHOO.util.AttributeProvider,{save:function(){var Y=a(this._editor),k=W.trim(Y[this.get("fieldName")]),j=this.get("processBeforeSave"),i=this.get("validator"),h=false;k=j.call(this,k);if(k===""&&!this.get("allowEmpty")){D.log("the field value is empty and it's not allowed","warn",G);this.fireEvent(A);}else{if(i.call(this,k)){this.set("value",k);this._stopEdit();this.fireEvent(f,{value:k,values:Y});h=true;}else{this.fireEvent(I);}}return h;},cancel:function(){this._stopEdit();this.fireEvent(c);return true;},edit:function(){if(this._editStarted){return false;}var Y=this.get("element");C.addClass(Y,N.EDITING_ACTIVE);this._replaceElement();this._editStarted=true;this.fireEvent(Z);return true;},_stopEdit:function(){if(!this._editStarted){return false;}var Y=this.get("element");C.removeClass(Y,N.EDITING_ACTIVE);this._restoreElement();this._editStarted=false;return true;},_setEditable:function(){var Y=this.get("element");C.addClass(Y,N.ELEM_EDITABLE);g.on(Y,"click",function(i){var h=g.getTarget(i);if(h==Y&&!this._editStarted){this.edit();}},this,true);if(this.get("animOnMouseover")&&W.isFunction(O.ColorAnim)){g.on(Y,"mouseover",function(){if(!this._editStarted){var h=this.get("animFromColor"),j=this.get("animToColor"),i=new O.ColorAnim(Y,{backgroundColor:{to:j,from:h}},0.3);i.onComplete.subscribe(function(){var k=new O.ColorAnim(Y,{backgroundColor:{to:h}},0.3);k.animate();});i.animate();}},this,true);}},_createEditor:function(){var Y=M(this.get("id")),k=this.get("type"),m=this.get("value"),h=this.get("processBeforeRead"),o=this.get("fieldName"),i=this.get("selectableValues"),j=this.get("fieldGenerator"),n=false,l;if(W.isFunction(h)){m=h.call(this,m);}l=j.call(this,k,o,m,i);d(l,this,this.get("saveKeys"),this.get("cancelKeys"));if(l.nodeType===1){this._createControls();Y.appendChild(l);Y.appendChild(this.controls.container);g.on(Y,"submit",g.stopEvent);n=Y;}return n;},_replaceElement:function(){var Y=this.get("element"),i=this.get("fieldName"),h=this._createEditor();if(!h){D.log("editor is not an element","error",G);return false;}Y.innerHTML="";Y.appendChild(h);setTimeout(function(){try{h[i].focus();}catch(j){}},100);this.fireEvent(Q);this._editor=h;},_restoreElement:function(){var j=this.get("element"),k=this.get("value"),h=this.get("selectableValues"),i,Y;if(W.isObject(h)){for(Y in h){if(h[Y]==k){i=Y;break;}}}else{i=k;}j.innerHTML=i;this._addEditControl();delete this._editor;},_destroyControls:function(){var j=this.controls,l,i,k,m,h,Y;if(j){h=j.container;if(h){Y=h.parentNode;Y.removeChild(h);}else{l=j.cancel;i=l.parentNode;k=j.save;m=l.parentNode;
k=j.save;m=l.parentNode;if(i){i.removeChild(l);D.log("cancel button removed","info",G);}if(m){m.removeChild(k);D.log("save button removed","info",G);}}delete this.controls;}},_createControls:function(i){var h=document.createElement("button"),Y=document.createElement("span"),l,k,j;C.setAttribute(h,"type","button");C.addClass(h,"yui-inline-editor-button");C.addClass(Y,N.CONTROLS_CONTAINER);this._destroyControls();if(i==="edit"){j=h.cloneNode(false);C.addClass(j,N.EDIT_BUTTON);j.innerHTML="edit";g.on(j,"click",function(m){this.edit(m);this.fireEvent(X,m);},this,true);Y.appendChild(j);this.controls={edit:j,container:Y};}else{l=h.cloneNode(false);k=h.cloneNode(false);C.addClass(l,N.CANCEL_BUTTON);C.addClass(k,N.SAVE_BUTTON);l.innerHTML="cancel";k.innerHTML="save";g.on(l,"click",function(m){this.cancel(m);this.fireEvent(L,m);},this,true);g.on(k,"click",function(m){this.save(m);this.fireEvent(F,m);},this,true);Y.appendChild(l);Y.appendChild(k);this.controls={cancel:l,save:k,container:Y};}},_addEditControl:function(){this._createControls("edit");var h=this.get("element"),Y=this.controls;h.appendChild(Y.container);},_getValue:function(){var Y=this.get("htmlValue"),h=this.get("selectableValues"),j,i;if(W.isObject(h)){for(j in h){if(j==Y){i=h[j];break;}}}else{i=Y;}return i;},_setValue:function(i){var Y=this.get("selectableValues"),h;if(W.isObject(Y)){for(h in Y){if(Y[h]==i){this.set("htmlValue",h);break;}}}else{this.set("htmlValue",i);}},_getSaveKeys:function(Y,h){if(!W.isObject(h)){if(this.get("type")==="textarea"){h={ctrl:true,keys:[13]};}else{h={keys:[13]};}}return h;},_getCancelKeys:function(Y,h){if(!W.isObject(h)){h={keys:[27]};}return h;},init:function(i,Y){var h=C.get(i);if(!h){D.log("Inline Editor element not found","error",G);return false;}Y=Y||{};this.setAttributeConfig("id",{value:C.generateId(),readOnly:true});this.setAttributeConfig("element",{value:h,readOnly:true});this.setAttributeConfig("type",{validator:K,value:Y.type||R.TYPE});this.setAttributeConfig("fieldName",{validator:W.isString,value:Y.fieldName||R.FIELD_NAME});this.setAttributeConfig("fieldGenerator",{validator:W.isFunction,value:Y.fieldGenerator||R.FIELD_GENERATOR});this.setAttributeConfig("htmlValue",{value:h.innerHTML});this.setAttributeConfig("value",{getter:this._getValue,method:this._setValue});this.setAttributeConfig("selectableValues",{validator:W.isObject,value:W.isObject(Y.selectableValues)?Y.selectableValues:R.SELECTABLE_VALUES});this.setAttributeConfig("allowEmpty",{value:W.isBoolean(Y.allowEmpty)?Y.allowEmpty:R.ALLOW_EMPTY});this.setAttributeConfig("processBeforeRead",{validator:W.isFunction,value:W.isFunction(Y.processBeforeRead)?Y.processBeforeRead:R.PROCESS_BEFORE_READ_METHOD});this.setAttributeConfig("processBeforeSave",{validator:W.isFunction,value:W.isFunction(Y.processBeforeSave)?Y.processBeforeSave:R.PROCESS_BEFORE_SAVE_METHOD});this.setAttributeConfig("validator",{validator:W.isFunction,value:W.isFunction(Y.validator)?Y.validator:R.VALIDATION_METHOD});this.setAttributeConfig("saveKeys",{validator:W.isObject,getter:this._getSaveKeys,value:W.isObject(Y.saveKeys)?Y.saveKeys:null});this.setAttributeConfig("cancelKeys",{validator:W.isObject,getter:this._getCancelKeys,value:W.isObject(Y.cancelKeys)?Y.cancelKeys:null});this.setAttributeConfig("animOnMouseover",{validator:W.isBoolean,value:W.isBoolean(Y.animOnMouseover)?Y.animOnMouseover:R.ANIM_ON_MOUSEOVER});this.setAttributeConfig("animToColor",{validator:W.isString,value:W.isString(Y.animToColor)?Y.animToColor:R.ANIM_TO_COLOR});this.setAttributeConfig("animFromColor",{validator:W.isString,value:W.isString(Y.animFromColor)?Y.animFromColor:R.ANIM_FROM_COLOR});this._addEditControl();this._setEditable();}});})();(function(){YAHOO.widget.AutocompleteEditor=function(J,I){I=YAHOO.lang.merge(I,{type:"autocomplete"});YAHOO.widget.AutocompleteEditor.superclass.constructor.call(this,J,I);this._autocompleteInit.apply(this,arguments);};var H=YAHOO,B=H.util,A=H.lang,D=B.Dom,G="acItemSelectEvent",C=function(){var L=document,I=L.createElement("div"),K=L.createElement("input"),J=L.createElement("div");D.setAttribute(K,"type","text");D.setAttribute(K,"name",this.get("fieldName"));D.setAttribute(K,"id",this.get("id")+"-field");D.setAttribute(J,"id",this.get("id")+"-results");I.appendChild(K);I.appendChild(J);return I;},F=function(K,I,L){var J=new H.widget.AutoComplete(K,I,L);return J;},E=function(I){this.setAttributeConfig("lastSelected",{readOnly:true,value:I});};YAHOO.extend(YAHOO.widget.AutocompleteEditor,YAHOO.widget.InlineEditor,{_autocompleteInit:function(J,I){this.set("fieldGenerator",C);this.setAttributeConfig("dataSource",{value:I.dataSource});this.setAttributeConfig("lastSelected",{readOnly:true,value:null});this.setAttributeConfig("saveOnSelect",{validator:A.isBoolean,value:A.isBoolean(I.saveOnSelect)?I.saveOnSelect:true});this.subscribe("elementReplacedEvent",function(){var M=this.get("id"),K=F(M+"-field",M+"-results",this.get("dataSource")),L=this;K.itemSelectEvent.subscribe(function(N,O){L.fireEvent(G,O);E.call(L,O);if(L.get("saveOnSelect")){L.save();}});this.autocomplete=K;});}});})();(function(){YAHOO.widget.CalendarEditor=function(I,H){H=YAHOO.lang.merge(H,{type:"calendar"});YAHOO.widget.CalendarEditor.superclass.constructor.call(this,I,H);this._calendarInit.apply(this,arguments);};var G=YAHOO,D=G.util,A=G.lang,F=D.Dom,B={close:false},E=function(){var K=document,H=K.createElement("div"),J=K.createElement("input"),I=K.createElement("div");F.setAttribute(J,"type","hidden");F.setAttribute(J,"name",this.get("fieldName"));F.setAttribute(J,"id",this.get("id")+"-field");F.setAttribute(I,"id",this.get("id")+"-calendar");H.appendChild(J);H.appendChild(I);return H;},C=function(I,H,L){var K=new YAHOO.widget.Calendar(null,I,H),J=this;K.render();K.selectEvent.subscribe(function(O,N,P){var M=N[0][0].join("-");L.value=YAHOO.util.Date.format(new Date(M),{format:J.get("dateFormat")});});return K;};YAHOO.extend(YAHOO.widget.CalendarEditor,YAHOO.widget.InlineEditor,{_strToDate:function(H){},_calendarInit:function(I,H){this.set("fieldGenerator",E);
this.setAttributeConfig("calendarConfig",{});this.setAttributeConfig("dateFormat",{value:H.dateFormat||"%Y-%m-%d"});this.setAttributeConfig("saveOnSelect",{validator:A.isBoolean,value:A.isBoolean(H.saveOnSelect)?H.saveOnSelect:true});this.set("calendarConfig",A.isObject(H.calendarConfig)?A.merge(B,H.calendarConfig):B);this.on("saveEvent",function(){var J=this.calendar;J.hide();A.later(100,J,J.destroy);this.calendar=null;});this.on("cancelEvent",function(){this.calendar.hide();this.calendar=null;});this.subscribe("elementReplacedEvent",function(){var M=this.get("id"),L,K=this,J;this.calendar=C.call(this,M+"-calendar",this.get("calendarConfig"),F.get(this.get("id")+"-field"));this.calendar.select(new Date(this.get("value")));L=this.calendar.getSelectedDates();if(L.length){J=L[0];this.calendar.cfg.setProperty("pagedate",(J.getMonth()+1)+"/"+J.getFullYear());this.calendar.render();}this.calendar.selectEvent.subscribe(function(O,N,P){if(K.get("saveOnSelect")){K.save();}});});}});})();YAHOO.register("inlineeditor",YAHOO.widget.InlineEditor,{version:"@VERSION@",build:"@BUILD@"});