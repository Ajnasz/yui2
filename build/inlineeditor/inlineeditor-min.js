(function(){YAHOO.widget.InlineEditor=function(j,Y){this.init.apply(this,arguments);};var E=YAHOO,P=E.util,X=E.lang,i=P.Event,C=P.Dom,Q=YAHOO.widget.InlineEditor,H="InlineEditor",O={CANCEL_BUTTON:"yui-inline-editor-cancel",SAVE_BUTTON:"yui-inline-editor-save",EDIT_BUTTON:"yui-inline-editor-edit",CONTROLS_CONTAINER:"yui-inline-editor-controls",ELEM_EDITABLE:"yui-inline-editor-editable",EDITING_ACTIVE:"yui-inline-editor-editing",RADIO_GROUP_CONTAINER:"yui-inline-editor-radio-group",RADIO_ITEM_CONTAINER:"yui-inline-editor-radio-item"},e="cancelEvent",h="saveEvent",b="beforeSaveEvent",a="editStartedEvent",M="cancelClickEvent",G="saveClickEvent",Z="editClickEvent",A="emptyValueEvent",R="elementReplacedEvent",D="elementRestoredEvent",J="valueNotValidEvent",U=["text","textarea","select","radio","checkbox"],g=function(k,Y,l){if(!X.isString(k)||!X.isString(Y)||(!X.isString(l)&&!X.isNumber(l))){return false;}var j=document.createElement(k);C.setAttribute(j,"name",Y);j.value=l;return j;},I=function(Y,l,k){var j=document.createElement("option");j.value=l;j.text=Y;j.innerHTML=Y;j.selected=k;return j;},W=function(Y,j){var k=g("input",Y,j);C.setAttribute(k,"type","text");return k;},K=function(l,k,n,m){var Y=document.createElement("span"),j=C.generateId();if(m){Y.innerHTML='<label for="'+j+'">'+k+'</label><input type="radio" name="'+l+'" value="'+n+'" checked="checked">';}else{Y.innerHTML='<label for="'+j+'">'+k+'</label><input type="radio" name="'+l+'" value="'+n+'">';}return Y;},d=function(Y,j){return W(Y,j,"text");},F=function(j,k){var Y=document.createElement("label");if(k===true){Y.innerHTML='<input type="checkbox" name="'+j+'" value="1" id="'+C.generateId()+'" checked="checked">';}else{Y.innerHTML='<input type="checkbox" name="'+j+'" value="1" id="'+C.generateId()+'">';}return Y;},V=function(Y,j){var k=g("textarea",Y,j);C.setAttribute(k,"rows",10);C.setAttribute(k,"cols",40);return k;},B=function(k,m,j){var n=g("select",k,""),Y,l;for(Y in j){if(j.hasOwnProperty(Y)){l=I(Y,j[Y],(Y==m||j[Y]==m));n.appendChild(l);}}return n;},T=function(l,m,k){var n=document.createElement("span"),j,Y;C.addClass(n,O.RADIO_GROUP_CONTAINER);for(Y in k){if(k.hasOwnProperty(Y)){j=K(l,Y,k[Y],(Y==m||k[Y]==m));n.appendChild(j);}}return n;},c=function(k){var Y,q={},n,l,m,j,p,o;if(k&&k.nodeName=="FORM"){Y=k.elements;l=Y.length;for(n=0;n<l;n++){m=Y[n];j=m.name;p=m.value;if(j){if(m.nodeName=="INPUT"){o=C.getAttribute(m,"type");if(o=="checkbox"){q[j]=m.checked?true:false;}else{if(o!="radio"||m.checked){q[j]=p;}}}else{q[j]=p;}}}}return q;},S={TYPE:"text",ALLOW_EMPTY:false,FIELD_NAME:"field",FIELD_GENERATOR:function(j,m,k,Y){var l;switch(j){case"text":l=d(m,k);break;case"textarea":l=V(m,k);break;case"select":l=B(m,k,Y);break;case"radio":l=T(m,k,Y);break;case"checkbox":l=F(m,k,Y);break;}return l;},PROCESS_BEFORE_SAVE_METHOD:function(Y){return Y;},PROCESS_BEFORE_READ_METHOD:function(Y){return Y;},VALIDATION_METHOD:function(Y){return true;},SELECTABLE_VALUES:null,ANIM_TO_COLOR:"#D7EEFF",ANIM_FROM_COLOR:"#FFFFFF",ANIM_ON_MOUSEOVER:false},L=function(j){var l=false,k=U.length,Y;if(X.isString(j)){for(Y=0;Y<k;Y++){if(U[Y]===j){l=true;break;}}}if(!l){E.log("field type is invalid:  "+l,"error",H);throw new Error("field type is invalid");}return l;},N=function(j){var Y=document.createElement("form");C.setAttribute(Y,"id","yui-inline-editor-"+j);C.addClass(Y,"yui-inline-editor-form");return Y;},f=function(n,l,o,Y){var k=false,j=P.KeyListener,m;if(n){m=new j(n,o,{fn:l.save,scope:l,correctScope:true});m.enable();m=new j(n,Y,{fn:l.cancel,scope:l,correctScope:true});m.enable();k=true;}return k;};X.extend(Q,YAHOO.util.AttributeProvider,{save:function(){this.fireEvent(b);var Y=c(this._editor),m=X.trim(Y[this.get("fieldName")]),l=this.get("processBeforeSave"),k=this.get("validator"),j=false;m=l.call(this,m);if(m===""&&!this.get("allowEmpty")){E.log("the field value is empty and it's not allowed","warn",H);this.fireEvent(A);}else{if(k.call(this,m)){this.set("value",m);this._stopEdit();this.fireEvent(h,{value:m,values:Y});j=true;}else{this.fireEvent(J);}}return j;},cancel:function(){this._stopEdit();this.fireEvent(e);return true;},edit:function(){if(this._editStarted){return false;}var Y=this.get("element");C.addClass(Y,O.EDITING_ACTIVE);this._replaceElement();this._editStarted=true;this.fireEvent(a);return true;},_stopEdit:function(){if(!this._editStarted){return false;}var Y=this.get("element");C.removeClass(Y,O.EDITING_ACTIVE);this._restoreElement();this._editStarted=false;return true;},_setEditable:function(){var Y=this.get("element");C.addClass(Y,O.ELEM_EDITABLE);i.on(Y,"click",function(k){var j=i.getTarget(k);if(j==Y&&!this._editStarted){this.edit();}},this,true);if(this.get("animOnMouseover")&&X.isFunction(P.ColorAnim)){i.on(Y,"mouseover",function(){if(!this._editStarted){var j=this.get("animFromColor"),l=this.get("animToColor"),k=new P.ColorAnim(Y,{backgroundColor:{to:l,from:j}},0.3);k.onComplete.subscribe(function(){var m=new P.ColorAnim(Y,{backgroundColor:{to:j}},0.3);m.animate();});k.animate();}},this,true);}},_createEditor:function(){var Y=N(this.get("id")),m=this.get("type"),o=this.get("value"),j=this.get("processBeforeRead"),q=this.get("fieldName"),k=this.get("selectableValues"),l=this.get("fieldGenerator"),p=false,n;if(X.isFunction(j)){o=j.call(this,o);}n=l.call(this,m,q,o,k);f(n,this,this.get("saveKeys"),this.get("cancelKeys"));if(n.nodeType===1){this._createControls();Y.appendChild(n);Y.appendChild(this.controls.container);i.on(Y,"submit",i.stopEvent);p=Y;}return p;},_replaceElement:function(){var Y=this.get("element"),k=this.get("fieldName"),j=this._createEditor();if(!j){E.log("editor is not an element","error",H);return false;}Y.innerHTML="";Y.appendChild(j);setTimeout(function(){try{j[k].focus();}catch(l){}},100);this._editor=j;this.fireEvent(R);},_restoreElement:function(){var l=this.get("element"),m=this.get("value"),j=this.get("selectableValues"),k,Y;if(X.isObject(j)){for(Y in j){if(j[Y]==m){k=Y;break;}}}else{k=m;}l.innerHTML=k;this.fireEvent(D);
this._addEditControl();delete this._editor;},_destroyControls:function(){var l=this.controls,n,k,m,o,j,Y;if(l){j=l.container;if(j&&j.parentNode){Y=j.parentNode;Y.removeChild(j);}else{n=l.cancel;k=n.parentNode;m=l.save;o=n.parentNode;m=l.save;o=n.parentNode;if(k){k.removeChild(n);E.log("cancel button removed","info",H);}if(o){o.removeChild(m);E.log("save button removed","info",H);}}delete this.controls;}},_createControls:function(k){var j=document.createElement("button"),Y=document.createElement("span"),n,m,l;C.setAttribute(j,"type","button");C.addClass(j,"yui-inline-editor-button");C.addClass(Y,O.CONTROLS_CONTAINER);this._destroyControls();if(k==="edit"){l=j.cloneNode(false);C.addClass(l,O.EDIT_BUTTON);l.innerHTML="edit";i.on(l,"click",function(o){this.edit(o);this.fireEvent(Z,o);},this,true);Y.appendChild(l);this.controls={edit:l,container:Y};}else{n=j.cloneNode(false);m=j.cloneNode(false);C.addClass(n,O.CANCEL_BUTTON);C.addClass(m,O.SAVE_BUTTON);n.innerHTML="cancel";m.innerHTML="save";i.on(n,"click",function(o){this.cancel(o);this.fireEvent(M,o);},this,true);i.on(m,"click",function(o){this.save(o);this.fireEvent(G,o);},this,true);Y.appendChild(n);Y.appendChild(m);this.controls={cancel:n,save:m,container:Y};}},_addEditControl:function(){this._createControls("edit");var j=this.get("element"),Y=this.controls;j.appendChild(Y.container);},_getValue:function(){var Y=this.get("htmlValue"),j=this.get("selectableValues"),l,k;if(X.isObject(j)){for(l in j){if(l==Y){k=j[l];break;}}}else{k=Y;}return k;},_setValue:function(k){var Y=this.get("selectableValues"),j;if(X.isObject(Y)){for(j in Y){if(Y[j]==k){this.set("htmlValue",j);break;}}}else{this.set("htmlValue",k);}},_getSaveKeys:function(Y,j){if(!X.isObject(j)){if(this.get("type")==="textarea"){j={ctrl:true,keys:[13]};}else{j={keys:[13]};}}return j;},_getCancelKeys:function(Y,j){if(!X.isObject(j)){j={keys:[27]};}return j;},init:function(k,Y){var j=C.get(k);if(!j){E.log("Inline Editor element not found","error",H);return false;}Y=Y||{};this.setAttributeConfig("id",{value:C.generateId(),readOnly:true});this.setAttributeConfig("element",{value:j,readOnly:true});this.setAttributeConfig("type",{validator:L,value:Y.type||S.TYPE});this.setAttributeConfig("fieldName",{validator:X.isString,value:Y.fieldName||S.FIELD_NAME});this.setAttributeConfig("fieldGenerator",{validator:X.isFunction,value:Y.fieldGenerator||S.FIELD_GENERATOR});this.setAttributeConfig("htmlValue",{value:j.innerHTML});this.setAttributeConfig("value",{getter:this._getValue,method:this._setValue});this.setAttributeConfig("selectableValues",{validator:X.isObject,value:X.isObject(Y.selectableValues)?Y.selectableValues:S.SELECTABLE_VALUES});this.setAttributeConfig("allowEmpty",{value:X.isBoolean(Y.allowEmpty)?Y.allowEmpty:S.ALLOW_EMPTY});this.setAttributeConfig("processBeforeRead",{validator:X.isFunction,value:X.isFunction(Y.processBeforeRead)?Y.processBeforeRead:S.PROCESS_BEFORE_READ_METHOD});this.setAttributeConfig("processBeforeSave",{validator:X.isFunction,value:X.isFunction(Y.processBeforeSave)?Y.processBeforeSave:S.PROCESS_BEFORE_SAVE_METHOD});this.setAttributeConfig("validator",{validator:X.isFunction,value:X.isFunction(Y.validator)?Y.validator:S.VALIDATION_METHOD});this.setAttributeConfig("saveKeys",{validator:X.isObject,getter:this._getSaveKeys,value:X.isObject(Y.saveKeys)?Y.saveKeys:null});this.setAttributeConfig("cancelKeys",{validator:X.isObject,getter:this._getCancelKeys,value:X.isObject(Y.cancelKeys)?Y.cancelKeys:null});this.setAttributeConfig("animOnMouseover",{validator:X.isBoolean,value:X.isBoolean(Y.animOnMouseover)?Y.animOnMouseover:S.ANIM_ON_MOUSEOVER});this.setAttributeConfig("animToColor",{validator:X.isString,value:X.isString(Y.animToColor)?Y.animToColor:S.ANIM_TO_COLOR});this.setAttributeConfig("animFromColor",{validator:X.isString,value:X.isString(Y.animFromColor)?Y.animFromColor:S.ANIM_FROM_COLOR});this._addEditControl();this._setEditable();}});})();(function(){YAHOO.widget.AutocompleteEditor=function(J,I){I=YAHOO.lang.merge(I,{type:"autocomplete"});YAHOO.widget.AutocompleteEditor.superclass.constructor.call(this,J,I);this._autocompleteInit.apply(this,arguments);};var H=YAHOO,B=H.util,A=H.lang,D=B.Dom,G="acItemSelectEvent",C=function(){var L=document,I=L.createElement("div"),K=L.createElement("input"),J=L.createElement("div");D.setAttribute(K,"type","text");D.setAttribute(K,"name",this.get("fieldName"));D.setAttribute(K,"id",this.get("id")+"-field");D.setAttribute(J,"id",this.get("id")+"-results");I.appendChild(K);I.appendChild(J);return I;},F=function(K,I,L){var J=new H.widget.AutoComplete(K,I,L);return J;},E=function(I){this.setAttributeConfig("lastSelected",{readOnly:true,value:I});};YAHOO.extend(YAHOO.widget.AutocompleteEditor,YAHOO.widget.InlineEditor,{_autocompleteInit:function(J,I){this.set("fieldGenerator",C);this.setAttributeConfig("dataSource",{value:I.dataSource});this.setAttributeConfig("lastSelected",{readOnly:true,value:null});this.setAttributeConfig("saveOnSelect",{validator:A.isBoolean,value:A.isBoolean(I.saveOnSelect)?I.saveOnSelect:true});this.subscribe("elementReplacedEvent",function(){var M=this.get("id"),K=F(M+"-field",M+"-results",this.get("dataSource")),L=this;K.itemSelectEvent.subscribe(function(N,O){L.fireEvent(G,O);E.call(L,O);if(L.get("saveOnSelect")){L.save();}});this.autocomplete=K;});}});})();(function(){YAHOO.widget.CalendarEditor=function(I,H){H=YAHOO.lang.merge(H,{type:"calendar"});YAHOO.widget.CalendarEditor.superclass.constructor.call(this,I,H);this._calendarInit.apply(this,arguments);};var G=YAHOO,D=G.util,A=G.lang,F=D.Dom,B={close:false},E=function(){var K=document,H=K.createElement("div"),J=K.createElement("input"),I=K.createElement("div");F.setAttribute(J,"type","hidden");F.setAttribute(J,"name",this.get("fieldName"));F.setAttribute(J,"id",this.get("id")+"-field");F.setAttribute(I,"id",this.get("id")+"-calendar");H.appendChild(J);H.appendChild(I);return H;},C=function(I,H,L){var K=new YAHOO.widget.Calendar(null,I,H),J=this;K.render();
K.selectEvent.subscribe(function(O,N,P){var M=N[0][0].join("-");L.value=YAHOO.util.Date.format(new Date(M),{format:J.get("dateFormat")});});return K;};YAHOO.extend(YAHOO.widget.CalendarEditor,YAHOO.widget.InlineEditor,{_strToDate:function(H){},_calendarInit:function(I,H){this.set("fieldGenerator",E);this.setAttributeConfig("calendarConfig",{});this.setAttributeConfig("dateFormat",{value:H.dateFormat||"%Y-%m-%d"});this.setAttributeConfig("saveOnSelect",{validator:A.isBoolean,value:A.isBoolean(H.saveOnSelect)?H.saveOnSelect:true});this.set("calendarConfig",A.isObject(H.calendarConfig)?A.merge(B,H.calendarConfig):B);this.on("saveEvent",function(){var J=this.calendar;J.hide();A.later(100,J,J.destroy);this.calendar=null;});this.on("cancelEvent",function(){this.calendar.hide();this.calendar=null;});this.subscribe("elementReplacedEvent",function(){var M=this.get("id"),L,K=this,J;this.calendar=C.call(this,M+"-calendar",this.get("calendarConfig"),F.get(this.get("id")+"-field"));this.calendar.select(new Date(this.get("value")));L=this.calendar.getSelectedDates();if(L.length){J=L[0];this.calendar.cfg.setProperty("pagedate",(J.getMonth()+1)+"/"+J.getFullYear());this.calendar.render();}this.calendar.selectEvent.subscribe(function(O,N,P){if(K.get("saveOnSelect")){K.save();}});});}});})();YAHOO.register("inlineeditor",YAHOO.widget.InlineEditor,{version:"@VERSION@",build:"@BUILD@"});