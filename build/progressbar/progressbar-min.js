(function(){var B=YAHOO.util.Dom,C=YAHOO.lang;var A=function(D){A.superclass.constructor.call(this,document.createElement("div"),D);this._init(D);};YAHOO.widget.ProgressBar=A;C.extend(A,YAHOO.util.Element,{_init:function(D){},initAttributes:function(G){A.superclass.initAttributes.call(this,G);var E=this.get("element");E.innerHTML='<div class="yui-pb-bar"></div><table class="yui-pb-mask"><tbody><tr><td class="yui-pb-tl"></td><td class="yui-pb-tr"></td></tr><tr><td class="yui-pb-bl"></td><td class="yui-pb-br"></td></tr></tbody></table>';var D=E.firstChild,F=D.nextSibling;this.setAttributeConfig("barEl",{readOnly:true,value:D});this.setAttributeConfig("maskEl",{readOnly:true,value:F});this.setAttributeConfig("direction",{writeOnce:true,value:"ltr",validator:function(H){if(this._rendered){return false;}switch(H.toLowerCase()){case"ltr":case"rtl":case"ttb":case"btt":return true;default:return false;}},setter:function(H){return H.toLowerCase();}});this.setAttributeConfig("maxValue",{value:100,validator:C.isNumber,method:function(H){this.get("element").setAttribute("aria-valuemax",H);this._recalculateConstants();this.redraw();}});this.setAttributeConfig("minValue",{value:0,validator:C.isNumber,method:function(H){this.get("element").setAttribute("aria-valuemin",H);this._recalculateConstants();this.redraw();}});this.setAttributeConfig("width",{value:"200px",method:function(H){if(C.isNumber(H)){H+="px";}this.setStyle("width",H);B.setStyle(F,"width",H);this.redraw();}});this.setAttributeConfig("height",{value:"20px",method:function(H){if(C.isNumber(H)){H+="px";}this.setStyle("height",H);B.setStyle(F,"height",H);this.redraw();}});this.setAttributeConfig("barColor",{value:"blue",method:function(H){B.setStyle(D,"background-color",H);B.setStyle(D,"background-image","none");}});this.setAttributeConfig("backColor",{value:"white",method:function(H){this.setStyle("background-color",H);this.setStyle("background-image","none");}});this.setAttributeConfig("border",{value:"none",method:function(H){this.setStyle("border",H);}});this.setAttributeConfig("ariaText",{value:"|"});this.setAttributeConfig("value",{value:0,validator:function(H){return C.isNumber(H)&&H>=this.get("minValue")&&H<=this.get("maxValue");},method:this._valueChange});this.setAttributeConfig("anim",{getter:function(){return this._anim;},validator:function(){return false;}});this.setAttributeConfig("animate",{value:false,validator:function(H){if(C.isBoolean(H)){if(H){return C.isObject(YAHOO.util.Anim)&&C.isNull(this._anim);}else{return !C.isNull(this._anim);}}else{return false;}},method:this._animateChange});},render:function(E,F){if(this._rendered){return;}this._rendered=true;this.addClass("yui-pb");var D=this.get("element");D.tabIndex=0;D.setAttribute("role","progressbar");D.setAttribute("aria-valuemin",this.get("minValue"));D.setAttribute("aria-valuemax",this.get("maxValue"));this._setAriaValue();this.appendTo(E,F);this.redraw();return this;},redraw:function(){this._recalculateConstants();this.refresh("value",true);},destroy:function(){this.set("animate",false);this.unsubscribeAll();var D=this.get("element");D.parentNode.removeChild(D);},_previousValue:0,_barSpace:100,_barFactor:1,_anim:null,_rendered:false,_recalculateConstants:function(){var D=this.get("barEl");this._mn=this.get("minValue")||0;switch(this.get("direction")){case"ltr":case"rtl":this._barSpace=parseInt((this.getStyle("width")||this.get("width")),10)-parseInt(B.getStyle(D,"marginLeft"),10)-Math.abs(parseInt(B.getStyle(D,"marginRight"),10));break;case"ttb":case"btt":this._barSpace=parseInt((this.getStyle("height")||this.get("height")),10)-parseInt(B.getStyle(D,"marginTop"),10)-parseInt(B.getStyle(D,"marginBottom"),10);break;}this._barFactor=this._barSpace/(this.get("maxValue")-this._mn)||1;},_animateChange:function(F){var E,D=this.get("barEl");if(F){this._anim=E=new YAHOO.util.Anim(D);E.onTween.subscribe(function(G){this.fireEvent("changing",Math.floor(this._tweenFactor*E.currentFrame+this._previousValue));},this,true);E.onComplete.subscribe(function(G){this.fireEvent("complete",this._previousValue=this.get("value"));B.removeClass(D,"yui-pb-anim");},this,true);}else{E=this._anim;E.onTween.unsubscribeAll();E.onComplete.unsubscribeAll();}},_valueChange:function(G){var F=this._anim,D=Math.floor((G-this._mn)*this._barFactor),E=this.get("barEl");this._setAriaValue();this.fireEvent("start",this._previousValue);if(F){if(F.isAnimated){F.stop();}B.addClass(E,"yui-pb-anim");this._tweenFactor=(G-this._previousValue)/F.totalFrames;switch(this.get("direction")){case"ltr":F.attributes={width:{to:D}};break;case"rtl":F.attributes={width:{to:D},left:{to:this._barSpace-D}};break;case"ttb":F.attributes={height:{to:D}};break;case"btt":F.attributes={height:{to:D},top:{to:this._barSpace-D}};break;}F.animate();}else{switch(this.get("direction")){case"ltr":B.setStyle(E,"width",D+"px");break;case"rtl":B.setStyle(E,"width",D+"px");B.setStyle(E,"left",(this._barSpace-D)+"px");break;case"ttb":B.setStyle(E,"height",D+"px");break;case"btt":B.setStyle(E,"height",D+"px");B.setStyle(E,"top",(this._barSpace-D)+"px");break;}this.fireEvent("complete",G);}},_setAriaValue:function(){var D=this.get("element");D.setAttribute("aria-valuenow",this.get("value"));D.setAttribute("aria-valuetext",C.substitute(this.get("ariaText"),{value:this.get("value"),minValue:this.get("minValue"),maxValue:this.get("maxValue")}));}});})();YAHOO.register("progressbar",YAHOO.widget.ProgressBar,{version:"@VERSION@",build:"@BUILD@"});