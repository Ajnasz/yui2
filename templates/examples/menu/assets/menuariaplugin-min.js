(function(){var e=YAHOO.util.Event,f=YAHOO.util.Dom,o=YAHOO.lang,U=YAHOO.env.ua,R=YAHOO.widget.ContextMenu,S=YAHOO.widget.Menu.prototype,O=S.initDefaultConfig,j,J="aria-",P="haspopup",n="role",g="presentation",V="menuitem",i="href",d="submenu",G="menu",A="menubar",L="labelledby",l="focus",c="blur",B="itemAdded",X="usearia",T="trigger",M="visible",D="hidden",Y="onclick",C="HTMLEvents",h="click",E="keypress";var H=function(p,q){p.setAttribute(n,q);};var I=function(p,r,q){p.setAttribute((J+r),q);};var b=function(p){if(p.nodeType===1){I(p,P,true);}};var K=function(p){if(p.nodeType===1){p.removeAttribute(J+P);}};var F=function(q){var p=e.getTarget(q);if(f.isAncestor(this.element,p)){if(j){j.tabIndex=-1;}j=p;j.tabIndex=0;}else{if(j&&this.getItems().length>0){j.tabIndex=-1;j=f.getFirstChild(this.getItem(0).element);j.tabIndex=0;}}};var m=function(t,r){var q=r[0],u=r[1],p=e.getTarget(q),s=e.getCharCode(q);if(u&&s===13){if(U.ie){p.fireEvent(Y);}else{q=document.createEvent(C);q.initEvent(h,true,true);p.dispatchEvent(q);}}};var W=function(r,q){var p=q[0];if(p){b(f.getFirstChild(this.element));}};var Q=function(r){var p=r.element;H(p.parentNode,g);H(p,g);var q=f.getFirstChild(p);H(q,V);q.tabIndex=-1;q.removeAttribute(i);if(r.cfg.getProperty(d)){b(q);}else{r.cfg.subscribeToConfigEvent(d,W);}};var a=function(q,p){Q(p[0]);};var N=function(){I(this.element,D,!this.cfg.getProperty(M));};S.configUseARIA=function(x,w){var y=w[0],p=this.parent,r=this.element,AA=(this instanceof YAHOO.widget.MenuBar)?A:G,q,v,z,t,s,u;if(y){H(r,AA);if(p){s=f.generateId(f.getFirstChild(p.element));I(r,L,s);}q=this.getItems();v=q.length;if(v>0){u=v-1;do{z=q[u];Q(z);u=u-1;}while((u>-1));if(this.getRoot()===this){j=f.getFirstChild(this.getItem(0).element);j.tabIndex=0;}}if(this===this.getRoot()){e.onFocus(document,F,null,this);}this.subscribe(B,a);this.subscribe(E,m);this.cfg.subscribeToConfigEvent(M,N);}};var Z={};var k=function(){var q=this.element.id,p=this.cfg.getProperty(T),s=Z[q],r;if(s){if(o.isString(s)){r=f.get(s);if(r){K(r);}}else{if(s.nodeType===1){K(s);}else{if(s.length){f.batch(s,K);}}}}if(p){if(o.isString(p)){r=f.get(p);if(r){b(r);}}else{if(p.nodeType===1){b(p);}else{if(p.length){f.batch(p,b);}}}Z[q]=p;}};R.prototype.configUseARIA=function(q,p){R.superclass.configUseARIA.apply(this,arguments);k.call(this);this.cfg.subscribeToConfigEvent(T,k);};}());YAHOO.register("menuariaplugin",YAHOO.widget.Menu,{version:"@VERSION@",build:"@BUILD@"});